!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.WebglAddon=e():t.WebglAddon=e()}(self,(function(){return(()=>{"use strict";var t={965:function(t,e,i){var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.GlyphRenderer=void 0;var n=i(381),a=i(455),s=i(855),c=i(859),l="#version 300 es\nlayout (location = ".concat(0,") in vec2 a_unitquad;\nlayout (location = ").concat(1,") in vec2 a_cellpos;\nlayout (location = ").concat(2,") in vec2 a_offset;\nlayout (location = ").concat(3,") in vec2 a_size;\nlayout (location = ").concat(4,") in vec2 a_texcoord;\nlayout (location = ").concat(5,") in vec2 a_texsize;\n\nuniform mat4 u_projection;\nuniform vec2 u_resolution;\n\nout vec2 v_texcoord;\n\nvoid main() {\n  vec2 zeroToOne = (a_offset / u_resolution) + a_cellpos + (a_unitquad * a_size);\n  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);\n  v_texcoord = a_texcoord + a_unitquad * a_texsize;\n}"),h=10,d=h*Float32Array.BYTES_PER_ELEMENT,u=function(t){function e(e,i,r,o){var a=t.call(this)||this;a._terminal=e,a._colors=i,a._gl=r,a._dimensions=o,a._activeBuffer=0,a._vertices={count:0,attributes:new Float32Array(0),attributesBuffers:[new Float32Array(0),new Float32Array(0)]};var s=a._gl;a._program=(0,n.throwIfFalsy)((0,n.createProgram)(s,l,"#version 300 es\nprecision lowp float;\n\nin vec2 v_texcoord;\n\nuniform sampler2D u_texture;\n\nout vec4 outColor;\n\nvoid main() {\n  outColor = texture(u_texture, v_texcoord);\n}")),a.register((0,c.toDisposable)((function(){return s.deleteProgram(a._program)}))),a._projectionLocation=(0,n.throwIfFalsy)(s.getUniformLocation(a._program,"u_projection")),a._resolutionLocation=(0,n.throwIfFalsy)(s.getUniformLocation(a._program,"u_resolution")),a._textureLocation=(0,n.throwIfFalsy)(s.getUniformLocation(a._program,"u_texture")),a._vertexArrayObject=s.createVertexArray(),s.bindVertexArray(a._vertexArrayObject);var h=new Float32Array([0,0,1,0,0,1,1,1]),u=s.createBuffer();a.register((0,c.toDisposable)((function(){return s.deleteBuffer(u)}))),s.bindBuffer(s.ARRAY_BUFFER,u),s.bufferData(s.ARRAY_BUFFER,h,s.STATIC_DRAW),s.enableVertexAttribArray(0),s.vertexAttribPointer(0,2,a._gl.FLOAT,!1,0,0);var _=new Uint8Array([0,1,3,0,2,3]),f=s.createBuffer();return a.register((0,c.toDisposable)((function(){return s.deleteBuffer(f)}))),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,f),s.bufferData(s.ELEMENT_ARRAY_BUFFER,_,s.STATIC_DRAW),a._attributesBuffer=(0,n.throwIfFalsy)(s.createBuffer()),a.register((0,c.toDisposable)((function(){return s.deleteBuffer(a._attributesBuffer)}))),s.bindBuffer(s.ARRAY_BUFFER,a._attributesBuffer),s.enableVertexAttribArray(2),s.vertexAttribPointer(2,2,s.FLOAT,!1,d,0),s.vertexAttribDivisor(2,1),s.enableVertexAttribArray(3),s.vertexAttribPointer(3,2,s.FLOAT,!1,d,2*Float32Array.BYTES_PER_ELEMENT),s.vertexAttribDivisor(3,1),s.enableVertexAttribArray(4),s.vertexAttribPointer(4,2,s.FLOAT,!1,d,4*Float32Array.BYTES_PER_ELEMENT),s.vertexAttribDivisor(4,1),s.enableVertexAttribArray(5),s.vertexAttribPointer(5,2,s.FLOAT,!1,d,6*Float32Array.BYTES_PER_ELEMENT),s.vertexAttribDivisor(5,1),s.enableVertexAttribArray(1),s.vertexAttribPointer(1,2,s.FLOAT,!1,d,8*Float32Array.BYTES_PER_ELEMENT),s.vertexAttribDivisor(1,1),a._atlasTexture=(0,n.throwIfFalsy)(s.createTexture()),a.register((0,c.toDisposable)((function(){return s.deleteTexture(a._atlasTexture)}))),s.bindTexture(s.TEXTURE_2D,a._atlasTexture),s.texImage2D(s.TEXTURE_2D,0,s.RGBA,1,1,0,s.RGBA,s.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE),s.enable(s.BLEND),s.blendFunc(s.SRC_ALPHA,s.ONE_MINUS_SRC_ALPHA),a.onResize(),a}return o(e,t),e.prototype.beginFrame=function(){return!this._atlas||this._atlas.beginFrame()},e.prototype.updateCell=function(t,e,i,r,o,n,a,s){this._updateCell(this._vertices.attributes,t,e,i,r,o,n,a,s)},e.prototype._updateCell=function(t,e,i,r,o,n,c,l,d){var u,_=(i*this._terminal.cols+e)*h;if(r!==s.NULL_CELL_CODE&&void 0!==r){if(this._atlas)if(u=l&&l.length>1?this._atlas.getRasterizedGlyphCombinedChar(l,o,n,c):this._atlas.getRasterizedGlyph(r,o,n,c)){var f=Math.floor((this._dimensions.scaledCellWidth-this._dimensions.scaledCharWidth)/2);if(o!==d&&u.offset.x>f){var p=u.offset.x-f;t[_]=-(u.offset.x-p)+this._dimensions.scaledCharLeft,t[_+1]=-u.offset.y+this._dimensions.scaledCharTop,t[_+2]=(u.size.x-p)/this._dimensions.scaledCanvasWidth,t[_+3]=u.size.y/this._dimensions.scaledCanvasHeight,t[_+4]=u.texturePositionClipSpace.x+p/this._atlas.cacheCanvas.width,t[_+5]=u.texturePositionClipSpace.y,t[_+6]=u.sizeClipSpace.x-p/this._atlas.cacheCanvas.width,t[_+7]=u.sizeClipSpace.y}else t[_]=-u.offset.x+this._dimensions.scaledCharLeft,t[_+1]=-u.offset.y+this._dimensions.scaledCharTop,t[_+2]=u.size.x/this._dimensions.scaledCanvasWidth,t[_+3]=u.size.y/this._dimensions.scaledCanvasHeight,t[_+4]=u.texturePositionClipSpace.x,t[_+5]=u.texturePositionClipSpace.y,t[_+6]=u.sizeClipSpace.x,t[_+7]=u.sizeClipSpace.y}else(0,a.fill)(t,0,_,_+h-1-2)}else(0,a.fill)(t,0,_,_+h-1-2)},e.prototype.clear=function(t){var e=this._terminal,i=e.cols*e.rows*h;if(t||this._vertices.count!==i){this._vertices.count=i,this._vertices.attributes=new Float32Array(i);for(var r=0;r<this._vertices.attributesBuffers.length;r++)this._vertices.attributesBuffers[r]=new Float32Array(i);for(var o=0,n=0;n<e.rows;n++)for(var a=0;a<e.cols;a++)this._vertices.attributes[o+8]=a/e.cols,this._vertices.attributes[o+9]=n/e.rows,o+=h}},e.prototype.onResize=function(){var t=this._gl;t.viewport(0,0,t.canvas.width,t.canvas.height),this.clear()},e.prototype.setColors=function(){},e.prototype.render=function(t){if(this._atlas){var e=this._gl;e.useProgram(this._program),e.bindVertexArray(this._vertexArrayObject),this._activeBuffer=(this._activeBuffer+1)%2;for(var i=this._vertices.attributesBuffers[this._activeBuffer],r=0,o=0;o<t.lineLengths.length;o++){var a=o*this._terminal.cols*h,s=this._vertices.attributes.subarray(a,a+t.lineLengths[o]*h);i.set(s,r),r+=s.length}e.bindBuffer(e.ARRAY_BUFFER,this._attributesBuffer),e.bufferData(e.ARRAY_BUFFER,i.subarray(0,r),e.STREAM_DRAW),this._atlas.hasCanvasChanged&&(this._atlas.hasCanvasChanged=!1,e.uniform1i(this._textureLocation,0),e.activeTexture(e.TEXTURE0+0),e.bindTexture(e.TEXTURE_2D,this._atlasTexture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this._atlas.cacheCanvas),e.generateMipmap(e.TEXTURE_2D)),e.uniformMatrix4fv(this._projectionLocation,!1,n.PROJECTION_MATRIX),e.uniform2f(this._resolutionLocation,e.canvas.width,e.canvas.height),e.drawElementsInstanced(e.TRIANGLES,6,e.UNSIGNED_BYTE,0,r/h)}},e.prototype.setAtlas=function(t){var e=this._gl;this._atlas=t,e.bindTexture(e.TEXTURE_2D,this._atlasTexture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t.cacheCanvas),e.generateMipmap(e.TEXTURE_2D)},e.prototype.setDimensions=function(t){this._dimensions=t},e}(c.Disposable);e.GlyphRenderer=u},742:function(t,e,i){var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.RectangleRenderer=void 0;var n=i(381),a=i(310),s=i(859),c=i(302),l="#version 300 es\nlayout (location = ".concat(0,") in vec2 a_position;\nlayout (location = ").concat(1,") in vec2 a_size;\nlayout (location = ").concat(2,") in vec4 a_color;\nlayout (location = ").concat(3,") in vec2 a_unitquad;\n\nuniform mat4 u_projection;\nuniform vec2 u_resolution;\n\nout vec4 v_color;\n\nvoid main() {\n  vec2 zeroToOne = (a_position + (a_unitquad * a_size)) / u_resolution;\n  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);\n  v_color = a_color;\n}"),h=8*Float32Array.BYTES_PER_ELEMENT,d=function(t){function e(e,i,r,o){var a=t.call(this)||this;a._terminal=e,a._colors=i,a._gl=r,a._dimensions=o,a._vertices={count:0,attributes:new Float32Array(160)};var c=a._gl;a._program=(0,n.throwIfFalsy)((0,n.createProgram)(c,l,"#version 300 es\nprecision lowp float;\n\nin vec4 v_color;\n\nout vec4 outColor;\n\nvoid main() {\n  outColor = v_color;\n}")),a.register((0,s.toDisposable)((function(){return c.deleteProgram(a._program)}))),a._resolutionLocation=(0,n.throwIfFalsy)(c.getUniformLocation(a._program,"u_resolution")),a._projectionLocation=(0,n.throwIfFalsy)(c.getUniformLocation(a._program,"u_projection")),a._vertexArrayObject=c.createVertexArray(),c.bindVertexArray(a._vertexArrayObject);var d=new Float32Array([0,0,1,0,0,1,1,1]),u=c.createBuffer();a.register((0,s.toDisposable)((function(){return c.deleteBuffer(u)}))),c.bindBuffer(c.ARRAY_BUFFER,u),c.bufferData(c.ARRAY_BUFFER,d,c.STATIC_DRAW),c.enableVertexAttribArray(3),c.vertexAttribPointer(3,2,a._gl.FLOAT,!1,0,0);var _=new Uint8Array([0,1,3,0,2,3]),f=c.createBuffer();return a.register((0,s.toDisposable)((function(){return c.deleteBuffer(f)}))),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,f),c.bufferData(c.ELEMENT_ARRAY_BUFFER,_,c.STATIC_DRAW),a._attributesBuffer=(0,n.throwIfFalsy)(c.createBuffer()),a.register((0,s.toDisposable)((function(){return c.deleteBuffer(a._attributesBuffer)}))),c.bindBuffer(c.ARRAY_BUFFER,a._attributesBuffer),c.enableVertexAttribArray(0),c.vertexAttribPointer(0,2,c.FLOAT,!1,h,0),c.vertexAttribDivisor(0,1),c.enableVertexAttribArray(1),c.vertexAttribPointer(1,2,c.FLOAT,!1,h,2*Float32Array.BYTES_PER_ELEMENT),c.vertexAttribDivisor(1,1),c.enableVertexAttribArray(2),c.vertexAttribPointer(2,4,c.FLOAT,!1,h,4*Float32Array.BYTES_PER_ELEMENT),c.vertexAttribDivisor(2,1),a._updateCachedColors(),a}return o(e,t),e.prototype.render=function(){var t=this._gl;t.useProgram(this._program),t.bindVertexArray(this._vertexArrayObject),t.uniformMatrix4fv(this._projectionLocation,!1,n.PROJECTION_MATRIX),t.uniform2f(this._resolutionLocation,t.canvas.width,t.canvas.height),t.bindBuffer(t.ARRAY_BUFFER,this._attributesBuffer),t.bufferData(t.ARRAY_BUFFER,this._vertices.attributes,t.DYNAMIC_DRAW),t.drawElementsInstanced(this._gl.TRIANGLES,6,t.UNSIGNED_BYTE,0,this._vertices.count)},e.prototype.onResize=function(){this._updateViewportRectangle()},e.prototype.setColors=function(){this._updateCachedColors(),this._updateViewportRectangle()},e.prototype._updateCachedColors=function(){this._bgFloat=this._colorToFloat32Array(this._colors.background)},e.prototype._updateViewportRectangle=function(){this._addRectangleFloat(this._vertices.attributes,0,0,0,this._terminal.cols*this._dimensions.scaledCellWidth,this._terminal.rows*this._dimensions.scaledCellHeight,this._bgFloat)},e.prototype.updateBackgrounds=function(t){for(var e=this._terminal,i=this._vertices,r=1,o=0;o<e.rows;o++){for(var n=-1,s=0,c=0,l=!1,h=0;h<e.cols;h++){var d=(o*e.cols+h)*a.RENDER_MODEL_INDICIES_PER_CELL,u=t.cells[d+a.RENDER_MODEL_BG_OFFSET],_=t.cells[d+a.RENDER_MODEL_FG_OFFSET],f=!!(67108864&_);if(u!==s||_!==c&&(l||f)){if(0!==s||l&&0!==c){var p=8*r++;this._updateRectangle(i,p,c,s,n,h,o)}n=h,s=u,c=_,l=f}}(0!==s||l&&0!==c)&&(p=8*r++,this._updateRectangle(i,p,c,s,n,e.cols,o))}i.count=r},e.prototype._updateRectangle=function(t,e,i,r,o,a,s){var l,h=!1;if(67108864&i)switch(50331648&i){case 16777216:case 33554432:l=this._colors.ansi[255&i].rgba;break;case 50331648:l=(16777215&i)<<8;break;default:l=this._colors.foreground.rgba}else switch(50331648&r){case 16777216:case 33554432:l=this._colors.ansi[255&r].rgba;break;case 50331648:l=(16777215&r)<<8;break;default:l=this._colors.background.rgba,h=!0}t.attributes.length<e+4&&(t.attributes=(0,n.expandFloat32Array)(t.attributes,this._terminal.rows*this._terminal.cols*8));var d=o*this._dimensions.scaledCellWidth,u=s*this._dimensions.scaledCellHeight,_=(l>>24&255)/255,f=(l>>16&255)/255,p=(l>>8&255)/255,g=!h&&134217728&r?c.DIM_OPACITY:1;this._addRectangle(t.attributes,e,d,u,(a-o)*this._dimensions.scaledCellWidth,this._dimensions.scaledCellHeight,_,f,p,g)},e.prototype._addRectangle=function(t,e,i,r,o,n,a,s,c,l){t[e]=i,t[e+1]=r,t[e+2]=o,t[e+3]=n,t[e+4]=a,t[e+5]=s,t[e+6]=c,t[e+7]=l},e.prototype._addRectangleFloat=function(t,e,i,r,o,n,a){t[e]=i,t[e+1]=r,t[e+2]=o,t[e+3]=n,t[e+4]=a[0],t[e+5]=a[1],t[e+6]=a[2],t[e+7]=a[3]},e.prototype._colorToFloat32Array=function(t){return new Float32Array([(t.rgba>>24&255)/255,(t.rgba>>16&255)/255,(t.rgba>>8&255)/255,(255&t.rgba)/255])},e}(s.Disposable);e.RectangleRenderer=d},310:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.RenderModel=e.COMBINED_CHAR_BIT_MASK=e.RENDER_MODEL_EXT_OFFSET=e.RENDER_MODEL_FG_OFFSET=e.RENDER_MODEL_BG_OFFSET=e.RENDER_MODEL_INDICIES_PER_CELL=void 0;var r=i(455);e.RENDER_MODEL_INDICIES_PER_CELL=4,e.RENDER_MODEL_BG_OFFSET=1,e.RENDER_MODEL_FG_OFFSET=2,e.RENDER_MODEL_EXT_OFFSET=3,e.COMBINED_CHAR_BIT_MASK=2147483648;var o=function(){function t(){this.cells=new Uint32Array(0),this.lineLengths=new Uint32Array(0),this.selection={hasSelection:!1,columnSelectMode:!1,viewportStartRow:0,viewportEndRow:0,viewportCappedStartRow:0,viewportCappedEndRow:0,startCol:0,endCol:0}}return t.prototype.resize=function(t,i){var r=t*i*e.RENDER_MODEL_INDICIES_PER_CELL;r!==this.cells.length&&(this.cells=new Uint32Array(r),this.lineLengths=new Uint32Array(i))},t.prototype.clear=function(){(0,r.fill)(this.cells,0,0),(0,r.fill)(this.lineLengths,0,0)},t.prototype.clearSelection=function(){this.selection.hasSelection=!1,this.selection.viewportStartRow=0,this.selection.viewportEndRow=0,this.selection.viewportCappedStartRow=0,this.selection.viewportCappedEndRow=0,this.selection.startCol=0,this.selection.endCol=0},t}();e.RenderModel=o},666:function(t,e,i){var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],r=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.JoinedCellData=e.WebglRenderer=void 0;var a=i(965),s=i(733),c=i(461),l=i(713),h=i(742),d=i(310),u=i(859),_=i(855),f=i(476),p=i(345),g=i(782),v=i(820),C=i(147),y=function(t){function e(e,i,r,o,n,l,u){var _=t.call(this)||this;_._terminal=e,_._colors=i,_._characterJoinerService=r,_._coreBrowserService=o,_._decorationService=l,_._model=new d.RenderModel,_._workCell=new g.CellData,_._workColors={fg:0,bg:0,ext:0},_._onChangeTextureAtlas=new p.EventEmitter,_._onRequestRedraw=new p.EventEmitter,_._onContextLoss=new p.EventEmitter,_._core=_._terminal._core,_._renderLayers=[new s.LinkRenderLayer(_._core.screenElement,2,_._colors,_._core),new c.CursorRenderLayer(e,_._core.screenElement,3,_._colors,_._onRequestRedraw,_._coreBrowserService,n)],_.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},_._devicePixelRatio=window.devicePixelRatio,_._updateDimensions(),_._canvas=document.createElement("canvas");var C={antialias:!1,depth:!1,preserveDrawingBuffer:u};if(_._gl=_._canvas.getContext("webgl2",C),!_._gl)throw new Error("WebGL2 not supported "+_._gl);return _.register((0,v.addDisposableDomListener)(_._canvas,"webglcontextlost",(function(t){_._onContextLoss.fire(t)}))),_.register((0,f.observeDevicePixelDimensions)(_._canvas,(function(t,e){return _._setCanvasDevicePixelDimensions(t,e)}))),_._core.screenElement.appendChild(_._canvas),_._rectangleRenderer=_.register(new h.RectangleRenderer(_._terminal,_._colors,_._gl,_.dimensions)),_._glyphRenderer=_.register(new a.GlyphRenderer(_._terminal,_._colors,_._gl,_.dimensions)),_.onCharSizeChanged(),_._isAttached=document.body.contains(_._core.screenElement),_}return o(e,t),Object.defineProperty(e.prototype,"onChangeTextureAtlas",{get:function(){return this._onChangeTextureAtlas.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onRequestRedraw",{get:function(){return this._onRequestRedraw.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onContextLoss",{get:function(){return this._onContextLoss.event},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){var e,i,r;try{for(var o=n(this._renderLayers),a=o.next();!a.done;a=o.next())a.value.dispose()}catch(t){e={error:t}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(e)throw e.error}}null===(r=this._canvas.parentElement)||void 0===r||r.removeChild(this._canvas),(0,l.removeTerminalFromCache)(this._terminal),t.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"textureAtlas",{get:function(){var t;return null===(t=this._charAtlas)||void 0===t?void 0:t.cacheCanvas},enumerable:!1,configurable:!0}),e.prototype.setColors=function(t){var e,i;this._colors=t;try{for(var r=n(this._renderLayers),o=r.next();!o.done;o=r.next()){var a=o.value;a.setColors(this._terminal,this._colors),a.reset(this._terminal)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(e)throw e.error}}this._rectangleRenderer.setColors(),this._glyphRenderer.setColors(),this._refreshCharAtlas(),this._model.clear()},e.prototype.onDevicePixelRatioChange=function(){this._devicePixelRatio!==window.devicePixelRatio&&(this._devicePixelRatio=window.devicePixelRatio,this.onResize(this._terminal.cols,this._terminal.rows))},e.prototype.onResize=function(t,e){var i,r;this._updateDimensions(),this._model.resize(this._terminal.cols,this._terminal.rows);try{for(var o=n(this._renderLayers),a=o.next();!a.done;a=o.next())a.value.resize(this._terminal,this.dimensions)}catch(t){i={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}this._canvas.width=this.dimensions.scaledCanvasWidth,this._canvas.height=this.dimensions.scaledCanvasHeight,this._canvas.style.width="".concat(this.dimensions.canvasWidth,"px"),this._canvas.style.height="".concat(this.dimensions.canvasHeight,"px"),this._core.screenElement.style.width="".concat(this.dimensions.canvasWidth,"px"),this._core.screenElement.style.height="".concat(this.dimensions.canvasHeight,"px"),this._rectangleRenderer.onResize(),this._glyphRenderer.setDimensions(this.dimensions),this._glyphRenderer.onResize(),this._refreshCharAtlas(),this._model.clear()},e.prototype.onCharSizeChanged=function(){this.onResize(this._terminal.cols,this._terminal.rows)},e.prototype.onBlur=function(){var t,e;try{for(var i=n(this._renderLayers),r=i.next();!r.done;r=i.next())r.value.onBlur(this._terminal)}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}this._requestRedrawViewport()},e.prototype.onFocus=function(){var t,e;try{for(var i=n(this._renderLayers),r=i.next();!r.done;r=i.next())r.value.onFocus(this._terminal)}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}this._requestRedrawViewport()},e.prototype.onSelectionChanged=function(t,e,i){var r,o;try{for(var a=n(this._renderLayers),s=a.next();!s.done;s=a.next())s.value.onSelectionChanged(this._terminal,t,e,i)}catch(t){r={error:t}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(r)throw r.error}}this._updateSelectionModel(t,e,i),this._requestRedrawViewport()},e.prototype.onCursorMove=function(){var t,e;try{for(var i=n(this._renderLayers),r=i.next();!r.done;r=i.next())r.value.onCursorMove(this._terminal)}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},e.prototype.onOptionsChanged=function(){var t,e;try{for(var i=n(this._renderLayers),r=i.next();!r.done;r=i.next())r.value.onOptionsChanged(this._terminal)}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}this._updateDimensions(),this._refreshCharAtlas()},e.prototype._refreshCharAtlas=function(){if(this.dimensions.scaledCharWidth<=0&&this.dimensions.scaledCharHeight<=0)this._isAttached=!1;else{var t=(0,l.acquireCharAtlas)(this._terminal,this._colors,this.dimensions.scaledCellWidth,this.dimensions.scaledCellHeight,this.dimensions.scaledCharWidth,this.dimensions.scaledCharHeight);if(!("getRasterizedGlyph"in t))throw new Error("The webgl renderer only works with the webgl char atlas");this._charAtlas!==t&&this._onChangeTextureAtlas.fire(t.cacheCanvas),this._charAtlas=t,this._charAtlas.warmUp(),this._glyphRenderer.setAtlas(this._charAtlas)}},e.prototype.clearCharAtlas=function(){var t;null===(t=this._charAtlas)||void 0===t||t.clearTexture(),this._model.clear(),this._updateModel(0,this._terminal.rows-1),this._requestRedrawViewport()},e.prototype.clear=function(){var t,e;this._model.clear(),this._glyphRenderer.clear(!0);try{for(var i=n(this._renderLayers),r=i.next();!r.done;r=i.next())r.value.reset(this._terminal)}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},e.prototype.registerCharacterJoiner=function(t){return-1},e.prototype.deregisterCharacterJoiner=function(t){return!1},e.prototype.renderRows=function(t,e){var i,r;if(!this._isAttached){if(!(document.body.contains(this._core.screenElement)&&this._core._charSizeService.width&&this._core._charSizeService.height))return;this._updateDimensions(),this._refreshCharAtlas(),this._isAttached=!0}try{for(var o=n(this._renderLayers),a=o.next();!a.done;a=o.next())a.value.onGridChanged(this._terminal,t,e)}catch(t){i={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}this._glyphRenderer.beginFrame()&&(this._model.clear(),this._updateSelectionModel(void 0,void 0)),this._updateModel(t,e),this._rectangleRenderer.render(),this._glyphRenderer.render(this._model)},e.prototype._updateModel=function(t,e){for(var i=this._core,r=this._workCell,o=0,n=t;n<=e;n++){var a=n+i.buffer.ydisp,s=i.buffer.lines.get(a);this._model.lineLengths[n]=0;for(var c=this._characterJoinerService.getJoinedCharacters(a),l=0;l<i.cols;l++){o=this._workColors.bg,s.loadCell(l,r),0===l&&(o=this._workColors.bg);var h=!1,u=l;if(c.length>0&&l===c[0][0]){h=!0;var f=c.shift();r=new m(r,s.translateToString(!0,f[0],f[1]),f[1]-f[0]),u=f[1]-1}var p=r.getChars(),g=r.getCode(),v=(n*i.cols+l)*d.RENDER_MODEL_INDICIES_PER_CELL;if(this._loadColorsForCell(l,a),g!==_.NULL_CELL_CODE&&(this._model.lineLengths[n]=l+1),(this._model.cells[v]!==g||this._model.cells[v+d.RENDER_MODEL_BG_OFFSET]!==this._workColors.bg||this._model.cells[v+d.RENDER_MODEL_FG_OFFSET]!==this._workColors.fg||this._model.cells[v+d.RENDER_MODEL_EXT_OFFSET]!==this._workColors.ext)&&(p.length>1&&(g|=d.COMBINED_CHAR_BIT_MASK),this._model.cells[v]=g,this._model.cells[v+d.RENDER_MODEL_BG_OFFSET]=this._workColors.bg,this._model.cells[v+d.RENDER_MODEL_FG_OFFSET]=this._workColors.fg,this._model.cells[v+d.RENDER_MODEL_EXT_OFFSET]=this._workColors.ext,this._glyphRenderer.updateCell(l,n,g,this._workColors.bg,this._workColors.fg,this._workColors.ext,p,o),h))for(r=this._workCell,l++;l<u;l++){var C=(n*i.cols+l)*d.RENDER_MODEL_INDICIES_PER_CELL;this._glyphRenderer.updateCell(l,n,_.NULL_CELL_CODE,0,0,0,_.NULL_CELL_CHAR,0),this._model.cells[C]=_.NULL_CELL_CODE,this._model.cells[C+d.RENDER_MODEL_BG_OFFSET]=this._workColors.bg,this._model.cells[C+d.RENDER_MODEL_FG_OFFSET]=this._workColors.fg,this._model.cells[C+d.RENDER_MODEL_EXT_OFFSET]=this._workColors.ext}}}this._rectangleRenderer.updateBackgrounds(this._model)},e.prototype._loadColorsForCell=function(t,e){var i,r,o,a,s,c,l;this._workColors.bg=this._workCell.bg,this._workColors.fg=this._workCell.fg,this._workColors.ext=268435456&this._workCell.bg?this._workCell.extended.ext:0;try{for(var h=n(this._decorationService.getDecorationsAtCell(t,e,"bottom")),d=h.next();!d.done;d=h.next())(f=d.value).backgroundColorRGB&&(s=f.backgroundColorRGB.rgba>>8&16777215),f.foregroundColorRGB&&(c=f.foregroundColorRGB.rgba>>8&16777215)}catch(t){i={error:t}}finally{try{d&&!d.done&&(r=h.return)&&r.call(h)}finally{if(i)throw i.error}}(l=this._isCellSelected(t,e))&&(s=(this._coreBrowserService.isFocused?this._colors.selectionBackgroundOpaque:this._colors.selectionInactiveBackgroundOpaque).rgba>>8&16777215,this._colors.selectionForeground&&(c=this._colors.selectionForeground.rgba>>8&16777215));try{for(var u=n(this._decorationService.getDecorationsAtCell(t,e,"top")),_=u.next();!_.done;_=u.next()){var f;(f=_.value).backgroundColorRGB&&(s=f.backgroundColorRGB.rgba>>8&16777215),f.foregroundColorRGB&&(c=f.foregroundColorRGB.rgba>>8&16777215)}}catch(t){o={error:t}}finally{try{_&&!_.done&&(a=u.return)&&a.call(u)}finally{if(o)throw o.error}}void 0!==s&&(s=l?-16777216&this._workCell.bg&-134217729|s|50331648:-16777216&this._workCell.bg|s|50331648),void 0!==c&&(c=-16777216&this._workCell.fg&-67108865|c|50331648),67108864&this._workColors.fg&&(void 0!==s&&void 0===c&&(c=0==(50331648&this._workColors.bg)?-134217728&this._workColors.fg|16777215&this._colors.background.rgba>>8|50331648:-134217728&this._workColors.fg|67108863&this._workColors.bg),void 0===s&&void 0!==c&&(s=0==(50331648&this._workColors.fg)?-67108864&this._workColors.bg|16777215&this._colors.foreground.rgba>>8|50331648:-67108864&this._workColors.bg|67108863&this._workColors.fg)),this._workColors.bg=null!=s?s:this._workColors.bg,this._workColors.fg=null!=c?c:this._workColors.fg},e.prototype._isCellSelected=function(t,e){return!!this._model.selection.hasSelection&&(e-=this._terminal.buffer.active.viewportY,this._model.selection.columnSelectMode?this._model.selection.startCol<=this._model.selection.endCol?t>=this._model.selection.startCol&&e>=this._model.selection.viewportCappedStartRow&&t<this._model.selection.endCol&&e<=this._model.selection.viewportCappedEndRow:t<this._model.selection.startCol&&e>=this._model.selection.viewportCappedStartRow&&t>=this._model.selection.endCol&&e<=this._model.selection.viewportCappedEndRow:e>this._model.selection.viewportStartRow&&e<this._model.selection.viewportEndRow||this._model.selection.viewportStartRow===this._model.selection.viewportEndRow&&e===this._model.selection.viewportStartRow&&t>=this._model.selection.startCol&&t<this._model.selection.endCol||this._model.selection.viewportStartRow<this._model.selection.viewportEndRow&&e===this._model.selection.viewportEndRow&&t<this._model.selection.endCol||this._model.selection.viewportStartRow<this._model.selection.viewportEndRow&&e===this._model.selection.viewportStartRow&&t>=this._model.selection.startCol)},e.prototype._updateSelectionModel=function(t,e,i){void 0===i&&(i=!1);var r=this._terminal;if(t&&e&&(t[0]!==e[0]||t[1]!==e[1])){var o=t[1]-r.buffer.active.viewportY,n=e[1]-r.buffer.active.viewportY,a=Math.max(o,0),s=Math.min(n,r.rows-1);a>=r.rows||s<0?this._model.clearSelection():(this._model.selection.hasSelection=!0,this._model.selection.columnSelectMode=i,this._model.selection.viewportStartRow=o,this._model.selection.viewportEndRow=n,this._model.selection.viewportCappedStartRow=a,this._model.selection.viewportCappedEndRow=s,this._model.selection.startCol=t[0],this._model.selection.endCol=e[0])}else this._model.clearSelection()},e.prototype._updateDimensions=function(){this._core._charSizeService.width&&this._core._charSizeService.height&&(this.dimensions.scaledCharWidth=Math.floor(this._core._charSizeService.width*this._devicePixelRatio),this.dimensions.scaledCharHeight=Math.ceil(this._core._charSizeService.height*this._devicePixelRatio),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._terminal.options.lineHeight),this.dimensions.scaledCharTop=1===this._terminal.options.lineHeight?0:Math.round((this.dimensions.scaledCellHeight-this.dimensions.scaledCharHeight)/2),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._terminal.options.letterSpacing),this.dimensions.scaledCharLeft=Math.floor(this._terminal.options.letterSpacing/2),this.dimensions.scaledCanvasHeight=this._terminal.rows*this.dimensions.scaledCellHeight,this.dimensions.scaledCanvasWidth=this._terminal.cols*this.dimensions.scaledCellWidth,this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/this._devicePixelRatio),this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/this._devicePixelRatio),this.dimensions.actualCellHeight=this.dimensions.scaledCellHeight/this._devicePixelRatio,this.dimensions.actualCellWidth=this.dimensions.scaledCellWidth/this._devicePixelRatio)},e.prototype._setCanvasDevicePixelDimensions=function(t,e){this.dimensions.scaledCanvasWidth===t&&this.dimensions.scaledCanvasHeight===e||(this.dimensions.scaledCanvasWidth=t,this.dimensions.scaledCanvasHeight=e,this._canvas.width=t,this._canvas.height=e,this._requestRedrawViewport())},e.prototype._requestRedrawViewport=function(){this._onRequestRedraw.fire({start:0,end:this._terminal.rows-1})},e}(u.Disposable);e.WebglRenderer=y;var m=function(t){function e(e,i,r){var o=t.call(this)||this;return o.content=0,o.combinedData="",o.fg=e.fg,o.bg=e.bg,o.combinedData=i,o._width=r,o}return o(e,t),e.prototype.isCombined=function(){return 2097152},e.prototype.getWidth=function(){return this._width},e.prototype.getChars=function(){return this.combinedData},e.prototype.getCode=function(){return 2097151},e.prototype.setFromCharData=function(t){throw new Error("not implemented")},e.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},e}(C.AttributeData);e.JoinedCellData=m},381:(t,e)=>{function i(t,e,i){var o=r(t.createShader(e));if(t.shaderSource(o,i),t.compileShader(o),t.getShaderParameter(o,t.COMPILE_STATUS))return o;console.error(t.getShaderInfoLog(o)),t.deleteShader(o)}function r(t){if(!t)throw new Error("value must not be falsy");return t}Object.defineProperty(e,"__esModule",{value:!0}),e.throwIfFalsy=e.expandFloat32Array=e.createShader=e.createProgram=e.PROJECTION_MATRIX=void 0,e.PROJECTION_MATRIX=new Float32Array([2,0,0,0,0,-2,0,0,0,0,1,0,-1,1,0,1]),e.createProgram=function(t,e,o){var n=r(t.createProgram());if(t.attachShader(n,r(i(t,t.VERTEX_SHADER,e))),t.attachShader(n,r(i(t,t.FRAGMENT_SHADER,o))),t.linkProgram(n),t.getProgramParameter(n,t.LINK_STATUS))return n;console.error(t.getProgramInfoLog(n)),t.deleteProgram(n)},e.createShader=i,e.expandFloat32Array=function(t,e){for(var i=Math.min(2*t.length,e),r=new Float32Array(i),o=0;o<t.length;o++)r[o]=t[o];return r},e.throwIfFalsy=r},713:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.removeTerminalFromCache=e.acquireCharAtlas=void 0;var r=i(433),o=i(167),n=[];e.acquireCharAtlas=function(t,e,i,a,s,c){for(var l=(0,r.generateConfig)(i,a,s,c,t,e),h=0;h<n.length;h++){var d=(u=n[h]).ownedBy.indexOf(t);if(d>=0){if((0,r.configEquals)(u.config,l))return u.atlas;1===u.ownedBy.length?(u.atlas.dispose(),n.splice(h,1)):u.ownedBy.splice(d,1);break}}for(h=0;h<n.length;h++){var u=n[h];if((0,r.configEquals)(u.config,l))return u.ownedBy.push(t),u.atlas}var _={atlas:new o.WebglCharAtlas(document,l),config:l,ownedBy:[t]};return n.push(_),_.atlas},e.removeTerminalFromCache=function(t){for(var e=0;e<n.length;e++){var i=n[e].ownedBy.indexOf(t);if(-1!==i){1===n[e].ownedBy.length?(n[e].atlas.dispose(),n.splice(e,1)):n[e].ownedBy.splice(i,1);break}}}},433:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.is256Color=e.configEquals=e.generateConfig=void 0;var i={css:"",rgba:0};e.generateConfig=function(t,e,r,o,n,a){var s={foreground:a.foreground,background:a.background,cursor:i,cursorAccent:i,selectionForeground:i,selectionBackgroundTransparent:i,selectionBackgroundOpaque:i,selectionInactiveBackgroundTransparent:i,selectionInactiveBackgroundOpaque:i,ansi:a.ansi.slice(),contrastCache:a.contrastCache};return{customGlyphs:n.options.customGlyphs,devicePixelRatio:window.devicePixelRatio,letterSpacing:n.options.letterSpacing,lineHeight:n.options.lineHeight,scaledCellWidth:t,scaledCellHeight:e,scaledCharWidth:r,scaledCharHeight:o,fontFamily:n.options.fontFamily,fontSize:n.options.fontSize,fontWeight:n.options.fontWeight,fontWeightBold:n.options.fontWeightBold,allowTransparency:n.options.allowTransparency,drawBoldTextInBrightColors:n.options.drawBoldTextInBrightColors,minimumContrastRatio:n.options.minimumContrastRatio,colors:s}},e.configEquals=function(t,e){for(var i=0;i<t.colors.ansi.length;i++)if(t.colors.ansi[i].rgba!==e.colors.ansi[i].rgba)return!1;return t.devicePixelRatio===e.devicePixelRatio&&t.customGlyphs===e.customGlyphs&&t.lineHeight===e.lineHeight&&t.letterSpacing===e.letterSpacing&&t.fontFamily===e.fontFamily&&t.fontSize===e.fontSize&&t.fontWeight===e.fontWeight&&t.fontWeightBold===e.fontWeightBold&&t.allowTransparency===e.allowTransparency&&t.scaledCharWidth===e.scaledCharWidth&&t.scaledCharHeight===e.scaledCharHeight&&t.drawBoldTextInBrightColors===e.drawBoldTextInBrightColors&&t.minimumContrastRatio===e.minimumContrastRatio&&t.colors.foreground===e.colors.foreground&&t.colors.background===e.colors.background},e.is256Color=function(t){return 16777216==(50331648&t)||33554432==(50331648&t)}},167:function(t,e,i){var r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],r=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.WebglCharAtlas=void 0;var o=i(302),n=i(855),a=i(381),s=i(147),c=i(160),l=i(14),h=i(634),d=1024,u=1024,_=Math.floor(819.2),f={css:"rgba(0, 0, 0, 0)",rgba:0},p={offset:{x:0,y:0},texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},size:{x:0,y:0},sizeClipSpace:{x:0,y:0}},g=function(){function t(t,e){this._config=e,this._didWarmUp=!1,this._cacheMap={},this._cacheMapCombined={},this._currentRow={x:0,y:0,height:0},this._fixedRows=[],this.hasCanvasChanged=!1,this._workBoundingBox={top:0,left:0,bottom:0,right:0},this._workAttributeData=new s.AttributeData,this.cacheCanvas=t.createElement("canvas"),this.cacheCanvas.width=d,this.cacheCanvas.height=u,this._cacheCtx=(0,a.throwIfFalsy)(this.cacheCanvas.getContext("2d",{alpha:!0})),this._tmpCanvas=t.createElement("canvas"),this._tmpCanvas.width=4*this._config.scaledCellWidth+4,this._tmpCanvas.height=this._config.scaledCellHeight+4,this._tmpCtx=(0,a.throwIfFalsy)(this._tmpCanvas.getContext("2d",{alpha:this._config.allowTransparency}))}return t.prototype.dispose=function(){this.cacheCanvas.parentElement&&this.cacheCanvas.parentElement.removeChild(this.cacheCanvas)},t.prototype.warmUp=function(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)},t.prototype._doWarmUp=function(){for(var t,e,i,r=33;r<126;r++){var o=this._drawToCache(r,n.DEFAULT_COLOR,n.DEFAULT_COLOR,n.DEFAULT_EXT);this._cacheMap[r]=((t={})[n.DEFAULT_COLOR]=((e={})[n.DEFAULT_COLOR]=((i={})[n.DEFAULT_EXT]=o,i),e),t)}},t.prototype.beginFrame=function(){return this._currentRow.y>_&&(this.clearTexture(),this.warmUp(),!0)},t.prototype.clearTexture=function(){0===this._currentRow.x&&0===this._currentRow.y||(this._cacheCtx.clearRect(0,0,d,u),this._cacheMap={},this._cacheMapCombined={},this._currentRow.x=0,this._currentRow.y=0,this._currentRow.height=0,this._fixedRows.length=0,this._didWarmUp=!1)},t.prototype.getRasterizedGlyphCombinedChar=function(t,e,i,r){return this._getFromCacheMap(this._cacheMapCombined,t,e,i,r)},t.prototype.getRasterizedGlyph=function(t,e,i,r){return this._getFromCacheMap(this._cacheMap,t,e,i,r)},t.prototype._getFromCacheMap=function(t,e,i,r,o){var n=t[e];n||(n={},t[e]=n);var a,s=n[i];s||(s={},n[i]=s);var c=s[r];return c?a=c[o]:(c={},s[r]=c),a||(a=this._drawToCache(e,i,r,o),c[o]=a),a},t.prototype._getColorFromAnsiIndex=function(t){if(t>=this._config.colors.ansi.length)throw new Error("No color found for idx "+t);return this._config.colors.ansi[t]},t.prototype._getBackgroundColor=function(t,e,i,r){if(this._config.allowTransparency)return f;var n;switch(t){case 16777216:case 33554432:n=this._getColorFromAnsiIndex(e);break;case 50331648:var a=s.AttributeData.toColorRGB(e);n=c.rgba.toColor(a[0],a[1],a[2]);break;default:n=i?this._config.colors.foreground:this._config.colors.background}return r&&(n=c.color.blend(this._config.colors.background,c.color.multiplyOpacity(n,o.DIM_OPACITY))),n},t.prototype._getForegroundColor=function(t,e,i,r,n,a,l,h,d,u){var _,f=this._getMinimumContrastColor(t,e,i,r,n,a,!1,d,u);if(f)return f;switch(n){case 16777216:case 33554432:this._config.drawBoldTextInBrightColors&&d&&a<8&&(a+=8),_=this._getColorFromAnsiIndex(a);break;case 50331648:var p=s.AttributeData.toColorRGB(a);_=c.rgba.toColor(p[0],p[1],p[2]);break;default:_=l?this._config.colors.background:this._config.colors.foreground}return this._config.allowTransparency&&(_=c.color.opaque(_)),h&&(_=c.color.multiplyOpacity(_,o.DIM_OPACITY)),_},t.prototype._resolveBackgroundRgba=function(t,e,i){switch(t){case 16777216:case 33554432:return this._getColorFromAnsiIndex(e).rgba;case 50331648:return e<<8;default:return i?this._config.colors.foreground.rgba:this._config.colors.background.rgba}},t.prototype._resolveForegroundRgba=function(t,e,i,r){switch(t){case 16777216:case 33554432:return this._config.drawBoldTextInBrightColors&&r&&e<8&&(e+=8),this._getColorFromAnsiIndex(e).rgba;case 50331648:return e<<8;default:return i?this._config.colors.background.rgba:this._config.colors.foreground.rgba}},t.prototype._getMinimumContrastColor=function(t,e,i,r,o,n,a,s,l){if(1!==this._config.minimumContrastRatio&&!l){var h=this._config.colors.contrastCache.getColor(t,r);if(void 0!==h)return h||void 0;var d=this._resolveBackgroundRgba(e,i,a),u=this._resolveForegroundRgba(o,n,a,s),_=c.rgba.ensureContrastRatio(d,u,this._config.minimumContrastRatio);if(_){var f=c.rgba.toColor(_>>24&255,_>>16&255,_>>8&255);return this._config.colors.contrastCache.setColor(t,r,f),f}this._config.colors.contrastCache.setColor(t,r,null)}},t.prototype._drawToCache=function(t,e,i,n){var a,c,_="number"==typeof t?String.fromCharCode(t):t;this.hasCanvasChanged=!0;var f=this._config.scaledCellWidth*Math.max(_.length,2)+4;this._tmpCanvas.width<f&&(this._tmpCanvas.width=f);var g=this._config.scaledCellHeight+8;if(this._tmpCanvas.height<g&&(this._tmpCanvas.height=g),this._tmpCtx.save(),this._workAttributeData.fg=i,this._workAttributeData.bg=e,this._workAttributeData.extended.ext=n,this._workAttributeData.isInvisible())return p;var C=!!this._workAttributeData.isBold(),y=!!this._workAttributeData.isInverse(),m=!!this._workAttributeData.isDim(),w=!!this._workAttributeData.isItalic(),L=!!this._workAttributeData.isUnderline(),x=!!this._workAttributeData.isStrikethrough(),b=this._workAttributeData.getFgColor(),M=this._workAttributeData.getFgColorMode(),R=this._workAttributeData.getBgColor(),E=this._workAttributeData.getBgColorMode();if(y){var A=b;b=R,R=A;var D=M;M=E,E=D}var T=this._getBackgroundColor(E,R,y,m);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=T.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.globalCompositeOperation="source-over";var S=C?this._config.fontWeightBold:this._config.fontWeight,F=w?"italic":"";this._tmpCtx.font="".concat(F," ").concat(S," ").concat(this._config.fontSize*this._config.devicePixelRatio,"px ").concat(this._config.fontFamily),this._tmpCtx.textBaseline=o.TEXT_BASELINE;var B=1===_.length&&(0,h.isPowerlineGlyph)(_.charCodeAt(0)),P=this._getForegroundColor(e,E,R,i,M,b,y,m,C,(0,h.excludeFromContrastRatioDemands)(_.charCodeAt(0)));this._tmpCtx.fillStyle=P.css;var k=B?0:4,O=!1;!1!==this._config.customGlyphs&&(O=(0,l.tryDrawCustomChar)(this._tmpCtx,_,k,k,this._config.scaledCellWidth,this._config.scaledCellHeight));var I=!B;if(L){this._tmpCtx.save();var W=(Q=Math.max(1,Math.floor(this._config.fontSize*window.devicePixelRatio/15)))%2==1?.5:0;if(this._tmpCtx.lineWidth=Q,this._workAttributeData.isUnderlineColorDefault())this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle;else if(this._workAttributeData.isUnderlineColorRGB())I=!1,this._tmpCtx.strokeStyle="rgb(".concat(s.AttributeData.toColorRGB(this._workAttributeData.getUnderlineColor()).join(","),")");else{I=!1;var H=this._workAttributeData.getUnderlineColor();this._config.drawBoldTextInBrightColors&&this._workAttributeData.isBold()&&H<8&&(H+=8),this._tmpCtx.strokeStyle=this._getColorFromAnsiIndex(H).css}this._tmpCtx.beginPath();var U=k,N=k+this._config.scaledCellWidth,j=Math.ceil(k+this._config.scaledCharHeight)-W,z=k+this._config.scaledCharHeight+Q-W,G=Math.ceil(k+this._config.scaledCharHeight+2*Q)-W;switch(this._workAttributeData.extended.underlineStyle){case 2:this._tmpCtx.moveTo(U,j),this._tmpCtx.lineTo(N,j),this._tmpCtx.moveTo(U,G),this._tmpCtx.lineTo(N,G);break;case 3:var X,Y=k+this._config.scaledCellWidth/2,q=Q<=1?G:Math.ceil(k+this._config.scaledCharHeight-Q/2)-W,V=Q<=1?j:Math.ceil(k+this._config.scaledCharHeight+Q/2)-W;(X=new Path2D).rect(U,j,this._config.scaledCellWidth,G-j),this._tmpCtx.clip(X),this._tmpCtx.moveTo(U-this._config.scaledCellWidth/2,z),this._tmpCtx.bezierCurveTo(U-this._config.scaledCellWidth/2,V,U,V,U,z),this._tmpCtx.bezierCurveTo(U,q,Y,q,Y,z),this._tmpCtx.bezierCurveTo(Y,V,N,V,N,z),this._tmpCtx.bezierCurveTo(N,q,N+this._config.scaledCellWidth/2,q,N+this._config.scaledCellWidth/2,z);break;case 4:this._tmpCtx.setLineDash([2*window.devicePixelRatio,window.devicePixelRatio]),this._tmpCtx.moveTo(U,j),this._tmpCtx.lineTo(N,j);break;case 5:this._tmpCtx.setLineDash([4*window.devicePixelRatio,3*window.devicePixelRatio]),this._tmpCtx.moveTo(U,j),this._tmpCtx.lineTo(N,j);break;default:this._tmpCtx.moveTo(U,j),this._tmpCtx.lineTo(N,j)}this._tmpCtx.stroke(),this._tmpCtx.restore(),!O&&this._config.fontSize>=12&&(this._config.allowTransparency||" "===_||(this._tmpCtx.save(),(X=new Path2D).rect(U,j-Math.ceil(Q/2),this._config.scaledCellWidth,G-j+Math.ceil(Q/2)),this._tmpCtx.clip(X),this._tmpCtx.lineWidth=3*window.devicePixelRatio,this._tmpCtx.strokeStyle=T.css,this._tmpCtx.strokeText(_,k,k+this._config.scaledCharHeight),this._tmpCtx.restore()))}if(O||this._tmpCtx.fillText(_,k,k+this._config.scaledCharHeight),"_"===_&&!this._config.allowTransparency){var J=v(this._tmpCtx.getImageData(k,k,this._config.scaledCellWidth,this._config.scaledCellHeight),T,P,I);if(J)for(var K=1;K<=5&&(this._tmpCtx.save(),this._tmpCtx.fillStyle=T.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.restore(),this._tmpCtx.fillText(_,k,k+this._config.scaledCharHeight-K),J=v(this._tmpCtx.getImageData(k,k,this._config.scaledCellWidth,this._config.scaledCellHeight),T,P,I));K++);}if(x){var Q=Math.max(1,Math.floor(this._config.fontSize*window.devicePixelRatio/10));W=this._tmpCtx.lineWidth%2==1?.5:0,this._tmpCtx.lineWidth=Q,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(k,k+Math.floor(this._config.scaledCharHeight/2)-W),this._tmpCtx.lineTo(k+this._config.scaledCharWidth,k+Math.floor(this._config.scaledCharHeight/2)-W),this._tmpCtx.stroke()}this._tmpCtx.restore();var Z,$=this._tmpCtx.getImageData(0,0,this._tmpCanvas.width,this._tmpCanvas.height);if(Z=this._config.allowTransparency?function(t){for(var e=0;e<t.data.length;e+=4)if(t.data[e+3]>0)return!1;return!0}($):v($,T,P,I),Z)return p;for(var tt,et=this._findGlyphBoundingBox($,this._workBoundingBox,f,B,O,k),it=this._clipImageData($,this._workBoundingBox);;){tt=this._currentRow;try{for(var rt=(a=void 0,r(this._fixedRows)),ot=rt.next();!ot.done;ot=rt.next()){var nt=ot.value;(tt===this._currentRow||nt.height<tt.height)&&et.size.y<=nt.height&&(tt=nt)}}catch(t){a={error:t}}finally{try{ot&&!ot.done&&(c=rt.return)&&c.call(rt)}finally{if(a)throw a.error}}if(tt.height>2*et.size.y&&(this._currentRow.height>0&&this._fixedRows.push(this._currentRow),tt={x:0,y:this._currentRow.y+this._currentRow.height,height:et.size.y},this._fixedRows.push(tt),this._currentRow={x:0,y:tt.y+tt.height,height:0}),tt.x+et.size.x<=d)break;tt===this._currentRow?(tt.x=0,tt.y+=tt.height,tt.height=0):this._fixedRows.splice(this._fixedRows.indexOf(tt),1)}return et.texturePosition.x=tt.x,et.texturePosition.y=tt.y,et.texturePositionClipSpace.x=tt.x/d,et.texturePositionClipSpace.y=tt.y/u,tt.height=Math.max(tt.height,et.size.y),tt.x+=et.size.x,this._cacheCtx.putImageData(it,et.texturePosition.x,et.texturePosition.y),et},t.prototype._findGlyphBoundingBox=function(t,e,i,r,o,n){e.top=0;for(var a=r?this._config.scaledCellHeight:this._tmpCanvas.height,s=r?this._config.scaledCellWidth:i,c=!1,l=0;l<a;l++){for(var h=0;h<s;h++){var _=l*this._tmpCanvas.width*4+4*h+3;if(0!==t.data[_]){e.top=l,c=!0;break}}if(c)break}for(e.left=0,c=!1,h=0;h<s;h++){for(l=0;l<a;l++)if(_=l*this._tmpCanvas.width*4+4*h+3,0!==t.data[_]){e.left=h,c=!0;break}if(c)break}for(e.right=s,c=!1,h=s-1;h>=0;h--){for(l=0;l<a;l++)if(_=l*this._tmpCanvas.width*4+4*h+3,0!==t.data[_]){e.right=h,c=!0;break}if(c)break}for(e.bottom=a,c=!1,l=a-1;l>=0;l--){for(h=0;h<s;h++)if(_=l*this._tmpCanvas.width*4+4*h+3,0!==t.data[_]){e.bottom=l,c=!0;break}if(c)break}return{texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},size:{x:e.right-e.left+1,y:e.bottom-e.top+1},sizeClipSpace:{x:(e.right-e.left+1)/d,y:(e.bottom-e.top+1)/u},offset:{x:-e.left+n+(r||o?Math.floor((this._config.scaledCellWidth-this._config.scaledCharWidth)/2):0),y:-e.top+n+(r||o?1===this._config.lineHeight?0:Math.round((this._config.scaledCellHeight-this._config.scaledCharHeight)/2):0)}}},t.prototype._clipImageData=function(t,e){for(var i=e.right-e.left+1,r=e.bottom-e.top+1,o=new Uint8ClampedArray(i*r*4),n=e.top;n<=e.bottom;n++)for(var a=e.left;a<=e.right;a++){var s=n*this._tmpCanvas.width*4+4*a,c=(n-e.top)*i*4+4*(a-e.left);o[c]=t.data[s],o[c+1]=t.data[s+1],o[c+2]=t.data[s+2],o[c+3]=t.data[s+3]}return new ImageData(o,i,r)},t}();function v(t,e,i,r){for(var o=e.rgba>>>24,n=e.rgba>>>16&255,a=e.rgba>>>8&255,s=i.rgba>>>24,c=i.rgba>>>16&255,l=i.rgba>>>8&255,h=Math.floor((Math.abs(o-s)+Math.abs(n-c)+Math.abs(a-l))/12),d=!0,u=0;u<t.data.length;u+=4)t.data[u]===o&&t.data[u+1]===n&&t.data[u+2]===a||r&&Math.abs(t.data[u]-o)+Math.abs(t.data[u+1]-n)+Math.abs(t.data[u+2]-a)<h?t.data[u+3]=0:d=!1;return d}e.WebglCharAtlas=g},592:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseRenderLayer=void 0;var r=i(713),o=i(302),n=i(381),a=function(){function t(t,e,i,r,o){this._container=t,this._alpha=r,this._colors=o,this._scaledCharWidth=0,this._scaledCharHeight=0,this._scaledCellWidth=0,this._scaledCellHeight=0,this._scaledCharLeft=0,this._scaledCharTop=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-".concat(e,"-layer")),this._canvas.style.zIndex=i.toString(),this._initCanvas(),this._container.appendChild(this._canvas)}return t.prototype.dispose=function(){this._canvas.remove(),this._charAtlas&&this._charAtlas.dispose()},t.prototype._initCanvas=function(){this._ctx=(0,n.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()},t.prototype.onOptionsChanged=function(t){},t.prototype.onBlur=function(t){},t.prototype.onFocus=function(t){},t.prototype.onCursorMove=function(t){},t.prototype.onGridChanged=function(t,e,i){},t.prototype.onSelectionChanged=function(t,e,i,r){void 0===r&&(r=!1)},t.prototype.setColors=function(t,e){this._refreshCharAtlas(t,e)},t.prototype._setTransparency=function(t,e){if(e!==this._alpha){var i=this._canvas;this._alpha=e,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,i),this._refreshCharAtlas(t,this._colors),this.onGridChanged(t,0,t.rows-1)}},t.prototype._refreshCharAtlas=function(t,e){this._scaledCharWidth<=0&&this._scaledCharHeight<=0||(this._charAtlas=(0,r.acquireCharAtlas)(t,e,this._scaledCellWidth,this._scaledCellHeight,this._scaledCharWidth,this._scaledCharHeight),this._charAtlas.warmUp())},t.prototype.resize=function(t,e){this._scaledCellWidth=e.scaledCellWidth,this._scaledCellHeight=e.scaledCellHeight,this._scaledCharWidth=e.scaledCharWidth,this._scaledCharHeight=e.scaledCharHeight,this._scaledCharLeft=e.scaledCharLeft,this._scaledCharTop=e.scaledCharTop,this._canvas.width=e.scaledCanvasWidth,this._canvas.height=e.scaledCanvasHeight,this._canvas.style.width="".concat(e.canvasWidth,"px"),this._canvas.style.height="".concat(e.canvasHeight,"px"),this._alpha||this._clearAll(),this._refreshCharAtlas(t,this._colors)},t.prototype._fillCells=function(t,e,i,r){this._ctx.fillRect(t*this._scaledCellWidth,e*this._scaledCellHeight,i*this._scaledCellWidth,r*this._scaledCellHeight)},t.prototype._fillBottomLineAtCells=function(t,e,i){void 0===i&&(i=1),this._ctx.fillRect(t*this._scaledCellWidth,(e+1)*this._scaledCellHeight-window.devicePixelRatio-1,i*this._scaledCellWidth,window.devicePixelRatio)},t.prototype._fillLeftLineAtCell=function(t,e,i){this._ctx.fillRect(t*this._scaledCellWidth,e*this._scaledCellHeight,window.devicePixelRatio*i,this._scaledCellHeight)},t.prototype._strokeRectAtCell=function(t,e,i,r){this._ctx.lineWidth=window.devicePixelRatio,this._ctx.strokeRect(t*this._scaledCellWidth+window.devicePixelRatio/2,e*this._scaledCellHeight+window.devicePixelRatio/2,i*this._scaledCellWidth-window.devicePixelRatio,r*this._scaledCellHeight-window.devicePixelRatio)},t.prototype._clearAll=function(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))},t.prototype._clearCells=function(t,e,i,r){this._alpha?this._ctx.clearRect(t*this._scaledCellWidth,e*this._scaledCellHeight,i*this._scaledCellWidth,r*this._scaledCellHeight):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(t*this._scaledCellWidth,e*this._scaledCellHeight,i*this._scaledCellWidth,r*this._scaledCellHeight))},t.prototype._fillCharTrueColor=function(t,e,i,r){this._ctx.font=this._getFont(t,!1,!1),this._ctx.textBaseline=o.TEXT_BASELINE,this._clipRow(t,r),this._ctx.fillText(e.getChars(),i*this._scaledCellWidth+this._scaledCharLeft,r*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight)},t.prototype._clipRow=function(t,e){this._ctx.beginPath(),this._ctx.rect(0,e*this._scaledCellHeight,t.cols*this._scaledCellWidth,this._scaledCellHeight),this._ctx.clip()},t.prototype._getFont=function(t,e,i){var r=e?t.options.fontWeightBold:t.options.fontWeight;return"".concat(i?"italic":""," ").concat(r," ").concat(t.options.fontSize*window.devicePixelRatio,"px ").concat(t.options.fontFamily)},t}();e.BaseRenderLayer=a},461:function(t,e,i){var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.CursorRenderLayer=void 0;var n=i(592),a=i(782),s=600,c=function(t){function e(e,i,r,o,n,s,c){var l=t.call(this,i,"cursor",r,!0,o)||this;return l._onRequestRefreshRowsEvent=n,l._coreBrowserService=s,l._coreService=c,l._cell=new a.CellData,l._state={x:0,y:0,isFocused:!1,style:"",width:0},l._cursorRenderers={bar:l._renderBarCursor.bind(l),block:l._renderBlockCursor.bind(l),underline:l._renderUnderlineCursor.bind(l)},l.onOptionsChanged(e),l}return o(e,t),e.prototype.dispose=function(){var e;null===(e=this._cursorBlinkStateManager)||void 0===e||e.dispose(),this._cursorBlinkStateManager=void 0,t.prototype.dispose.call(this)},e.prototype.resize=function(e,i){t.prototype.resize.call(this,e,i),this._state={x:0,y:0,isFocused:!1,style:"",width:0}},e.prototype.reset=function(t){var e;this._clearCursor(),null===(e=this._cursorBlinkStateManager)||void 0===e||e.restartBlinkAnimation(t),this.onOptionsChanged(t)},e.prototype.onBlur=function(t){var e;null===(e=this._cursorBlinkStateManager)||void 0===e||e.pause(),this._onRequestRefreshRowsEvent.fire({start:t.buffer.active.cursorY,end:t.buffer.active.cursorY})},e.prototype.onFocus=function(t){var e;null===(e=this._cursorBlinkStateManager)||void 0===e||e.resume(t),this._onRequestRefreshRowsEvent.fire({start:t.buffer.active.cursorY,end:t.buffer.active.cursorY})},e.prototype.onOptionsChanged=function(t){var e,i=this;t.options.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new l((function(){i._render(t,!0)}),this._coreBrowserService)):(null===(e=this._cursorBlinkStateManager)||void 0===e||e.dispose(),this._cursorBlinkStateManager=void 0),this._onRequestRefreshRowsEvent.fire({start:t.buffer.active.cursorY,end:t.buffer.active.cursorY})},e.prototype.onCursorMove=function(t){var e;null===(e=this._cursorBlinkStateManager)||void 0===e||e.restartBlinkAnimation(t)},e.prototype.onGridChanged=function(t,e,i){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?this._render(t,!1):this._cursorBlinkStateManager.restartBlinkAnimation(t)},e.prototype._render=function(t,e){if(this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden){var i=t.buffer.active.baseY+t.buffer.active.cursorY,r=i-t.buffer.active.viewportY,o=Math.min(t.buffer.active.cursorX,t.cols-1);if(r<0||r>=t.rows)this._clearCursor();else if(t._core.buffer.lines.get(i).loadCell(o,this._cell),void 0!==this._cell.content){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css;var n=t.options.cursorStyle;return n&&"block"!==n?this._cursorRenderers[n](t,o,r,this._cell):this._renderBlurCursor(t,o,r,this._cell),this._ctx.restore(),this._state.x=o,this._state.y=r,this._state.isFocused=!1,this._state.style=n,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isCursorVisible){if(this._state){if(this._state.x===o&&this._state.y===r&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===t.options.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[t.options.cursorStyle||"block"](t,o,r,this._cell),this._ctx.restore(),this._state.x=o,this._state.y=r,this._state.isFocused=!1,this._state.style=t.options.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}else this._clearCursor()},e.prototype._clearCursor=function(){this._state&&(window.devicePixelRatio<1?this._clearAll():this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})},e.prototype._renderBarCursor=function(t,e,i,r){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillLeftLineAtCell(e,i,t.options.cursorWidth),this._ctx.restore()},e.prototype._renderBlockCursor=function(t,e,i,r){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillCells(e,i,r.getWidth(),1),this._ctx.fillStyle=this._colors.cursorAccent.css,this._fillCharTrueColor(t,r,e,i),this._ctx.restore()},e.prototype._renderUnderlineCursor=function(t,e,i,r){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillBottomLineAtCells(e,i),this._ctx.restore()},e.prototype._renderBlurCursor=function(t,e,i,r){this._ctx.save(),this._ctx.strokeStyle=this._colors.cursor.css,this._strokeRectAtCell(e,i,r.getWidth(),1),this._ctx.restore()},e}(n.BaseRenderLayer);e.CursorRenderLayer=c;var l=function(){function t(t,e){this._renderCallback=t,this.isCursorVisible=!0,e.isFocused&&this._restartInterval()}return Object.defineProperty(t.prototype,"isPaused",{get:function(){return!(this._blinkStartTimeout||this._blinkInterval)},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},t.prototype.restartBlinkAnimation=function(t){var e=this;this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=window.requestAnimationFrame((function(){e._renderCallback(),e._animationFrame=void 0}))))},t.prototype._restartInterval=function(t){var e=this;void 0===t&&(t=s),this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=window.setTimeout((function(){if(e._animationTimeRestarted){var t=s-(Date.now()-e._animationTimeRestarted);if(e._animationTimeRestarted=void 0,t>0)return void e._restartInterval(t)}e.isCursorVisible=!1,e._animationFrame=window.requestAnimationFrame((function(){e._renderCallback(),e._animationFrame=void 0})),e._blinkInterval=window.setInterval((function(){if(e._animationTimeRestarted){var t=s-(Date.now()-e._animationTimeRestarted);return e._animationTimeRestarted=void 0,void e._restartInterval(t)}e.isCursorVisible=!e.isCursorVisible,e._animationFrame=window.requestAnimationFrame((function(){e._renderCallback(),e._animationFrame=void 0}))}),s)}),t)},t.prototype.pause=function(){this.isCursorVisible=!0,this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},t.prototype.resume=function(t){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation(t)},t}()},733:function(t,e,i){var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.LinkRenderLayer=void 0;var n=i(592),a=i(302),s=i(433),c=function(t){function e(e,i,r,o){var n=t.call(this,e,"link",i,!0,r)||this;return o.linkifier2.onShowLinkUnderline((function(t){return n._onShowLinkUnderline(t)})),o.linkifier2.onHideLinkUnderline((function(t){return n._onHideLinkUnderline(t)})),n}return o(e,t),e.prototype.resize=function(e,i){t.prototype.resize.call(this,e,i),this._state=void 0},e.prototype.reset=function(t){this._clearCurrentLink()},e.prototype._clearCurrentLink=function(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);var t=this._state.y2-this._state.y1-1;t>0&&this._clearCells(0,this._state.y1+1,this._state.cols,t),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}},e.prototype._onShowLinkUnderline=function(t){if(t.fg===a.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._colors.background.css:void 0!==t.fg&&(0,s.is256Color)(t.fg)?this._ctx.fillStyle=this._colors.ansi[t.fg].css:this._ctx.fillStyle=this._colors.foreground.css,t.y1===t.y2)this._fillBottomLineAtCells(t.x1,t.y1,t.x2-t.x1);else{this._fillBottomLineAtCells(t.x1,t.y1,t.cols-t.x1);for(var e=t.y1+1;e<t.y2;e++)this._fillBottomLineAtCells(0,e,t.cols);this._fillBottomLineAtCells(0,t.y2,t.x2)}this._state=t},e.prototype._onHideLinkUnderline=function(t){this._clearCurrentLink()},e}(n.BaseRenderLayer);e.LinkRenderLayer=c},820:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.addDisposableDomListener=void 0,e.addDisposableDomListener=function(t,e,i,r){t.addEventListener(e,i,r);var o=!1;return{dispose:function(){o||(o=!0,t.removeEventListener(e,i,r))}}}},302:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TEXT_BASELINE=e.DIM_OPACITY=e.INVERTED_DEFAULT_COLOR=void 0;var r=i(399);e.INVERTED_DEFAULT_COLOR=257,e.DIM_OPACITY=.5,e.TEXT_BASELINE=r.isFirefox||r.isLegacyEdge?"bottom":"ideographic"},14:function(t,e,i){var r,o,n,a,s,c,l,h,d,u,_,f,p,g,v,C,y,m,w,L,x,b,M,R,E,A,D,T,S,F,B,P,k,O,I,W,H,U,N,j,z,G,X,Y,q,V,J,K,Q,Z,$,tt,et,it,rt,ot,nt,at,st,ct,lt,ht,dt,ut,_t,ft,pt,gt,vt,Ct,yt,mt,wt,Lt,xt,bt,Mt,Rt,Et,At,Dt,Tt,St,Ft,Bt,Pt,kt,Ot,It,Wt,Ht,Ut,Nt,jt,zt,Gt,Xt,Yt,qt,Vt,Jt,Kt,Qt,Zt,$t,te,ee,ie,re,oe,ne,ae,se,ce,le,he,de,ue,_e,fe,pe,ge,ve,Ce,ye,me,we,Le,xe=this&&this.__read||function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var r,o,n=i.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=n.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(i=n.return)&&i.call(n)}finally{if(o)throw o.error}}return a},be=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],r=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.tryDrawCustomChar=e.powerlineDefinitions=e.boxDrawingDefinitions=e.blockElementDefinitions=void 0;var Me=i(634);e.blockElementDefinitions={"":[{x:0,y:0,w:8,h:4}],"":[{x:0,y:7,w:8,h:1}],"":[{x:0,y:6,w:8,h:2}],"":[{x:0,y:5,w:8,h:3}],"":[{x:0,y:4,w:8,h:4}],"":[{x:0,y:3,w:8,h:5}],"":[{x:0,y:2,w:8,h:6}],"":[{x:0,y:1,w:8,h:7}],"":[{x:0,y:0,w:8,h:8}],"":[{x:0,y:0,w:7,h:8}],"":[{x:0,y:0,w:6,h:8}],"":[{x:0,y:0,w:5,h:8}],"":[{x:0,y:0,w:4,h:8}],"":[{x:0,y:0,w:3,h:8}],"":[{x:0,y:0,w:2,h:8}],"":[{x:0,y:0,w:1,h:8}],"":[{x:4,y:0,w:4,h:8}],"":[{x:0,y:0,w:9,h:1}],"":[{x:7,y:0,w:1,h:8}],"":[{x:0,y:4,w:4,h:4}],"":[{x:4,y:4,w:4,h:4}],"":[{x:0,y:0,w:4,h:4}],"":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"":[{x:0,y:0,w:4,h:8},{x:4,y:0,w:4,h:4}],"":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"":[{x:4,y:0,w:4,h:4}],"":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"":[{x:1,y:0,w:1,h:8}],"":[{x:2,y:0,w:1,h:8}],"":[{x:3,y:0,w:1,h:8}],"":[{x:4,y:0,w:1,h:8}],"":[{x:5,y:0,w:1,h:8}],"":[{x:6,y:0,w:1,h:8}],"":[{x:0,y:1,w:8,h:1}],"":[{x:0,y:2,w:8,h:1}],"":[{x:0,y:3,w:8,h:1}],"":[{x:0,y:4,w:8,h:1}],"":[{x:0,y:5,w:8,h:1}],"":[{x:0,y:6,w:8,h:1}],"":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:2}],"":[{x:0,y:0,w:8,h:3}],"":[{x:0,y:0,w:8,h:5}],"":[{x:0,y:0,w:8,h:6}],"":[{x:0,y:0,w:8,h:7}],"":[{x:6,y:0,w:2,h:8}],"":[{x:5,y:0,w:3,h:8}],"":[{x:3,y:0,w:5,h:8}],"":[{x:2,y:0,w:6,h:8}],"":[{x:1,y:0,w:7,h:8}],"":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};var Re={"":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"":[[1,0],[0,0],[0,1],[0,0]],"":[[0,1],[1,1],[1,0],[1,1]]};e.boxDrawingDefinitions={"":(r={},r[1]="M0,.5 L1,.5",r),"":(o={},o[3]="M0,.5 L1,.5",o),"":(n={},n[1]="M.5,0 L.5,1",n),"":(a={},a[3]="M.5,0 L.5,1",a),"":(s={},s[1]="M0.5,1 L.5,.5 L1,.5",s),"":(c={},c[3]="M0.5,1 L.5,.5 L1,.5",c),"":(l={},l[1]="M0,.5 L.5,.5 L.5,1",l),"":(h={},h[3]="M0,.5 L.5,.5 L.5,1",h),"":(d={},d[1]="M.5,0 L.5,.5 L1,.5",d),"":(u={},u[3]="M.5,0 L.5,.5 L1,.5",u),"":(_={},_[1]="M.5,0 L.5,.5 L0,.5",_),"":(f={},f[3]="M.5,0 L.5,.5 L0,.5",f),"":(p={},p[1]="M.5,0 L.5,1 M.5,.5 L1,.5",p),"":(g={},g[3]="M.5,0 L.5,1 M.5,.5 L1,.5",g),"":(v={},v[1]="M.5,0 L.5,1 M.5,.5 L0,.5",v),"":(C={},C[3]="M.5,0 L.5,1 M.5,.5 L0,.5",C),"":(y={},y[1]="M0,.5 L1,.5 M.5,.5 L.5,1",y),"":(m={},m[3]="M0,.5 L1,.5 M.5,.5 L.5,1",m),"":(w={},w[1]="M0,.5 L1,.5 M.5,.5 L.5,0",w),"":(L={},L[3]="M0,.5 L1,.5 M.5,.5 L.5,0",L),"":(x={},x[1]="M0,.5 L1,.5 M.5,0 L.5,1",x),"":(b={},b[3]="M0,.5 L1,.5 M.5,0 L.5,1",b),"":(M={},M[1]="M.5,.5 L0,.5",M),"":(R={},R[3]="M.5,.5 L0,.5",R),"":(E={},E[1]="M.5,.5 L.5,0",E),"":(A={},A[3]="M.5,.5 L.5,0",A),"":(D={},D[1]="M.5,.5 L1,.5",D),"":(T={},T[3]="M.5,.5 L1,.5",T),"":(S={},S[1]="M.5,.5 L.5,1",S),"":(F={},F[3]="M.5,.5 L.5,1",F),"":(B={},B[1]=function(t,e){return"M0,".concat(.5-e," L1,").concat(.5-e," M0,").concat(.5+e," L1,").concat(.5+e)},B),"":(P={},P[1]=function(t,e){return"M".concat(.5-t,",0 L").concat(.5-t,",1 M").concat(.5+t,",0 L").concat(.5+t,",1")},P),"":(k={},k[1]=function(t,e){return"M.5,1 L.5,".concat(.5-e," L1,").concat(.5-e," M.5,").concat(.5+e," L1,").concat(.5+e)},k),"":(O={},O[1]=function(t,e){return"M".concat(.5-t,",1 L").concat(.5-t,",.5 L1,.5 M").concat(.5+t,",.5 L").concat(.5+t,",1")},O),"":(I={},I[1]=function(t,e){return"M1,".concat(.5-e," L").concat(.5-t,",").concat(.5-e," L").concat(.5-t,",1 M1,").concat(.5+e," L").concat(.5+t,",").concat(.5+e," L").concat(.5+t,",1")},I),"":(W={},W[1]=function(t,e){return"M0,".concat(.5-e," L.5,").concat(.5-e," L.5,1 M0,").concat(.5+e," L.5,").concat(.5+e)},W),"":(H={},H[1]=function(t,e){return"M".concat(.5+t,",1 L").concat(.5+t,",.5 L0,.5 M").concat(.5-t,",.5 L").concat(.5-t,",1")},H),"":(U={},U[1]=function(t,e){return"M0,".concat(.5+e," L").concat(.5-t,",").concat(.5+e," L").concat(.5-t,",1 M0,").concat(.5-e," L").concat(.5+t,",").concat(.5-e," L").concat(.5+t,",1")},U),"":(N={},N[1]=function(t,e){return"M.5,0 L.5,".concat(.5+e," L1,").concat(.5+e," M.5,").concat(.5-e," L1,").concat(.5-e)},N),"":(j={},j[1]=function(t,e){return"M1,.5 L".concat(.5-t,",.5 L").concat(.5-t,",0 M").concat(.5+t,",.5 L").concat(.5+t,",0")},j),"":(z={},z[1]=function(t,e){return"M1,".concat(.5-e," L").concat(.5+t,",").concat(.5-e," L").concat(.5+t,",0 M1,").concat(.5+e," L").concat(.5-t,",").concat(.5+e," L").concat(.5-t,",0")},z),"":(G={},G[1]=function(t,e){return"M0,".concat(.5+e," L.5,").concat(.5+e," L.5,0 M0,").concat(.5-e," L.5,").concat(.5-e)},G),"":(X={},X[1]=function(t,e){return"M0,.5 L".concat(.5+t,",.5 L").concat(.5+t,",0 M").concat(.5-t,",.5 L").concat(.5-t,",0")},X),"":(Y={},Y[1]=function(t,e){return"M0,".concat(.5-e," L").concat(.5-t,",").concat(.5-e," L").concat(.5-t,",0 M0,").concat(.5+e," L").concat(.5+t,",").concat(.5+e," L").concat(.5+t,",0")},Y),"":(q={},q[1]=function(t,e){return"".concat("M.5,0 L.5,1"," M.5,").concat(.5-e," L1,").concat(.5-e," M.5,").concat(.5+e," L1,").concat(.5+e)},q),"":(V={},V[1]=function(t,e){return"M".concat(.5-t,",0 L").concat(.5-t,",1 M").concat(.5+t,",0 L").concat(.5+t,",1 M").concat(.5+t,",.5 L1,.5")},V),"":(J={},J[1]=function(t,e){return"M".concat(.5-t,",0 L").concat(.5-t,",1 M1,").concat(.5+e," L").concat(.5+t,",").concat(.5+e," L").concat(.5+t,",1 M1,").concat(.5-e," L").concat(.5+t,",").concat(.5-e," L").concat(.5+t,",0")},J),"":(K={},K[1]=function(t,e){return"".concat("M.5,0 L.5,1"," M0,").concat(.5-e," L.5,").concat(.5-e," M0,").concat(.5+e," L.5,").concat(.5+e)},K),"":(Q={},Q[1]=function(t,e){return"M0,.5 L".concat(.5-t,",.5 M").concat(.5-t,",0 L").concat(.5-t,",1 M").concat(.5+t,",0 L").concat(.5+t,",1")},Q),"":(Z={},Z[1]=function(t,e){return"M".concat(.5+t,",0 L").concat(.5+t,",1 M0,").concat(.5+e," L").concat(.5-t,",").concat(.5+e," L").concat(.5-t,",1 M0,").concat(.5-e," L").concat(.5-t,",").concat(.5-e," L").concat(.5-t,",0")},Z),"":($={},$[1]=function(t,e){return"M0,".concat(.5-e," L1,").concat(.5-e," M0,").concat(.5+e," L1,").concat(.5+e," M.5,").concat(.5+e," L.5,1")},$),"":(tt={},tt[1]=function(t,e){return"".concat("M0,.5 L1,.5"," M").concat(.5-t,",.5 L").concat(.5-t,",1 M").concat(.5+t,",.5 L").concat(.5+t,",1")},tt),"":(et={},et[1]=function(t,e){return"M0,".concat(.5-e," L1,").concat(.5-e," M0,").concat(.5+e," L").concat(.5-t,",").concat(.5+e," L").concat(.5-t,",1 M1,").concat(.5+e," L").concat(.5+t,",").concat(.5+e," L").concat(.5+t,",1")},et),"":(it={},it[1]=function(t,e){return"M.5,0 L.5,".concat(.5-e," M0,").concat(.5-e," L1,").concat(.5-e," M0,").concat(.5+e," L1,").concat(.5+e)},it),"":(rt={},rt[1]=function(t,e){return"".concat("M0,.5 L1,.5"," M").concat(.5-t,",.5 L").concat(.5-t,",0 M").concat(.5+t,",.5 L").concat(.5+t,",0")},rt),"":(ot={},ot[1]=function(t,e){return"M0,".concat(.5+e," L1,").concat(.5+e," M0,").concat(.5-e," L").concat(.5-t,",").concat(.5-e," L").concat(.5-t,",0 M1,").concat(.5-e," L").concat(.5+t,",").concat(.5-e," L").concat(.5+t,",0")},ot),"":(nt={},nt[1]=function(t,e){return"".concat("M.5,0 L.5,1"," M0,").concat(.5-e," L1,").concat(.5-e," M0,").concat(.5+e," L1,").concat(.5+e)},nt),"":(at={},at[1]=function(t,e){return"".concat("M0,.5 L1,.5"," M").concat(.5-t,",0 L").concat(.5-t,",1 M").concat(.5+t,",0 L").concat(.5+t,",1")},at),"":(st={},st[1]=function(t,e){return"M0,".concat(.5+e," L").concat(.5-t,",").concat(.5+e," L").concat(.5-t,",1 M1,").concat(.5+e," L").concat(.5+t,",").concat(.5+e," L").concat(.5+t,",1 M0,").concat(.5-e," L").concat(.5-t,",").concat(.5-e," L").concat(.5-t,",0 M1,").concat(.5-e," L").concat(.5+t,",").concat(.5-e," L").concat(.5+t,",0")},st),"":(ct={},ct[1]="M1,0 L0,1",ct),"":(lt={},lt[1]="M0,0 L1,1",lt),"":(ht={},ht[1]="M1,0 L0,1 M0,0 L1,1",ht),"":(dt={},dt[1]="M.5,.5 L0,.5",dt[3]="M.5,.5 L1,.5",dt),"":(ut={},ut[1]="M.5,.5 L.5,0",ut[3]="M.5,.5 L.5,1",ut),"":(_t={},_t[1]="M.5,.5 L1,.5",_t[3]="M.5,.5 L0,.5",_t),"":(ft={},ft[1]="M.5,.5 L.5,1",ft[3]="M.5,.5 L.5,0",ft),"":(pt={},pt[1]="M.5,.5 L.5,1",pt[3]="M.5,.5 L1,.5",pt),"":(gt={},gt[1]="M.5,.5 L1,.5",gt[3]="M.5,.5 L.5,1",gt),"":(vt={},vt[1]="M.5,.5 L.5,1",vt[3]="M.5,.5 L0,.5",vt),"":(Ct={},Ct[1]="M.5,.5 L0,.5",Ct[3]="M.5,.5 L.5,1",Ct),"":(yt={},yt[1]="M.5,.5 L.5,0",yt[3]="M.5,.5 L1,.5",yt),"":(mt={},mt[1]="M.5,.5 L1,.5",mt[3]="M.5,.5 L.5,0",mt),"":(wt={},wt[1]="M.5,.5 L.5,0",wt[3]="M.5,.5 L0,.5",wt),"":(Lt={},Lt[1]="M.5,.5 L0,.5",Lt[3]="M.5,.5 L.5,0",Lt),"":(xt={},xt[1]="M.5,0 L.5,1",xt[3]="M.5,.5 L1,.5",xt),"":(bt={},bt[1]="M0.5,1 L.5,.5 L1,.5",bt[3]="M.5,.5 L.5,0",bt),"":(Mt={},Mt[1]="M.5,0 L.5,.5 L1,.5",Mt[3]="M.5,.5 L.5,1",Mt),"":(Rt={},Rt[1]="M.5,.5 L1,.5",Rt[3]="M.5,0 L.5,1",Rt),"":(Et={},Et[1]="M.5,.5 L.5,1",Et[3]="M.5,0 L.5,.5 L1,.5",Et),"":(At={},At[1]="M.5,.5 L.5,0",At[3]="M0.5,1 L.5,.5 L1,.5",At),"":(Dt={},Dt[1]="M.5,0 L.5,1",Dt[3]="M.5,.5 L0,.5",Dt),"":(Tt={},Tt[1]="M0,.5 L.5,.5 L.5,1",Tt[3]="M.5,.5 L.5,0",Tt),"":(St={},St[1]="M.5,0 L.5,.5 L0,.5",St[3]="M.5,.5 L.5,1",St),"":(Ft={},Ft[1]="M.5,.5 L0,.5",Ft[3]="M.5,0 L.5,1",Ft),"":(Bt={},Bt[1]="M.5,.5 L.5,1",Bt[3]="M.5,0 L.5,.5 L0,.5",Bt),"":(Pt={},Pt[1]="M.5,.5 L.5,0",Pt[3]="M0,.5 L.5,.5 L.5,1",Pt),"":(kt={},kt[1]="M0.5,1 L.5,.5 L1,.5",kt[3]="M.5,.5 L0,.5",kt),"":(Ot={},Ot[1]="M0,.5 L.5,.5 L.5,1",Ot[3]="M.5,.5 L1,.5",Ot),"":(It={},It[1]="M.5,.5 L.5,1",It[3]="M0,.5 L1,.5",It),"":(Wt={},Wt[1]="M0,.5 L1,.5",Wt[3]="M.5,.5 L.5,1",Wt),"":(Ht={},Ht[1]="M.5,.5 L1,.5",Ht[3]="M0,.5 L.5,.5 L.5,1",Ht),"":(Ut={},Ut[1]="M.5,.5 L0,.5",Ut[3]="M0.5,1 L.5,.5 L1,.5",Ut),"":(Nt={},Nt[1]="M.5,0 L.5,.5 L1,.5",Nt[3]="M.5,.5 L0,.5",Nt),"":(jt={},jt[1]="M.5,0 L.5,.5 L0,.5",jt[3]="M.5,.5 L1,.5",jt),"":(zt={},zt[1]="M.5,.5 L.5,0",zt[3]="M0,.5 L1,.5",zt),"":(Gt={},Gt[1]="M0,.5 L1,.5",Gt[3]="M.5,.5 L.5,0",Gt),"":(Xt={},Xt[1]="M.5,.5 L1,.5",Xt[3]="M.5,0 L.5,.5 L0,.5",Xt),"":(Yt={},Yt[1]="M.5,.5 L0,.5",Yt[3]="M.5,0 L.5,.5 L1,.5",Yt),"":(qt={},qt[1]="".concat("M.5,0 L.5,1"," ").concat("M.5,.5 L1,.5"),qt[3]="M.5,.5 L0,.5",qt),"":(Vt={},Vt[1]="".concat("M.5,0 L.5,1"," ").concat("M.5,.5 L0,.5"),Vt[3]="M.5,.5 L1,.5",Vt),"":(Jt={},Jt[1]="M.5,0 L.5,1",Jt[3]="M0,.5 L1,.5",Jt),"":(Kt={},Kt[1]="".concat("M0,.5 L1,.5"," ").concat("M.5,.5 L.5,1"),Kt[3]="M.5,.5 L.5,0",Kt),"":(Qt={},Qt[1]="".concat("M.5,.5 L.5,0"," ").concat("M0,.5 L1,.5"),Qt[3]="M.5,.5 L.5,1",Qt),"":(Zt={},Zt[1]="M0,.5 L1,.5",Zt[3]="M.5,0 L.5,1",Zt),"":($t={},$t[1]="M0.5,1 L.5,.5 L1,.5",$t[3]="M.5,0 L.5,.5 L0,.5",$t),"":(te={},te[1]="M0,.5 L.5,.5 L.5,1",te[3]="M.5,0 L.5,.5 L1,.5",te),"":(ee={},ee[1]="M.5,0 L.5,.5 L1,.5",ee[3]="M0,.5 L.5,.5 L.5,1",ee),"":(ie={},ie[1]="M.5,0 L.5,.5 L0,.5",ie[3]="M0.5,1 L.5,.5 L1,.5",ie),"":(re={},re[1]="M.5,.5 L.5,1",re[3]="".concat("M.5,.5 L.5,0"," ").concat("M0,.5 L1,.5"),re),"":(oe={},oe[1]="M.5,.5 L.5,0",oe[3]="".concat("M0,.5 L1,.5"," ").concat("M.5,.5 L.5,1"),oe),"":(ne={},ne[1]="M.5,.5 L1,.5",ne[3]="".concat("M.5,0 L.5,1"," ").concat("M.5,.5 L0,.5"),ne),"":(ae={},ae[1]="M.5,.5 L0,.5",ae[3]="".concat("M.5,0 L.5,1"," ").concat("M.5,.5 L1,.5"),ae),"":(se={},se[1]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",se),"":(ce={},ce[3]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",ce),"":(le={},le[1]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",le),"":(he={},he[3]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",he),"":(de={},de[1]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",de),"":(ue={},ue[3]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",ue),"":(_e={},_e[1]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",_e),"":(fe={},fe[3]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",fe),"":(pe={},pe[1]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",pe),"":(ge={},ge[3]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",ge),"":(ve={},ve[1]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",ve),"":(Ce={},Ce[3]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",Ce),"":(ye={},ye[1]=function(t,e){return"M.5,1 L.5,".concat(.5+e/.15*.5," C.5,").concat(.5+e/.15*.5,",.5,.5,1,.5")},ye),"":(me={},me[1]=function(t,e){return"M.5,1 L.5,".concat(.5+e/.15*.5," C.5,").concat(.5+e/.15*.5,",.5,.5,0,.5")},me),"":(we={},we[1]=function(t,e){return"M.5,0 L.5,".concat(.5-e/.15*.5," C.5,").concat(.5-e/.15*.5,",.5,.5,0,.5")},we),"":(Le={},Le[1]=function(t,e){return"M.5,0 L.5,".concat(.5-e/.15*.5," C.5,").concat(.5-e/.15*.5,",.5,.5,1,.5")},Le)},e.powerlineDefinitions={"":{d:"M0,0 L1,.5 L0,1",type:0},"":{d:"M0,0 L1,.5 L0,1",type:1,leftPadding:window.devicePixelRatio/2,rightPadding:window.devicePixelRatio/2},"":{d:"M1,0 L0,.5 L1,1",type:0},"":{d:"M1,0 L0,.5 L1,1",type:1,leftPadding:window.devicePixelRatio/2,rightPadding:window.devicePixelRatio/2},"":{d:"M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:0},"":{d:"M0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:1,rightPadding:window.devicePixelRatio/2},"":{d:"M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:0},"":{d:"M1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:1,leftPadding:window.devicePixelRatio/2}},e.tryDrawCustomChar=function(t,i,r,o,n,a){var s=e.blockElementDefinitions[i];if(s)return function(t,e,i,r,o,n){for(var a=0;a<e.length;a++){var s=e[a],c=o/8,l=n/8;t.fillRect(i+s.x*c,r+s.y*l,s.w*c,s.h*l)}}(t,s,r,o,n,a),!0;var c=Re[i];if(c)return function(t,e,i,r,o,n){var a,s=Ee.get(e);s||(s=new Map,Ee.set(e,s));var c=t.fillStyle;if("string"!=typeof c)throw new Error('Unexpected fillStyle type "'.concat(c,'"'));var l=s.get(c);if(!l){var h=e[0].length,d=e.length,u=document.createElement("canvas");u.width=h,u.height=d;var _=(0,Me.throwIfFalsy)(u.getContext("2d")),f=new ImageData(h,d),p=void 0,g=void 0,v=void 0,C=void 0;if(c.startsWith("#"))p=parseInt(c.slice(1,3),16),g=parseInt(c.slice(3,5),16),v=parseInt(c.slice(5,7),16),C=c.length>7&&parseInt(c.slice(7,9),16)||1;else{if(!c.startsWith("rgba"))throw new Error('Unexpected fillStyle color format "'.concat(c,'" when drawing pattern glyph'));p=(a=xe(c.substring(5,c.length-1).split(",").map((function(t){return parseFloat(t)})),4))[0],g=a[1],v=a[2],C=a[3]}for(var y=0;y<d;y++)for(var m=0;m<h;m++)f.data[4*(y*h+m)]=p,f.data[4*(y*h+m)+1]=g,f.data[4*(y*h+m)+2]=v,f.data[4*(y*h+m)+3]=e[y][m]*(255*C);_.putImageData(f,0,0),l=(0,Me.throwIfFalsy)(t.createPattern(u,null)),s.set(c,l)}t.fillStyle=l,t.fillRect(i,r,o,n)}(t,c,r,o,n,a),!0;var l=e.boxDrawingDefinitions[i];if(l)return function(t,e,i,r,o,n){var a,s,c,l;t.strokeStyle=t.fillStyle;try{for(var h=be(Object.entries(e)),d=h.next();!d.done;d=h.next()){var u=xe(d.value,2),_=u[0],f=u[1];t.beginPath(),t.lineWidth=window.devicePixelRatio*Number.parseInt(_);var p=void 0;p="function"==typeof f?f(.15,.15/n*o):f;try{for(var g=(c=void 0,be(p.split(" "))),v=g.next();!v.done;v=g.next()){var C=v.value,y=C[0],m=De[y];if(m){var w=C.substring(1).split(",");w[0]&&w[1]&&m(t,Te(w,o,n,i,r))}else console.error('Could not find drawing instructions for "'.concat(y,'"'))}}catch(t){c={error:t}}finally{try{v&&!v.done&&(l=g.return)&&l.call(g)}finally{if(c)throw c.error}}t.stroke(),t.closePath()}}catch(t){a={error:t}}finally{try{d&&!d.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}}(t,l,r,o,n,a),!0;var h=e.powerlineDefinitions[i];return!!h&&(function(t,e,i,r,o,n){var a,s;t.beginPath(),t.lineWidth=window.devicePixelRatio;try{for(var c=be(e.d.split(" ")),l=c.next();!l.done;l=c.next()){var h=l.value,d=h[0],u=De[d];if(u){var _=h.substring(1).split(",");_[0]&&_[1]&&u(t,Te(_,o,n,i,r,e.leftPadding,e.rightPadding))}else console.error('Could not find drawing instructions for "'.concat(d,'"'))}}catch(t){a={error:t}}finally{try{l&&!l.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}1===e.type?(t.strokeStyle=t.fillStyle,t.stroke()):t.fill(),t.closePath()}(t,h,r,o,n,a),!0)};var Ee=new Map;function Ae(t,e,i){return void 0===i&&(i=0),Math.max(Math.min(t,e),i)}var De={C:function(t,e){return t.bezierCurveTo(e[0],e[1],e[2],e[3],e[4],e[5])},L:function(t,e){return t.lineTo(e[0],e[1])},M:function(t,e){return t.moveTo(e[0],e[1])}};function Te(t,e,i,r,o,n,a){void 0===n&&(n=0),void 0===a&&(a=0);var s=t.map((function(t){return parseFloat(t)||parseInt(t)}));if(s.length<2)throw new Error("Too few arguments for instruction");for(var c=0;c<s.length;c+=2)s[c]*=e-n*window.devicePixelRatio-a*window.devicePixelRatio,0!==s[c]&&(s[c]=Ae(Math.round(s[c]+.5)-.5,e,0)),s[c]+=r+n*window.devicePixelRatio;for(var l=1;l<s.length;l+=2)s[l]*=i,0!==s[l]&&(s[l]=Ae(Math.round(s[l]+.5)-.5,i,0)),s[l]+=o;return s}},476:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.observeDevicePixelDimensions=void 0;var r=i(859);e.observeDevicePixelDimensions=function(t,e){var i=new ResizeObserver((function(r){var o=r.find((function(e){return e.target===t}));if(o){if(!("devicePixelContentBoxSize"in o))return null==i||i.disconnect(),void(i=void 0);var n=o.devicePixelContentBoxSize[0].inlineSize,a=o.devicePixelContentBoxSize[0].blockSize;n>0&&a>0&&e(n,a)}}));return i.observe(t,{box:["device-pixel-content-box"]}),(0,r.toDisposable)((function(){return null==i?void 0:i.disconnect()}))}},634:(t,e)=>{function i(t){return 57508<=t&&t<=57558}Object.defineProperty(e,"__esModule",{value:!0}),e.excludeFromContrastRatioDemands=e.isPowerlineGlyph=e.throwIfFalsy=void 0,e.throwIfFalsy=function(t){if(!t)throw new Error("value must not be falsy");return t},e.isPowerlineGlyph=i,e.excludeFromContrastRatioDemands=function(t){return i(t)||function(t){return 9472<=t&&t<=9631}(t)}},160:function(t,e){var i,r,o,n=this&&this.__read||function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var r,o,n=i.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=n.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(i=n.return)&&i.call(n)}finally{if(o)throw o.error}}return a};function a(t){var e=t.toString(16);return e.length<2?"0"+e:e}function s(t,e){return t<e?(e+.05)/(t+.05):(t+.05)/(e+.05)}Object.defineProperty(e,"__esModule",{value:!0}),e.contrastRatio=e.toPaddedHex=e.rgba=e.rgb=e.css=e.color=e.channels=void 0,function(t){t.toCss=function(t,e,i,r){return void 0!==r?"#".concat(a(t)).concat(a(e)).concat(a(i)).concat(a(r)):"#".concat(a(t)).concat(a(e)).concat(a(i))},t.toRgba=function(t,e,i,r){return void 0===r&&(r=255),(t<<24|e<<16|i<<8|r)>>>0}}(i=e.channels||(e.channels={})),function(t){function e(t,e){var r=Math.round(255*e),a=n(o.toChannels(t.rgba),3),s=a[0],c=a[1],l=a[2];return{css:i.toCss(s,c,l,r),rgba:i.toRgba(s,c,l,r)}}t.blend=function(t,e){var r=(255&e.rgba)/255;if(1===r)return{css:e.css,rgba:e.rgba};var o=e.rgba>>24&255,n=e.rgba>>16&255,a=e.rgba>>8&255,s=t.rgba>>24&255,c=t.rgba>>16&255,l=t.rgba>>8&255,h=s+Math.round((o-s)*r),d=c+Math.round((n-c)*r),u=l+Math.round((a-l)*r);return{css:i.toCss(h,d,u),rgba:i.toRgba(h,d,u)}},t.isOpaque=function(t){return 255==(255&t.rgba)},t.ensureContrastRatio=function(t,e,i){var r=o.ensureContrastRatio(t.rgba,e.rgba,i);if(r)return o.toColor(r>>24&255,r>>16&255,r>>8&255)},t.opaque=function(t){var e=(255|t.rgba)>>>0,r=n(o.toChannels(e),3),a=r[0],s=r[1],c=r[2];return{css:i.toCss(a,s,c),rgba:e}},t.opacity=e,t.multiplyOpacity=function(t,i){return e(t,(255&t.rgba)*i/255)},t.toColorRGB=function(t){return[t.rgba>>24&255,t.rgba>>16&255,t.rgba>>8&255]}}(e.color||(e.color={})),(e.css||(e.css={})).toColor=function(t){if(t.match(/#[0-9a-f]{3,8}/i))switch(t.length){case 4:var e=parseInt(t.slice(1,2).repeat(2),16),i=parseInt(t.slice(2,3).repeat(2),16),r=parseInt(t.slice(3,4).repeat(2),16);return o.toColor(e,i,r);case 5:e=parseInt(t.slice(1,2).repeat(2),16),i=parseInt(t.slice(2,3).repeat(2),16),r=parseInt(t.slice(3,4).repeat(2),16);var n=parseInt(t.slice(4,5).repeat(2),16);return o.toColor(e,i,r,n);case 7:return{css:t,rgba:(parseInt(t.slice(1),16)<<8|255)>>>0};case 9:return{css:t,rgba:parseInt(t.slice(1),16)>>>0}}var a=t.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(a)return e=parseInt(a[1]),i=parseInt(a[2]),r=parseInt(a[3]),n=Math.round(255*(void 0===a[5]?1:parseFloat(a[5]))),o.toColor(e,i,r,n);throw new Error("css.toColor: Unsupported css format")},function(t){function e(t,e,i){var r=t/255,o=e/255,n=i/255;return.2126*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))+.7152*(o<=.03928?o/12.92:Math.pow((o+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))}t.relativeLuminance=function(t){return e(t>>16&255,t>>8&255,255&t)},t.relativeLuminance2=e}(r=e.rgb||(e.rgb={})),function(t){function e(t,e,i){for(var o=t>>24&255,n=t>>16&255,a=t>>8&255,c=e>>24&255,l=e>>16&255,h=e>>8&255,d=s(r.relativeLuminance2(c,l,h),r.relativeLuminance2(o,n,a));d<i&&(c>0||l>0||h>0);)c-=Math.max(0,Math.ceil(.1*c)),l-=Math.max(0,Math.ceil(.1*l)),h-=Math.max(0,Math.ceil(.1*h)),d=s(r.relativeLuminance2(c,l,h),r.relativeLuminance2(o,n,a));return(c<<24|l<<16|h<<8|255)>>>0}function o(t,e,i){for(var o=t>>24&255,n=t>>16&255,a=t>>8&255,c=e>>24&255,l=e>>16&255,h=e>>8&255,d=s(r.relativeLuminance2(c,l,h),r.relativeLuminance2(o,n,a));d<i&&(c<255||l<255||h<255);)c=Math.min(255,c+Math.ceil(.1*(255-c))),l=Math.min(255,l+Math.ceil(.1*(255-l))),h=Math.min(255,h+Math.ceil(.1*(255-h))),d=s(r.relativeLuminance2(c,l,h),r.relativeLuminance2(o,n,a));return(c<<24|l<<16|h<<8|255)>>>0}t.ensureContrastRatio=function(t,i,n){var a=r.relativeLuminance(t>>8),c=r.relativeLuminance(i>>8);if(s(a,c)<n){if(c<a){var l=e(t,i,n),h=s(a,r.relativeLuminance(l>>8));if(h<n){var d=o(t,i,n);return h>s(a,r.relativeLuminance(d>>8))?l:d}return l}var u=o(t,i,n),_=s(a,r.relativeLuminance(u>>8));return _<n?(d=e(t,i,n),_>s(a,r.relativeLuminance(d>>8))?u:d):u}},t.reduceLuminance=e,t.increaseLuminance=o,t.toChannels=function(t){return[t>>24&255,t>>16&255,t>>8&255,255&t]},t.toColor=function(t,e,r,o){return{css:i.toCss(t,e,r,o),rgba:i.toRgba(t,e,r,o)}}}(o=e.rgba||(e.rgba={})),e.toPaddedHex=a,e.contrastRatio=s},345:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.forwardEvent=e.EventEmitter=void 0;var i=function(){function t(){this._listeners=[],this._disposed=!1}return Object.defineProperty(t.prototype,"event",{get:function(){var t=this;return this._event||(this._event=function(e){return t._listeners.push(e),{dispose:function(){if(!t._disposed)for(var i=0;i<t._listeners.length;i++)if(t._listeners[i]===e)return void t._listeners.splice(i,1)}}}),this._event},enumerable:!1,configurable:!0}),t.prototype.fire=function(t,e){for(var i=[],r=0;r<this._listeners.length;r++)i.push(this._listeners[r]);for(r=0;r<i.length;r++)i[r].call(void 0,t,e)},t.prototype.dispose=function(){this._listeners&&(this._listeners.length=0),this._disposed=!0},t}();e.EventEmitter=i,e.forwardEvent=function(t,e){return t((function(t){return e.fire(t)}))}},859:function(t,e){var i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],r=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.getDisposeArrayDisposable=e.disposeArray=e.toDisposable=e.Disposable=void 0;var r=function(){function t(){this._disposables=[],this._isDisposed=!1}return t.prototype.dispose=function(){var t,e;this._isDisposed=!0;try{for(var r=i(this._disposables),o=r.next();!o.done;o=r.next())o.value.dispose()}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}this._disposables.length=0},t.prototype.register=function(t){return this._disposables.push(t),t},t.prototype.unregister=function(t){var e=this._disposables.indexOf(t);-1!==e&&this._disposables.splice(e,1)},t}();function o(t){var e,r;try{for(var o=i(t),n=o.next();!n.done;n=o.next())n.value.dispose()}catch(t){e={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}t.length=0}e.Disposable=r,e.toDisposable=function(t){return{dispose:t}},e.disposeArray=o,e.getDisposeArrayDisposable=function(t){return{dispose:function(){return o(t)}}}},399:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isLinux=e.isWindows=e.isIphone=e.isIpad=e.isMac=e.isSafari=e.isLegacyEdge=e.isFirefox=void 0;var i="undefined"==typeof navigator,r=i?"node":navigator.userAgent,o=i?"node":navigator.platform;e.isFirefox=r.includes("Firefox"),e.isLegacyEdge=r.includes("Edge"),e.isSafari=/^((?!chrome|android).)*safari/i.test(r),e.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(o),e.isIpad="iPad"===o,e.isIphone="iPhone"===o,e.isWindows=["Windows","Win16","Win32","WinCE"].includes(o),e.isLinux=o.indexOf("Linux")>=0},455:(t,e)=>{function i(t,e,i,r){if(void 0===i&&(i=0),void 0===r&&(r=t.length),i>=t.length)return t;i=(t.length+i)%t.length,r=r>=t.length?t.length:(t.length+r)%t.length;for(var o=i;o<r;++o)t[o]=e;return t}Object.defineProperty(e,"__esModule",{value:!0}),e.concat=e.fillFallback=e.fill=void 0,e.fill=function(t,e,r,o){return t.fill?t.fill(e,r,o):i(t,e,r,o)},e.fillFallback=i,e.concat=function(t,e){var i=new t.constructor(t.length+e.length);return i.set(t),i.set(e,t.length),i}},147:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ExtendedAttrs=e.AttributeData=void 0;var i=function(){function t(){this.fg=0,this.bg=0,this.extended=new r}return t.toColorRGB=function(t){return[t>>>16&255,t>>>8&255,255&t]},t.fromColorRGB=function(t){return(255&t[0])<<16|(255&t[1])<<8|255&t[2]},t.prototype.clone=function(){var e=new t;return e.fg=this.fg,e.bg=this.bg,e.extended=this.extended.clone(),e},t.prototype.isInverse=function(){return 67108864&this.fg},t.prototype.isBold=function(){return 134217728&this.fg},t.prototype.isUnderline=function(){return 268435456&this.fg},t.prototype.isBlink=function(){return 536870912&this.fg},t.prototype.isInvisible=function(){return 1073741824&this.fg},t.prototype.isItalic=function(){return 67108864&this.bg},t.prototype.isDim=function(){return 134217728&this.bg},t.prototype.isStrikethrough=function(){return 2147483648&this.fg},t.prototype.getFgColorMode=function(){return 50331648&this.fg},t.prototype.getBgColorMode=function(){return 50331648&this.bg},t.prototype.isFgRGB=function(){return 50331648==(50331648&this.fg)},t.prototype.isBgRGB=function(){return 50331648==(50331648&this.bg)},t.prototype.isFgPalette=function(){return 16777216==(50331648&this.fg)||33554432==(50331648&this.fg)},t.prototype.isBgPalette=function(){return 16777216==(50331648&this.bg)||33554432==(50331648&this.bg)},t.prototype.isFgDefault=function(){return 0==(50331648&this.fg)},t.prototype.isBgDefault=function(){return 0==(50331648&this.bg)},t.prototype.isAttributeDefault=function(){return 0===this.fg&&0===this.bg},t.prototype.getFgColor=function(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}},t.prototype.getBgColor=function(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}},t.prototype.hasExtendedAttrs=function(){return 268435456&this.bg},t.prototype.updateExtended=function(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456},t.prototype.getUnderlineColor=function(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()},t.prototype.getUnderlineColorMode=function(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()},t.prototype.isUnderlineColorRGB=function(){return 268435456&this.bg&&~this.extended.underlineColor?50331648==(50331648&this.extended.underlineColor):this.isFgRGB()},t.prototype.isUnderlineColorPalette=function(){return 268435456&this.bg&&~this.extended.underlineColor?16777216==(50331648&this.extended.underlineColor)||33554432==(50331648&this.extended.underlineColor):this.isFgPalette()},t.prototype.isUnderlineColorDefault=function(){return 268435456&this.bg&&~this.extended.underlineColor?0==(50331648&this.extended.underlineColor):this.isFgDefault()},t.prototype.getUnderlineStyle=function(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0},t}();e.AttributeData=i;var r=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this._ext=0,this.underlineStyle=t,this.underlineColor=e}return Object.defineProperty(t.prototype,"ext",{get:function(){return this._ext},set:function(t){this._ext=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"underlineStyle",{get:function(){return(469762048&this._ext)>>26},set:function(t){this._ext&=-469762049,this._ext|=t<<26&469762048},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"underlineColor",{get:function(){return 67108863&this._ext},set:function(t){this._ext&=-67108864,this._ext|=67108863&t},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return new t(this.underlineStyle,this.underlineColor)},t.prototype.isEmpty=function(){return 0===this.underlineStyle},t}();e.ExtendedAttrs=r},782:function(t,e,i){var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.CellData=void 0;var n=i(133),a=i(855),s=i(147),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.content=0,e.fg=0,e.bg=0,e.extended=new s.ExtendedAttrs,e.combinedData="",e}return o(e,t),e.fromCharData=function(t){var i=new e;return i.setFromCharData(t),i},e.prototype.isCombined=function(){return 2097152&this.content},e.prototype.getWidth=function(){return this.content>>22},e.prototype.getChars=function(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,n.stringFromCodePoint)(2097151&this.content):""},e.prototype.getCode=function(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content},e.prototype.setFromCharData=function(t){this.fg=t[a.CHAR_DATA_ATTR_INDEX],this.bg=0;var e=!1;if(t[a.CHAR_DATA_CHAR_INDEX].length>2)e=!0;else if(2===t[a.CHAR_DATA_CHAR_INDEX].length){var i=t[a.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=i&&i<=56319){var r=t[a.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=r&&r<=57343?this.content=1024*(i-55296)+r-56320+65536|t[a.CHAR_DATA_WIDTH_INDEX]<<22:e=!0}else e=!0}else this.content=t[a.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|t[a.CHAR_DATA_WIDTH_INDEX]<<22;e&&(this.combinedData=t[a.CHAR_DATA_CHAR_INDEX],this.content=2097152|t[a.CHAR_DATA_WIDTH_INDEX]<<22)},e.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},e}(s.AttributeData);e.CellData=c},855:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WHITESPACE_CELL_CODE=e.WHITESPACE_CELL_WIDTH=e.WHITESPACE_CELL_CHAR=e.NULL_CELL_CODE=e.NULL_CELL_WIDTH=e.NULL_CELL_CHAR=e.CHAR_DATA_CODE_INDEX=e.CHAR_DATA_WIDTH_INDEX=e.CHAR_DATA_CHAR_INDEX=e.CHAR_DATA_ATTR_INDEX=e.DEFAULT_EXT=e.DEFAULT_ATTR=e.DEFAULT_COLOR=void 0,e.DEFAULT_COLOR=256,e.DEFAULT_ATTR=256|e.DEFAULT_COLOR<<9,e.DEFAULT_EXT=0,e.CHAR_DATA_ATTR_INDEX=0,e.CHAR_DATA_CHAR_INDEX=1,e.CHAR_DATA_WIDTH_INDEX=2,e.CHAR_DATA_CODE_INDEX=3,e.NULL_CELL_CHAR="",e.NULL_CELL_WIDTH=1,e.NULL_CELL_CODE=0,e.WHITESPACE_CELL_CHAR=" ",e.WHITESPACE_CELL_WIDTH=1,e.WHITESPACE_CELL_CODE=32},133:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Utf8ToUtf32=e.StringToUtf32=e.utf32ToString=e.stringFromCodePoint=void 0,e.stringFromCodePoint=function(t){return t>65535?(t-=65536,String.fromCharCode(55296+(t>>10))+String.fromCharCode(t%1024+56320)):String.fromCharCode(t)},e.utf32ToString=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=t.length);for(var r="",o=e;o<i;++o){var n=t[o];n>65535?(n-=65536,r+=String.fromCharCode(55296+(n>>10))+String.fromCharCode(n%1024+56320)):r+=String.fromCharCode(n)}return r};var i=function(){function t(){this._interim=0}return t.prototype.clear=function(){this._interim=0},t.prototype.decode=function(t,e){var i=t.length;if(!i)return 0;var r=0,o=0;this._interim&&(56320<=(s=t.charCodeAt(o++))&&s<=57343?e[r++]=1024*(this._interim-55296)+s-56320+65536:(e[r++]=this._interim,e[r++]=s),this._interim=0);for(var n=o;n<i;++n){var a=t.charCodeAt(n);if(55296<=a&&a<=56319){if(++n>=i)return this._interim=a,r;var s;56320<=(s=t.charCodeAt(n))&&s<=57343?e[r++]=1024*(a-55296)+s-56320+65536:(e[r++]=a,e[r++]=s)}else 65279!==a&&(e[r++]=a)}return r},t}();e.StringToUtf32=i;var r=function(){function t(){this.interim=new Uint8Array(3)}return t.prototype.clear=function(){this.interim.fill(0)},t.prototype.decode=function(t,e){var i=t.length;if(!i)return 0;var r,o,n,a,s=0,c=0,l=0;if(this.interim[0]){var h=!1,d=this.interim[0];d&=192==(224&d)?31:224==(240&d)?15:7;for(var u=0,_=void 0;(_=63&this.interim[++u])&&u<4;)d<<=6,d|=_;for(var f=192==(224&this.interim[0])?2:224==(240&this.interim[0])?3:4,p=f-u;l<p;){if(l>=i)return 0;if(128!=(192&(_=t[l++]))){l--,h=!0;break}this.interim[u++]=_,d<<=6,d|=63&_}h||(2===f?d<128?l--:e[s++]=d:3===f?d<2048||d>=55296&&d<=57343||65279===d||(e[s++]=d):d<65536||d>1114111||(e[s++]=d)),this.interim.fill(0)}for(var g=i-4,v=l;v<i;){for(;!(!(v<g)||128&(r=t[v])||128&(o=t[v+1])||128&(n=t[v+2])||128&(a=t[v+3]));)e[s++]=r,e[s++]=o,e[s++]=n,e[s++]=a,v+=4;if((r=t[v++])<128)e[s++]=r;else if(192==(224&r)){if(v>=i)return this.interim[0]=r,s;if(128!=(192&(o=t[v++]))){v--;continue}if((c=(31&r)<<6|63&o)<128){v--;continue}e[s++]=c}else if(224==(240&r)){if(v>=i)return this.interim[0]=r,s;if(128!=(192&(o=t[v++]))){v--;continue}if(v>=i)return this.interim[0]=r,this.interim[1]=o,s;if(128!=(192&(n=t[v++]))){v--;continue}if((c=(15&r)<<12|(63&o)<<6|63&n)<2048||c>=55296&&c<=57343||65279===c)continue;e[s++]=c}else if(240==(248&r)){if(v>=i)return this.interim[0]=r,s;if(128!=(192&(o=t[v++]))){v--;continue}if(v>=i)return this.interim[0]=r,this.interim[1]=o,s;if(128!=(192&(n=t[v++]))){v--;continue}if(v>=i)return this.interim[0]=r,this.interim[1]=o,this.interim[2]=n,s;if(128!=(192&(a=t[v++]))){v--;continue}if((c=(7&r)<<18|(63&o)<<12|(63&n)<<6|63&a)<65536||c>1114111)continue;e[s++]=c}}return s},t}();e.Utf8ToUtf32=r}},e={};function i(r){var o=e[r];if(void 0!==o)return o.exports;var n=e[r]={exports:{}};return t[r].call(n.exports,n,n.exports,i),n.exports}var r={};return(()=>{var t=r;Object.defineProperty(t,"__esModule",{value:!0}),t.WebglAddon=void 0;var e=i(666),o=i(345),n=i(399),a=function(){function t(t){this._preserveDrawingBuffer=t,this._onChangeTextureAtlas=new o.EventEmitter,this._onContextLoss=new o.EventEmitter}return Object.defineProperty(t.prototype,"onChangeTextureAtlas",{get:function(){return this._onChangeTextureAtlas.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onContextLoss",{get:function(){return this._onContextLoss.event},enumerable:!1,configurable:!0}),t.prototype.activate=function(t){if(!t.element)throw new Error("Cannot activate WebglAddon before Terminal.open");if(n.isSafari)throw new Error("Webgl is not currently supported on Safari");this._terminal=t;var i=t._core._renderService,r=t._core._characterJoinerService,a=t._core._coreBrowserService,s=t._core.coreService,c=t._core._decorationService,l=t._core._colorManager.colors;this._renderer=new e.WebglRenderer(t,l,r,a,s,c,this._preserveDrawingBuffer),(0,o.forwardEvent)(this._renderer.onContextLoss,this._onContextLoss),(0,o.forwardEvent)(this._renderer.onChangeTextureAtlas,this._onChangeTextureAtlas),i.setRenderer(this._renderer)},t.prototype.dispose=function(){var t;if(!this._terminal)throw new Error("Cannot dispose WebglAddon because it is activated");var e=this._terminal._core._renderService;e.setRenderer(this._terminal._core._createRenderer()),e.onResize(this._terminal.cols,this._terminal.rows),null===(t=this._renderer)||void 0===t||t.dispose(),this._renderer=void 0},Object.defineProperty(t.prototype,"textureAtlas",{get:function(){var t;return null===(t=this._renderer)||void 0===t?void 0:t.textureAtlas},enumerable:!1,configurable:!0}),t.prototype.clearTextureAtlas=function(){var t;null===(t=this._renderer)||void 0===t||t.clearCharAtlas()},t}();t.WebglAddon=a})(),r})()}));
//# sourceMappingURL=xterm-addon-webgl.js.map