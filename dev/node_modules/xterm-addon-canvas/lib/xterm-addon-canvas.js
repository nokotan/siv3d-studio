!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.CanvasAddon=e():t.CanvasAddon=e()}(self,(function(){return(()=>{"use strict";var t={903:function(t,e,i){var r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],r=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.BaseRenderLayer=void 0;var o=i(855),n=i(302),s=i(713),a=i(147),c=i(634),l=i(160),h=i(503),u=i(14),d=function(){function t(t,e,i,r,o,n,s,a,c){this._container=t,this._alpha=r,this._colors=o,this._rendererId=n,this._bufferService=s,this._optionsService=a,this._decorationService=c,this._scaledCharWidth=0,this._scaledCharHeight=0,this._scaledCellWidth=0,this._scaledCellHeight=0,this._scaledCharLeft=0,this._scaledCharTop=0,this._columnSelectMode=!1,this._currentGlyphIdentifier={chars:"",code:0,bg:0,fg:0,bold:!1,dim:!1,italic:!1},this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-".concat(e,"-layer")),this._canvas.style.zIndex=i.toString(),this._initCanvas(),this._container.appendChild(this._canvas)}return Object.defineProperty(t.prototype,"canvas",{get:function(){return this._canvas},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){var t;(0,h.removeElementFromParent)(this._canvas),null===(t=this._charAtlas)||void 0===t||t.dispose()},t.prototype._initCanvas=function(){this._ctx=(0,c.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()},t.prototype.onOptionsChanged=function(){},t.prototype.onBlur=function(){},t.prototype.onFocus=function(){},t.prototype.onCursorMove=function(){},t.prototype.onGridChanged=function(t,e){},t.prototype.onSelectionChanged=function(t,e,i){void 0===i&&(i=!1),this._selectionStart=t,this._selectionEnd=e,this._columnSelectMode=i},t.prototype.setColors=function(t){this._refreshCharAtlas(t)},t.prototype._setTransparency=function(t){if(t!==this._alpha){var e=this._canvas;this._alpha=t,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,e),this._refreshCharAtlas(this._colors),this.onGridChanged(0,this._bufferService.rows-1)}},t.prototype._refreshCharAtlas=function(t){this._scaledCharWidth<=0&&this._scaledCharHeight<=0||(this._charAtlas=(0,s.acquireCharAtlas)(this._optionsService.rawOptions,this._rendererId,t,this._scaledCharWidth,this._scaledCharHeight),this._charAtlas.warmUp())},t.prototype.resize=function(t){this._scaledCellWidth=t.scaledCellWidth,this._scaledCellHeight=t.scaledCellHeight,this._scaledCharWidth=t.scaledCharWidth,this._scaledCharHeight=t.scaledCharHeight,this._scaledCharLeft=t.scaledCharLeft,this._scaledCharTop=t.scaledCharTop,this._canvas.width=t.scaledCanvasWidth,this._canvas.height=t.scaledCanvasHeight,this._canvas.style.width="".concat(t.canvasWidth,"px"),this._canvas.style.height="".concat(t.canvasHeight,"px"),this._alpha||this._clearAll(),this._refreshCharAtlas(this._colors)},t.prototype.clearTextureAtlas=function(){var t;null===(t=this._charAtlas)||void 0===t||t.clear()},t.prototype._fillCells=function(t,e,i,r){this._ctx.fillRect(t*this._scaledCellWidth,e*this._scaledCellHeight,i*this._scaledCellWidth,r*this._scaledCellHeight)},t.prototype._fillMiddleLineAtCells=function(t,e,i){void 0===i&&(i=1);var r=Math.ceil(.5*this._scaledCellHeight);this._ctx.fillRect(t*this._scaledCellWidth,(e+1)*this._scaledCellHeight-r-window.devicePixelRatio,i*this._scaledCellWidth,window.devicePixelRatio)},t.prototype._fillBottomLineAtCells=function(t,e,i,r){void 0===i&&(i=1),void 0===r&&(r=0),this._ctx.fillRect(t*this._scaledCellWidth,(e+1)*this._scaledCellHeight+r-window.devicePixelRatio-1,i*this._scaledCellWidth,window.devicePixelRatio)},t.prototype._curlyUnderlineAtCell=function(t,e,i){void 0===i&&(i=1),this._ctx.save(),this._ctx.beginPath(),this._ctx.strokeStyle=this._ctx.fillStyle,this._ctx.lineWidth=window.devicePixelRatio;for(var r=0;r<i;r++){var o=(t+r)*this._scaledCellWidth,n=(t+r+.5)*this._scaledCellWidth,s=(t+r+1)*this._scaledCellWidth,a=(e+1)*this._scaledCellHeight-window.devicePixelRatio-1,c=a-window.devicePixelRatio,l=a+window.devicePixelRatio;this._ctx.moveTo(o,a),this._ctx.bezierCurveTo(o,c,n,c,n,a),this._ctx.bezierCurveTo(n,l,s,l,s,a)}this._ctx.stroke(),this._ctx.restore()},t.prototype._dottedUnderlineAtCell=function(t,e,i){void 0===i&&(i=1),this._ctx.save(),this._ctx.beginPath(),this._ctx.strokeStyle=this._ctx.fillStyle,this._ctx.lineWidth=window.devicePixelRatio,this._ctx.setLineDash([2*window.devicePixelRatio,window.devicePixelRatio]);var r=t*this._scaledCellWidth,o=(e+1)*this._scaledCellHeight-window.devicePixelRatio-1;this._ctx.moveTo(r,o);for(var n=0;n<i;n++){var s=(t+i+n)*this._scaledCellWidth;this._ctx.lineTo(s,o)}this._ctx.stroke(),this._ctx.closePath(),this._ctx.restore()},t.prototype._dashedUnderlineAtCell=function(t,e,i){void 0===i&&(i=1),this._ctx.save(),this._ctx.beginPath(),this._ctx.strokeStyle=this._ctx.fillStyle,this._ctx.lineWidth=window.devicePixelRatio,this._ctx.setLineDash([4*window.devicePixelRatio,3*window.devicePixelRatio]);var r=t*this._scaledCellWidth,o=(t+i)*this._scaledCellWidth,n=(e+1)*this._scaledCellHeight-window.devicePixelRatio-1;this._ctx.moveTo(r,n),this._ctx.lineTo(o,n),this._ctx.stroke(),this._ctx.closePath(),this._ctx.restore()},t.prototype._fillLeftLineAtCell=function(t,e,i){this._ctx.fillRect(t*this._scaledCellWidth,e*this._scaledCellHeight,window.devicePixelRatio*i,this._scaledCellHeight)},t.prototype._strokeRectAtCell=function(t,e,i,r){this._ctx.lineWidth=window.devicePixelRatio,this._ctx.strokeRect(t*this._scaledCellWidth+window.devicePixelRatio/2,e*this._scaledCellHeight+window.devicePixelRatio/2,i*this._scaledCellWidth-window.devicePixelRatio,r*this._scaledCellHeight-window.devicePixelRatio)},t.prototype._clearAll=function(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))},t.prototype._clearCells=function(t,e,i,r){this._alpha?this._ctx.clearRect(t*this._scaledCellWidth,e*this._scaledCellHeight,i*this._scaledCellWidth,r*this._scaledCellHeight):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(t*this._scaledCellWidth,e*this._scaledCellHeight,i*this._scaledCellWidth,r*this._scaledCellHeight))},t.prototype._fillCharTrueColor=function(t,e,i){this._ctx.font=this._getFont(!1,!1),this._ctx.textBaseline=n.TEXT_BASELINE,this._clipRow(i);var r=!1;!1!==this._optionsService.rawOptions.customGlyphs&&(r=(0,u.tryDrawCustomChar)(this._ctx,t.getChars(),e*this._scaledCellWidth,i*this._scaledCellHeight,this._scaledCellWidth,this._scaledCellHeight)),r||this._ctx.fillText(t.getChars(),e*this._scaledCellWidth+this._scaledCharLeft,i*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight)},t.prototype._drawChars=function(t,e,i){var s,a,c,l=this._getContrastColor(t,e,i);if(l||t.isFgRGB()||t.isBgRGB())this._drawUncachedChars(t,e,i,l);else{var h,u;t.isInverse()?(h=t.isBgDefault()?n.INVERTED_DEFAULT_COLOR:t.getBgColor(),u=t.isFgDefault()?n.INVERTED_DEFAULT_COLOR:t.getFgColor()):(u=t.isBgDefault()?o.DEFAULT_COLOR:t.getBgColor(),h=t.isFgDefault()?o.DEFAULT_COLOR:t.getFgColor()),h+=this._optionsService.rawOptions.drawBoldTextInBrightColors&&t.isBold()&&h<8?8:0,this._currentGlyphIdentifier.chars=t.getChars()||o.WHITESPACE_CELL_CHAR,this._currentGlyphIdentifier.code=t.getCode()||o.WHITESPACE_CELL_CODE,this._currentGlyphIdentifier.bg=u,this._currentGlyphIdentifier.fg=h,this._currentGlyphIdentifier.bold=!!t.isBold(),this._currentGlyphIdentifier.dim=!!t.isDim(),this._currentGlyphIdentifier.italic=!!t.isItalic();var d=!1;try{for(var f=r(this._decorationService.getDecorationsAtCell(e,i)),_=f.next();!_.done;_=f.next()){var p=_.value;if(p.backgroundColorRGB||p.foregroundColorRGB){d=!0;break}}}catch(t){s={error:t}}finally{try{_&&!_.done&&(a=f.return)&&a.call(f)}finally{if(s)throw s.error}}!d&&(null===(c=this._charAtlas)||void 0===c?void 0:c.draw(this._ctx,this._currentGlyphIdentifier,e*this._scaledCellWidth+this._scaledCharLeft,i*this._scaledCellHeight+this._scaledCharTop))||this._drawUncachedChars(t,e,i)}},t.prototype._drawUncachedChars=function(t,e,i,r){if(this._ctx.save(),this._ctx.font=this._getFont(!!t.isBold(),!!t.isItalic()),this._ctx.textBaseline=n.TEXT_BASELINE,t.isInverse())if(r)this._ctx.fillStyle=r.css;else if(t.isBgDefault())this._ctx.fillStyle=l.color.opaque(this._colors.background).css;else if(t.isBgRGB())this._ctx.fillStyle="rgb(".concat(a.AttributeData.toColorRGB(t.getBgColor()).join(","),")");else{var o=t.getBgColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&t.isBold()&&o<8&&(o+=8),this._ctx.fillStyle=this._colors.ansi[o].css}else if(r)this._ctx.fillStyle=r.css;else if(t.isFgDefault())this._ctx.fillStyle=this._colors.foreground.css;else if(t.isFgRGB())this._ctx.fillStyle="rgb(".concat(a.AttributeData.toColorRGB(t.getFgColor()).join(","),")");else{var s=t.getFgColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&t.isBold()&&s<8&&(s+=8),this._ctx.fillStyle=this._colors.ansi[s].css}this._clipRow(i),t.isDim()&&(this._ctx.globalAlpha=n.DIM_OPACITY);var c=!1;!1!==this._optionsService.rawOptions.customGlyphs&&(c=(0,u.tryDrawCustomChar)(this._ctx,t.getChars(),e*this._scaledCellWidth,i*this._scaledCellHeight,this._scaledCellWidth,this._scaledCellHeight)),c||this._ctx.fillText(t.getChars(),e*this._scaledCellWidth+this._scaledCharLeft,i*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight),this._ctx.restore()},t.prototype._clipRow=function(t){this._ctx.beginPath(),this._ctx.rect(0,t*this._scaledCellHeight,this._bufferService.cols*this._scaledCellWidth,this._scaledCellHeight),this._ctx.clip()},t.prototype._getFont=function(t,e){var i=t?this._optionsService.rawOptions.fontWeightBold:this._optionsService.rawOptions.fontWeight;return"".concat(e?"italic":""," ").concat(i," ").concat(this._optionsService.rawOptions.fontSize*window.devicePixelRatio,"px ").concat(this._optionsService.rawOptions.fontFamily)},t.prototype._getContrastColor=function(t,e,i){var o,n,s,a,h=!1;try{for(var u=r(this._decorationService.getDecorationsAtCell(e,i)),d=u.next();!d.done;d=u.next()){var f=d.value;"top"!==f.options.layer&&h||(f.backgroundColorRGB&&(s=f.backgroundColorRGB.rgba),f.foregroundColorRGB&&(a=f.foregroundColorRGB.rgba),h="top"===f.options.layer)}}catch(t){o={error:t}}finally{try{d&&!d.done&&(n=u.return)&&n.call(u)}finally{if(o)throw o.error}}if(h||this._colors.selectionForeground&&this._isCellInSelection(e,i)&&(a=this._colors.selectionForeground.rgba),s||a||1!==this._optionsService.rawOptions.minimumContrastRatio&&!(0,c.excludeFromContrastRatioDemands)(t.getCode())){if(!s&&!a){var _=this._colors.contrastCache.getColor(t.bg,t.fg);if(void 0!==_)return _||void 0}var p=t.getFgColor(),v=t.getFgColorMode(),g=t.getBgColor(),C=t.getBgColorMode(),y=!!t.isInverse(),L=!!t.isInverse();if(y){var w=p;p=g,g=w;var b=v;v=C,C=b}var x=this._resolveBackgroundRgba(void 0!==s?50331648:C,null!=s?s:g,y),m=this._resolveForegroundRgba(v,p,y,L),M=l.rgba.ensureContrastRatio(null!=s?s:x,null!=a?a:m,this._optionsService.rawOptions.minimumContrastRatio);if(!M){if(!a)return void this._colors.contrastCache.setColor(t.bg,t.fg,null);M=a}var S={css:l.channels.toCss(M>>24&255,M>>16&255,M>>8&255),rgba:M};return s||a||this._colors.contrastCache.setColor(t.bg,t.fg,S),S}},t.prototype._resolveBackgroundRgba=function(t,e,i){switch(t){case 16777216:case 33554432:return this._colors.ansi[e].rgba;case 50331648:return e<<8;default:return i?this._colors.foreground.rgba:this._colors.background.rgba}},t.prototype._resolveForegroundRgba=function(t,e,i,r){switch(t){case 16777216:case 33554432:return this._optionsService.rawOptions.drawBoldTextInBrightColors&&r&&e<8&&(e+=8),this._colors.ansi[e].rgba;case 50331648:return e<<8;default:return i?this._colors.background.rgba:this._colors.foreground.rgba}},t.prototype._isCellInSelection=function(t,e){var i=this._selectionStart,r=this._selectionEnd;return!(!i||!r)&&(this._columnSelectMode?t>=i[0]&&e>=i[1]&&t<r[0]&&e<r[1]:e>i[1]&&e<r[1]||i[1]===r[1]&&e===i[1]&&t>=i[0]&&t<r[0]||i[1]<r[1]&&e===r[1]&&t<r[0]||i[1]<r[1]&&e===i[1]&&t>=i[0])},t}();e.BaseRenderLayer=d},949:function(t,e,i){var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],r=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasRenderer=void 0;var s=i(744),a=i(630),c=i(873),l=i(43),h=i(859),u=i(713),d=i(345),f=i(476),_=1,p=function(t){function e(e,i,r,o,n,h,u,p,v,g){var C=t.call(this)||this;C._colors=e,C._screenElement=i,C._bufferService=o,C._charSizeService=n,C._optionsService=h,C._id=_++,C._onRequestRedraw=new d.EventEmitter;var y=C._optionsService.rawOptions.allowTransparency;return C._renderLayers=[new s.TextRenderLayer(C._screenElement,0,C._colors,y,C._id,C._bufferService,C._optionsService,u,g),new a.SelectionRenderLayer(C._screenElement,1,C._colors,C._id,C._bufferService,v,g,C._optionsService),new l.LinkRenderLayer(C._screenElement,2,C._colors,C._id,r,C._bufferService,C._optionsService,g),new c.CursorRenderLayer(C._screenElement,3,C._colors,C._id,C._onRequestRedraw,C._bufferService,C._optionsService,p,v,g)],C.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},C._devicePixelRatio=window.devicePixelRatio,C._updateDimensions(),C.register((0,f.observeDevicePixelDimensions)(C._renderLayers[0].canvas,(function(t,e){return C._setCanvasDevicePixelDimensions(t,e)}))),C.onOptionsChanged(),C}return o(e,t),Object.defineProperty(e.prototype,"onRequestRedraw",{get:function(){return this._onRequestRedraw.event},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){var e,i;try{for(var r=n(this._renderLayers),o=r.next();!o.done;o=r.next())o.value.dispose()}catch(t){e={error:t}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(e)throw e.error}}t.prototype.dispose.call(this),(0,u.removeTerminalFromCache)(this._id)},e.prototype.onDevicePixelRatioChange=function(){this._devicePixelRatio!==window.devicePixelRatio&&(this._devicePixelRatio=window.devicePixelRatio,this.onResize(this._bufferService.cols,this._bufferService.rows))},e.prototype.setColors=function(t){var e,i;this._colors=t;try{for(var r=n(this._renderLayers),o=r.next();!o.done;o=r.next()){var s=o.value;s.setColors(this._colors),s.reset()}}catch(t){e={error:t}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(e)throw e.error}}},e.prototype.onResize=function(t,e){var i,r;this._updateDimensions();try{for(var o=n(this._renderLayers),s=o.next();!s.done;s=o.next())s.value.resize(this.dimensions)}catch(t){i={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}this._screenElement.style.width="".concat(this.dimensions.canvasWidth,"px"),this._screenElement.style.height="".concat(this.dimensions.canvasHeight,"px")},e.prototype.onCharSizeChanged=function(){this.onResize(this._bufferService.cols,this._bufferService.rows)},e.prototype.onBlur=function(){this._runOperation((function(t){return t.onBlur()}))},e.prototype.onFocus=function(){this._runOperation((function(t){return t.onFocus()}))},e.prototype.onSelectionChanged=function(t,e,i){void 0===i&&(i=!1),this._runOperation((function(r){return r.onSelectionChanged(t,e,i)})),this._colors.selectionForeground&&this._onRequestRedraw.fire({start:0,end:this._bufferService.rows-1})},e.prototype.onCursorMove=function(){this._runOperation((function(t){return t.onCursorMove()}))},e.prototype.onOptionsChanged=function(){this._runOperation((function(t){return t.onOptionsChanged()}))},e.prototype.clear=function(){this._runOperation((function(t){return t.reset()}))},e.prototype._runOperation=function(t){var e,i;try{for(var r=n(this._renderLayers),o=r.next();!o.done;o=r.next())t(o.value)}catch(t){e={error:t}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(e)throw e.error}}},e.prototype.renderRows=function(t,e){var i,r;try{for(var o=n(this._renderLayers),s=o.next();!s.done;s=o.next())s.value.onGridChanged(t,e)}catch(t){i={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}},e.prototype.clearTextureAtlas=function(){var t,e;try{for(var i=n(this._renderLayers),r=i.next();!r.done;r=i.next())r.value.clearTextureAtlas()}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},e.prototype._updateDimensions=function(){this._charSizeService.hasValidSize&&(this.dimensions.scaledCharWidth=Math.floor(this._charSizeService.width*window.devicePixelRatio),this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.rawOptions.lineHeight),this.dimensions.scaledCharTop=1===this._optionsService.rawOptions.lineHeight?0:Math.round((this.dimensions.scaledCellHeight-this.dimensions.scaledCharHeight)/2),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.scaledCharLeft=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.scaledCanvasHeight=this._bufferService.rows*this.dimensions.scaledCellHeight,this.dimensions.scaledCanvasWidth=this._bufferService.cols*this.dimensions.scaledCellWidth,this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows,this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols)},e.prototype._setCanvasDevicePixelDimensions=function(t,e){var i,r;this.dimensions.scaledCanvasHeight=e,this.dimensions.scaledCanvasWidth=t;try{for(var o=n(this._renderLayers),s=o.next();!s.done;s=o.next())s.value.resize(this.dimensions)}catch(t){i={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}this._requestRedrawViewport()},e.prototype._requestRedrawViewport=function(){this._onRequestRedraw.fire({start:0,end:this._bufferService.rows-1})},e}(h.Disposable);e.CanvasRenderer=p},873:function(t,e,i){var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.CursorRenderLayer=void 0;var n=i(903),s=i(782),a=600,c=function(t){function e(e,i,r,o,n,a,c,l,h,u){var d=t.call(this,e,"cursor",i,!0,r,o,a,c,u)||this;return d._onRequestRedraw=n,d._coreService=l,d._coreBrowserService=h,d._cell=new s.CellData,d._state={x:0,y:0,isFocused:!1,style:"",width:0},d._cursorRenderers={bar:d._renderBarCursor.bind(d),block:d._renderBlockCursor.bind(d),underline:d._renderUnderlineCursor.bind(d)},d}return o(e,t),e.prototype.dispose=function(){this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=void 0),t.prototype.dispose.call(this)},e.prototype.resize=function(e){t.prototype.resize.call(this,e),this._state={x:0,y:0,isFocused:!1,style:"",width:0}},e.prototype.reset=function(){var t;this._clearCursor(),null===(t=this._cursorBlinkStateManager)||void 0===t||t.restartBlinkAnimation(),this.onOptionsChanged()},e.prototype.onBlur=function(){var t;null===(t=this._cursorBlinkStateManager)||void 0===t||t.pause(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},e.prototype.onFocus=function(){var t;null===(t=this._cursorBlinkStateManager)||void 0===t||t.resume(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},e.prototype.onOptionsChanged=function(){var t,e=this;this._optionsService.rawOptions.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new l(this._coreBrowserService.isFocused,(function(){e._render(!0)}))):(null===(t=this._cursorBlinkStateManager)||void 0===t||t.dispose(),this._cursorBlinkStateManager=void 0),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},e.prototype.onCursorMove=function(){var t;null===(t=this._cursorBlinkStateManager)||void 0===t||t.restartBlinkAnimation()},e.prototype.onGridChanged=function(t,e){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?this._render(!1):this._cursorBlinkStateManager.restartBlinkAnimation()},e.prototype._render=function(t){if(this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden){var e=this._bufferService.buffer.ybase+this._bufferService.buffer.y,i=e-this._bufferService.buffer.ydisp;if(i<0||i>=this._bufferService.rows)this._clearCursor();else{var r=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1);if(this._bufferService.buffer.lines.get(e).loadCell(r,this._cell),void 0!==this._cell.content){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css;var o=this._optionsService.rawOptions.cursorStyle;return o&&"block"!==o?this._cursorRenderers[o](r,i,this._cell):this._renderBlurCursor(r,i,this._cell),this._ctx.restore(),this._state.x=r,this._state.y=i,this._state.isFocused=!1,this._state.style=o,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isCursorVisible){if(this._state){if(this._state.x===r&&this._state.y===i&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===this._optionsService.rawOptions.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[this._optionsService.rawOptions.cursorStyle||"block"](r,i,this._cell),this._ctx.restore(),this._state.x=r,this._state.y=i,this._state.isFocused=!1,this._state.style=this._optionsService.rawOptions.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}}else this._clearCursor()},e.prototype._clearCursor=function(){this._state&&(window.devicePixelRatio<1?this._clearAll():this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})},e.prototype._renderBarCursor=function(t,e,i){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillLeftLineAtCell(t,e,this._optionsService.rawOptions.cursorWidth),this._ctx.restore()},e.prototype._renderBlockCursor=function(t,e,i){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillCells(t,e,i.getWidth(),1),this._ctx.fillStyle=this._colors.cursorAccent.css,this._fillCharTrueColor(i,t,e),this._ctx.restore()},e.prototype._renderUnderlineCursor=function(t,e,i){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillBottomLineAtCells(t,e),this._ctx.restore()},e.prototype._renderBlurCursor=function(t,e,i){this._ctx.save(),this._ctx.strokeStyle=this._colors.cursor.css,this._strokeRectAtCell(t,e,i.getWidth(),1),this._ctx.restore()},e}(n.BaseRenderLayer);e.CursorRenderLayer=c;var l=function(){function t(t,e){this._renderCallback=e,this.isCursorVisible=!0,t&&this._restartInterval()}return Object.defineProperty(t.prototype,"isPaused",{get:function(){return!(this._blinkStartTimeout||this._blinkInterval)},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},t.prototype.restartBlinkAnimation=function(){var t=this;this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=window.requestAnimationFrame((function(){t._renderCallback(),t._animationFrame=void 0}))))},t.prototype._restartInterval=function(t){var e=this;void 0===t&&(t=a),this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=window.setTimeout((function(){if(e._animationTimeRestarted){var t=a-(Date.now()-e._animationTimeRestarted);if(e._animationTimeRestarted=void 0,t>0)return void e._restartInterval(t)}e.isCursorVisible=!1,e._animationFrame=window.requestAnimationFrame((function(){e._renderCallback(),e._animationFrame=void 0})),e._blinkInterval=window.setInterval((function(){if(e._animationTimeRestarted){var t=a-(Date.now()-e._animationTimeRestarted);return e._animationTimeRestarted=void 0,void e._restartInterval(t)}e.isCursorVisible=!e.isCursorVisible,e._animationFrame=window.requestAnimationFrame((function(){e._renderCallback(),e._animationFrame=void 0}))}),a)}),t)},t.prototype.pause=function(){this.isCursorVisible=!0,this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},t.prototype.resume=function(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()},t}()},574:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GridCache=void 0;var i=function(){function t(){this.cache=[]}return t.prototype.resize=function(t,e){for(var i=0;i<t;i++){this.cache.length<=i&&this.cache.push([]);for(var r=this.cache[i].length;r<e;r++)this.cache[i].push(void 0);this.cache[i].length=e}this.cache.length=t},t.prototype.clear=function(){for(var t=0;t<this.cache.length;t++)for(var e=0;e<this.cache[t].length;e++)this.cache[t][e]=void 0},t}();e.GridCache=i},43:function(t,e,i){var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.LinkRenderLayer=void 0;var n=i(903),s=i(302),a=i(433),c=function(t){function e(e,i,r,o,n,s,a,c){var l=t.call(this,e,"link",i,!0,r,o,s,a,c)||this;return n.onShowLinkUnderline((function(t){return l._onShowLinkUnderline(t)})),n.onHideLinkUnderline((function(t){return l._onHideLinkUnderline(t)})),l}return o(e,t),e.prototype.resize=function(e){t.prototype.resize.call(this,e),this._state=void 0},e.prototype.reset=function(){this._clearCurrentLink()},e.prototype._clearCurrentLink=function(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);var t=this._state.y2-this._state.y1-1;t>0&&this._clearCells(0,this._state.y1+1,this._state.cols,t),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}},e.prototype._onShowLinkUnderline=function(t){if(t.fg===s.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._colors.background.css:t.fg&&(0,a.is256Color)(t.fg)?this._ctx.fillStyle=this._colors.ansi[t.fg].css:this._ctx.fillStyle=this._colors.foreground.css,t.y1===t.y2)this._fillBottomLineAtCells(t.x1,t.y1,t.x2-t.x1);else{this._fillBottomLineAtCells(t.x1,t.y1,t.cols-t.x1);for(var e=t.y1+1;e<t.y2;e++)this._fillBottomLineAtCells(0,e,t.cols);this._fillBottomLineAtCells(0,t.y2,t.x2)}this._state=t},e.prototype._onHideLinkUnderline=function(t){this._clearCurrentLink()},e}(n.BaseRenderLayer);e.LinkRenderLayer=c},630:function(t,e,i){var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.SelectionRenderLayer=void 0;var n=function(t){function e(e,i,r,o,n,s,a,c){var l=t.call(this,e,"selection",i,!0,r,o,n,c,a)||this;return l._coreBrowserService=s,l._clearState(),l}return o(e,t),e.prototype._clearState=function(){this._state={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}},e.prototype.resize=function(e){t.prototype.resize.call(this,e),this._selectionStart&&this._selectionEnd&&this._redrawSelection(this._selectionStart,this._selectionEnd,this._columnSelectMode)},e.prototype.reset=function(){this._state.start&&this._state.end&&(this._clearState(),this._clearAll())},e.prototype.onBlur=function(){this.reset(),this._redrawSelection(this._selectionStart,this._selectionEnd,this._columnSelectMode)},e.prototype.onFocus=function(){this.reset(),this._redrawSelection(this._selectionStart,this._selectionEnd,this._columnSelectMode)},e.prototype.onSelectionChanged=function(e,i,r){t.prototype.onSelectionChanged.call(this,e,i,r),this._redrawSelection(e,i,r)},e.prototype._redrawSelection=function(t,e,i){if(this._didStateChange(t,e,i,this._bufferService.buffer.ydisp))if(this._clearAll(),t&&e){var r=t[1]-this._bufferService.buffer.ydisp,o=e[1]-this._bufferService.buffer.ydisp,n=Math.max(r,0),s=Math.min(o,this._bufferService.rows-1);if(n>=this._bufferService.rows||s<0)this._state.ydisp=this._bufferService.buffer.ydisp;else{if(this._ctx.fillStyle=(this._coreBrowserService.isFocused?this._colors.selectionBackgroundTransparent:this._colors.selectionInactiveBackgroundTransparent).css,i){var a=t[0],c=e[0]-a,l=s-n+1;this._fillCells(a,n,c,l)}else{a=r===n?t[0]:0;var h=n===o?e[0]:this._bufferService.cols;this._fillCells(a,n,h-a,1);var u=Math.max(s-n-1,0);if(this._fillCells(0,n+1,this._bufferService.cols,u),n!==s){var d=o===s?e[0]:this._bufferService.cols;this._fillCells(0,s,d,1)}}this._state.start=[t[0],t[1]],this._state.end=[e[0],e[1]],this._state.columnSelectMode=i,this._state.ydisp=this._bufferService.buffer.ydisp}}else this._clearState()},e.prototype._didStateChange=function(t,e,i,r){return!this._areCoordinatesEqual(t,this._state.start)||!this._areCoordinatesEqual(e,this._state.end)||i!==this._state.columnSelectMode||r!==this._state.ydisp},e.prototype._areCoordinatesEqual=function(t,e){return!(!t||!e)&&t[0]===e[0]&&t[1]===e[1]},e}(i(903).BaseRenderLayer);e.SelectionRenderLayer=n},744:function(t,e,i){var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],r=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.TextRenderLayer=void 0;var s=i(574),a=i(903),c=i(147),l=i(855),h=i(782),u=i(577),d=i(160),f=function(t){function e(e,i,r,o,n,a,c,l,u){var d=t.call(this,e,"text",i,o,r,n,a,c,u)||this;return d._characterJoinerService=l,d._characterWidth=0,d._characterFont="",d._characterOverlapCache={},d._workCell=new h.CellData,d._state=new s.GridCache,d}return o(e,t),e.prototype.resize=function(e){t.prototype.resize.call(this,e);var i=this._getFont(!1,!1);this._characterWidth===e.scaledCharWidth&&this._characterFont===i||(this._characterWidth=e.scaledCharWidth,this._characterFont=i,this._characterOverlapCache={}),this._state.clear(),this._state.resize(this._bufferService.cols,this._bufferService.rows)},e.prototype.reset=function(){this._state.clear(),this._clearAll()},e.prototype._forEachCell=function(t,e,i){for(var r=t;r<=e;r++)for(var o=r+this._bufferService.buffer.ydisp,n=this._bufferService.buffer.lines.get(o),s=this._characterJoinerService.getJoinedCharacters(o),a=0;a<this._bufferService.cols;a++){n.loadCell(a,this._workCell);var c=this._workCell,h=!1,d=a;if(0!==c.getWidth()){if(s.length>0&&a===s[0][0]){h=!0;var f=s.shift();c=new u.JoinedCellData(this._workCell,n.translateToString(!0,f[0],f[1]),f[1]-f[0]),d=f[1]-1}!h&&this._isOverlapping(c)&&d<n.length-1&&n.getCodePoint(d+1)===l.NULL_CELL_CODE&&(c.content&=-12582913,c.content|=2<<22),i(c,a,r),a=d}}},e.prototype._drawBackground=function(t,e){var i=this,r=this._ctx,o=this._bufferService.cols,s=0,a=0,l=null;r.save(),this._forEachCell(t,e,(function(t,e,h){var u,f,_=null;t.isInverse()?_=t.isFgDefault()?i._colors.foreground.css:t.isFgRGB()?"rgb(".concat(c.AttributeData.toColorRGB(t.getFgColor()).join(","),")"):i._colors.ansi[t.getFgColor()].css:t.isBgRGB()?_="rgb(".concat(c.AttributeData.toColorRGB(t.getBgColor()).join(","),")"):t.isBgPalette()&&(_=i._colors.ansi[t.getBgColor()].css),_&&t.isDim()&&(_=d.color.multiplyOpacity(d.css.toColor(_),.5).css);var p=!1;try{for(var v=n(i._decorationService.getDecorationsAtCell(e,i._bufferService.buffer.ydisp+h)),g=v.next();!g.done;g=v.next()){var C=g.value;"top"!==C.options.layer&&p||(C.backgroundColorRGB&&(_=C.backgroundColorRGB.css),p="top"===C.options.layer)}}catch(t){u={error:t}}finally{try{g&&!g.done&&(f=v.return)&&f.call(v)}finally{if(u)throw u.error}}null===l&&(s=e,a=h),h!==a?(r.fillStyle=l||"",i._fillCells(s,a,o-s,1),s=e,a=h):l!==_&&(r.fillStyle=l||"",i._fillCells(s,a,e-s,1),s=e,a=h),l=_})),null!==l&&(r.fillStyle=l,this._fillCells(s,a,o-s,1)),r.restore()},e.prototype._drawForeground=function(t,e){var i=this;this._forEachCell(t,e,(function(t,e,r){if(!t.isInvisible()&&(i._drawChars(t,e,r),t.isUnderline()||t.isStrikethrough())){if(i._ctx.save(),t.isInverse())if(t.isBgDefault())i._ctx.fillStyle=i._colors.background.css;else if(t.isBgRGB())i._ctx.fillStyle="rgb(".concat(c.AttributeData.toColorRGB(t.getBgColor()).join(","),")");else{var o=t.getBgColor();i._optionsService.rawOptions.drawBoldTextInBrightColors&&t.isBold()&&o<8&&(o+=8),i._ctx.fillStyle=i._colors.ansi[o].css}else if(t.isFgDefault())i._ctx.fillStyle=i._colors.foreground.css;else if(t.isFgRGB())i._ctx.fillStyle="rgb(".concat(c.AttributeData.toColorRGB(t.getFgColor()).join(","),")");else{var n=t.getFgColor();i._optionsService.rawOptions.drawBoldTextInBrightColors&&t.isBold()&&n<8&&(n+=8),i._ctx.fillStyle=i._colors.ansi[n].css}if(t.isStrikethrough()&&i._fillMiddleLineAtCells(e,r,t.getWidth()),t.isUnderline())switch(t.isUnderlineColorDefault()||(t.isUnderlineColorRGB()?i._ctx.fillStyle="rgb(".concat(c.AttributeData.toColorRGB(t.getUnderlineColor()).join(","),")"):(n=t.getUnderlineColor(),i._optionsService.rawOptions.drawBoldTextInBrightColors&&t.isBold()&&n<8&&(n+=8),i._ctx.fillStyle=i._colors.ansi[n].css)),t.extended.underlineStyle){case 2:i._fillBottomLineAtCells(e,r,t.getWidth(),-window.devicePixelRatio),i._fillBottomLineAtCells(e,r,t.getWidth(),window.devicePixelRatio);break;case 3:i._curlyUnderlineAtCell(e,r,t.getWidth());break;case 4:i._dottedUnderlineAtCell(e,r,t.getWidth());break;case 5:i._dashedUnderlineAtCell(e,r,t.getWidth());break;default:i._fillBottomLineAtCells(e,r,t.getWidth())}i._ctx.restore()}}))},e.prototype.onGridChanged=function(t,e){0!==this._state.cache.length&&(this._charAtlas&&this._charAtlas.beginFrame(),this._clearCells(0,t,this._bufferService.cols,e-t+1),this._drawBackground(t,e),this._drawForeground(t,e))},e.prototype.onOptionsChanged=function(){this._setTransparency(this._optionsService.rawOptions.allowTransparency)},e.prototype._isOverlapping=function(t){if(1!==t.getWidth())return!1;if(t.getCode()<256)return!1;var e=t.getChars();if(this._characterOverlapCache.hasOwnProperty(e))return this._characterOverlapCache[e];this._ctx.save(),this._ctx.font=this._characterFont;var i=Math.floor(this._ctx.measureText(e).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[e]=i,i},e}(a.BaseRenderLayer);e.TextRenderLayer=f},13:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseCharAtlas=void 0;var i=function(){function t(){this._didWarmUp=!1}return t.prototype.dispose=function(){},t.prototype.warmUp=function(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)},t.prototype._doWarmUp=function(){},t.prototype.clear=function(){},t.prototype.beginFrame=function(){},t}();e.BaseCharAtlas=i},713:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.removeTerminalFromCache=e.acquireCharAtlas=void 0;var r=i(433),o=i(389),n=[];e.acquireCharAtlas=function(t,e,i,s,a){for(var c=(0,r.generateConfig)(s,a,t,i),l=0;l<n.length;l++){var h=(u=n[l]).ownedBy.indexOf(e);if(h>=0){if((0,r.configEquals)(u.config,c))return u.atlas;1===u.ownedBy.length?(u.atlas.dispose(),n.splice(l,1)):u.ownedBy.splice(h,1);break}}for(l=0;l<n.length;l++){var u=n[l];if((0,r.configEquals)(u.config,c))return u.ownedBy.push(e),u.atlas}var d={atlas:new o.DynamicCharAtlas(document,c),config:c,ownedBy:[e]};return n.push(d),d.atlas},e.removeTerminalFromCache=function(t){for(var e=0;e<n.length;e++){var i=n[e].ownedBy.indexOf(t);if(-1!==i){1===n[e].ownedBy.length?(n[e].atlas.dispose(),n.splice(e,1)):n[e].ownedBy.splice(i,1);break}}}},433:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.is256Color=e.configEquals=e.generateConfig=void 0;var r=i(855);e.generateConfig=function(t,e,i,r){var o={foreground:r.foreground,background:r.background,cursor:void 0,cursorAccent:void 0,selectionBackground:void 0,ansi:r.ansi.slice()};return{devicePixelRatio:window.devicePixelRatio,scaledCharWidth:t,scaledCharHeight:e,fontFamily:i.fontFamily,fontSize:i.fontSize,fontWeight:i.fontWeight,fontWeightBold:i.fontWeightBold,allowTransparency:i.allowTransparency,colors:o}},e.configEquals=function(t,e){for(var i=0;i<t.colors.ansi.length;i++)if(t.colors.ansi[i].rgba!==e.colors.ansi[i].rgba)return!1;return t.devicePixelRatio===e.devicePixelRatio&&t.fontFamily===e.fontFamily&&t.fontSize===e.fontSize&&t.fontWeight===e.fontWeight&&t.fontWeightBold===e.fontWeightBold&&t.allowTransparency===e.allowTransparency&&t.scaledCharWidth===e.scaledCharWidth&&t.scaledCharHeight===e.scaledCharHeight&&t.colors.foreground===e.colors.foreground&&t.colors.background===e.colors.background},e.is256Color=function(t){return t<r.DEFAULT_COLOR}},389:function(t,e,i){var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.NoneCharAtlas=e.DynamicCharAtlas=e.getGlyphCacheKey=void 0;var n=i(302),s=i(13),a=i(434),c=i(279),l=i(399),h=i(634),u=i(160),d=1024,f=1024,_={css:"rgba(0, 0, 0, 0)",rgba:0};function p(t){return t.code<<21|t.bg<<12|t.fg<<3|(t.bold?0:4)+(t.dim?0:2)+(t.italic?0:1)}e.getGlyphCacheKey=p;var v=function(t){function e(e,i){var r=t.call(this)||this;r._config=i,r._drawToCacheCount=0,r._glyphsWaitingOnBitmap=[],r._bitmapCommitTimeout=null,r._bitmap=null,r._cacheCanvas=e.createElement("canvas"),r._cacheCanvas.width=d,r._cacheCanvas.height=f,r._cacheCtx=(0,h.throwIfFalsy)(r._cacheCanvas.getContext("2d",{alpha:!0}));var o=e.createElement("canvas");o.width=r._config.scaledCharWidth,o.height=r._config.scaledCharHeight,r._tmpCtx=(0,h.throwIfFalsy)(o.getContext("2d",{alpha:r._config.allowTransparency})),r._width=Math.floor(d/r._config.scaledCharWidth),r._height=Math.floor(f/r._config.scaledCharHeight);var n=r._width*r._height;return r._cacheMap=new c.LRUMap(n),r._cacheMap.prealloc(n),r}return o(e,t),e.prototype.dispose=function(){null!==this._bitmapCommitTimeout&&(window.clearTimeout(this._bitmapCommitTimeout),this._bitmapCommitTimeout=null)},e.prototype.beginFrame=function(){this._drawToCacheCount=0},e.prototype.clear=function(){if(this._cacheMap.size>0){var t=this._width*this._height;this._cacheMap=new c.LRUMap(t),this._cacheMap.prealloc(t)}this._cacheCtx.clearRect(0,0,d,f),this._tmpCtx.clearRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight)},e.prototype.draw=function(t,e,i,r){if(32===e.code)return!0;if(!this._canCache(e))return!1;var o=p(e),n=this._cacheMap.get(o);if(null!=n)return this._drawFromCache(t,n,i,r),!0;if(this._drawToCacheCount<100){var s;s=this._cacheMap.size<this._cacheMap.capacity?this._cacheMap.size:this._cacheMap.peek().index;var a=this._drawToCache(e,s);return this._cacheMap.set(o,a),this._drawFromCache(t,a,i,r),!0}return!1},e.prototype._canCache=function(t){return t.code<256},e.prototype._toCoordinateX=function(t){return t%this._width*this._config.scaledCharWidth},e.prototype._toCoordinateY=function(t){return Math.floor(t/this._width)*this._config.scaledCharHeight},e.prototype._drawFromCache=function(t,e,i,r){if(!e.isEmpty){var o=this._toCoordinateX(e.index),n=this._toCoordinateY(e.index);t.drawImage(e.inBitmap?this._bitmap:this._cacheCanvas,o,n,this._config.scaledCharWidth,this._config.scaledCharHeight,i,r,this._config.scaledCharWidth,this._config.scaledCharHeight)}},e.prototype._getColorFromAnsiIndex=function(t){return t<this._config.colors.ansi.length?this._config.colors.ansi[t]:a.DEFAULT_ANSI_COLORS[t]},e.prototype._getBackgroundColor=function(t){return this._config.allowTransparency?_:(e=t.bg===n.INVERTED_DEFAULT_COLOR?this._config.colors.foreground:t.bg<256?this._getColorFromAnsiIndex(t.bg):this._config.colors.background,t.dim&&(e=u.color.blend(this._config.colors.background,u.color.multiplyOpacity(e,.5))),e);var e},e.prototype._getForegroundColor=function(t){return t.fg===n.INVERTED_DEFAULT_COLOR?u.color.opaque(this._config.colors.background):t.fg<256?this._getColorFromAnsiIndex(t.fg):this._config.colors.foreground},e.prototype._drawToCache=function(t,e){this._drawToCacheCount++,this._tmpCtx.save();var i=this._getBackgroundColor(t);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=i.css,this._tmpCtx.fillRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),this._tmpCtx.globalCompositeOperation="source-over";var r=t.bold?this._config.fontWeightBold:this._config.fontWeight,o=t.italic?"italic":"";this._tmpCtx.font="".concat(o," ").concat(r," ").concat(this._config.fontSize*this._config.devicePixelRatio,"px ").concat(this._config.fontFamily),this._tmpCtx.textBaseline=n.TEXT_BASELINE,this._tmpCtx.fillStyle=this._getForegroundColor(t).css,t.dim&&(this._tmpCtx.globalAlpha=n.DIM_OPACITY),this._tmpCtx.fillText(t.chars,0,this._config.scaledCharHeight);var s=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),a=!1;if(this._config.allowTransparency||(a=C(s,i)),a&&"_"===t.chars&&!this._config.allowTransparency)for(var c=1;c<=5&&(this._tmpCtx.fillText(t.chars,0,this._config.scaledCharHeight-c),a=C(s=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),i));c++);this._tmpCtx.restore();var l=this._toCoordinateX(e),h=this._toCoordinateY(e);this._cacheCtx.putImageData(s,l,h);var u={index:e,isEmpty:a,inBitmap:!1};return this._addGlyphToBitmap(u),u},e.prototype._addGlyphToBitmap=function(t){var e=this;!("createImageBitmap"in window)||l.isFirefox||l.isSafari||(this._glyphsWaitingOnBitmap.push(t),null===this._bitmapCommitTimeout&&(this._bitmapCommitTimeout=window.setTimeout((function(){return e._generateBitmap()}),100)))},e.prototype._generateBitmap=function(){var t=this,e=this._glyphsWaitingOnBitmap;this._glyphsWaitingOnBitmap=[],window.createImageBitmap(this._cacheCanvas).then((function(i){t._bitmap=i;for(var r=0;r<e.length;r++)e[r].inBitmap=!0})),this._bitmapCommitTimeout=null},e}(s.BaseCharAtlas);e.DynamicCharAtlas=v;var g=function(t){function e(e,i){return t.call(this)||this}return o(e,t),e.prototype.draw=function(t,e,i,r){return!1},e}(s.BaseCharAtlas);function C(t,e){for(var i=!0,r=e.rgba>>>24,o=e.rgba>>>16&255,n=e.rgba>>>8&255,s=0;s<t.data.length;s+=4)Math.abs(t.data[s]-r)+Math.abs(t.data[s+1]-o)+Math.abs(t.data[s+2]-n)<35?t.data[s+3]=0:i=!1;return i}e.NoneCharAtlas=g},279:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LRUMap=void 0;var i=function(){function t(t){this.capacity=t,this._map={},this._head=null,this._tail=null,this._nodePool=[],this.size=0}return t.prototype._unlinkNode=function(t){var e=t.prev,i=t.next;t===this._head&&(this._head=i),t===this._tail&&(this._tail=e),null!==e&&(e.next=i),null!==i&&(i.prev=e)},t.prototype._appendNode=function(t){var e=this._tail;null!==e&&(e.next=t),t.prev=e,t.next=null,this._tail=t,null===this._head&&(this._head=t)},t.prototype.prealloc=function(t){for(var e=this._nodePool,i=0;i<t;i++)e.push({prev:null,next:null,key:null,value:null})},t.prototype.get=function(t){var e=this._map[t];return void 0!==e?(this._unlinkNode(e),this._appendNode(e),e.value):null},t.prototype.peekValue=function(t){var e=this._map[t];return void 0!==e?e.value:null},t.prototype.peek=function(){var t=this._head;return null===t?null:t.value},t.prototype.set=function(t,e){var i=this._map[t];if(void 0!==i)i=this._map[t],this._unlinkNode(i),i.value=e;else if(this.size>=this.capacity)i=this._head,this._unlinkNode(i),delete this._map[i.key],i.key=t,i.value=e,this._map[t]=i;else{var r=this._nodePool;r.length>0?((i=r.pop()).key=t,i.value=e):i={prev:null,next:null,key:t,value:e},this._map[t]=i,this.size++}this._appendNode(i)},t}();e.LRUMap=i},930:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorContrastCache=void 0;var i=function(){function t(){this._color={},this._rgba={}}return t.prototype.clear=function(){this._color={},this._rgba={}},t.prototype.setCss=function(t,e,i){this._rgba[t]||(this._rgba[t]={}),this._rgba[t][e]=i},t.prototype.getCss=function(t,e){return this._rgba[t]?this._rgba[t][e]:void 0},t.prototype.setColor=function(t,e,i){this._color[t]||(this._color[t]={}),this._color[t][e]=i},t.prototype.getColor=function(t,e){return this._color[t]?this._color[t][e]:void 0},t}();e.ColorContrastCache=i},434:function(t,e,i){var r=this&&this.__read||function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var r,o,n=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=n.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(i=n.return)&&i.call(n)}finally{if(o)throw o.error}}return s};Object.defineProperty(e,"__esModule",{value:!0}),e.ColorManager=e.DEFAULT_ANSI_COLORS=void 0;var o=i(160),n=i(930),s=o.css.toColor("#ffffff"),a=o.css.toColor("#000000"),c=o.css.toColor("#ffffff"),l=o.css.toColor("#000000"),h={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};e.DEFAULT_ANSI_COLORS=Object.freeze(function(){for(var t=[o.css.toColor("#2e3436"),o.css.toColor("#cc0000"),o.css.toColor("#4e9a06"),o.css.toColor("#c4a000"),o.css.toColor("#3465a4"),o.css.toColor("#75507b"),o.css.toColor("#06989a"),o.css.toColor("#d3d7cf"),o.css.toColor("#555753"),o.css.toColor("#ef2929"),o.css.toColor("#8ae234"),o.css.toColor("#fce94f"),o.css.toColor("#729fcf"),o.css.toColor("#ad7fa8"),o.css.toColor("#34e2e2"),o.css.toColor("#eeeeec")],e=[0,95,135,175,215,255],i=0;i<216;i++){var r=e[i/36%6|0],n=e[i/6%6|0],s=e[i%6];t.push({css:o.channels.toCss(r,n,s),rgba:o.channels.toRgba(r,n,s)})}for(i=0;i<24;i++){var a=8+10*i;t.push({css:o.channels.toCss(a,a,a),rgba:o.channels.toRgba(a,a,a)})}return t}());var u=function(){function t(t,i){this.allowTransparency=i;var r=t.createElement("canvas");r.width=1,r.height=1;var u=r.getContext("2d");if(!u)throw new Error("Could not get rendering context");this._ctx=u,this._ctx.globalCompositeOperation="copy",this._litmusColor=this._ctx.createLinearGradient(0,0,1,1),this._contrastCache=new n.ColorContrastCache,this.colors={foreground:s,background:a,cursor:c,cursorAccent:l,selectionForeground:void 0,selectionBackgroundTransparent:h,selectionBackgroundOpaque:o.color.blend(a,h),selectionInactiveBackgroundTransparent:h,selectionInactiveBackgroundOpaque:o.color.blend(a,h),ansi:e.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache},this._updateRestoreColors()}return t.prototype.onOptionsChange=function(t,e){switch(t){case"minimumContrastRatio":this._contrastCache.clear();break;case"allowTransparency":this.allowTransparency=e}},t.prototype.setTheme=function(t){void 0===t&&(t={}),this.colors.foreground=this._parseColor(t.foreground,s),this.colors.background=this._parseColor(t.background,a),this.colors.cursor=this._parseColor(t.cursor,c,!0),this.colors.cursorAccent=this._parseColor(t.cursorAccent,l,!0),this.colors.selectionBackgroundTransparent=this._parseColor(t.selectionBackground,h,!0),this.colors.selectionBackgroundOpaque=o.color.blend(this.colors.background,this.colors.selectionBackgroundTransparent),this.colors.selectionInactiveBackgroundTransparent=this._parseColor(t.selectionInactiveBackground,this.colors.selectionBackgroundTransparent,!0),this.colors.selectionInactiveBackgroundOpaque=o.color.blend(this.colors.background,this.colors.selectionInactiveBackgroundTransparent);var i={css:"",rgba:0};if(this.colors.selectionForeground=t.selectionForeground?this._parseColor(t.selectionForeground,i):void 0,this.colors.selectionForeground===i&&(this.colors.selectionForeground=void 0),o.color.isOpaque(this.colors.selectionBackgroundTransparent)){var r=.3;this.colors.selectionBackgroundTransparent=o.color.opacity(this.colors.selectionBackgroundTransparent,r)}if(o.color.isOpaque(this.colors.selectionInactiveBackgroundTransparent)&&(r=.3,this.colors.selectionInactiveBackgroundTransparent=o.color.opacity(this.colors.selectionInactiveBackgroundTransparent,r)),this.colors.ansi=e.DEFAULT_ANSI_COLORS.slice(),this.colors.ansi[0]=this._parseColor(t.black,e.DEFAULT_ANSI_COLORS[0]),this.colors.ansi[1]=this._parseColor(t.red,e.DEFAULT_ANSI_COLORS[1]),this.colors.ansi[2]=this._parseColor(t.green,e.DEFAULT_ANSI_COLORS[2]),this.colors.ansi[3]=this._parseColor(t.yellow,e.DEFAULT_ANSI_COLORS[3]),this.colors.ansi[4]=this._parseColor(t.blue,e.DEFAULT_ANSI_COLORS[4]),this.colors.ansi[5]=this._parseColor(t.magenta,e.DEFAULT_ANSI_COLORS[5]),this.colors.ansi[6]=this._parseColor(t.cyan,e.DEFAULT_ANSI_COLORS[6]),this.colors.ansi[7]=this._parseColor(t.white,e.DEFAULT_ANSI_COLORS[7]),this.colors.ansi[8]=this._parseColor(t.brightBlack,e.DEFAULT_ANSI_COLORS[8]),this.colors.ansi[9]=this._parseColor(t.brightRed,e.DEFAULT_ANSI_COLORS[9]),this.colors.ansi[10]=this._parseColor(t.brightGreen,e.DEFAULT_ANSI_COLORS[10]),this.colors.ansi[11]=this._parseColor(t.brightYellow,e.DEFAULT_ANSI_COLORS[11]),this.colors.ansi[12]=this._parseColor(t.brightBlue,e.DEFAULT_ANSI_COLORS[12]),this.colors.ansi[13]=this._parseColor(t.brightMagenta,e.DEFAULT_ANSI_COLORS[13]),this.colors.ansi[14]=this._parseColor(t.brightCyan,e.DEFAULT_ANSI_COLORS[14]),this.colors.ansi[15]=this._parseColor(t.brightWhite,e.DEFAULT_ANSI_COLORS[15]),t.extendedAnsi)for(var n=Math.min(this.colors.ansi.length-16,t.extendedAnsi.length),u=0;u<n;u++)this.colors.ansi[u+16]=this._parseColor(t.extendedAnsi[u],e.DEFAULT_ANSI_COLORS[u+16]);this._contrastCache.clear(),this._updateRestoreColors()},t.prototype.restoreColor=function(t){if(void 0!==t)switch(t){case 256:this.colors.foreground=this._restoreColors.foreground;break;case 257:this.colors.background=this._restoreColors.background;break;case 258:this.colors.cursor=this._restoreColors.cursor;break;default:this.colors.ansi[t]=this._restoreColors.ansi[t]}else for(var e=0;e<this._restoreColors.ansi.length;++e)this.colors.ansi[e]=this._restoreColors.ansi[e]},t.prototype._updateRestoreColors=function(){this._restoreColors={foreground:this.colors.foreground,background:this.colors.background,cursor:this.colors.cursor,ansi:this.colors.ansi.slice()}},t.prototype._parseColor=function(t,e,i){if(void 0===i&&(i=this.allowTransparency),void 0===t)return e;if(this._ctx.fillStyle=this._litmusColor,this._ctx.fillStyle=t,"string"!=typeof this._ctx.fillStyle)return console.warn("Color: ".concat(t," is invalid using fallback ").concat(e.css)),e;this._ctx.fillRect(0,0,1,1);var n=this._ctx.getImageData(0,0,1,1).data;if(255!==n[3]){if(!i)return console.warn("Color: ".concat(t," is using transparency, but allowTransparency is false. ")+"Using fallback ".concat(e.css,".")),e;var s=r(this._ctx.fillStyle.substring(5,this._ctx.fillStyle.length-1).split(",").map((function(t){return Number(t)})),4),a=s[0],c=s[1],l=s[2],h=s[3],u=Math.round(255*h);return{rgba:o.channels.toRgba(a,c,l,u),css:t}}return{css:this._ctx.fillStyle,rgba:o.channels.toRgba(n[0],n[1],n[2],n[3])}},t}();e.ColorManager=u},503:function(t,e){var i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],r=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.removeElementFromParent=void 0,e.removeElementFromParent=function(){for(var t,e,r,o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];try{for(var s=i(o),a=s.next();!a.done;a=s.next()){var c=a.value;null===(r=null==c?void 0:c.parentElement)||void 0===r||r.removeChild(c)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}}},302:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TEXT_BASELINE=e.DIM_OPACITY=e.INVERTED_DEFAULT_COLOR=void 0;var r=i(399);e.INVERTED_DEFAULT_COLOR=257,e.DIM_OPACITY=.5,e.TEXT_BASELINE=r.isFirefox||r.isLegacyEdge?"bottom":"ideographic"},14:function(t,e,i){var r,o,n,s,a,c,l,h,u,d,f,_,p,v,g,C,y,L,w,b,x,m,M,S,R,A,O,T,D,E,I,B,k,F,P,W,H,U,j,N,G,z,q,X,J,V,Y,$,K,Q,Z,tt,et,it,rt,ot,nt,st,at,ct,lt,ht,ut,dt,ft,_t,pt,vt,gt,Ct,yt,Lt,wt,bt,xt,mt,Mt,St,Rt,At,Ot,Tt,Dt,Et,It,Bt,kt,Ft,Pt,Wt,Ht,Ut,jt,Nt,Gt,zt,qt,Xt,Jt,Vt,Yt,$t,Kt,Qt,Zt,te,ee,ie,re,oe,ne,se,ae,ce,le,he,ue,de,fe,_e,pe,ve,ge,Ce,ye,Le,we,be,xe=this&&this.__read||function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var r,o,n=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=n.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(i=n.return)&&i.call(n)}finally{if(o)throw o.error}}return s},me=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],r=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.tryDrawCustomChar=e.powerlineDefinitions=e.boxDrawingDefinitions=e.blockElementDefinitions=void 0;var Me=i(634);e.blockElementDefinitions={"":[{x:0,y:0,w:8,h:4}],"":[{x:0,y:7,w:8,h:1}],"":[{x:0,y:6,w:8,h:2}],"":[{x:0,y:5,w:8,h:3}],"":[{x:0,y:4,w:8,h:4}],"":[{x:0,y:3,w:8,h:5}],"":[{x:0,y:2,w:8,h:6}],"":[{x:0,y:1,w:8,h:7}],"":[{x:0,y:0,w:8,h:8}],"":[{x:0,y:0,w:7,h:8}],"":[{x:0,y:0,w:6,h:8}],"":[{x:0,y:0,w:5,h:8}],"":[{x:0,y:0,w:4,h:8}],"":[{x:0,y:0,w:3,h:8}],"":[{x:0,y:0,w:2,h:8}],"":[{x:0,y:0,w:1,h:8}],"":[{x:4,y:0,w:4,h:8}],"":[{x:0,y:0,w:9,h:1}],"":[{x:7,y:0,w:1,h:8}],"":[{x:0,y:4,w:4,h:4}],"":[{x:4,y:4,w:4,h:4}],"":[{x:0,y:0,w:4,h:4}],"":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"":[{x:0,y:0,w:4,h:8},{x:4,y:0,w:4,h:4}],"":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"":[{x:4,y:0,w:4,h:4}],"":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"":[{x:1,y:0,w:1,h:8}],"":[{x:2,y:0,w:1,h:8}],"":[{x:3,y:0,w:1,h:8}],"":[{x:4,y:0,w:1,h:8}],"":[{x:5,y:0,w:1,h:8}],"":[{x:6,y:0,w:1,h:8}],"":[{x:0,y:1,w:8,h:1}],"":[{x:0,y:2,w:8,h:1}],"":[{x:0,y:3,w:8,h:1}],"":[{x:0,y:4,w:8,h:1}],"":[{x:0,y:5,w:8,h:1}],"":[{x:0,y:6,w:8,h:1}],"":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"":[{x:0,y:0,w:8,h:2}],"":[{x:0,y:0,w:8,h:3}],"":[{x:0,y:0,w:8,h:5}],"":[{x:0,y:0,w:8,h:6}],"":[{x:0,y:0,w:8,h:7}],"":[{x:6,y:0,w:2,h:8}],"":[{x:5,y:0,w:3,h:8}],"":[{x:3,y:0,w:5,h:8}],"":[{x:2,y:0,w:6,h:8}],"":[{x:1,y:0,w:7,h:8}],"":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};var Se={"":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"":[[1,0],[0,0],[0,1],[0,0]],"":[[0,1],[1,1],[1,0],[1,1]]};e.boxDrawingDefinitions={"":(r={},r[1]="M0,.5 L1,.5",r),"":(o={},o[3]="M0,.5 L1,.5",o),"":(n={},n[1]="M.5,0 L.5,1",n),"":(s={},s[3]="M.5,0 L.5,1",s),"":(a={},a[1]="M0.5,1 L.5,.5 L1,.5",a),"":(c={},c[3]="M0.5,1 L.5,.5 L1,.5",c),"":(l={},l[1]="M0,.5 L.5,.5 L.5,1",l),"":(h={},h[3]="M0,.5 L.5,.5 L.5,1",h),"":(u={},u[1]="M.5,0 L.5,.5 L1,.5",u),"":(d={},d[3]="M.5,0 L.5,.5 L1,.5",d),"":(f={},f[1]="M.5,0 L.5,.5 L0,.5",f),"":(_={},_[3]="M.5,0 L.5,.5 L0,.5",_),"":(p={},p[1]="M.5,0 L.5,1 M.5,.5 L1,.5",p),"":(v={},v[3]="M.5,0 L.5,1 M.5,.5 L1,.5",v),"":(g={},g[1]="M.5,0 L.5,1 M.5,.5 L0,.5",g),"":(C={},C[3]="M.5,0 L.5,1 M.5,.5 L0,.5",C),"":(y={},y[1]="M0,.5 L1,.5 M.5,.5 L.5,1",y),"":(L={},L[3]="M0,.5 L1,.5 M.5,.5 L.5,1",L),"":(w={},w[1]="M0,.5 L1,.5 M.5,.5 L.5,0",w),"":(b={},b[3]="M0,.5 L1,.5 M.5,.5 L.5,0",b),"":(x={},x[1]="M0,.5 L1,.5 M.5,0 L.5,1",x),"":(m={},m[3]="M0,.5 L1,.5 M.5,0 L.5,1",m),"":(M={},M[1]="M.5,.5 L0,.5",M),"":(S={},S[3]="M.5,.5 L0,.5",S),"":(R={},R[1]="M.5,.5 L.5,0",R),"":(A={},A[3]="M.5,.5 L.5,0",A),"":(O={},O[1]="M.5,.5 L1,.5",O),"":(T={},T[3]="M.5,.5 L1,.5",T),"":(D={},D[1]="M.5,.5 L.5,1",D),"":(E={},E[3]="M.5,.5 L.5,1",E),"":(I={},I[1]=function(t,e){return"M0,".concat(.5-e," L1,").concat(.5-e," M0,").concat(.5+e," L1,").concat(.5+e)},I),"":(B={},B[1]=function(t,e){return"M".concat(.5-t,",0 L").concat(.5-t,",1 M").concat(.5+t,",0 L").concat(.5+t,",1")},B),"":(k={},k[1]=function(t,e){return"M.5,1 L.5,".concat(.5-e," L1,").concat(.5-e," M.5,").concat(.5+e," L1,").concat(.5+e)},k),"":(F={},F[1]=function(t,e){return"M".concat(.5-t,",1 L").concat(.5-t,",.5 L1,.5 M").concat(.5+t,",.5 L").concat(.5+t,",1")},F),"":(P={},P[1]=function(t,e){return"M1,".concat(.5-e," L").concat(.5-t,",").concat(.5-e," L").concat(.5-t,",1 M1,").concat(.5+e," L").concat(.5+t,",").concat(.5+e," L").concat(.5+t,",1")},P),"":(W={},W[1]=function(t,e){return"M0,".concat(.5-e," L.5,").concat(.5-e," L.5,1 M0,").concat(.5+e," L.5,").concat(.5+e)},W),"":(H={},H[1]=function(t,e){return"M".concat(.5+t,",1 L").concat(.5+t,",.5 L0,.5 M").concat(.5-t,",.5 L").concat(.5-t,",1")},H),"":(U={},U[1]=function(t,e){return"M0,".concat(.5+e," L").concat(.5-t,",").concat(.5+e," L").concat(.5-t,",1 M0,").concat(.5-e," L").concat(.5+t,",").concat(.5-e," L").concat(.5+t,",1")},U),"":(j={},j[1]=function(t,e){return"M.5,0 L.5,".concat(.5+e," L1,").concat(.5+e," M.5,").concat(.5-e," L1,").concat(.5-e)},j),"":(N={},N[1]=function(t,e){return"M1,.5 L".concat(.5-t,",.5 L").concat(.5-t,",0 M").concat(.5+t,",.5 L").concat(.5+t,",0")},N),"":(G={},G[1]=function(t,e){return"M1,".concat(.5-e," L").concat(.5+t,",").concat(.5-e," L").concat(.5+t,",0 M1,").concat(.5+e," L").concat(.5-t,",").concat(.5+e," L").concat(.5-t,",0")},G),"":(z={},z[1]=function(t,e){return"M0,".concat(.5+e," L.5,").concat(.5+e," L.5,0 M0,").concat(.5-e," L.5,").concat(.5-e)},z),"":(q={},q[1]=function(t,e){return"M0,.5 L".concat(.5+t,",.5 L").concat(.5+t,",0 M").concat(.5-t,",.5 L").concat(.5-t,",0")},q),"":(X={},X[1]=function(t,e){return"M0,".concat(.5-e," L").concat(.5-t,",").concat(.5-e," L").concat(.5-t,",0 M0,").concat(.5+e," L").concat(.5+t,",").concat(.5+e," L").concat(.5+t,",0")},X),"":(J={},J[1]=function(t,e){return"".concat("M.5,0 L.5,1"," M.5,").concat(.5-e," L1,").concat(.5-e," M.5,").concat(.5+e," L1,").concat(.5+e)},J),"":(V={},V[1]=function(t,e){return"M".concat(.5-t,",0 L").concat(.5-t,",1 M").concat(.5+t,",0 L").concat(.5+t,",1 M").concat(.5+t,",.5 L1,.5")},V),"":(Y={},Y[1]=function(t,e){return"M".concat(.5-t,",0 L").concat(.5-t,",1 M1,").concat(.5+e," L").concat(.5+t,",").concat(.5+e," L").concat(.5+t,",1 M1,").concat(.5-e," L").concat(.5+t,",").concat(.5-e," L").concat(.5+t,",0")},Y),"":($={},$[1]=function(t,e){return"".concat("M.5,0 L.5,1"," M0,").concat(.5-e," L.5,").concat(.5-e," M0,").concat(.5+e," L.5,").concat(.5+e)},$),"":(K={},K[1]=function(t,e){return"M0,.5 L".concat(.5-t,",.5 M").concat(.5-t,",0 L").concat(.5-t,",1 M").concat(.5+t,",0 L").concat(.5+t,",1")},K),"":(Q={},Q[1]=function(t,e){return"M".concat(.5+t,",0 L").concat(.5+t,",1 M0,").concat(.5+e," L").concat(.5-t,",").concat(.5+e," L").concat(.5-t,",1 M0,").concat(.5-e," L").concat(.5-t,",").concat(.5-e," L").concat(.5-t,",0")},Q),"":(Z={},Z[1]=function(t,e){return"M0,".concat(.5-e," L1,").concat(.5-e," M0,").concat(.5+e," L1,").concat(.5+e," M.5,").concat(.5+e," L.5,1")},Z),"":(tt={},tt[1]=function(t,e){return"".concat("M0,.5 L1,.5"," M").concat(.5-t,",.5 L").concat(.5-t,",1 M").concat(.5+t,",.5 L").concat(.5+t,",1")},tt),"":(et={},et[1]=function(t,e){return"M0,".concat(.5-e," L1,").concat(.5-e," M0,").concat(.5+e," L").concat(.5-t,",").concat(.5+e," L").concat(.5-t,",1 M1,").concat(.5+e," L").concat(.5+t,",").concat(.5+e," L").concat(.5+t,",1")},et),"":(it={},it[1]=function(t,e){return"M.5,0 L.5,".concat(.5-e," M0,").concat(.5-e," L1,").concat(.5-e," M0,").concat(.5+e," L1,").concat(.5+e)},it),"":(rt={},rt[1]=function(t,e){return"".concat("M0,.5 L1,.5"," M").concat(.5-t,",.5 L").concat(.5-t,",0 M").concat(.5+t,",.5 L").concat(.5+t,",0")},rt),"":(ot={},ot[1]=function(t,e){return"M0,".concat(.5+e," L1,").concat(.5+e," M0,").concat(.5-e," L").concat(.5-t,",").concat(.5-e," L").concat(.5-t,",0 M1,").concat(.5-e," L").concat(.5+t,",").concat(.5-e," L").concat(.5+t,",0")},ot),"":(nt={},nt[1]=function(t,e){return"".concat("M.5,0 L.5,1"," M0,").concat(.5-e," L1,").concat(.5-e," M0,").concat(.5+e," L1,").concat(.5+e)},nt),"":(st={},st[1]=function(t,e){return"".concat("M0,.5 L1,.5"," M").concat(.5-t,",0 L").concat(.5-t,",1 M").concat(.5+t,",0 L").concat(.5+t,",1")},st),"":(at={},at[1]=function(t,e){return"M0,".concat(.5+e," L").concat(.5-t,",").concat(.5+e," L").concat(.5-t,",1 M1,").concat(.5+e," L").concat(.5+t,",").concat(.5+e," L").concat(.5+t,",1 M0,").concat(.5-e," L").concat(.5-t,",").concat(.5-e," L").concat(.5-t,",0 M1,").concat(.5-e," L").concat(.5+t,",").concat(.5-e," L").concat(.5+t,",0")},at),"":(ct={},ct[1]="M1,0 L0,1",ct),"":(lt={},lt[1]="M0,0 L1,1",lt),"":(ht={},ht[1]="M1,0 L0,1 M0,0 L1,1",ht),"":(ut={},ut[1]="M.5,.5 L0,.5",ut[3]="M.5,.5 L1,.5",ut),"":(dt={},dt[1]="M.5,.5 L.5,0",dt[3]="M.5,.5 L.5,1",dt),"":(ft={},ft[1]="M.5,.5 L1,.5",ft[3]="M.5,.5 L0,.5",ft),"":(_t={},_t[1]="M.5,.5 L.5,1",_t[3]="M.5,.5 L.5,0",_t),"":(pt={},pt[1]="M.5,.5 L.5,1",pt[3]="M.5,.5 L1,.5",pt),"":(vt={},vt[1]="M.5,.5 L1,.5",vt[3]="M.5,.5 L.5,1",vt),"":(gt={},gt[1]="M.5,.5 L.5,1",gt[3]="M.5,.5 L0,.5",gt),"":(Ct={},Ct[1]="M.5,.5 L0,.5",Ct[3]="M.5,.5 L.5,1",Ct),"":(yt={},yt[1]="M.5,.5 L.5,0",yt[3]="M.5,.5 L1,.5",yt),"":(Lt={},Lt[1]="M.5,.5 L1,.5",Lt[3]="M.5,.5 L.5,0",Lt),"":(wt={},wt[1]="M.5,.5 L.5,0",wt[3]="M.5,.5 L0,.5",wt),"":(bt={},bt[1]="M.5,.5 L0,.5",bt[3]="M.5,.5 L.5,0",bt),"":(xt={},xt[1]="M.5,0 L.5,1",xt[3]="M.5,.5 L1,.5",xt),"":(mt={},mt[1]="M0.5,1 L.5,.5 L1,.5",mt[3]="M.5,.5 L.5,0",mt),"":(Mt={},Mt[1]="M.5,0 L.5,.5 L1,.5",Mt[3]="M.5,.5 L.5,1",Mt),"":(St={},St[1]="M.5,.5 L1,.5",St[3]="M.5,0 L.5,1",St),"":(Rt={},Rt[1]="M.5,.5 L.5,1",Rt[3]="M.5,0 L.5,.5 L1,.5",Rt),"":(At={},At[1]="M.5,.5 L.5,0",At[3]="M0.5,1 L.5,.5 L1,.5",At),"":(Ot={},Ot[1]="M.5,0 L.5,1",Ot[3]="M.5,.5 L0,.5",Ot),"":(Tt={},Tt[1]="M0,.5 L.5,.5 L.5,1",Tt[3]="M.5,.5 L.5,0",Tt),"":(Dt={},Dt[1]="M.5,0 L.5,.5 L0,.5",Dt[3]="M.5,.5 L.5,1",Dt),"":(Et={},Et[1]="M.5,.5 L0,.5",Et[3]="M.5,0 L.5,1",Et),"":(It={},It[1]="M.5,.5 L.5,1",It[3]="M.5,0 L.5,.5 L0,.5",It),"":(Bt={},Bt[1]="M.5,.5 L.5,0",Bt[3]="M0,.5 L.5,.5 L.5,1",Bt),"":(kt={},kt[1]="M0.5,1 L.5,.5 L1,.5",kt[3]="M.5,.5 L0,.5",kt),"":(Ft={},Ft[1]="M0,.5 L.5,.5 L.5,1",Ft[3]="M.5,.5 L1,.5",Ft),"":(Pt={},Pt[1]="M.5,.5 L.5,1",Pt[3]="M0,.5 L1,.5",Pt),"":(Wt={},Wt[1]="M0,.5 L1,.5",Wt[3]="M.5,.5 L.5,1",Wt),"":(Ht={},Ht[1]="M.5,.5 L1,.5",Ht[3]="M0,.5 L.5,.5 L.5,1",Ht),"":(Ut={},Ut[1]="M.5,.5 L0,.5",Ut[3]="M0.5,1 L.5,.5 L1,.5",Ut),"":(jt={},jt[1]="M.5,0 L.5,.5 L1,.5",jt[3]="M.5,.5 L0,.5",jt),"":(Nt={},Nt[1]="M.5,0 L.5,.5 L0,.5",Nt[3]="M.5,.5 L1,.5",Nt),"":(Gt={},Gt[1]="M.5,.5 L.5,0",Gt[3]="M0,.5 L1,.5",Gt),"":(zt={},zt[1]="M0,.5 L1,.5",zt[3]="M.5,.5 L.5,0",zt),"":(qt={},qt[1]="M.5,.5 L1,.5",qt[3]="M.5,0 L.5,.5 L0,.5",qt),"":(Xt={},Xt[1]="M.5,.5 L0,.5",Xt[3]="M.5,0 L.5,.5 L1,.5",Xt),"":(Jt={},Jt[1]="".concat("M.5,0 L.5,1"," ").concat("M.5,.5 L1,.5"),Jt[3]="M.5,.5 L0,.5",Jt),"":(Vt={},Vt[1]="".concat("M.5,0 L.5,1"," ").concat("M.5,.5 L0,.5"),Vt[3]="M.5,.5 L1,.5",Vt),"":(Yt={},Yt[1]="M.5,0 L.5,1",Yt[3]="M0,.5 L1,.5",Yt),"":($t={},$t[1]="".concat("M0,.5 L1,.5"," ").concat("M.5,.5 L.5,1"),$t[3]="M.5,.5 L.5,0",$t),"":(Kt={},Kt[1]="".concat("M.5,.5 L.5,0"," ").concat("M0,.5 L1,.5"),Kt[3]="M.5,.5 L.5,1",Kt),"":(Qt={},Qt[1]="M0,.5 L1,.5",Qt[3]="M.5,0 L.5,1",Qt),"":(Zt={},Zt[1]="M0.5,1 L.5,.5 L1,.5",Zt[3]="M.5,0 L.5,.5 L0,.5",Zt),"":(te={},te[1]="M0,.5 L.5,.5 L.5,1",te[3]="M.5,0 L.5,.5 L1,.5",te),"":(ee={},ee[1]="M.5,0 L.5,.5 L1,.5",ee[3]="M0,.5 L.5,.5 L.5,1",ee),"":(ie={},ie[1]="M.5,0 L.5,.5 L0,.5",ie[3]="M0.5,1 L.5,.5 L1,.5",ie),"":(re={},re[1]="M.5,.5 L.5,1",re[3]="".concat("M.5,.5 L.5,0"," ").concat("M0,.5 L1,.5"),re),"":(oe={},oe[1]="M.5,.5 L.5,0",oe[3]="".concat("M0,.5 L1,.5"," ").concat("M.5,.5 L.5,1"),oe),"":(ne={},ne[1]="M.5,.5 L1,.5",ne[3]="".concat("M.5,0 L.5,1"," ").concat("M.5,.5 L0,.5"),ne),"":(se={},se[1]="M.5,.5 L0,.5",se[3]="".concat("M.5,0 L.5,1"," ").concat("M.5,.5 L1,.5"),se),"":(ae={},ae[1]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",ae),"":(ce={},ce[3]="M.1,.5 L.4,.5 M.6,.5 L.9,.5",ce),"":(le={},le[1]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",le),"":(he={},he[3]="M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5",he),"":(ue={},ue[1]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",ue),"":(de={},de[3]="M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5",de),"":(fe={},fe[1]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",fe),"":(_e={},_e[3]="M.5,.1 L.5,.4 M.5,.6 L.5,.9",_e),"":(pe={},pe[1]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",pe),"":(ve={},ve[3]="M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333",ve),"":(ge={},ge[1]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",ge),"":(Ce={},Ce[3]="M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95",Ce),"":(ye={},ye[1]=function(t,e){return"M.5,1 L.5,".concat(.5+e/.15*.5," C.5,").concat(.5+e/.15*.5,",.5,.5,1,.5")},ye),"":(Le={},Le[1]=function(t,e){return"M.5,1 L.5,".concat(.5+e/.15*.5," C.5,").concat(.5+e/.15*.5,",.5,.5,0,.5")},Le),"":(we={},we[1]=function(t,e){return"M.5,0 L.5,".concat(.5-e/.15*.5," C.5,").concat(.5-e/.15*.5,",.5,.5,0,.5")},we),"":(be={},be[1]=function(t,e){return"M.5,0 L.5,".concat(.5-e/.15*.5," C.5,").concat(.5-e/.15*.5,",.5,.5,1,.5")},be)},e.powerlineDefinitions={"":{d:"M0,0 L1,.5 L0,1",type:0},"":{d:"M0,0 L1,.5 L0,1",type:1,leftPadding:window.devicePixelRatio/2,rightPadding:window.devicePixelRatio/2},"":{d:"M1,0 L0,.5 L1,1",type:0},"":{d:"M1,0 L0,.5 L1,1",type:1,leftPadding:window.devicePixelRatio/2,rightPadding:window.devicePixelRatio/2},"":{d:"M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:0},"":{d:"M0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:1,rightPadding:window.devicePixelRatio/2},"":{d:"M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:0},"":{d:"M1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:1,leftPadding:window.devicePixelRatio/2}},e.tryDrawCustomChar=function(t,i,r,o,n,s){var a=e.blockElementDefinitions[i];if(a)return function(t,e,i,r,o,n){for(var s=0;s<e.length;s++){var a=e[s],c=o/8,l=n/8;t.fillRect(i+a.x*c,r+a.y*l,a.w*c,a.h*l)}}(t,a,r,o,n,s),!0;var c=Se[i];if(c)return function(t,e,i,r,o,n){var s,a=Re.get(e);a||(a=new Map,Re.set(e,a));var c=t.fillStyle;if("string"!=typeof c)throw new Error('Unexpected fillStyle type "'.concat(c,'"'));var l=a.get(c);if(!l){var h=e[0].length,u=e.length,d=document.createElement("canvas");d.width=h,d.height=u;var f=(0,Me.throwIfFalsy)(d.getContext("2d")),_=new ImageData(h,u),p=void 0,v=void 0,g=void 0,C=void 0;if(c.startsWith("#"))p=parseInt(c.slice(1,3),16),v=parseInt(c.slice(3,5),16),g=parseInt(c.slice(5,7),16),C=c.length>7&&parseInt(c.slice(7,9),16)||1;else{if(!c.startsWith("rgba"))throw new Error('Unexpected fillStyle color format "'.concat(c,'" when drawing pattern glyph'));p=(s=xe(c.substring(5,c.length-1).split(",").map((function(t){return parseFloat(t)})),4))[0],v=s[1],g=s[2],C=s[3]}for(var y=0;y<u;y++)for(var L=0;L<h;L++)_.data[4*(y*h+L)]=p,_.data[4*(y*h+L)+1]=v,_.data[4*(y*h+L)+2]=g,_.data[4*(y*h+L)+3]=e[y][L]*(255*C);f.putImageData(_,0,0),l=(0,Me.throwIfFalsy)(t.createPattern(d,null)),a.set(c,l)}t.fillStyle=l,t.fillRect(i,r,o,n)}(t,c,r,o,n,s),!0;var l=e.boxDrawingDefinitions[i];if(l)return function(t,e,i,r,o,n){var s,a,c,l;t.strokeStyle=t.fillStyle;try{for(var h=me(Object.entries(e)),u=h.next();!u.done;u=h.next()){var d=xe(u.value,2),f=d[0],_=d[1];t.beginPath(),t.lineWidth=window.devicePixelRatio*Number.parseInt(f);var p=void 0;p="function"==typeof _?_(.15,.15/n*o):_;try{for(var v=(c=void 0,me(p.split(" "))),g=v.next();!g.done;g=v.next()){var C=g.value,y=C[0],L=Oe[y];if(L){var w=C.substring(1).split(",");w[0]&&w[1]&&L(t,Te(w,o,n,i,r))}else console.error('Could not find drawing instructions for "'.concat(y,'"'))}}catch(t){c={error:t}}finally{try{g&&!g.done&&(l=v.return)&&l.call(v)}finally{if(c)throw c.error}}t.stroke(),t.closePath()}}catch(t){s={error:t}}finally{try{u&&!u.done&&(a=h.return)&&a.call(h)}finally{if(s)throw s.error}}}(t,l,r,o,n,s),!0;var h=e.powerlineDefinitions[i];return!!h&&(function(t,e,i,r,o,n){var s,a;t.beginPath(),t.lineWidth=window.devicePixelRatio;try{for(var c=me(e.d.split(" ")),l=c.next();!l.done;l=c.next()){var h=l.value,u=h[0],d=Oe[u];if(d){var f=h.substring(1).split(",");f[0]&&f[1]&&d(t,Te(f,o,n,i,r,e.leftPadding,e.rightPadding))}else console.error('Could not find drawing instructions for "'.concat(u,'"'))}}catch(t){s={error:t}}finally{try{l&&!l.done&&(a=c.return)&&a.call(c)}finally{if(s)throw s.error}}1===e.type?(t.strokeStyle=t.fillStyle,t.stroke()):t.fill(),t.closePath()}(t,h,r,o,n,s),!0)};var Re=new Map;function Ae(t,e,i){return void 0===i&&(i=0),Math.max(Math.min(t,e),i)}var Oe={C:function(t,e){return t.bezierCurveTo(e[0],e[1],e[2],e[3],e[4],e[5])},L:function(t,e){return t.lineTo(e[0],e[1])},M:function(t,e){return t.moveTo(e[0],e[1])}};function Te(t,e,i,r,o,n,s){void 0===n&&(n=0),void 0===s&&(s=0);var a=t.map((function(t){return parseFloat(t)||parseInt(t)}));if(a.length<2)throw new Error("Too few arguments for instruction");for(var c=0;c<a.length;c+=2)a[c]*=e-n*window.devicePixelRatio-s*window.devicePixelRatio,0!==a[c]&&(a[c]=Ae(Math.round(a[c]+.5)-.5,e,0)),a[c]+=r+n*window.devicePixelRatio;for(var l=1;l<a.length;l+=2)a[l]*=i,0!==a[l]&&(a[l]=Ae(Math.round(a[l]+.5)-.5,i,0)),a[l]+=o;return a}},476:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.observeDevicePixelDimensions=void 0;var r=i(859);e.observeDevicePixelDimensions=function(t,e){var i=new ResizeObserver((function(r){var o=r.find((function(e){return e.target===t}));if(o)return"devicePixelContentBoxSize"in o?void e(o.devicePixelContentBoxSize[0].inlineSize,o.devicePixelContentBoxSize[0].blockSize):(null==i||i.disconnect(),void(i=void 0))}));return i.observe(t,{box:["device-pixel-content-box"]}),(0,r.toDisposable)((function(){return null==i?void 0:i.disconnect()}))}},634:(t,e)=>{function i(t){return 57508<=t&&t<=57558}Object.defineProperty(e,"__esModule",{value:!0}),e.excludeFromContrastRatioDemands=e.isPowerlineGlyph=e.throwIfFalsy=void 0,e.throwIfFalsy=function(t){if(!t)throw new Error("value must not be falsy");return t},e.isPowerlineGlyph=i,e.excludeFromContrastRatioDemands=function(t){return i(t)||function(t){return 9472<=t&&t<=9631}(t)}},577:function(t,e,i){var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=this&&this.__decorate||function(t,e,i,r){var o,n=arguments.length,s=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(n<3?o(s):n>3?o(e,i,s):o(e,i))||s);return n>3&&s&&Object.defineProperty(e,i,s),s},s=this&&this.__param||function(t,e){return function(i,r){e(i,r,t)}};Object.defineProperty(e,"__esModule",{value:!0}),e.CharacterJoinerService=e.JoinedCellData=void 0;var a=i(147),c=i(855),l=i(782),h=i(97),u=function(t){function e(e,i,r){var o=t.call(this)||this;return o.content=0,o.combinedData="",o.fg=e.fg,o.bg=e.bg,o.combinedData=i,o._width=r,o}return o(e,t),e.prototype.isCombined=function(){return 2097152},e.prototype.getWidth=function(){return this._width},e.prototype.getChars=function(){return this.combinedData},e.prototype.getCode=function(){return 2097151},e.prototype.setFromCharData=function(t){throw new Error("not implemented")},e.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},e}(a.AttributeData);e.JoinedCellData=u;var d=function(){function t(t){this._bufferService=t,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new l.CellData}return t.prototype.register=function(t){var e={id:this._nextCharacterJoinerId++,handler:t};return this._characterJoiners.push(e),e.id},t.prototype.deregister=function(t){for(var e=0;e<this._characterJoiners.length;e++)if(this._characterJoiners[e].id===t)return this._characterJoiners.splice(e,1),!0;return!1},t.prototype.getJoinedCharacters=function(t){if(0===this._characterJoiners.length)return[];var e=this._bufferService.buffer.lines.get(t);if(!e||0===e.length)return[];for(var i=[],r=e.translateToString(!0),o=0,n=0,s=0,a=e.getFg(0),l=e.getBg(0),h=0;h<e.getTrimmedLength();h++)if(e.loadCell(h,this._workCell),0!==this._workCell.getWidth()){if(this._workCell.fg!==a||this._workCell.bg!==l){if(h-o>1)for(var u=this._getJoinedRanges(r,s,n,e,o),d=0;d<u.length;d++)i.push(u[d]);o=h,s=n,a=this._workCell.fg,l=this._workCell.bg}n+=this._workCell.getChars().length||c.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-o>1)for(u=this._getJoinedRanges(r,s,n,e,o),d=0;d<u.length;d++)i.push(u[d]);return i},t.prototype._getJoinedRanges=function(e,i,r,o,n){var s=e.substring(i,r),a=[];try{a=this._characterJoiners[0].handler(s)}catch(t){console.error(t)}for(var c=1;c<this._characterJoiners.length;c++)try{for(var l=this._characterJoiners[c].handler(s),h=0;h<l.length;h++)t._mergeRanges(a,l[h])}catch(t){console.error(t)}return this._stringRangesToCellRanges(a,o,n),a},t.prototype._stringRangesToCellRanges=function(t,e,i){var r=0,o=!1,n=0,s=t[r];if(s){for(var a=i;a<this._bufferService.cols;a++){var l=e.getWidth(a),h=e.getString(a).length||c.WHITESPACE_CELL_CHAR.length;if(0!==l){if(!o&&s[0]<=n&&(s[0]=a,o=!0),s[1]<=n){if(s[1]=a,!(s=t[++r]))break;s[0]<=n?(s[0]=a,o=!0):o=!1}n+=h}}s&&(s[1]=this._bufferService.cols)}},t._mergeRanges=function(t,e){for(var i=!1,r=0;r<t.length;r++){var o=t[r];if(i){if(e[1]<=o[0])return t[r-1][1]=e[1],t;if(e[1]<=o[1])return t[r-1][1]=Math.max(e[1],o[1]),t.splice(r,1),t;t.splice(r,1),r--}else{if(e[1]<=o[0])return t.splice(r,0,e),t;if(e[1]<=o[1])return o[0]=Math.min(e[0],o[0]),t;e[0]<o[1]&&(o[0]=Math.min(e[0],o[0]),i=!0)}}return i?t[t.length-1][1]=e[1]:t.push(e),t},t=n([s(0,h.IBufferService)],t)}();e.CharacterJoinerService=d},160:function(t,e){var i,r,o,n=this&&this.__read||function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var r,o,n=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=n.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(i=n.return)&&i.call(n)}finally{if(o)throw o.error}}return s};function s(t){var e=t.toString(16);return e.length<2?"0"+e:e}function a(t,e){return t<e?(e+.05)/(t+.05):(t+.05)/(e+.05)}Object.defineProperty(e,"__esModule",{value:!0}),e.contrastRatio=e.toPaddedHex=e.rgba=e.rgb=e.css=e.color=e.channels=void 0,function(t){t.toCss=function(t,e,i,r){return void 0!==r?"#".concat(s(t)).concat(s(e)).concat(s(i)).concat(s(r)):"#".concat(s(t)).concat(s(e)).concat(s(i))},t.toRgba=function(t,e,i,r){return void 0===r&&(r=255),(t<<24|e<<16|i<<8|r)>>>0}}(i=e.channels||(e.channels={})),function(t){function e(t,e){var r=Math.round(255*e),s=n(o.toChannels(t.rgba),3),a=s[0],c=s[1],l=s[2];return{css:i.toCss(a,c,l,r),rgba:i.toRgba(a,c,l,r)}}t.blend=function(t,e){var r=(255&e.rgba)/255;if(1===r)return{css:e.css,rgba:e.rgba};var o=e.rgba>>24&255,n=e.rgba>>16&255,s=e.rgba>>8&255,a=t.rgba>>24&255,c=t.rgba>>16&255,l=t.rgba>>8&255,h=a+Math.round((o-a)*r),u=c+Math.round((n-c)*r),d=l+Math.round((s-l)*r);return{css:i.toCss(h,u,d),rgba:i.toRgba(h,u,d)}},t.isOpaque=function(t){return 255==(255&t.rgba)},t.ensureContrastRatio=function(t,e,i){var r=o.ensureContrastRatio(t.rgba,e.rgba,i);if(r)return o.toColor(r>>24&255,r>>16&255,r>>8&255)},t.opaque=function(t){var e=(255|t.rgba)>>>0,r=n(o.toChannels(e),3),s=r[0],a=r[1],c=r[2];return{css:i.toCss(s,a,c),rgba:e}},t.opacity=e,t.multiplyOpacity=function(t,i){return e(t,(255&t.rgba)*i/255)},t.toColorRGB=function(t){return[t.rgba>>24&255,t.rgba>>16&255,t.rgba>>8&255]}}(e.color||(e.color={})),(e.css||(e.css={})).toColor=function(t){if(t.match(/#[0-9a-f]{3,8}/i))switch(t.length){case 4:var e=parseInt(t.slice(1,2).repeat(2),16),i=parseInt(t.slice(2,3).repeat(2),16),r=parseInt(t.slice(3,4).repeat(2),16);return o.toColor(e,i,r);case 5:e=parseInt(t.slice(1,2).repeat(2),16),i=parseInt(t.slice(2,3).repeat(2),16),r=parseInt(t.slice(3,4).repeat(2),16);var n=parseInt(t.slice(4,5).repeat(2),16);return o.toColor(e,i,r,n);case 7:return{css:t,rgba:(parseInt(t.slice(1),16)<<8|255)>>>0};case 9:return{css:t,rgba:parseInt(t.slice(1),16)>>>0}}var s=t.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(s)return e=parseInt(s[1]),i=parseInt(s[2]),r=parseInt(s[3]),n=Math.round(255*(void 0===s[5]?1:parseFloat(s[5]))),o.toColor(e,i,r,n);throw new Error("css.toColor: Unsupported css format")},function(t){function e(t,e,i){var r=t/255,o=e/255,n=i/255;return.2126*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))+.7152*(o<=.03928?o/12.92:Math.pow((o+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))}t.relativeLuminance=function(t){return e(t>>16&255,t>>8&255,255&t)},t.relativeLuminance2=e}(r=e.rgb||(e.rgb={})),function(t){function e(t,e,i){for(var o=t>>24&255,n=t>>16&255,s=t>>8&255,c=e>>24&255,l=e>>16&255,h=e>>8&255,u=a(r.relativeLuminance2(c,l,h),r.relativeLuminance2(o,n,s));u<i&&(c>0||l>0||h>0);)c-=Math.max(0,Math.ceil(.1*c)),l-=Math.max(0,Math.ceil(.1*l)),h-=Math.max(0,Math.ceil(.1*h)),u=a(r.relativeLuminance2(c,l,h),r.relativeLuminance2(o,n,s));return(c<<24|l<<16|h<<8|255)>>>0}function o(t,e,i){for(var o=t>>24&255,n=t>>16&255,s=t>>8&255,c=e>>24&255,l=e>>16&255,h=e>>8&255,u=a(r.relativeLuminance2(c,l,h),r.relativeLuminance2(o,n,s));u<i&&(c<255||l<255||h<255);)c=Math.min(255,c+Math.ceil(.1*(255-c))),l=Math.min(255,l+Math.ceil(.1*(255-l))),h=Math.min(255,h+Math.ceil(.1*(255-h))),u=a(r.relativeLuminance2(c,l,h),r.relativeLuminance2(o,n,s));return(c<<24|l<<16|h<<8|255)>>>0}t.ensureContrastRatio=function(t,i,n){var s=r.relativeLuminance(t>>8),c=r.relativeLuminance(i>>8);if(a(s,c)<n){if(c<s){var l=e(t,i,n),h=a(s,r.relativeLuminance(l>>8));if(h<n){var u=o(t,i,n);return h>a(s,r.relativeLuminance(u>>8))?l:u}return l}var d=o(t,i,n),f=a(s,r.relativeLuminance(d>>8));return f<n?(u=e(t,i,n),f>a(s,r.relativeLuminance(u>>8))?d:u):d}},t.reduceLuminance=e,t.increaseLuminance=o,t.toChannels=function(t){return[t>>24&255,t>>16&255,t>>8&255,255&t]},t.toColor=function(t,e,r,o){return{css:i.toCss(t,e,r,o),rgba:i.toRgba(t,e,r,o)}}}(o=e.rgba||(e.rgba={})),e.toPaddedHex=s,e.contrastRatio=a},345:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.forwardEvent=e.EventEmitter=void 0;var i=function(){function t(){this._listeners=[],this._disposed=!1}return Object.defineProperty(t.prototype,"event",{get:function(){var t=this;return this._event||(this._event=function(e){return t._listeners.push(e),{dispose:function(){if(!t._disposed)for(var i=0;i<t._listeners.length;i++)if(t._listeners[i]===e)return void t._listeners.splice(i,1)}}}),this._event},enumerable:!1,configurable:!0}),t.prototype.fire=function(t,e){for(var i=[],r=0;r<this._listeners.length;r++)i.push(this._listeners[r]);for(r=0;r<i.length;r++)i[r].call(void 0,t,e)},t.prototype.dispose=function(){this._listeners&&(this._listeners.length=0),this._disposed=!0},t}();e.EventEmitter=i,e.forwardEvent=function(t,e){return t((function(t){return e.fire(t)}))}},859:function(t,e){var i=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],r=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.getDisposeArrayDisposable=e.disposeArray=e.toDisposable=e.Disposable=void 0;var r=function(){function t(){this._disposables=[],this._isDisposed=!1}return t.prototype.dispose=function(){var t,e;this._isDisposed=!0;try{for(var r=i(this._disposables),o=r.next();!o.done;o=r.next())o.value.dispose()}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}this._disposables.length=0},t.prototype.register=function(t){return this._disposables.push(t),t},t.prototype.unregister=function(t){var e=this._disposables.indexOf(t);-1!==e&&this._disposables.splice(e,1)},t}();function o(t){var e,r;try{for(var o=i(t),n=o.next();!n.done;n=o.next())n.value.dispose()}catch(t){e={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}t.length=0}e.Disposable=r,e.toDisposable=function(t){return{dispose:t}},e.disposeArray=o,e.getDisposeArrayDisposable=function(t){return{dispose:function(){return o(t)}}}},399:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isLinux=e.isWindows=e.isIphone=e.isIpad=e.isMac=e.isSafari=e.isLegacyEdge=e.isFirefox=void 0;var i="undefined"==typeof navigator,r=i?"node":navigator.userAgent,o=i?"node":navigator.platform;e.isFirefox=r.includes("Firefox"),e.isLegacyEdge=r.includes("Edge"),e.isSafari=/^((?!chrome|android).)*safari/i.test(r),e.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(o),e.isIpad="iPad"===o,e.isIphone="iPhone"===o,e.isWindows=["Windows","Win16","Win32","WinCE"].includes(o),e.isLinux=o.indexOf("Linux")>=0},147:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ExtendedAttrs=e.AttributeData=void 0;var i=function(){function t(){this.fg=0,this.bg=0,this.extended=new r}return t.toColorRGB=function(t){return[t>>>16&255,t>>>8&255,255&t]},t.fromColorRGB=function(t){return(255&t[0])<<16|(255&t[1])<<8|255&t[2]},t.prototype.clone=function(){var e=new t;return e.fg=this.fg,e.bg=this.bg,e.extended=this.extended.clone(),e},t.prototype.isInverse=function(){return 67108864&this.fg},t.prototype.isBold=function(){return 134217728&this.fg},t.prototype.isUnderline=function(){return 268435456&this.fg},t.prototype.isBlink=function(){return 536870912&this.fg},t.prototype.isInvisible=function(){return 1073741824&this.fg},t.prototype.isItalic=function(){return 67108864&this.bg},t.prototype.isDim=function(){return 134217728&this.bg},t.prototype.isStrikethrough=function(){return 2147483648&this.fg},t.prototype.getFgColorMode=function(){return 50331648&this.fg},t.prototype.getBgColorMode=function(){return 50331648&this.bg},t.prototype.isFgRGB=function(){return 50331648==(50331648&this.fg)},t.prototype.isBgRGB=function(){return 50331648==(50331648&this.bg)},t.prototype.isFgPalette=function(){return 16777216==(50331648&this.fg)||33554432==(50331648&this.fg)},t.prototype.isBgPalette=function(){return 16777216==(50331648&this.bg)||33554432==(50331648&this.bg)},t.prototype.isFgDefault=function(){return 0==(50331648&this.fg)},t.prototype.isBgDefault=function(){return 0==(50331648&this.bg)},t.prototype.isAttributeDefault=function(){return 0===this.fg&&0===this.bg},t.prototype.getFgColor=function(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}},t.prototype.getBgColor=function(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}},t.prototype.hasExtendedAttrs=function(){return 268435456&this.bg},t.prototype.updateExtended=function(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456},t.prototype.getUnderlineColor=function(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()},t.prototype.getUnderlineColorMode=function(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()},t.prototype.isUnderlineColorRGB=function(){return 268435456&this.bg&&~this.extended.underlineColor?50331648==(50331648&this.extended.underlineColor):this.isFgRGB()},t.prototype.isUnderlineColorPalette=function(){return 268435456&this.bg&&~this.extended.underlineColor?16777216==(50331648&this.extended.underlineColor)||33554432==(50331648&this.extended.underlineColor):this.isFgPalette()},t.prototype.isUnderlineColorDefault=function(){return 268435456&this.bg&&~this.extended.underlineColor?0==(50331648&this.extended.underlineColor):this.isFgDefault()},t.prototype.getUnderlineStyle=function(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0},t}();e.AttributeData=i;var r=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this._ext=0,this.underlineStyle=t,this.underlineColor=e}return Object.defineProperty(t.prototype,"ext",{get:function(){return this._ext},set:function(t){this._ext=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"underlineStyle",{get:function(){return(469762048&this._ext)>>26},set:function(t){this._ext&=-469762049,this._ext|=t<<26&469762048},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"underlineColor",{get:function(){return 67108863&this._ext},set:function(t){this._ext&=-67108864,this._ext|=67108863&t},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return new t(this.underlineStyle,this.underlineColor)},t.prototype.isEmpty=function(){return 0===this.underlineStyle},t}();e.ExtendedAttrs=r},782:function(t,e,i){var r,o=this&&this.__extends||(r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},r(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.CellData=void 0;var n=i(133),s=i(855),a=i(147),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.content=0,e.fg=0,e.bg=0,e.extended=new a.ExtendedAttrs,e.combinedData="",e}return o(e,t),e.fromCharData=function(t){var i=new e;return i.setFromCharData(t),i},e.prototype.isCombined=function(){return 2097152&this.content},e.prototype.getWidth=function(){return this.content>>22},e.prototype.getChars=function(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,n.stringFromCodePoint)(2097151&this.content):""},e.prototype.getCode=function(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content},e.prototype.setFromCharData=function(t){this.fg=t[s.CHAR_DATA_ATTR_INDEX],this.bg=0;var e=!1;if(t[s.CHAR_DATA_CHAR_INDEX].length>2)e=!0;else if(2===t[s.CHAR_DATA_CHAR_INDEX].length){var i=t[s.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=i&&i<=56319){var r=t[s.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=r&&r<=57343?this.content=1024*(i-55296)+r-56320+65536|t[s.CHAR_DATA_WIDTH_INDEX]<<22:e=!0}else e=!0}else this.content=t[s.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|t[s.CHAR_DATA_WIDTH_INDEX]<<22;e&&(this.combinedData=t[s.CHAR_DATA_CHAR_INDEX],this.content=2097152|t[s.CHAR_DATA_WIDTH_INDEX]<<22)},e.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},e}(a.AttributeData);e.CellData=c},855:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WHITESPACE_CELL_CODE=e.WHITESPACE_CELL_WIDTH=e.WHITESPACE_CELL_CHAR=e.NULL_CELL_CODE=e.NULL_CELL_WIDTH=e.NULL_CELL_CHAR=e.CHAR_DATA_CODE_INDEX=e.CHAR_DATA_WIDTH_INDEX=e.CHAR_DATA_CHAR_INDEX=e.CHAR_DATA_ATTR_INDEX=e.DEFAULT_EXT=e.DEFAULT_ATTR=e.DEFAULT_COLOR=void 0,e.DEFAULT_COLOR=256,e.DEFAULT_ATTR=256|e.DEFAULT_COLOR<<9,e.DEFAULT_EXT=0,e.CHAR_DATA_ATTR_INDEX=0,e.CHAR_DATA_CHAR_INDEX=1,e.CHAR_DATA_WIDTH_INDEX=2,e.CHAR_DATA_CODE_INDEX=3,e.NULL_CELL_CHAR="",e.NULL_CELL_WIDTH=1,e.NULL_CELL_CODE=0,e.WHITESPACE_CELL_CHAR=" ",e.WHITESPACE_CELL_WIDTH=1,e.WHITESPACE_CELL_CODE=32},133:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Utf8ToUtf32=e.StringToUtf32=e.utf32ToString=e.stringFromCodePoint=void 0,e.stringFromCodePoint=function(t){return t>65535?(t-=65536,String.fromCharCode(55296+(t>>10))+String.fromCharCode(t%1024+56320)):String.fromCharCode(t)},e.utf32ToString=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=t.length);for(var r="",o=e;o<i;++o){var n=t[o];n>65535?(n-=65536,r+=String.fromCharCode(55296+(n>>10))+String.fromCharCode(n%1024+56320)):r+=String.fromCharCode(n)}return r};var i=function(){function t(){this._interim=0}return t.prototype.clear=function(){this._interim=0},t.prototype.decode=function(t,e){var i=t.length;if(!i)return 0;var r=0,o=0;this._interim&&(56320<=(a=t.charCodeAt(o++))&&a<=57343?e[r++]=1024*(this._interim-55296)+a-56320+65536:(e[r++]=this._interim,e[r++]=a),this._interim=0);for(var n=o;n<i;++n){var s=t.charCodeAt(n);if(55296<=s&&s<=56319){if(++n>=i)return this._interim=s,r;var a;56320<=(a=t.charCodeAt(n))&&a<=57343?e[r++]=1024*(s-55296)+a-56320+65536:(e[r++]=s,e[r++]=a)}else 65279!==s&&(e[r++]=s)}return r},t}();e.StringToUtf32=i;var r=function(){function t(){this.interim=new Uint8Array(3)}return t.prototype.clear=function(){this.interim.fill(0)},t.prototype.decode=function(t,e){var i=t.length;if(!i)return 0;var r,o,n,s,a=0,c=0,l=0;if(this.interim[0]){var h=!1,u=this.interim[0];u&=192==(224&u)?31:224==(240&u)?15:7;for(var d=0,f=void 0;(f=63&this.interim[++d])&&d<4;)u<<=6,u|=f;for(var _=192==(224&this.interim[0])?2:224==(240&this.interim[0])?3:4,p=_-d;l<p;){if(l>=i)return 0;if(128!=(192&(f=t[l++]))){l--,h=!0;break}this.interim[d++]=f,u<<=6,u|=63&f}h||(2===_?u<128?l--:e[a++]=u:3===_?u<2048||u>=55296&&u<=57343||65279===u||(e[a++]=u):u<65536||u>1114111||(e[a++]=u)),this.interim.fill(0)}for(var v=i-4,g=l;g<i;){for(;!(!(g<v)||128&(r=t[g])||128&(o=t[g+1])||128&(n=t[g+2])||128&(s=t[g+3]));)e[a++]=r,e[a++]=o,e[a++]=n,e[a++]=s,g+=4;if((r=t[g++])<128)e[a++]=r;else if(192==(224&r)){if(g>=i)return this.interim[0]=r,a;if(128!=(192&(o=t[g++]))){g--;continue}if((c=(31&r)<<6|63&o)<128){g--;continue}e[a++]=c}else if(224==(240&r)){if(g>=i)return this.interim[0]=r,a;if(128!=(192&(o=t[g++]))){g--;continue}if(g>=i)return this.interim[0]=r,this.interim[1]=o,a;if(128!=(192&(n=t[g++]))){g--;continue}if((c=(15&r)<<12|(63&o)<<6|63&n)<2048||c>=55296&&c<=57343||65279===c)continue;e[a++]=c}else if(240==(248&r)){if(g>=i)return this.interim[0]=r,a;if(128!=(192&(o=t[g++]))){g--;continue}if(g>=i)return this.interim[0]=r,this.interim[1]=o,a;if(128!=(192&(n=t[g++]))){g--;continue}if(g>=i)return this.interim[0]=r,this.interim[1]=o,this.interim[2]=n,a;if(128!=(192&(s=t[g++]))){g--;continue}if((c=(7&r)<<18|(63&o)<<12|(63&n)<<6|63&s)<65536||c>1114111)continue;e[a++]=c}}return a},t}();e.Utf8ToUtf32=r},726:(t,e)=>{function i(t,e,i){e.di$target===e?e.di$dependencies.push({id:t,index:i}):(e.di$dependencies=[{id:t,index:i}],e.di$target=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.createDecorator=e.getServiceDependencies=e.serviceRegistry=void 0,e.serviceRegistry=new Map,e.getServiceDependencies=function(t){return t.di$dependencies||[]},e.createDecorator=function(t){if(e.serviceRegistry.has(t))return e.serviceRegistry.get(t);var r=function(t,e,o){if(3!==arguments.length)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");i(r,t,o)};return r.toString=function(){return t},e.serviceRegistry.set(t,r),r}},97:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.IDecorationService=e.IUnicodeService=e.IOptionsService=e.ILogService=e.LogLevelEnum=e.IInstantiationService=e.IDirtyRowService=e.ICharsetService=e.ICoreService=e.ICoreMouseService=e.IBufferService=void 0;var r,o=i(726);e.IBufferService=(0,o.createDecorator)("BufferService"),e.ICoreMouseService=(0,o.createDecorator)("CoreMouseService"),e.ICoreService=(0,o.createDecorator)("CoreService"),e.ICharsetService=(0,o.createDecorator)("CharsetService"),e.IDirtyRowService=(0,o.createDecorator)("DirtyRowService"),e.IInstantiationService=(0,o.createDecorator)("InstantiationService"),(r=e.LogLevelEnum||(e.LogLevelEnum={}))[r.DEBUG=0]="DEBUG",r[r.INFO=1]="INFO",r[r.WARN=2]="WARN",r[r.ERROR=3]="ERROR",r[r.OFF=4]="OFF",e.ILogService=(0,o.createDecorator)("LogService"),e.IOptionsService=(0,o.createDecorator)("OptionsService"),e.IUnicodeService=(0,o.createDecorator)("UnicodeService"),e.IDecorationService=(0,o.createDecorator)("DecorationService")}},e={};function i(r){var o=e[r];if(void 0!==o)return o.exports;var n=e[r]={exports:{}};return t[r].call(n.exports,n,n.exports,i),n.exports}var r={};return(()=>{var t=r;Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasAddon=void 0;var e=i(949),o=function(){function t(){}return t.prototype.activate=function(t){if(!t.element)throw new Error("Cannot activate CanvasAddon before Terminal.open");this._terminal=t;var i=t._core._bufferService,r=t._core._renderService,o=t._core._characterJoinerService,n=t._core._charSizeService,s=t._core.coreService,a=t._core._coreBrowserService,c=t._core._decorationService,l=t._core.optionsService,h=t._core._colorManager.colors,u=t._core.screenElement,d=t._core.linkifier2;this._renderer=new e.CanvasRenderer(h,u,d,i,n,l,o,s,a,c),r.setRenderer(this._renderer),r.onResize(i.cols,i.rows)},t.prototype.dispose=function(){var t;if(!this._terminal)throw new Error("Cannot dispose CanvasAddon because it is activated");var e=this._terminal._core._renderService;e.setRenderer(this._terminal._core._createRenderer()),e.onResize(this._terminal.cols,this._terminal.rows),null===(t=this._renderer)||void 0===t||t.dispose(),this._renderer=void 0},t}();t.CanvasAddon=o})(),r})()}));
//# sourceMappingURL=xterm-addon-canvas.js.map