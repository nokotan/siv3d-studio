(()=>{"use strict";var e={537:(e,s,a)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.loadAdditionalAssets=s.loadInitialAssets=void 0;const o=a(496);async function t(e,s,a,t){const i=await o.workspace.fs.readFile(o.Uri.joinPath(s,"template",a)),r=t||a;await o.workspace.fs.writeFile(o.Uri.joinPath(e,r),i)}async function i(e,s,a,t){const i=await fetch(o.Uri.joinPath(o.Uri.parse(s),a).toString()),r=await i.arrayBuffer(),n=t||a;await o.workspace.fs.writeFile(o.Uri.joinPath(e,n),new Uint8Array(r))}s.loadInitialAssets=async function(e,s){const a=[];a.push(t(e,s,"README.md")),o.workspace.fs.createDirectory(o.Uri.joinPath(e,"src")),a.push(t(e,s,"src/Main.cpp")),o.workspace.fs.createDirectory(o.Uri.joinPath(e,"include")),await Promise.all(a)},s.loadAdditionalAssets=async function(e,s){const a=[],r=o.workspace.getConfiguration("siv3d-playground").get("siv3d-assets-download-url");a.push(t(e,s,"main.html")),o.workspace.fs.createDirectory(o.Uri.joinPath(e,".vscode")),a.push(t(e,s,".vscode/tasks.json")),a.push(i(e,r,"lib/Siv3D.wasm","Siv3D.wasm")),a.push(i(e,r,"lib/Siv3D.js","Siv3D.js")),a.push(i(e,r,"lib/Siv3D.data","Siv3D.data")),await Promise.all(a),o.workspace.fs.createDirectory(o.Uri.joinPath(e,"example")),a.push(i(e,r,"example/windmill.png")),a.push(i(e,r,"example/particle.png")),o.workspace.fs.createDirectory(o.Uri.joinPath(e,"example/geojson")),a.push(i(e,r,"example/geojson/countries.geojson")),o.workspace.fs.createDirectory(o.Uri.joinPath(e,"example/texture")),a.push(i(e,r,"example/texture/uv.png")),a.push(i(e,r,"example/texture/grass.jpg")),a.push(i(e,r,"example/texture/rock.jpg")),a.push(i(e,r,"example/texture/ground.jpg")),a.push(i(e,r,"example/texture/earth.jpg")),o.workspace.fs.createDirectory(o.Uri.joinPath(e,"example/shader")),o.workspace.fs.createDirectory(o.Uri.joinPath(e,"example/shader/essl")),a.push(i(e,r,"example/shader/essl/terrain_forward.vert")),a.push(i(e,r,"example/shader/essl/terrain_forward.frag")),a.push(i(e,r,"example/shader/essl/terrain_normal.frag")),o.workspace.fs.createDirectory(o.Uri.joinPath(e,"example/obj")),a.push(i(e,r,"example/obj/blacksmith.obj")),a.push(i(e,r,"example/obj/mill.obj")),a.push(i(e,r,"example/obj/tree.obj")),a.push(i(e,r,"example/obj/pine.obj")),await Promise.all(a)}},496:e=>{e.exports=require("vscode")}},s={};function a(o){var t=s[o];if(void 0!==t)return t.exports;var i=s[o]={exports:{}};return e[o](i,i.exports,a),i.exports}var o={};(()=>{var e=o;Object.defineProperty(e,"__esModule",{value:!0}),e.activate=void 0;const s=a(496),t=a(537);async function i(e,a){const o={preview:!1},i=a.path.split("/").slice(1);try{await s.workspace.fs.stat(a)}catch(e){if(!(e instanceof s.FileSystemError))throw e;for(let e=1;e<=i.length;e++){const o=a.with({path:"/"+i.slice(0,e).join("/")});await s.workspace.fs.createDirectory(o)}}i.length>0&&"gist"===i[0]?await s.window.withProgress({location:s.ProgressLocation.Notification,title:"downloading files from GitHub Gist..."},(async e=>{const t=s.Uri.parse(`gist://${i.slice(1).join("/")}/`),r=s.extensions.getExtension("vsls-contrib.gistfs");r.isActive||await r.activate(),await s.workspace.fs.copy(t,a,{overwrite:!0});const n=await s.workspace.findFiles("**/*.cpp");n.length>0&&s.commands.executeCommand("vscode.open",n[0],o)})):(await(0,t.loadInitialAssets)(a,e.extensionUri),s.commands.executeCommand("vscode.open",s.Uri.joinPath(a,"src/Main.cpp"),o)),await(0,t.loadAdditionalAssets)(a,e.extensionUri)}e.activate=async function(e){let a;s.workspace.getConfiguration("siv3d-playground").get("enable-siv3d-preview")||s.window.showErrorMessage("Siv3D Preview is not available in this browser tab. Please use another browser tab."),e.subscriptions.push(s.commands.registerCommand("siv3d-playground.compile.run",(async()=>{const e=new Promise(((e,s)=>{a=e}));if(s.commands.executeCommand("workbench.action.tasks.runTask","emcc build"),0===await e){const e=s.workspace.workspaceFolders&&s.workspace.workspaceFolders.length>0?s.workspace.workspaceFolders[0].uri:void 0;s.commands.executeCommand("emcc.preview.show",s.Uri.joinPath(e,"main.html"),"Siv3D Preview")}a=null}))),s.tasks.onDidEndTaskProcess((e=>{"emcc build"==e.execution.task.name&&a&&a(e.exitCode)}));const o=s.extensions.getExtension("kamenokosoft.wasm-playground");o.isActive||await o.activate();const t=s.workspace.workspaceFolders&&s.workspace.workspaceFolders.length>0?s.workspace.workspaceFolders[0]:void 0;t&&i(e,t.uri),s.workspace.onDidChangeWorkspaceFolders((s=>{for(const a of s.added)i(e,a.uri)}))}})(),module.exports=o})();
//# sourceMappingURL=extension.js.map