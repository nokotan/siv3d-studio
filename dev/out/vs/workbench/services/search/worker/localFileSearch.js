/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/(function(){var ie=["require","exports","vs/base/common/platform","vs/base/common/path","vs/base/common/strings","vs/base/common/extpath","vs/base/common/uri","vs/base/common/resources","vs/base/common/async","vs/base/common/glob","vs/base/common/map","vs/base/common/symbols","vs/base/common/network","vs/base/common/errors","vs/base/common/cancellation","vs/workbench/services/search/common/getFileResults","vs/workbench/services/search/common/ignoreFile","vs/base/common/types","vs/base/common/event","vs/base/common/lifecycle","vs/base/common/arrays","vs/editor/common/core/range","vs/workbench/services/search/worker/localFileSearch"],se=function(x){for(var e=[],I=0,O=x.length;I<O;I++)e[I]=ie[x[I]];return e};define(ie[10],se([0,1]),function(x,e){"use strict";var I,O,A;Object.defineProperty(e,"__esModule",{value:!0}),e.CounterSet=e.LRUCache=e.LinkedMap=e.Touch=e.ResourceSet=e.ResourceMap=e.setToString=e.mapToString=e.getOrSet=void 0;function T(o,n,u){let m=o.get(n);return m===void 0&&(m=u,o.set(n,m)),m}e.getOrSet=T;function y(o){const n=[];return o.forEach((u,m)=>{n.push(`${m} => ${u}`)}),`Map(${o.size}) {${n.join(", ")}}`}e.mapToString=y;function k(o){const n=[];return o.forEach(u=>{n.push(u)}),`Set(${o.size}) {${n.join(", ")}}`}e.setToString=k;class B{constructor(n,u){this.uri=n,this.value=u}}class b{constructor(n,u){this[I]="ResourceMap",n instanceof b?(this.b=new Map(n.b),this.c=u??b.a):(this.b=new Map,this.c=n??b.a)}set(n,u){return this.b.set(this.c(n),new B(n,u)),this}get(n){return this.b.get(this.c(n))?.value}has(n){return this.b.has(this.c(n))}get size(){return this.b.size}clear(){this.b.clear()}delete(n){return this.b.delete(this.c(n))}forEach(n,u){typeof u<"u"&&(n=n.bind(u));for(const[m,c]of this.b)n(c.value,c.uri,this)}*values(){for(const n of this.b.values())yield n.value}*keys(){for(const n of this.b.values())yield n.uri}*entries(){for(const n of this.b.values())yield[n.uri,n.value]}*[(I=Symbol.toStringTag,Symbol.iterator)](){for(const[,n]of this.b)yield[n.uri,n.value]}}b.a=o=>o.toString(),e.ResourceMap=b;class w{constructor(n,u){this[O]="ResourceSet",!n||typeof n=="function"?this.a=new b(n):(this.a=new b(u),n.forEach(this.add,this))}get size(){return this.a.size}add(n){return this.a.set(n,n),this}clear(){this.a.clear()}delete(n){return this.a.delete(n)}forEach(n,u){this.a.forEach((m,c)=>n.call(u,c,c,this))}has(n){return this.a.has(n)}entries(){return this.a.entries()}keys(){return this.a.keys()}values(){return this.a.keys()}[(O=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}}e.ResourceSet=w;var D;(function(o){o[o.None=0]="None",o[o.AsOld=1]="AsOld",o[o.AsNew=2]="AsNew"})(D=e.Touch||(e.Touch={}));class z{constructor(){this[A]="LinkedMap",this.a=new Map,this.b=void 0,this.c=void 0,this.d=0,this.e=0}clear(){this.a.clear(),this.b=void 0,this.c=void 0,this.d=0,this.e++}isEmpty(){return!this.b&&!this.c}get size(){return this.d}get first(){return this.b?.value}get last(){return this.c?.value}has(n){return this.a.has(n)}get(n,u=0){const m=this.a.get(n);if(!!m)return u!==0&&this.j(m,u),m.value}set(n,u,m=0){let c=this.a.get(n);if(c)c.value=u,m!==0&&this.j(c,m);else{switch(c={key:n,value:u,next:void 0,previous:void 0},m){case 0:this.h(c);break;case 1:this.g(c);break;case 2:this.h(c);break;default:this.h(c);break}this.a.set(n,c),this.d++}return this}delete(n){return!!this.remove(n)}remove(n){const u=this.a.get(n);if(!!u)return this.a.delete(n),this.i(u),this.d--,u.value}shift(){if(!this.b&&!this.c)return;if(!this.b||!this.c)throw new Error("Invalid list");const n=this.b;return this.a.delete(n.key),this.i(n),this.d--,n.value}forEach(n,u){const m=this.e;let c=this.b;for(;c;){if(u?n.bind(u)(c.value,c.key,this):n(c.value,c.key,this),this.e!==m)throw new Error("LinkedMap got modified during iteration.");c=c.next}}keys(){const n=this,u=this.e;let m=this.b;const c={[Symbol.iterator](){return c},next(){if(n.e!==u)throw new Error("LinkedMap got modified during iteration.");if(m){const F={value:m.key,done:!1};return m=m.next,F}else return{value:void 0,done:!0}}};return c}values(){const n=this,u=this.e;let m=this.b;const c={[Symbol.iterator](){return c},next(){if(n.e!==u)throw new Error("LinkedMap got modified during iteration.");if(m){const F={value:m.value,done:!1};return m=m.next,F}else return{value:void 0,done:!0}}};return c}entries(){const n=this,u=this.e;let m=this.b;const c={[Symbol.iterator](){return c},next(){if(n.e!==u)throw new Error("LinkedMap got modified during iteration.");if(m){const F={value:[m.key,m.value],done:!1};return m=m.next,F}else return{value:void 0,done:!0}}};return c}[(A=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}f(n){if(n>=this.size)return;if(n===0){this.clear();return}let u=this.b,m=this.size;for(;u&&m>n;)this.a.delete(u.key),u=u.next,m--;this.b=u,this.d=m,u&&(u.previous=void 0),this.e++}g(n){if(!this.b&&!this.c)this.c=n;else if(this.b)n.next=this.b,this.b.previous=n;else throw new Error("Invalid list");this.b=n,this.e++}h(n){if(!this.b&&!this.c)this.b=n;else if(this.c)n.previous=this.c,this.c.next=n;else throw new Error("Invalid list");this.c=n,this.e++}i(n){if(n===this.b&&n===this.c)this.b=void 0,this.c=void 0;else if(n===this.b){if(!n.next)throw new Error("Invalid list");n.next.previous=void 0,this.b=n.next}else if(n===this.c){if(!n.previous)throw new Error("Invalid list");n.previous.next=void 0,this.c=n.previous}else{const u=n.next,m=n.previous;if(!u||!m)throw new Error("Invalid list");u.previous=m,m.next=u}n.next=void 0,n.previous=void 0,this.e++}j(n,u){if(!this.b||!this.c)throw new Error("Invalid list");if(!(u!==1&&u!==2)){if(u===1){if(n===this.b)return;const m=n.next,c=n.previous;n===this.c?(c.next=void 0,this.c=c):(m.previous=c,c.next=m),n.previous=void 0,n.next=this.b,this.b.previous=n,this.b=n,this.e++}else if(u===2){if(n===this.c)return;const m=n.next,c=n.previous;n===this.b?(m.previous=void 0,this.b=m):(m.previous=c,c.next=m),n.next=void 0,n.previous=this.c,this.c.next=n,this.c=n,this.e++}}}toJSON(){const n=[];return this.forEach((u,m)=>{n.push([m,u])}),n}fromJSON(n){this.clear();for(const[u,m]of n)this.set(u,m)}}e.LinkedMap=z;class M extends z{constructor(n,u=1){super(),this.k=n,this.l=Math.min(Math.max(0,u),1)}get limit(){return this.k}set limit(n){this.k=n,this.m()}get ratio(){return this.l}set ratio(n){this.l=Math.min(Math.max(0,n),1),this.m()}get(n,u=2){return super.get(n,u)}peek(n){return super.get(n,0)}set(n,u){return super.set(n,u,2),this.m(),this}m(){this.size>this.k&&this.f(Math.round(this.k*this.l))}}e.LRUCache=M;class s{constructor(){this.a=new Map}add(n){return this.a.set(n,(this.a.get(n)||0)+1),this}delete(n){let u=this.a.get(n)||0;return u===0?!1:(u--,u===0?this.a.delete(n):this.a.set(n,u),!0)}has(n){return this.a.has(n)}}e.CounterSet=s}),define(ie[11],se([0,1]),function(x,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MicrotaskDelay=void 0,e.MicrotaskDelay=Symbol("MicrotaskDelay")}),define(ie[5],se([0,1,3,2,4,17]),function(x,e,I,O,A,T){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.randomPath=e.parseLineAndColumnAware=e.indexOfPath=e.getDriveLetter=e.hasDriveLetter=e.isRootOrDriveLetter=e.sanitizeFilePath=e.isWindowsDriveLetter=e.isEqualOrParent=e.isEqual=e.isValidBasename=e.isUNC=e.getRoot=e.toPosixPath=e.toSlashes=e.isPathSeparator=void 0;function y(a){return a===47||a===92}e.isPathSeparator=y;function k(a){return a.replace(/[\\/]/g,I.posix.sep)}e.toSlashes=k;function B(a){return a.indexOf("/")===-1&&(a=k(a)),/^[a-zA-Z]:(\/|$)/.test(a)&&(a="/"+a),a}e.toPosixPath=B;function b(a,g=I.posix.sep){if(!a)return"";const U=a.length,q=a.charCodeAt(0);if(y(q)){if(y(a.charCodeAt(1))&&!y(a.charCodeAt(2))){let $=3;const K=$;for(;$<U&&!y(a.charCodeAt($));$++);if(K!==$&&!y(a.charCodeAt($+1))){for($+=1;$<U;$++)if(y(a.charCodeAt($)))return a.slice(0,$+1).replace(/[\\/]/g,g)}}return g}else if(u(q)&&a.charCodeAt(1)===58)return y(a.charCodeAt(2))?a.slice(0,2)+g:a.slice(0,2);let Q=a.indexOf("://");if(Q!==-1){for(Q+=3;Q<U;Q++)if(y(a.charCodeAt(Q)))return a.slice(0,Q+1)}return""}e.getRoot=b;function w(a){if(!O.isWindows||!a||a.length<5)return!1;let g=a.charCodeAt(0);if(g!==92||(g=a.charCodeAt(1),g!==92))return!1;let U=2;const q=U;for(;U<a.length&&(g=a.charCodeAt(U),g!==92);U++);return!(q===U||(g=a.charCodeAt(U+1),isNaN(g)||g===92))}e.isUNC=w;const D=/[\\/:\*\?"<>\|]/g,z=/[\\/]/g,M=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function s(a,g=O.isWindows){const U=g?D:z;return!(!a||a.length===0||/^\s+$/.test(a)||(U.lastIndex=0,U.test(a))||g&&M.test(a)||a==="."||a===".."||g&&a[a.length-1]==="."||g&&a.length!==a.trim().length||a.length>255)}e.isValidBasename=s;function o(a,g,U){const q=a===g;return!U||q?q:!a||!g?!1:(0,A.equalsIgnoreCase)(a,g)}e.isEqual=o;function n(a,g,U,q=I.sep){if(a===g)return!0;if(!a||!g||g.length>a.length)return!1;if(U){if(!(0,A.startsWithIgnoreCase)(a,g))return!1;if(g.length===a.length)return!0;let $=g.length;return g.charAt(g.length-1)===q&&$--,a.charAt($)===q}return g.charAt(g.length-1)!==q&&(g+=q),a.indexOf(g)===0}e.isEqualOrParent=n;function u(a){return a>=65&&a<=90||a>=97&&a<=122}e.isWindowsDriveLetter=u;function m(a,g){return O.isWindows&&a.endsWith(":")&&(a+=I.sep),(0,I.isAbsolute)(a)||(a=(0,I.join)(g,a)),a=(0,I.normalize)(a),O.isWindows?(a=(0,A.rtrim)(a,I.sep),a.endsWith(":")&&(a+=I.sep)):(a=(0,A.rtrim)(a,I.sep),a||(a=I.sep)),a}e.sanitizeFilePath=m;function c(a){const g=(0,I.normalize)(a);return O.isWindows?a.length>3?!1:F(g)&&(a.length===2||g.charCodeAt(2)===92):g===I.posix.sep}e.isRootOrDriveLetter=c;function F(a,g=O.isWindows){return g?u(a.charCodeAt(0))&&a.charCodeAt(1)===58:!1}e.hasDriveLetter=F;function Y(a){return F(a)?a[0]:void 0}e.getDriveLetter=Y;function C(a,g,U){return g.length>a.length?-1:a===g?0:(U&&(a=a.toLowerCase(),g=g.toLowerCase()),a.indexOf(g))}e.indexOfPath=C;function W(a){const g=a.split(":");let U,q,Q;for(const $ of g){const K=Number($);(0,T.isNumber)(K)?q===void 0?q=K:Q===void 0&&(Q=K):U=U?[U,$].join(":"):$}if(!U)throw new Error("Format for `--goto` should be: `FILE:LINE(:COLUMN)`");return{path:U,line:q!==void 0?q:void 0,column:Q!==void 0?Q:q!==void 0?1:void 0}}e.parseLineAndColumnAware=W;const L="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",G="BDEFGHIJKMOQRSTUVWXYZbdefghijkmoqrstuvwxyz0123456789";function X(a,g,U=8){let q="";for(let $=0;$<U;$++){let K;$===0&&O.isWindows&&!g&&(U===3||U===4)?K=G:K=L,q+=K.charAt(Math.floor(Math.random()*K.length))}let Q;return g?Q=`${g}-${q}`:Q=q,a?(0,I.join)(a,Q):Q}e.randomPath=X}),define(ie[12],se([0,1,13,2,6]),function(x,e,I,O,A){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.COI=e.FileAccess=e.nodeModulesAsarUnpackedPath=e.nodeModulesAsarPath=e.nodeModulesPath=e.builtinExtensionsPath=e.RemoteAuthorities=e.connectionTokenQueryName=e.connectionTokenCookieName=e.Schemas=void 0;var T;(function(b){b.inMemory="inmemory",b.vscode="vscode",b.internal="private",b.walkThrough="walkThrough",b.walkThroughSnippet="walkThroughSnippet",b.http="http",b.https="https",b.file="file",b.mailto="mailto",b.untitled="untitled",b.data="data",b.command="command",b.vscodeRemote="vscode-remote",b.vscodeRemoteResource="vscode-remote-resource",b.vscodeUserData="vscode-userdata",b.vscodeCustomEditor="vscode-custom-editor",b.vscodeNotebookCell="vscode-notebook-cell",b.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",b.vscodeNotebookCellOutput="vscode-notebook-cell-output",b.vscodeInteractive="vscode-interactive",b.vscodeInteractiveInput="vscode-interactive-input",b.vscodeSettings="vscode-settings",b.vscodeWorkspaceTrust="vscode-workspace-trust",b.vscodeTerminal="vscode-terminal",b.webviewPanel="webview-panel",b.vscodeWebview="vscode-webview",b.extension="extension",b.vscodeFileResource="vscode-file",b.tmp="tmp",b.vsls="vsls",b.vscodeSourceControl="vscode-scm"})(T=e.Schemas||(e.Schemas={})),e.connectionTokenCookieName="vscode-tkn",e.connectionTokenQueryName="tkn";class y{constructor(){this.a=Object.create(null),this.b=Object.create(null),this.c=Object.create(null),this.d="http",this.e=null,this.f=`/${T.vscodeRemoteResource}`}setPreferredWebSchema(w){this.d=w}setDelegate(w){this.e=w}setServerRootPath(w){this.f=`${w}/${T.vscodeRemoteResource}`}set(w,D,z){this.a[w]=D,this.b[w]=z}setConnectionToken(w,D){this.c[w]=D}getPreferredWebSchema(){return this.d}rewrite(w){if(this.e)try{return this.e(w)}catch(n){return I.onUnexpectedError(n),w}const D=w.authority;let z=this.a[D];z&&z.indexOf(":")!==-1&&z.indexOf("[")===-1&&(z=`[${z}]`);const M=this.b[D],s=this.c[D];let o=`path=${encodeURIComponent(w.path)}`;return typeof s=="string"&&(o+=`&${e.connectionTokenQueryName}=${encodeURIComponent(s)}`),A.URI.from({scheme:O.isWeb?this.d:T.vscodeRemoteResource,authority:`${z}:${M}`,path:this.f,query:o})}}e.RemoteAuthorities=new y,e.builtinExtensionsPath="vs/../../extensions",e.nodeModulesPath="vs/../../node_modules",e.nodeModulesAsarPath="vs/../../node_modules.asar",e.nodeModulesAsarUnpackedPath="vs/../../node_modules.asar.unpacked";class k{asBrowserUri(w){const D=this.b(w,x);return this.uriToBrowserUri(D)}uriToBrowserUri(w){return w.scheme===T.vscodeRemote?e.RemoteAuthorities.rewrite(w):w.scheme===T.file&&(O.isNative||O.isWebWorker&&O.globals.origin===`${T.vscodeFileResource}://${k.a}`)?w.with({scheme:T.vscodeFileResource,authority:w.authority||k.a,query:null,fragment:null}):w}asFileUri(w){const D=this.b(w,x);return this.uriToFileUri(D)}uriToFileUri(w){return w.scheme===T.vscodeFileResource?w.with({scheme:T.file,authority:w.authority!==k.a?w.authority:null,query:null,fragment:null}):w}b(w,D){return A.URI.isUri(w)?w:A.URI.parse(D.toUrl(w))}}k.a="vscode-app",e.FileAccess=new k;var B;(function(b){const w=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);b.CoopAndCoep=Object.freeze(w.get("3"));const D="vscode-coi";function z(s){let o;typeof s=="string"?o=new URL(s).searchParams:s instanceof URL?o=s.searchParams:A.URI.isUri(s)&&(o=new URL(s.toString(!0)).searchParams);const n=o?.get(D);if(!!n)return w.get(n)}b.getHeadersFromQuery=z;function M(s,o,n){if(!globalThis.crossOriginIsolated)return;const u=o&&n?"3":n?"2":"1";s instanceof URLSearchParams?s.set(D,u):s[D]=u}b.addSearchParam=M})(B=e.COI||(e.COI={}))}),define(ie[7],se([0,1,5,12,3,2,4,6]),function(x,e,I,O,A,T,y,k){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toLocalResource=e.DataUri=e.distinctParents=e.addTrailingPathSeparator=e.removeTrailingPathSeparator=e.hasTrailingPathSeparator=e.isEqualAuthority=e.isAbsolutePath=e.resolvePath=e.relativePath=e.normalizePath=e.joinPath=e.dirname=e.extname=e.basename=e.basenameOrAuthority=e.getComparisonKey=e.isEqualOrParent=e.isEqual=e.extUriIgnorePathCase=e.extUriBiasedIgnorePathCase=e.extUri=e.ExtUri=e.originalFSPath=void 0;function B(M){return(0,k.uriToFsPath)(M,!0)}e.originalFSPath=B;class b{constructor(s){this.a=s}compare(s,o,n=!1){return s===o?0:(0,y.compare)(this.getComparisonKey(s,n),this.getComparisonKey(o,n))}isEqual(s,o,n=!1){return s===o?!0:!s||!o?!1:this.getComparisonKey(s,n)===this.getComparisonKey(o,n)}getComparisonKey(s,o=!1){return s.with({path:this.a(s)?s.path.toLowerCase():void 0,fragment:o?null:void 0}).toString()}ignorePathCasing(s){return this.a(s)}isEqualOrParent(s,o,n=!1){if(s.scheme===o.scheme){if(s.scheme===O.Schemas.file)return I.isEqualOrParent(B(s),B(o),this.a(s))&&s.query===o.query&&(n||s.fragment===o.fragment);if((0,e.isEqualAuthority)(s.authority,o.authority))return I.isEqualOrParent(s.path,o.path,this.a(s),"/")&&s.query===o.query&&(n||s.fragment===o.fragment)}return!1}joinPath(s,...o){return k.URI.joinPath(s,...o)}basenameOrAuthority(s){return(0,e.basename)(s)||s.authority}basename(s){return A.posix.basename(s.path)}extname(s){return A.posix.extname(s.path)}dirname(s){if(s.path.length===0)return s;let o;return s.scheme===O.Schemas.file?o=k.URI.file(A.dirname(B(s))).path:(o=A.posix.dirname(s.path),s.authority&&o.length&&o.charCodeAt(0)!==47&&(console.error(`dirname("${s.toString})) resulted in a relative path`),o="/")),s.with({path:o})}normalizePath(s){if(!s.path.length)return s;let o;return s.scheme===O.Schemas.file?o=k.URI.file(A.normalize(B(s))).path:o=A.posix.normalize(s.path),s.with({path:o})}relativePath(s,o){if(s.scheme!==o.scheme||!(0,e.isEqualAuthority)(s.authority,o.authority))return;if(s.scheme===O.Schemas.file){const m=A.relative(B(s),B(o));return T.isWindows?I.toSlashes(m):m}let n=s.path||"/";const u=o.path||"/";if(this.a(s)){let m=0;for(const c=Math.min(n.length,u.length);m<c&&!(n.charCodeAt(m)!==u.charCodeAt(m)&&n.charAt(m).toLowerCase()!==u.charAt(m).toLowerCase());m++);n=u.substr(0,m)+n.substr(m)}return A.posix.relative(n,u)}resolvePath(s,o){if(s.scheme===O.Schemas.file){const n=k.URI.file(A.resolve(B(s),o));return s.with({authority:n.authority,path:n.path})}return o=I.toPosixPath(o),s.with({path:A.posix.resolve(s.path,o)})}isAbsolutePath(s){return!!s.path&&s.path[0]==="/"}isEqualAuthority(s,o){return s===o||s!==void 0&&o!==void 0&&(0,y.equalsIgnoreCase)(s,o)}hasTrailingPathSeparator(s,o=A.sep){if(s.scheme===O.Schemas.file){const n=B(s);return n.length>I.getRoot(n).length&&n[n.length-1]===o}else{const n=s.path;return n.length>1&&n.charCodeAt(n.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(s.fsPath)}}removeTrailingPathSeparator(s,o=A.sep){return(0,e.hasTrailingPathSeparator)(s,o)?s.with({path:s.path.substr(0,s.path.length-1)}):s}addTrailingPathSeparator(s,o=A.sep){let n=!1;if(s.scheme===O.Schemas.file){const u=B(s);n=u!==void 0&&u.length===I.getRoot(u).length&&u[u.length-1]===o}else{o="/";const u=s.path;n=u.length===1&&u.charCodeAt(u.length-1)===47}return!n&&!(0,e.hasTrailingPathSeparator)(s,o)?s.with({path:s.path+"/"}):s}}e.ExtUri=b,e.extUri=new b(()=>!1),e.extUriBiasedIgnorePathCase=new b(M=>M.scheme===O.Schemas.file?!T.isLinux:!0),e.extUriIgnorePathCase=new b(M=>!0),e.isEqual=e.extUri.isEqual.bind(e.extUri),e.isEqualOrParent=e.extUri.isEqualOrParent.bind(e.extUri),e.getComparisonKey=e.extUri.getComparisonKey.bind(e.extUri),e.basenameOrAuthority=e.extUri.basenameOrAuthority.bind(e.extUri),e.basename=e.extUri.basename.bind(e.extUri),e.extname=e.extUri.extname.bind(e.extUri),e.dirname=e.extUri.dirname.bind(e.extUri),e.joinPath=e.extUri.joinPath.bind(e.extUri),e.normalizePath=e.extUri.normalizePath.bind(e.extUri),e.relativePath=e.extUri.relativePath.bind(e.extUri),e.resolvePath=e.extUri.resolvePath.bind(e.extUri),e.isAbsolutePath=e.extUri.isAbsolutePath.bind(e.extUri),e.isEqualAuthority=e.extUri.isEqualAuthority.bind(e.extUri),e.hasTrailingPathSeparator=e.extUri.hasTrailingPathSeparator.bind(e.extUri),e.removeTrailingPathSeparator=e.extUri.removeTrailingPathSeparator.bind(e.extUri),e.addTrailingPathSeparator=e.extUri.addTrailingPathSeparator.bind(e.extUri);function w(M,s){const o=[];for(let n=0;n<M.length;n++){const u=s(M[n]);M.some((m,c)=>c===n?!1:(0,e.isEqualOrParent)(u,s(m)))||o.push(M[n])}return o}e.distinctParents=w;var D;(function(M){M.META_DATA_LABEL="label",M.META_DATA_DESCRIPTION="description",M.META_DATA_SIZE="size",M.META_DATA_MIME="mime";function s(o){const n=new Map;o.path.substring(o.path.indexOf(";")+1,o.path.lastIndexOf(";")).split(";").forEach(c=>{const[F,Y]=c.split(":");F&&Y&&n.set(F,Y)});const m=o.path.substring(0,o.path.indexOf(";"));return m&&n.set(M.META_DATA_MIME,m),n}M.parseMetaData=s})(D=e.DataUri||(e.DataUri={}));function z(M,s,o){if(s){let n=M.path;return n&&n[0]!==A.posix.sep&&(n=A.posix.sep+n),M.with({scheme:o,authority:s,path:n})}return M.with({scheme:o})}e.toLocalResource=z}),define(ie[8],se([0,1,14,13,18,19,7,2,11]),function(x,e,I,O,A,T,y,k,B){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createCancelableAsyncIterable=e.CancelableAsyncIterableObject=e.AsyncIterableObject=e.Promises=e.DeferredPromise=e.IntervalCounter=e.TaskSequentializer=e.retry=e.IdleValue=e.runWhenIdle=e.ThrottledWorker=e.RunOnceWorker=e.ProcessTimeRunOnceScheduler=e.RunOnceScheduler=e.IntervalTimer=e.TimeoutTimer=e.ResourceQueue=e.Queue=e.Limiter=e.firstParallel=e.first=e.sequence=e.disposableTimeout=e.timeout=e.AutoOpenBarrier=e.Barrier=e.ThrottledDelayer=e.Delayer=e.SequencerByKey=e.Sequencer=e.Throttler=e.asPromise=e.raceTimeout=e.raceCancellablePromises=e.raceCancellationError=e.raceCancellation=e.createCancelablePromise=e.isThenable=void 0;function b(r){return!!r&&typeof r.then=="function"}e.isThenable=b;function w(r){const t=new I.CancellationTokenSource,i=r(t.token),l=new Promise((h,R)=>{const N=t.token.onCancellationRequested(()=>{N.dispose(),t.dispose(),R(new O.CancellationError)});Promise.resolve(i).then(V=>{N.dispose(),t.dispose(),h(V)},V=>{N.dispose(),t.dispose(),R(V)})});return new class{cancel(){t.cancel()}then(h,R){return l.then(h,R)}catch(h){return this.then(void 0,h)}finally(h){return l.finally(h)}}}e.createCancelablePromise=w;function D(r,t,i){return new Promise((l,h)=>{const R=t.onCancellationRequested(()=>{R.dispose(),l(i)});r.then(l,h).finally(()=>R.dispose())})}e.raceCancellation=D;function z(r,t){return new Promise((i,l)=>{const h=t.onCancellationRequested(()=>{h.dispose(),l(new O.CancellationError)});r.then(i,l).finally(()=>h.dispose())})}e.raceCancellationError=z;async function M(r){let t=-1;const i=r.map((h,R)=>h.then(N=>(t=R,N))),l=await Promise.race(i);return r.forEach((h,R)=>{R!==t&&h.cancel()}),l}e.raceCancellablePromises=M;function s(r,t,i){let l;const h=setTimeout(()=>{l?.(void 0),i?.()},t);return Promise.race([r.finally(()=>clearTimeout(h)),new Promise(R=>l=R)])}e.raceTimeout=s;function o(r){return new Promise((t,i)=>{const l=r();b(l)?l.then(t,i):t(l)})}e.asPromise=o;class n{constructor(){this.a=null,this.b=null,this.d=null}queue(t){if(this.a){if(this.d=t,!this.b){const i=()=>{this.b=null;const l=this.queue(this.d);return this.d=null,l};this.b=new Promise(l=>{this.a.then(i,i).then(l)})}return new Promise((i,l)=>{this.b.then(i,l)})}return this.a=t(),new Promise((i,l)=>{this.a.then(h=>{this.a=null,i(h)},h=>{this.a=null,l(h)})})}}e.Throttler=n;class u{constructor(){this.a=Promise.resolve(null)}queue(t){return this.a=this.a.then(()=>t(),()=>t())}}e.Sequencer=u;class m{constructor(){this.a=new Map}queue(t,i){const h=(this.a.get(t)??Promise.resolve()).catch(()=>{}).then(i).finally(()=>{this.a.get(t)===h&&this.a.delete(t)});return this.a.set(t,h),h}}e.SequencerByKey=m;const c=(r,t)=>{let i=!0;const l=setTimeout(()=>{i=!1,t()},r);return{isTriggered:()=>i,dispose:()=>{clearTimeout(l),i=!1}}},F=r=>{let t=!0;return queueMicrotask(()=>{t&&(t=!1,r())}),{isTriggered:()=>t,dispose:()=>{t=!1}}};class Y{constructor(t){this.defaultDelay=t,this.a=null,this.b=null,this.d=null,this.f=null,this.g=null}trigger(t,i=this.defaultDelay){this.g=t,this.h(),this.b||(this.b=new Promise((h,R)=>{this.d=h,this.f=R}).then(()=>{if(this.b=null,this.d=null,this.g){const h=this.g;return this.g=null,h()}}));const l=()=>{this.a=null,this.d?.(null)};return this.a=i===B.MicrotaskDelay?F(l):c(i,l),this.b}isTriggered(){return!!this.a?.isTriggered()}cancel(){this.h(),this.b&&(this.f?.(new O.CancellationError),this.b=null)}h(){this.a?.dispose(),this.a=null}dispose(){this.cancel()}}e.Delayer=Y;class C{constructor(t){this.a=new Y(t),this.b=new n}trigger(t,i){return this.a.trigger(()=>this.b.queue(t),i)}isTriggered(){return this.a.isTriggered()}cancel(){this.a.cancel()}dispose(){this.a.dispose()}}e.ThrottledDelayer=C;class W{constructor(){this.a=!1,this.b=new Promise((t,i)=>{this.d=t})}isOpen(){return this.a}open(){this.a=!0,this.d(!0)}wait(){return this.b}}e.Barrier=W;class L extends W{constructor(t){super(),this.f=setTimeout(()=>this.open(),t)}open(){clearTimeout(this.f),super.open()}}e.AutoOpenBarrier=L;function G(r,t){return t?new Promise((i,l)=>{const h=setTimeout(()=>{R.dispose(),i()},r),R=t.onCancellationRequested(()=>{clearTimeout(h),R.dispose(),l(new O.CancellationError)})}):w(i=>G(r,i))}e.timeout=G;function X(r,t=0){const i=setTimeout(r,t);return(0,T.toDisposable)(()=>clearTimeout(i))}e.disposableTimeout=X;function a(r){const t=[];let i=0;const l=r.length;function h(){return i<l?r[i++]():null}function R(N){N!=null&&t.push(N);const V=h();return V?V.then(R):Promise.resolve(t)}return Promise.resolve(null).then(R)}e.sequence=a;function g(r,t=l=>!!l,i=null){let l=0;const h=r.length,R=()=>{if(l>=h)return Promise.resolve(i);const N=r[l++];return Promise.resolve(N()).then(J=>t(J)?Promise.resolve(J):R())};return R()}e.first=g;function U(r,t=l=>!!l,i=null){if(r.length===0)return Promise.resolve(i);let l=r.length;const h=()=>{l=-1;for(const R of r)R.cancel?.()};return new Promise((R,N)=>{for(const V of r)V.then(J=>{--l>=0&&t(J)?(h(),R(J)):l===0&&R(i)}).catch(J=>{--l>=0&&(h(),N(J))})})}e.firstParallel=U;class q{constructor(t){this.a=0,this.d=t,this.f=[],this.b=0,this.g=new A.Emitter}get onDrained(){return this.g.event}get size(){return this.a}queue(t){return this.a++,new Promise((i,l)=>{this.f.push({factory:t,c:i,e:l}),this.h()})}h(){for(;this.f.length&&this.b<this.d;){const t=this.f.shift();this.b++;const i=t.factory();i.then(t.c,t.e),i.then(()=>this.j(),()=>this.j())}}j(){this.a--,this.b--,this.f.length>0?this.h():this.g.fire()}dispose(){this.g.dispose()}}e.Limiter=q;class Q extends q{constructor(){super(1)}}e.Queue=Q;class ${constructor(){this.a=new Map,this.b=new Set}async whenDrained(){if(this.d())return;const t=new v;return this.b.add(t),t.p}d(){for(const[,t]of this.a)if(t.size>0)return!1;return!0}queueFor(t,i=y.extUri){const l=i.getComparisonKey(t);let h=this.a.get(l);return h||(h=new Q,A.Event.once(h.onDrained)(()=>{h?.dispose(),this.a.delete(l),this.f()}),this.a.set(l,h)),h}f(){!this.d()||this.g()}g(){for(const t of this.b)t.complete();this.b.clear()}dispose(){for(const[,t]of this.a)t.dispose();this.a.clear(),this.g()}}e.ResourceQueue=$;class K{constructor(t,i){this.a=-1,typeof t=="function"&&typeof i=="number"&&this.setIfNotSet(t,i)}dispose(){this.cancel()}cancel(){this.a!==-1&&(clearTimeout(this.a),this.a=-1)}cancelAndSet(t,i){this.cancel(),this.a=setTimeout(()=>{this.a=-1,t()},i)}setIfNotSet(t,i){this.a===-1&&(this.a=setTimeout(()=>{this.a=-1,t()},i))}}e.TimeoutTimer=K;class ne{constructor(){this.a=-1}dispose(){this.cancel()}cancel(){this.a!==-1&&(clearInterval(this.a),this.a=-1)}cancelAndSet(t,i){this.cancel(),this.a=setInterval(()=>{t()},i)}}e.IntervalTimer=ne;class _{constructor(t,i){this.b=-1,this.a=t,this.d=i,this.f=this.g.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearTimeout(this.b),this.b=-1)}schedule(t=this.d){this.cancel(),this.b=setTimeout(this.f,t)}get delay(){return this.d}set delay(t){this.d=t}isScheduled(){return this.b!==-1}flush(){this.isScheduled()&&(this.cancel(),this.h())}g(){this.b=-1,this.a&&this.h()}h(){this.a?.()}}e.RunOnceScheduler=_;class ee{constructor(t,i){i%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${i}ms is not a multiple of 1000ms.`),this.a=t,this.b=i,this.d=0,this.f=-1,this.g=this.h.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearInterval(this.f),this.f=-1)}schedule(t=this.b){t%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${t}ms is not a multiple of 1000ms.`),this.cancel(),this.d=Math.ceil(t/1e3),this.f=setInterval(this.g,1e3)}isScheduled(){return this.f!==-1}h(){this.d--,!(this.d>0)&&(clearInterval(this.f),this.f=-1,this.a?.())}}e.ProcessTimeRunOnceScheduler=ee;class re extends _{constructor(t,i){super(t,i),this.j=[]}work(t){this.j.push(t),this.isScheduled()||this.schedule()}h(){const t=this.j;this.j=[],this.a?.(t)}dispose(){this.j=[],super.dispose()}}e.RunOnceWorker=re;class p extends T.Disposable{constructor(t,i){super(),this.g=t,this.h=i,this.a=[],this.b=this.B(new T.MutableDisposable),this.f=!1}get pending(){return this.a.length}work(t){if(this.f)return!1;if(typeof this.g.maxBufferedWork=="number"){if(this.b.value){if(this.pending+t.length>this.g.maxBufferedWork)return!1}else if(this.pending+t.length-this.g.maxWorkChunkSize>this.g.maxBufferedWork)return!1}for(const i of t)this.a.push(i);return this.b.value||this.j(),!0}j(){this.h(this.a.splice(0,this.g.maxWorkChunkSize)),this.a.length>0&&(this.b.value=new _(()=>{this.b.clear(),this.j()},this.g.throttleDelay),this.b.value.schedule())}dispose(){super.dispose(),this.f=!0}}e.ThrottledWorker=p,function(){typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"?e.runWhenIdle=r=>{(0,k.setTimeout0)(()=>{if(t)return;const i=Date.now()+15;r(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,i-Date.now())}}))});let t=!1;return{dispose(){t||(t=!0)}}}:e.runWhenIdle=(r,t)=>{const i=requestIdleCallback(r,typeof t=="number"?{timeout:t}:void 0);let l=!1;return{dispose(){l||(l=!0,cancelIdleCallback(i))}}}}();class Z{constructor(t){this.d=!1,this.a=()=>{try{this.f=t()}catch(i){this.g=i}finally{this.d=!0}},this.b=(0,e.runWhenIdle)(()=>this.a())}dispose(){this.b.dispose()}get value(){if(this.d||(this.b.dispose(),this.a()),this.g)throw this.g;return this.f}get isInitialized(){return this.d}}e.IdleValue=Z;async function H(r,t,i){let l;for(let h=0;h<i;h++)try{return await r()}catch(R){l=R,await G(t)}throw l}e.retry=H;class te{hasPending(t){return this.a?typeof t=="number"?this.a.taskId===t:!!this.a:!1}get pending(){return this.a?.promise}cancelPending(){this.a?.cancel()}setPending(t,i,l){return this.a={taskId:t,cancel:()=>l?.(),promise:i},i.then(()=>this.d(t),()=>this.d(t)),i}d(t){this.a&&t===this.a.taskId&&(this.a=void 0,this.f())}f(){if(this.b){const t=this.b;this.b=void 0,t.run().then(t.promiseResolve,t.promiseReject)}}setNext(t){if(this.b)this.b.run=t;else{let i,l;const h=new Promise((R,N)=>{i=R,l=N});this.b={run:t,promise:h,promiseResolve:i,promiseReject:l}}return this.b.promise}hasNext(){return!!this.b}async join(){return this.b?.promise??this.a?.promise}}e.TaskSequentializer=te;class d{constructor(t,i=()=>Date.now()){this.d=t,this.f=i,this.a=0,this.b=0}increment(){const t=this.f();return t-this.a>this.d&&(this.a=t,this.b=0),this.b++,this.b}}e.IntervalCounter=d;class v{get isRejected(){return this.d}get isResolved(){return this.f}get isSettled(){return this.d||this.f}constructor(){this.d=!1,this.f=!1,this.p=new Promise((t,i)=>{this.a=t,this.b=i})}complete(t){return new Promise(i=>{this.a(t),this.f=!0,i()})}error(t){return new Promise(i=>{this.b(t),this.d=!0,i()})}cancel(){new Promise(t=>{this.b(new O.CancellationError),this.d=!0,t()})}}e.DeferredPromise=v;var f;(function(r){async function t(l){let h;const R=await Promise.all(l.map(N=>N.then(V=>V,V=>{h||(h=V)})));if(typeof h<"u")throw h;return R}r.settled=t;function i(l){return new Promise(async(h,R)=>{try{await l(h,R)}catch(N){R(N)}})}r.withAsyncBody=i})(f=e.Promises||(e.Promises={}));var E;(function(r){r[r.Initial=0]="Initial",r[r.DoneOK=1]="DoneOK",r[r.DoneError=2]="DoneError"})(E||(E={}));class P{static fromArray(t){return new P(i=>{i.emitMany(t)})}static fromPromise(t){return new P(async i=>{i.emitMany(await t)})}static fromPromises(t){return new P(async i=>{await Promise.all(t.map(async l=>i.emitOne(await l)))})}static merge(t){return new P(async i=>{await Promise.all(t.map(async l=>{for await(const h of l)i.emitOne(h)}))})}constructor(t){this.a=0,this.b=[],this.d=null,this.f=new A.Emitter,queueMicrotask(async()=>{const i={emitOne:l=>this.g(l),emitMany:l=>this.h(l),reject:l=>this.k(l)};try{await Promise.resolve(t(i)),this.j()}catch(l){this.k(l)}finally{i.emitOne=void 0,i.emitMany=void 0,i.reject=void 0}})}[Symbol.asyncIterator](){let t=0;return{next:async()=>{do{if(this.a===2)throw this.d;if(t<this.b.length)return{done:!1,value:this.b[t++]};if(this.a===1)return{done:!0,value:void 0};await A.Event.toPromise(this.f.event)}while(!0)}}}static map(t,i){return new P(async l=>{for await(const h of t)l.emitOne(i(h))})}map(t){return P.map(this,t)}static filter(t,i){return new P(async l=>{for await(const h of t)i(h)&&l.emitOne(h)})}filter(t){return P.filter(this,t)}static coalesce(t){return P.filter(t,i=>!!i)}coalesce(){return P.coalesce(this)}static async toPromise(t){const i=[];for await(const l of t)i.push(l);return i}toPromise(){return P.toPromise(this)}g(t){this.a===0&&(this.b.push(t),this.f.fire())}h(t){this.a===0&&(this.b=this.b.concat(t),this.f.fire())}j(){this.a===0&&(this.a=1,this.f.fire())}k(t){this.a===0&&(this.a=2,this.d=t,this.f.fire())}}P.EMPTY=P.fromArray([]),e.AsyncIterableObject=P;class S extends P{constructor(t,i){super(i),this.l=t}cancel(){this.l.cancel()}}e.CancelableAsyncIterableObject=S;function j(r){const t=new I.CancellationTokenSource,i=r(t.token);return new S(t,async l=>{const h=t.token.onCancellationRequested(()=>{h.dispose(),t.dispose(),l.reject(new O.CancellationError)});try{for await(const R of i){if(t.token.isCancellationRequested)return;l.emitOne(R)}h.dispose(),t.dispose()}catch(R){h.dispose(),t.dispose(),l.reject(R)}})}e.createCancelableAsyncIterable=j}),define(ie[9],se([0,1,20,8,5,10,3,2,4]),function(x,e,I,O,A,T,y,k,B){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.patternsEquals=e.getPathTerms=e.getBasenameTerms=e.isRelativePattern=e.parse=e.match=e.splitGlobAware=e.GLOB_SPLIT=e.GLOBSTAR=e.getEmptyExpression=void 0;function b(){return Object.create(null)}e.getEmptyExpression=b,e.GLOBSTAR="**",e.GLOB_SPLIT="/";const w="[/\\\\]",D="[^/\\\\]",z=/\//g;function M(d,v){switch(d){case 0:return"";case 1:return`${D}*?`;default:return`(?:${w}|${D}+${w}${v?`|${w}${D}+`:""})*?`}}function s(d,v){if(!d)return[];const f=[];let E=!1,P=!1,S="";for(const j of d){switch(j){case v:if(!E&&!P){f.push(S),S="";continue}break;case"{":E=!0;break;case"}":E=!1;break;case"[":P=!0;break;case"]":P=!1;break}S+=j}return S&&f.push(S),f}e.splitGlobAware=s;function o(d){if(!d)return"";let v="";const f=s(d,e.GLOB_SPLIT);if(f.every(E=>E===e.GLOBSTAR))v=".*";else{let E=!1;f.forEach((P,S)=>{if(P===e.GLOBSTAR){if(E)return;v+=M(2,S===f.length-1)}else{let j=!1,r="",t=!1,i="";for(const l of P){if(l!=="}"&&j){r+=l;continue}if(t&&(l!=="]"||!i)){let h;l==="-"?h=l:(l==="^"||l==="!")&&!i?h="^":l===e.GLOB_SPLIT?h="":h=(0,B.escapeRegExpCharacters)(l),i+=h;continue}switch(l){case"{":j=!0;continue;case"[":t=!0;continue;case"}":{v+=`(?:${s(r,",").map(N=>o(N)).join("|")})`,j=!1,r="";break}case"]":{v+="["+i+"]",t=!1,i="";break}case"?":v+=D;continue;case"*":v+=M(1);continue;default:v+=(0,B.escapeRegExpCharacters)(l)}}S<f.length-1&&(f[S+1]!==e.GLOBSTAR||S+2<f.length)&&(v+=w)}E=P===e.GLOBSTAR})}return v}const n=/^\*\*\/\*\.[\w\.-]+$/,u=/^\*\*\/([\w\.-]+)\/?$/,m=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,c=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,F=/^\*\*((\/[\w\.-]+)+)\/?$/,Y=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,C=new T.LRUCache(1e4),W=function(){return!1},L=function(){return null};function G(d,v){if(!d)return L;let f;typeof d!="string"?f=d.pattern:f=d,f=f.trim();const E=`${f}_${!!v.trimForExclusions}`;let P=C.get(E);if(P)return X(P,d);let S;return n.test(f)?P=g(f.substr(4),f):(S=u.exec(a(f,v)))?P=U(S[1],f):(v.trimForExclusions?c:m).test(f)?P=q(f,v):(S=F.exec(a(f,v)))?P=Q(S[1].substr(1),f,!0):(S=Y.exec(a(f,v)))?P=Q(S[1],f,!1):P=$(f),C.set(E,P),X(P,d)}function X(d,v){if(typeof v=="string")return d;const f=function(E,P){return(0,A.isEqualOrParent)(E,v.base,!k.isLinux)?d((0,B.ltrim)(E.substr(v.base.length),y.sep),P):null};return f.allBasenames=d.allBasenames,f.allPaths=d.allPaths,f.basenames=d.basenames,f.patterns=d.patterns,f}function a(d,v){return v.trimForExclusions&&d.endsWith("/**")?d.substr(0,d.length-2):d}function g(d,v){return function(f,E){return typeof f=="string"&&f.endsWith(d)?v:null}}function U(d,v){const f=`/${d}`,E=`\\${d}`,P=function(j,r){return typeof j!="string"?null:r?r===d?v:null:j===d||j.endsWith(f)||j.endsWith(E)?v:null},S=[d];return P.basenames=S,P.patterns=[v],P.allBasenames=S,P}function q(d,v){const f=H(d.slice(1,-1).split(",").map(r=>G(r,v)).filter(r=>r!==L),d),E=f.length;if(!E)return L;if(E===1)return f[0];const P=function(r,t){for(let i=0,l=f.length;i<l;i++)if(f[i](r,t))return d;return null},S=f.find(r=>!!r.allBasenames);S&&(P.allBasenames=S.allBasenames);const j=f.reduce((r,t)=>t.allPaths?r.concat(t.allPaths):r,[]);return j.length&&(P.allPaths=j),P}function Q(d,v,f){const E=y.sep===y.posix.sep,P=E?d:d.replace(z,y.sep),S=y.sep+P,j=y.posix.sep+d;let r;return f?r=function(t,i){return typeof t=="string"&&(t===P||t.endsWith(S)||!E&&(t===d||t.endsWith(j)))?v:null}:r=function(t,i){return typeof t=="string"&&(t===P||!E&&t===d)?v:null},r.allPaths=[(f?"*/":"./")+d],r}function $(d){try{const v=new RegExp(`^${o(d)}$`);return function(f){return v.lastIndex=0,typeof f=="string"&&v.test(f)?d:null}}catch{return L}}function K(d,v,f){return!d||typeof v!="string"?!1:ne(d)(v,void 0,f)}e.match=K;function ne(d,v={}){if(!d)return W;if(typeof d=="string"||_(d)){const f=G(d,v);if(f===L)return W;const E=function(P,S){return!!f(P,S)};return f.allBasenames&&(E.allBasenames=f.allBasenames),f.allPaths&&(E.allPaths=f.allPaths),E}return p(d,v)}e.parse=ne;function _(d){const v=d;return v?typeof v.base=="string"&&typeof v.pattern=="string":!1}e.isRelativePattern=_;function ee(d){return d.allBasenames||[]}e.getBasenameTerms=ee;function re(d){return d.allPaths||[]}e.getPathTerms=re;function p(d,v){const f=H(Object.getOwnPropertyNames(d).map(r=>Z(r,d[r],v)).filter(r=>r!==L)),E=f.length;if(!E)return L;if(!f.some(r=>!!r.requiresSiblings)){if(E===1)return f[0];const r=function(l,h){let R;for(let N=0,V=f.length;N<V;N++){const J=f[N](l,h);if(typeof J=="string")return J;(0,O.isThenable)(J)&&(R||(R=[]),R.push(J))}return R?(async()=>{for(const N of R){const V=await N;if(typeof V=="string")return V}return null})():null},t=f.find(l=>!!l.allBasenames);t&&(r.allBasenames=t.allBasenames);const i=f.reduce((l,h)=>h.allPaths?l.concat(h.allPaths):l,[]);return i.length&&(r.allPaths=i),r}const P=function(r,t,i){let l,h;for(let R=0,N=f.length;R<N;R++){const V=f[R];V.requiresSiblings&&i&&(t||(t=(0,y.basename)(r)),l||(l=t.substr(0,t.length-(0,y.extname)(r).length)));const J=V(r,t,l,i);if(typeof J=="string")return J;(0,O.isThenable)(J)&&(h||(h=[]),h.push(J))}return h?(async()=>{for(const R of h){const N=await R;if(typeof N=="string")return N}return null})():null},S=f.find(r=>!!r.allBasenames);S&&(P.allBasenames=S.allBasenames);const j=f.reduce((r,t)=>t.allPaths?r.concat(t.allPaths):r,[]);return j.length&&(P.allPaths=j),P}function Z(d,v,f){if(v===!1)return L;const E=G(d,f);if(E===L)return L;if(typeof v=="boolean")return E;if(v){const P=v.when;if(typeof P=="string"){const S=(j,r,t,i)=>{if(!i||!E(j,r))return null;const l=P.replace("$(basename)",()=>t),h=i(l);return(0,O.isThenable)(h)?h.then(R=>R?d:null):h?d:null};return S.requiresSiblings=!0,S}}return E}function H(d,v){const f=d.filter(r=>!!r.basenames);if(f.length<2)return d;const E=f.reduce((r,t)=>{const i=t.basenames;return i?r.concat(i):r},[]);let P;if(v){P=[];for(let r=0,t=E.length;r<t;r++)P.push(v)}else P=f.reduce((r,t)=>{const i=t.patterns;return i?r.concat(i):r},[]);const S=function(r,t){if(typeof r!="string")return null;if(!t){let l;for(l=r.length;l>0;l--){const h=r.charCodeAt(l-1);if(h===47||h===92)break}t=r.substr(l)}const i=E.indexOf(t);return i!==-1?P[i]:null};S.basenames=E,S.patterns=P,S.allBasenames=E;const j=d.filter(r=>!r.basenames);return j.push(S),j}function te(d,v){return(0,I.equals)(d,v,(f,E)=>typeof f=="string"&&typeof E=="string"?f===E:typeof f!="string"&&typeof E!="string"?f.base===E.base&&f.pattern===E.pattern:!1)}e.patternsEquals=te}),define(ie[15],se([0,1,21]),function(x,e,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getFileResults=void 0;const O=(A,T,y)=>{let k;if(A[0]===255&&A[1]===254)k=new TextDecoder("utf-16le").decode(A);else if(A[0]===254&&A[1]===255)k=new TextDecoder("utf-16be").decode(A);else if(k=new TextDecoder("utf8").decode(A),k.slice(0,1e3).includes("\uFFFD")&&A.includes(0))return[];const B=[],b=[];let w=null,D=y.remainingResultQuota;for(;D>=0&&(w=T.exec(k));)b.push({matchStartIndex:w.index,matchedText:w[0]}),D--;if(b.length){const z=new Set,M=new Set,s=[],o=F=>k.slice(s[F].start,s[F].end);let n=0,u=null;const m=/\r?\n/g;for(;u=m.exec(k);)s.push({start:n,end:u.index}),n=u.index+u[0].length;n<k.length&&s.push({start:n,end:k.length});let c=0;for(const{matchStartIndex:F,matchedText:Y}of b){if(D<0)break;for(;Boolean(s[c+1])&&F>s[c].end;)c++;let C=c;for(;Boolean(s[C+1])&&F+Y.length>s[C].end;)C++;if(y.beforeContext)for(let g=Math.max(0,c-y.beforeContext);g<c;g++)z.add(g);let W="",L=0;for(let g=c;g<=C;g++){let U=o(g);y.previewOptions?.charsPerLine&&U.length>y.previewOptions.charsPerLine&&(L=Math.max(F-s[c].start-20,0),U=U.substr(L,y.previewOptions.charsPerLine)),W+=`${U}
`,M.add(g)}const G=new I.Range(c,F-s[c].start,C,F+Y.length-s[C].start),X=new I.Range(0,F-s[c].start-L,C-c,F+Y.length-s[C].start-(C===c?L:0)),a={ranges:G,preview:{text:W,matches:X}};if(B.push(a),y.afterContext)for(let g=C+1;g<=Math.min(C+y.afterContext,s.length-1);g++)z.add(g)}for(const F of z)M.has(F)||B.push({text:o(F),lineNumber:F+1})}return B};e.getFileResults=O}),define(ie[16],se([0,1,9]),function(x,e,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IgnoreFile=void 0;class O{constructor(T,y,k){if(this.b=y,this.c=k,y[y.length-1]==="\\")throw Error("Unexpected path format, do not use trailing backslashes");y[y.length-1]!=="/"&&(y+="/"),this.a=this.e(T,this.b,this.c)}updateContents(T){this.a=this.e(T,this.b,this.c)}isPathIncludedInTraversal(T,y){if(T[0]!=="/"||T[T.length-1]==="/")throw Error("Unexpected path format, expectred to begin with slash and end without. got:"+T);return!this.a(T,y)}isArbitraryPathIgnored(T,y){if(T[0]!=="/"||T[T.length-1]==="/")throw Error("Unexpected path format, expectred to begin with slash and end without. got:"+T);const k=T.split("/").filter(w=>w);let B=!1,b="";for(let w=0;w<k.length;w++){const D=w===k.length-1,z=k[w];if(b=b+"/"+z,!this.isPathIncludedInTraversal(b,D?y:!0)){B=!0;break}}return B}d(T,y,k){const B=T.map(w=>this.f(w,y)),b=Object.create(null);for(const w of B)b[w]=!0;return I.parse(b,{trimForExclusions:k})}e(T,y,k){const B=T.split(`
`).map(c=>c.trim()).filter(c=>c&&c[0]!=="#"),b=B.filter(c=>!c.endsWith("/")),w=b.filter(c=>!c.includes("!")),D=this.d(w,y,!0),z=b.filter(c=>c.includes("!")).map(c=>c.replace(/!/g,"")),M=this.d(z,y,!1),s=B.filter(c=>!c.includes("!")),o=this.d(s,y,!0),n=B.filter(c=>c.includes("!")).map(c=>c.replace(/!/g,"")),u=this.d(n,y,!1);return(c,F)=>c.startsWith(y)?F&&o(c)&&!u(c)||D(c)&&!M(c)?!0:k?k.a(c,F):!1:!1}f(T,y){const k=T.indexOf("/");return k===-1||k===T.length-1?T="**/"+T:(k===0?y.slice(-1)==="/"&&(T=T.slice(1)):y.slice(-1)!=="/"&&(T="/"+T),T=y+T),T}}e.IgnoreFile=O}),define(ie[22],se([0,1,9,6,3,14,15,16,4,8,7]),function(x,e,I,O,A,T,y,k,B,b,w){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LocalFileSearchSimpleWorker=e.create=void 0;const D=!1,z=+new Date,M={},s=async(C,W)=>{if(!D)return W();const L=Date.now(),G=(M[C]??0)+1;console.info(C,G,"starting",Math.round((L-z)*10)/1e4),M[C]=G;const X=await W(),a=Date.now();return console.info(C,G,"took",a-L),X};function o(C){return new n(C)}e.create=o;class n{constructor(W){this.d=W,this.cancellationTokens=new Map}cancelQuery(W){this.cancellationTokens.get(W)?.cancel()}g(W){const L=new T.CancellationTokenSource;return this.cancellationTokens.set(W,L),L}async listDirectory(W,L,G,X,a){const g=m(G),U=new w.ExtUri(()=>X),q=this.g(a),Q=[];let $=!1,K=0;const ne=L.maxResults||512,_=L.filePattern?ee=>L.filePattern.split("").every(re=>ee.includes(re)):ee=>!0;return await s("listDirectory",()=>this.h(W,c(L),g,U,ee=>{if(!!_(ee.name))return K++,ne&&K>ne&&($=!0,q.cancel()),Q.push(ee.path)},q.token)),{results:Q,limitHit:$}}async searchDirectory(W,L,G,X,a){const g=m(G),U=new w.ExtUri(()=>X);return s("searchInFiles",async()=>{const q=this.g(a),Q=[],$=u(L.contentPattern),K=[];let ne=0,_=0;const ee=!1,re=async p=>{if(q.token.isCancellationRequested)return;ne++;const Z=await p.resolve();if(q.token.isCancellationRequested)return;const H=new Uint8Array(Z),te=(0,y.getFileResults)(H,$,{afterContext:L.afterContext??0,beforeContext:L.beforeContext??0,previewOptions:L.previewOptions,remainingResultQuota:L.maxResults?L.maxResults-_:1e4});if(te.length){_+=te.length,L.maxResults&&_>L.maxResults&&q.cancel();const d={resource:O.URI.joinPath(g.folder,p.path),results:te};this.d.sendTextSearchMatch(d,a),Q.push(d)}};return await s("walkFolderToResolve",()=>this.h(W,c(L),g,U,async p=>K.push(re(p)),q.token)),await s("resolveOngoingProcesses",()=>Promise.all(K)),D&&console.log("Searched in",ne,"files"),{results:Q,limitHit:ee}})}async h(W,L,G,X,a,g){const U=I.parse(G.excludePattern??{},{trimForExclusions:!0}),q=(p,Z,H)=>(p=p.slice(1),!!(U(p,Z,H)||F(L,p))),Q=(p,Z,H)=>(p=p.slice(1),!(U(p,Z,H)||!Y(L,p,X))),$=(p,Z)=>({type:"file",name:p.name,path:Z,resolve:()=>p.getFile().then(te=>te.arrayBuffer())}),K=p=>p.kind==="directory",ne=p=>p.kind==="file",_=async(p,Z,H)=>{if(!G.disregardIgnoreFiles){const d=await Promise.all([p.getFileHandle(".gitignore").catch(v=>{}),p.getFileHandle(".ignore").catch(v=>{})]);await Promise.all(d.map(async v=>{if(!v)return;const f=new TextDecoder("utf8").decode(new Uint8Array(await(await v.getFile()).arrayBuffer()));H=new k.IgnoreFile(f,Z,H)}))}const te=b.Promises.withAsyncBody(async d=>{const v=[],f=[],E=[],P=new Set;for await(const S of p.entries())E.push(S),P.add(S[0]);for(const[S,j]of E){if(g.isCancellationRequested)break;const r=Z+S;if(H&&!H.isPathIncludedInTraversal(r,j.kind==="directory"))continue;const t=i=>P.has(i);K(j)&&!q(r,S,t)?f.push(_(j,r+"/",H)):ne(j)&&Q(r,S,t)&&v.push($(j,r))}d([...await Promise.all(f),...v])});return{type:"dir",name:p.name,entries:te}},ee=async(p,Z)=>{g.isCancellationRequested||await Promise.all((await p.entries).sort((H,te)=>-(H.type==="dir"?0:1)+(te.type==="dir"?0:1)).map(async H=>H.type==="dir"?ee(H,Z):Z(H)))},re=await s("process",()=>_(W,"/"));await s("resolve",()=>ee(re,a))}}e.LocalFileSearchSimpleWorker=n;function u(C){return(0,B.createRegExp)(C.pattern,!!C.isRegExp,{wholeWord:C.isWordMatch,global:!0,matchCase:C.isCaseSensitive,multiline:!0,unicode:!0})}function m(C){return{...C,folder:O.URI.revive(C.folder)}}function c(C){return{...C,extraFileResources:C.extraFileResources?.map(W=>O.URI.revive(W)),folderQueries:C.folderQueries.map(W=>m(W))}}function F(C,W){return!!(C.excludePattern&&I.match(C.excludePattern,W))}function Y(C,W,L){return C.excludePattern&&I.match(C.excludePattern,W)?!1:C.includePattern||C.usingSearchPaths?C.includePattern&&I.match(C.includePattern,W)?!0:C.usingSearchPaths?!!C.folderQueries&&C.folderQueries.some(G=>{const X=G.folder,a=O.URI.file(W);if(L.isEqualOrParent(a,X)){const g=A.relative(X.path,a.path);return!G.includePattern||!!I.match(G.includePattern,g)}else return!1}):!1:!0}})}).call(this);

//# sourceMappingURL=https://ticino.blob.core.windows.net/sourcemaps/e344f1f539a80912a0e9357cec841f36ce97a4e2/core/vs/workbench/services/search/worker/localFileSearch.js.map
