/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/(function(){var ne=["require","exports","vs/base/common/platform","vs/base/common/strings","vs/base/common/errors","vs/base/common/path","vs/base/common/buffer","vs/base/common/lifecycle","vs/base/common/extpath","vs/base/common/network","vs/base/common/uri","vs/editor/common/model/pieceTreeTextBuffer/pieceTreeBase","vs/editor/common/core/range","vs/base/common/map","vs/base/common/stream","vs/base/common/symbols","vs/editor/common/core/eolCounter","vs/editor/common/model/pieceTreeTextBuffer/rbTreeBase","vs/base/common/mime","vs/base/common/resources","vs/base/common/async","vs/base/common/event","vs/base/common/glob","vs/editor/common/core/stringBuilder","vs/editor/common/core/textChange","vs/editor/common/model","vs/editor/common/model/pieceTreeTextBuffer/pieceTreeTextBuffer","vs/editor/common/model/pieceTreeTextBuffer/pieceTreeTextBufferBuilder","vs/nls!vs/platform/contextkey/common/contextkey","vs/nls","vs/nls!vs/workbench/contrib/notebook/common/services/notebookSimpleWorker","vs/nls!vs/platform/contextkey/common/scanner","vs/platform/contextkey/common/scanner","vs/platform/instantiation/common/instantiation","vs/platform/contextkey/common/contextkey","vs/workbench/contrib/notebook/common/notebookCommon","vs/base/common/types","vs/base/common/cancellation","vs/base/common/arrays","vs/editor/common/core/position","vs/editor/common/model/textModelSearch","vs/base/common/iterator","vs/workbench/contrib/notebook/common/services/notebookSimpleWorker","vs/base/common/diff/diff","vs/base/common/hash"],ie=function(te){for(var e=[],q=0,U=te.length;q<U;q++)e[q]=ne[te[q]];return e};define(ne[13],ie([0,1]),function(te,e){"use strict";var q,U,F;Object.defineProperty(e,"__esModule",{value:!0}),e.CounterSet=e.LRUCache=e.LinkedMap=e.Touch=e.ResourceSet=e.ResourceMap=e.setToString=e.mapToString=e.getOrSet=void 0;function N(u,s,h){let n=u.get(s);return n===void 0&&(n=h,u.set(s,n)),n}e.getOrSet=N;function T(u){const s=[];return u.forEach((h,n)=>{s.push(`${n} => ${h}`)}),`Map(${u.size}) {${s.join(", ")}}`}e.mapToString=T;function z(u){const s=[];return u.forEach(h=>{s.push(h)}),`Set(${u.size}) {${s.join(", ")}}`}e.setToString=z;class A{constructor(s,h){this.uri=s,this.value=h}}class f{constructor(s,h){this[q]="ResourceMap",s instanceof f?(this.b=new Map(s.b),this.c=h??f.a):(this.b=new Map,this.c=s??f.a)}set(s,h){return this.b.set(this.c(s),new A(s,h)),this}get(s){return this.b.get(this.c(s))?.value}has(s){return this.b.has(this.c(s))}get size(){return this.b.size}clear(){this.b.clear()}delete(s){return this.b.delete(this.c(s))}forEach(s,h){typeof h<"u"&&(s=s.bind(h));for(const[n,r]of this.b)s(r.value,r.uri,this)}*values(){for(const s of this.b.values())yield s.value}*keys(){for(const s of this.b.values())yield s.uri}*entries(){for(const s of this.b.values())yield[s.uri,s.value]}*[(q=Symbol.toStringTag,Symbol.iterator)](){for(const[,s]of this.b)yield[s.uri,s.value]}}f.a=u=>u.toString(),e.ResourceMap=f;class w{constructor(s,h){this[U]="ResourceSet",!s||typeof s=="function"?this.a=new f(s):(this.a=new f(h),s.forEach(this.add,this))}get size(){return this.a.size}add(s){return this.a.set(s,s),this}clear(){this.a.clear()}delete(s){return this.a.delete(s)}forEach(s,h){this.a.forEach((n,r)=>s.call(h,r,r,this))}has(s){return this.a.has(s)}entries(){return this.a.entries()}keys(){return this.a.keys()}values(){return this.a.keys()}[(U=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}}e.ResourceSet=w;var k;(function(u){u[u.None=0]="None",u[u.AsOld=1]="AsOld",u[u.AsNew=2]="AsNew"})(k=e.Touch||(e.Touch={}));class p{constructor(){this[F]="LinkedMap",this.a=new Map,this.b=void 0,this.c=void 0,this.d=0,this.e=0}clear(){this.a.clear(),this.b=void 0,this.c=void 0,this.d=0,this.e++}isEmpty(){return!this.b&&!this.c}get size(){return this.d}get first(){return this.b?.value}get last(){return this.c?.value}has(s){return this.a.has(s)}get(s,h=0){const n=this.a.get(s);if(!!n)return h!==0&&this.j(n,h),n.value}set(s,h,n=0){let r=this.a.get(s);if(r)r.value=h,n!==0&&this.j(r,n);else{switch(r={key:s,value:h,next:void 0,previous:void 0},n){case 0:this.h(r);break;case 1:this.g(r);break;case 2:this.h(r);break;default:this.h(r);break}this.a.set(s,r),this.d++}return this}delete(s){return!!this.remove(s)}remove(s){const h=this.a.get(s);if(!!h)return this.a.delete(s),this.i(h),this.d--,h.value}shift(){if(!this.b&&!this.c)return;if(!this.b||!this.c)throw new Error("Invalid list");const s=this.b;return this.a.delete(s.key),this.i(s),this.d--,s.value}forEach(s,h){const n=this.e;let r=this.b;for(;r;){if(h?s.bind(h)(r.value,r.key,this):s(r.value,r.key,this),this.e!==n)throw new Error("LinkedMap got modified during iteration.");r=r.next}}keys(){const s=this,h=this.e;let n=this.b;const r={[Symbol.iterator](){return r},next(){if(s.e!==h)throw new Error("LinkedMap got modified during iteration.");if(n){const i={value:n.key,done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}values(){const s=this,h=this.e;let n=this.b;const r={[Symbol.iterator](){return r},next(){if(s.e!==h)throw new Error("LinkedMap got modified during iteration.");if(n){const i={value:n.value,done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}entries(){const s=this,h=this.e;let n=this.b;const r={[Symbol.iterator](){return r},next(){if(s.e!==h)throw new Error("LinkedMap got modified during iteration.");if(n){const i={value:[n.key,n.value],done:!1};return n=n.next,i}else return{value:void 0,done:!0}}};return r}[(F=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}f(s){if(s>=this.size)return;if(s===0){this.clear();return}let h=this.b,n=this.size;for(;h&&n>s;)this.a.delete(h.key),h=h.next,n--;this.b=h,this.d=n,h&&(h.previous=void 0),this.e++}g(s){if(!this.b&&!this.c)this.c=s;else if(this.b)s.next=this.b,this.b.previous=s;else throw new Error("Invalid list");this.b=s,this.e++}h(s){if(!this.b&&!this.c)this.b=s;else if(this.c)s.previous=this.c,this.c.next=s;else throw new Error("Invalid list");this.c=s,this.e++}i(s){if(s===this.b&&s===this.c)this.b=void 0,this.c=void 0;else if(s===this.b){if(!s.next)throw new Error("Invalid list");s.next.previous=void 0,this.b=s.next}else if(s===this.c){if(!s.previous)throw new Error("Invalid list");s.previous.next=void 0,this.c=s.previous}else{const h=s.next,n=s.previous;if(!h||!n)throw new Error("Invalid list");h.previous=n,n.next=h}s.next=void 0,s.previous=void 0,this.e++}j(s,h){if(!this.b||!this.c)throw new Error("Invalid list");if(!(h!==1&&h!==2)){if(h===1){if(s===this.b)return;const n=s.next,r=s.previous;s===this.c?(r.next=void 0,this.c=r):(n.previous=r,r.next=n),s.previous=void 0,s.next=this.b,this.b.previous=s,this.b=s,this.e++}else if(h===2){if(s===this.c)return;const n=s.next,r=s.previous;s===this.b?(n.previous=void 0,this.b=n):(n.previous=r,r.next=n),s.next=void 0,s.previous=this.c,this.c.next=s,this.c=s,this.e++}}}toJSON(){const s=[];return this.forEach((h,n)=>{s.push([n,h])}),s}fromJSON(s){this.clear();for(const[h,n]of s)this.set(h,n)}}e.LinkedMap=p;class R extends p{constructor(s,h=1){super(),this.k=s,this.l=Math.min(Math.max(0,h),1)}get limit(){return this.k}set limit(s){this.k=s,this.m()}get ratio(){return this.l}set ratio(s){this.l=Math.min(Math.max(0,s),1),this.m()}get(s,h=2){return super.get(s,h)}peek(s){return super.get(s,0)}set(s,h){return super.set(s,h,2),this.m(),this}m(){this.size>this.k&&this.f(Math.round(this.k*this.l))}}e.LRUCache=R;class b{constructor(){this.a=new Map}add(s){return this.a.set(s,(this.a.get(s)||0)+1),this}delete(s){let h=this.a.get(s)||0;return h===0?!1:(h--,h===0?this.a.delete(s):this.a.set(s,h),!0)}has(s){return this.a.has(s)}}e.CounterSet=b}),define(ne[14],ie([0,1,4,7]),function(te,e,q,U){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.prefixedStream=e.prefixedReadable=e.transform=e.toReadable=e.emptyStream=e.toStream=e.peekStream=e.listenStream=e.consumeStream=e.peekReadable=e.consumeReadable=e.newWriteableStream=e.isReadableBufferedStream=e.isReadableStream=e.isReadable=void 0;function F(i){const o=i;return o?typeof o.read=="function":!1}e.isReadable=F;function N(i){const o=i;return o?[o.on,o.pause,o.resume,o.destroy].every(c=>typeof c=="function"):!1}e.isReadableStream=N;function T(i){const o=i;return o?N(o.stream)&&Array.isArray(o.buffer)&&typeof o.ended=="boolean":!1}e.isReadableBufferedStream=T;function z(i,o){return new A(i,o)}e.newWriteableStream=z;class A{constructor(o,c){this.e=o,this.f=c,this.a={flowing:!1,ended:!1,destroyed:!1},this.b={data:[],error:[]},this.c={data:[],error:[],end:[]},this.d=[]}pause(){this.a.destroyed||(this.a.flowing=!1)}resume(){this.a.destroyed||this.a.flowing||(this.a.flowing=!0,this.j(),this.k(),this.l())}write(o){if(!this.a.destroyed){if(this.a.flowing)this.g(o);else if(this.b.data.push(o),typeof this.f?.highWaterMark=="number"&&this.b.data.length>this.f.highWaterMark)return new Promise(c=>this.d.push(c))}}error(o){this.a.destroyed||(this.a.flowing?this.h(o):this.b.error.push(o))}end(o){this.a.destroyed||(typeof o<"u"&&this.write(o),this.a.flowing?(this.i(),this.destroy()):this.a.ended=!0)}g(o){this.c.data.slice(0).forEach(c=>c(o))}h(o){this.c.error.length===0?(0,q.onUnexpectedError)(o):this.c.error.slice(0).forEach(c=>c(o))}i(){this.c.end.slice(0).forEach(o=>o())}on(o,c){if(!this.a.destroyed)switch(o){case"data":this.c.data.push(c),this.resume();break;case"end":this.c.end.push(c),this.a.flowing&&this.l()&&this.destroy();break;case"error":this.c.error.push(c),this.a.flowing&&this.k();break}}removeListener(o,c){if(this.a.destroyed)return;let E;switch(o){case"data":E=this.c.data;break;case"end":E=this.c.end;break;case"error":E=this.c.error;break}if(E){const v=E.indexOf(c);v>=0&&E.splice(v,1)}}j(){if(this.b.data.length>0){const o=this.e(this.b.data);this.g(o),this.b.data.length=0;const c=[...this.d];this.d.length=0,c.forEach(E=>E())}}k(){if(this.c.error.length>0){for(const o of this.b.error)this.h(o);this.b.error.length=0}}l(){return this.a.ended?(this.i(),this.c.end.length>0):!1}destroy(){this.a.destroyed||(this.a.destroyed=!0,this.a.ended=!0,this.b.data.length=0,this.b.error.length=0,this.c.data.length=0,this.c.error.length=0,this.c.end.length=0,this.d.length=0)}}function f(i,o){const c=[];let E;for(;(E=i.read())!==null;)c.push(E);return o(c)}e.consumeReadable=f;function w(i,o,c){const E=[];let v;for(;(v=i.read())!==null&&E.length<c;)E.push(v);return v===null&&E.length>0?o(E):{read:()=>{if(E.length>0)return E.shift();if(typeof v<"u"){const O=v;return v=void 0,O}return i.read()}}}e.peekReadable=w;function k(i,o){return new Promise((c,E)=>{const v=[];p(i,{onData:O=>{o&&v.push(O)},onError:O=>{o?E(O):c(void 0)},onEnd:()=>{c(o?o(v):void 0)}})})}e.consumeStream=k;function p(i,o){let c=!1;return i.on("error",E=>{c||o.onError(E)}),i.on("end",()=>{c||o.onEnd()}),i.on("data",E=>{c||o.onData(E)}),(0,U.toDisposable)(()=>c=!0)}e.listenStream=p;function R(i,o){return new Promise((c,E)=>{const v=new U.DisposableStore,O=[],P=g=>{if(O.push(g),O.length>o)return v.dispose(),i.pause(),c({stream:i,buffer:O,ended:!1})},d=g=>E(g),m=()=>c({stream:i,buffer:O,ended:!0});v.add((0,U.toDisposable)(()=>i.removeListener("error",d))),i.on("error",d),v.add((0,U.toDisposable)(()=>i.removeListener("end",m))),i.on("end",m),v.add((0,U.toDisposable)(()=>i.removeListener("data",P))),i.on("data",P)})}e.peekStream=R;function b(i,o){const c=z(o);return c.end(i),c}e.toStream=b;function u(){const i=z(()=>{throw new Error("not supported")});return i.end(),i}e.emptyStream=u;function s(i){let o=!1;return{read:()=>o?null:(o=!0,i)}}e.toReadable=s;function h(i,o,c){const E=z(c);return p(i,{onData:v=>E.write(o.data(v)),onError:v=>E.error(o.error?o.error(v):v),onEnd:()=>E.end()}),E}e.transform=h;function n(i,o,c){let E=!1;return{read:()=>{const v=o.read();return E?v:(E=!0,v!==null?c([i,v]):i)}}}e.prefixedReadable=n;function r(i,o,c){let E=!1;const v=z(c);return p(o,{onData:O=>E?v.write(O):(E=!0,v.write(c([i,O]))),onError:O=>v.error(O),onEnd:()=>{E||(E=!0,v.write(i)),v.end()}}),v}e.prefixedStream=r}),define(ne[6],ie([0,1,14]),function(te,e,q){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.encodeBase64=e.decodeBase64=e.prefixedBufferStream=e.prefixedBufferReadable=e.newWriteableBufferStream=e.streamToBufferReadableStream=e.bufferToStream=e.bufferedStreamToBuffer=e.streamToBuffer=e.bufferToReadable=e.readableToBuffer=e.writeUInt8=e.readUInt8=e.writeUInt32LE=e.readUInt32LE=e.writeUInt32BE=e.readUInt32BE=e.writeUInt16LE=e.readUInt16LE=e.VSBuffer=void 0;const U=typeof Buffer<"u";let F,N;class T{static alloc(g){return U?new T(Buffer.allocUnsafe(g)):new T(new Uint8Array(g))}static wrap(g){return U&&!Buffer.isBuffer(g)&&(g=Buffer.from(g.buffer,g.byteOffset,g.byteLength)),new T(g)}static fromString(g,y){return!(y?.dontUseNodeBuffer||!1)&&U?new T(Buffer.from(g)):(F||(F=new TextEncoder),new T(F.encode(g)))}static fromByteArray(g){const y=T.alloc(g.length);for(let j=0,W=g.length;j<W;j++)y.buffer[j]=g[j];return y}static concat(g,y){if(typeof y>"u"){y=0;for(let K=0,Z=g.length;K<Z;K++)y+=g[K].byteLength}const j=T.alloc(y);let W=0;for(let K=0,Z=g.length;K<Z;K++){const Y=g[K];j.set(Y,W),W+=Y.byteLength}return j}constructor(g){this.buffer=g,this.byteLength=this.buffer.byteLength}clone(){const g=T.alloc(this.byteLength);return g.set(this),g}toString(){return U?this.buffer.toString():(N||(N=new TextDecoder),N.decode(this.buffer))}slice(g,y){return new T(this.buffer.subarray(g,y))}set(g,y){if(g instanceof T)this.buffer.set(g.buffer,y);else if(g instanceof Uint8Array)this.buffer.set(g,y);else if(g instanceof ArrayBuffer)this.buffer.set(new Uint8Array(g),y);else if(ArrayBuffer.isView(g))this.buffer.set(new Uint8Array(g.buffer,g.byteOffset,g.byteLength),y);else throw new Error("Unknown argument 'array'")}readUInt32BE(g){return f(this.buffer,g)}writeUInt32BE(g,y){w(this.buffer,g,y)}readUInt32LE(g){return k(this.buffer,g)}writeUInt32LE(g,y){p(this.buffer,g,y)}readUInt8(g){return R(this.buffer,g)}writeUInt8(g,y){b(this.buffer,g,y)}}e.VSBuffer=T;function z(m,g){return m[g+0]<<0>>>0|m[g+1]<<8>>>0}e.readUInt16LE=z;function A(m,g,y){m[y+0]=g&255,g=g>>>8,m[y+1]=g&255}e.writeUInt16LE=A;function f(m,g){return m[g]*2**24+m[g+1]*2**16+m[g+2]*2**8+m[g+3]}e.readUInt32BE=f;function w(m,g,y){m[y+3]=g,g=g>>>8,m[y+2]=g,g=g>>>8,m[y+1]=g,g=g>>>8,m[y]=g}e.writeUInt32BE=w;function k(m,g){return m[g+0]<<0>>>0|m[g+1]<<8>>>0|m[g+2]<<16>>>0|m[g+3]<<24>>>0}e.readUInt32LE=k;function p(m,g,y){m[y+0]=g&255,g=g>>>8,m[y+1]=g&255,g=g>>>8,m[y+2]=g&255,g=g>>>8,m[y+3]=g&255}e.writeUInt32LE=p;function R(m,g){return m[g]}e.readUInt8=R;function b(m,g,y){m[y]=g}e.writeUInt8=b;function u(m){return q.consumeReadable(m,g=>T.concat(g))}e.readableToBuffer=u;function s(m){return q.toReadable(m)}e.bufferToReadable=s;function h(m){return q.consumeStream(m,g=>T.concat(g))}e.streamToBuffer=h;async function n(m){return m.ended?T.concat(m.buffer):T.concat([...m.buffer,await h(m.stream)])}e.bufferedStreamToBuffer=n;function r(m){return q.toStream(m,g=>T.concat(g))}e.bufferToStream=r;function i(m){return q.transform(m,{data:g=>typeof g=="string"?T.fromString(g):T.wrap(g)},g=>T.concat(g))}e.streamToBufferReadableStream=i;function o(m){return q.newWriteableStream(g=>T.concat(g),m)}e.newWriteableBufferStream=o;function c(m,g){return q.prefixedReadable(m,g,y=>T.concat(y))}e.prefixedBufferReadable=c;function E(m,g){return q.prefixedStream(m,g,y=>T.concat(y))}e.prefixedBufferStream=E;function v(m){let g=0,y=0,j=0;const W=new Uint8Array(Math.floor(m.length/4*3)),K=Y=>{switch(y){case 3:W[j++]=g|Y,y=0;break;case 2:W[j++]=g|Y>>>2,g=Y<<6,y=3;break;case 1:W[j++]=g|Y>>>4,g=Y<<4,y=2;break;default:g=Y<<2,y=1}};for(let Y=0;Y<m.length;Y++){const J=m.charCodeAt(Y);if(J>=65&&J<=90)K(J-65);else if(J>=97&&J<=122)K(J-97+26);else if(J>=48&&J<=57)K(J-48+52);else if(J===43||J===45)K(62);else if(J===47||J===95)K(63);else{if(J===61)break;throw new SyntaxError(`Unexpected base64 character ${m[Y]}`)}}const Z=j;for(;y>0;)K(0);return T.wrap(W).slice(0,Z)}e.decodeBase64=v;const O="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",P="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";function d({buffer:m},g=!0,y=!1){const j=y?P:O;let W="";const K=m.byteLength%3;let Z=0;for(;Z<m.byteLength-K;Z+=3){const Y=m[Z+0],J=m[Z+1],se=m[Z+2];W+=j[Y>>>2],W+=j[(Y<<4|J>>>4)&63],W+=j[(J<<2|se>>>6)&63],W+=j[se&63]}if(K===1){const Y=m[Z+0];W+=j[Y>>>2],W+=j[Y<<4&63],g&&(W+="==")}else if(K===2){const Y=m[Z+0],J=m[Z+1];W+=j[Y>>>2],W+=j[(Y<<4|J>>>4)&63],W+=j[J<<2&63],g&&(W+="=")}return W}e.encodeBase64=d}),define(ne[15],ie([0,1]),function(te,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MicrotaskDelay=void 0,e.MicrotaskDelay=Symbol("MicrotaskDelay")}),define(ne[16],ie([0,1]),function(te,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.countEOL=e.StringEOL=void 0;var q;(function(F){F[F.Unknown=0]="Unknown",F[F.Invalid=3]="Invalid",F[F.LF=1]="LF",F[F.CRLF=2]="CRLF"})(q=e.StringEOL||(e.StringEOL={}));function U(F){let N=0,T=0,z=0,A=0;for(let f=0,w=F.length;f<w;f++){const k=F.charCodeAt(f);k===13?(N===0&&(T=f),N++,f+1<w&&F.charCodeAt(f+1)===10?(A|=2,f++):A|=3,z=f+1):k===10&&(A|=1,N===0&&(T=f),N++,z=f+1)}return N===0&&(T=F.length),[N,T,F.length-z,A]}e.countEOL=U}),define(ne[17],ie([0,1]),function(te,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.recomputeTreeMetadata=e.updateTreeMetadata=e.fixInsert=e.rbDelete=e.rightRotate=e.leftRotate=e.righttest=e.leftest=e.SENTINEL=e.NodeColor=e.TreeNode=void 0;class q{constructor(s,h){this.piece=s,this.color=h,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==e.SENTINEL)return F(this.right);let s=this;for(;s.parent!==e.SENTINEL&&s.parent.left!==s;)s=s.parent;return s.parent===e.SENTINEL?e.SENTINEL:s.parent}prev(){if(this.left!==e.SENTINEL)return N(this.left);let s=this;for(;s.parent!==e.SENTINEL&&s.parent.right!==s;)s=s.parent;return s.parent===e.SENTINEL?e.SENTINEL:s.parent}detach(){this.parent=null,this.left=null,this.right=null}}e.TreeNode=q;var U;(function(u){u[u.Black=0]="Black",u[u.Red=1]="Red"})(U=e.NodeColor||(e.NodeColor={})),e.SENTINEL=new q(null,0),e.SENTINEL.parent=e.SENTINEL,e.SENTINEL.left=e.SENTINEL,e.SENTINEL.right=e.SENTINEL,e.SENTINEL.color=0;function F(u){for(;u.left!==e.SENTINEL;)u=u.left;return u}e.leftest=F;function N(u){for(;u.right!==e.SENTINEL;)u=u.right;return u}e.righttest=N;function T(u){return u===e.SENTINEL?0:u.size_left+u.piece.length+T(u.right)}function z(u){return u===e.SENTINEL?0:u.lf_left+u.piece.lineFeedCnt+z(u.right)}function A(){e.SENTINEL.parent=e.SENTINEL}function f(u,s){const h=s.right;h.size_left+=s.size_left+(s.piece?s.piece.length:0),h.lf_left+=s.lf_left+(s.piece?s.piece.lineFeedCnt:0),s.right=h.left,h.left!==e.SENTINEL&&(h.left.parent=s),h.parent=s.parent,s.parent===e.SENTINEL?u.root=h:s.parent.left===s?s.parent.left=h:s.parent.right=h,h.left=s,s.parent=h}e.leftRotate=f;function w(u,s){const h=s.left;s.left=h.right,h.right!==e.SENTINEL&&(h.right.parent=s),h.parent=s.parent,s.size_left-=h.size_left+(h.piece?h.piece.length:0),s.lf_left-=h.lf_left+(h.piece?h.piece.lineFeedCnt:0),s.parent===e.SENTINEL?u.root=h:s===s.parent.right?s.parent.right=h:s.parent.left=h,h.right=s,s.parent=h}e.rightRotate=w;function k(u,s){let h,n;if(s.left===e.SENTINEL?(n=s,h=n.right):s.right===e.SENTINEL?(n=s,h=n.left):(n=F(s.right),h=n.right),n===u.root){u.root=h,h.color=0,s.detach(),A(),u.root.parent=e.SENTINEL;return}const r=n.color===1;if(n===n.parent.left?n.parent.left=h:n.parent.right=h,n===s?(h.parent=n.parent,b(u,h)):(n.parent===s?h.parent=n:h.parent=n.parent,b(u,h),n.left=s.left,n.right=s.right,n.parent=s.parent,n.color=s.color,s===u.root?u.root=n:s===s.parent.left?s.parent.left=n:s.parent.right=n,n.left!==e.SENTINEL&&(n.left.parent=n),n.right!==e.SENTINEL&&(n.right.parent=n),n.size_left=s.size_left,n.lf_left=s.lf_left,b(u,n)),s.detach(),h.parent.left===h){const o=T(h),c=z(h);if(o!==h.parent.size_left||c!==h.parent.lf_left){const E=o-h.parent.size_left,v=c-h.parent.lf_left;h.parent.size_left=o,h.parent.lf_left=c,R(u,h.parent,E,v)}}if(b(u,h.parent),r){A();return}let i;for(;h!==u.root&&h.color===0;)h===h.parent.left?(i=h.parent.right,i.color===1&&(i.color=0,h.parent.color=1,f(u,h.parent),i=h.parent.right),i.left.color===0&&i.right.color===0?(i.color=1,h=h.parent):(i.right.color===0&&(i.left.color=0,i.color=1,w(u,i),i=h.parent.right),i.color=h.parent.color,h.parent.color=0,i.right.color=0,f(u,h.parent),h=u.root)):(i=h.parent.left,i.color===1&&(i.color=0,h.parent.color=1,w(u,h.parent),i=h.parent.left),i.left.color===0&&i.right.color===0?(i.color=1,h=h.parent):(i.left.color===0&&(i.right.color=0,i.color=1,f(u,i),i=h.parent.left),i.color=h.parent.color,h.parent.color=0,i.left.color=0,w(u,h.parent),h=u.root));h.color=0,A()}e.rbDelete=k;function p(u,s){for(b(u,s);s!==u.root&&s.parent.color===1;)if(s.parent===s.parent.parent.left){const h=s.parent.parent.right;h.color===1?(s.parent.color=0,h.color=0,s.parent.parent.color=1,s=s.parent.parent):(s===s.parent.right&&(s=s.parent,f(u,s)),s.parent.color=0,s.parent.parent.color=1,w(u,s.parent.parent))}else{const h=s.parent.parent.left;h.color===1?(s.parent.color=0,h.color=0,s.parent.parent.color=1,s=s.parent.parent):(s===s.parent.left&&(s=s.parent,w(u,s)),s.parent.color=0,s.parent.parent.color=1,f(u,s.parent.parent))}u.root.color=0}e.fixInsert=p;function R(u,s,h,n){for(;s!==u.root&&s!==e.SENTINEL;)s.parent.left===s&&(s.parent.size_left+=h,s.parent.lf_left+=n),s=s.parent}e.updateTreeMetadata=R;function b(u,s){let h=0,n=0;if(s!==u.root){for(;s!==u.root&&s===s.parent.right;)s=s.parent;if(s!==u.root)for(s=s.parent,h=T(s.left)-s.size_left,n=z(s.left)-s.lf_left,s.size_left+=h,s.lf_left+=n;s!==u.root&&(h!==0||n!==0);)s.parent.left===s&&(s.parent.size_left+=h,s.parent.lf_left+=n),s=s.parent}}e.recomputeTreeMetadata=b}),define(ne[18],ie([0,1,5]),function(te,e,q){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.normalizeMimeType=e.getExtensionForMimeType=e.getMediaMime=e.getMediaOrTextMime=e.Mimes=void 0,e.Mimes=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"});const U={".css":"text/css",".csv":"text/csv",".htm":"text/html",".html":"text/html",".ics":"text/calendar",".js":"text/javascript",".mjs":"text/javascript",".txt":"text/plain",".xml":"text/xml"},F={".aac":"audio/x-aac",".avi":"video/x-msvideo",".bmp":"image/bmp",".flv":"video/x-flv",".gif":"image/gif",".ico":"image/x-icon",".jpe":"image/jpg",".jpeg":"image/jpg",".jpg":"image/jpg",".m1v":"video/mpeg",".m2a":"audio/mpeg",".m2v":"video/mpeg",".m3a":"audio/mpeg",".mid":"audio/midi",".midi":"audio/midi",".mk3d":"video/x-matroska",".mks":"video/x-matroska",".mkv":"video/x-matroska",".mov":"video/quicktime",".movie":"video/x-sgi-movie",".mp2":"audio/mpeg",".mp2a":"audio/mpeg",".mp3":"audio/mpeg",".mp4":"video/mp4",".mp4a":"audio/mp4",".mp4v":"video/mp4",".mpe":"video/mpeg",".mpeg":"video/mpeg",".mpg":"video/mpeg",".mpg4":"video/mp4",".mpga":"audio/mpeg",".oga":"audio/ogg",".ogg":"audio/ogg",".opus":"audio/opus",".ogv":"video/ogg",".png":"image/png",".psd":"image/vnd.adobe.photoshop",".qt":"video/quicktime",".spx":"audio/ogg",".svg":"image/svg+xml",".tga":"image/x-tga",".tif":"image/tiff",".tiff":"image/tiff",".wav":"audio/x-wav",".webm":"video/webm",".webp":"image/webp",".wma":"audio/x-ms-wma",".wmv":"video/x-ms-wmv",".woff":"application/font-woff"};function N(w){const k=(0,q.extname)(w),p=U[k.toLowerCase()];return p!==void 0?p:T(w)}e.getMediaOrTextMime=N;function T(w){const k=(0,q.extname)(w);return F[k.toLowerCase()]}e.getMediaMime=T;function z(w){for(const k in F)if(F[k]===w)return k}e.getExtensionForMimeType=z;const A=/^(.+)\/(.+?)(;.+)?$/;function f(w,k){const p=A.exec(w);return p?`${p[1].toLowerCase()}/${p[2].toLowerCase()}${p[3]??""}`:k?void 0:w}e.normalizeMimeType=f}),define(ne[8],ie([0,1,5,2,3,36]),function(te,e,q,U,F,N){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.randomPath=e.parseLineAndColumnAware=e.indexOfPath=e.getDriveLetter=e.hasDriveLetter=e.isRootOrDriveLetter=e.sanitizeFilePath=e.isWindowsDriveLetter=e.isEqualOrParent=e.isEqual=e.isValidBasename=e.isUNC=e.getRoot=e.toPosixPath=e.toSlashes=e.isPathSeparator=void 0;function T(d){return d===47||d===92}e.isPathSeparator=T;function z(d){return d.replace(/[\\/]/g,q.posix.sep)}e.toSlashes=z;function A(d){return d.indexOf("/")===-1&&(d=z(d)),/^[a-zA-Z]:(\/|$)/.test(d)&&(d="/"+d),d}e.toPosixPath=A;function f(d,m=q.posix.sep){if(!d)return"";const g=d.length,y=d.charCodeAt(0);if(T(y)){if(T(d.charCodeAt(1))&&!T(d.charCodeAt(2))){let W=3;const K=W;for(;W<g&&!T(d.charCodeAt(W));W++);if(K!==W&&!T(d.charCodeAt(W+1))){for(W+=1;W<g;W++)if(T(d.charCodeAt(W)))return d.slice(0,W+1).replace(/[\\/]/g,m)}}return m}else if(h(y)&&d.charCodeAt(1)===58)return T(d.charCodeAt(2))?d.slice(0,2)+m:d.slice(0,2);let j=d.indexOf("://");if(j!==-1){for(j+=3;j<g;j++)if(T(d.charCodeAt(j)))return d.slice(0,j+1)}return""}e.getRoot=f;function w(d){if(!U.isWindows||!d||d.length<5)return!1;let m=d.charCodeAt(0);if(m!==92||(m=d.charCodeAt(1),m!==92))return!1;let g=2;const y=g;for(;g<d.length&&(m=d.charCodeAt(g),m!==92);g++);return!(y===g||(m=d.charCodeAt(g+1),isNaN(m)||m===92))}e.isUNC=w;const k=/[\\/:\*\?"<>\|]/g,p=/[\\/]/g,R=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function b(d,m=U.isWindows){const g=m?k:p;return!(!d||d.length===0||/^\s+$/.test(d)||(g.lastIndex=0,g.test(d))||m&&R.test(d)||d==="."||d===".."||m&&d[d.length-1]==="."||m&&d.length!==d.trim().length||d.length>255)}e.isValidBasename=b;function u(d,m,g){const y=d===m;return!g||y?y:!d||!m?!1:(0,F.equalsIgnoreCase)(d,m)}e.isEqual=u;function s(d,m,g,y=q.sep){if(d===m)return!0;if(!d||!m||m.length>d.length)return!1;if(g){if(!(0,F.startsWithIgnoreCase)(d,m))return!1;if(m.length===d.length)return!0;let W=m.length;return m.charAt(m.length-1)===y&&W--,d.charAt(W)===y}return m.charAt(m.length-1)!==y&&(m+=y),d.indexOf(m)===0}e.isEqualOrParent=s;function h(d){return d>=65&&d<=90||d>=97&&d<=122}e.isWindowsDriveLetter=h;function n(d,m){return U.isWindows&&d.endsWith(":")&&(d+=q.sep),(0,q.isAbsolute)(d)||(d=(0,q.join)(m,d)),d=(0,q.normalize)(d),U.isWindows?(d=(0,F.rtrim)(d,q.sep),d.endsWith(":")&&(d+=q.sep)):(d=(0,F.rtrim)(d,q.sep),d||(d=q.sep)),d}e.sanitizeFilePath=n;function r(d){const m=(0,q.normalize)(d);return U.isWindows?d.length>3?!1:i(m)&&(d.length===2||m.charCodeAt(2)===92):m===q.posix.sep}e.isRootOrDriveLetter=r;function i(d,m=U.isWindows){return m?h(d.charCodeAt(0))&&d.charCodeAt(1)===58:!1}e.hasDriveLetter=i;function o(d){return i(d)?d[0]:void 0}e.getDriveLetter=o;function c(d,m,g){return m.length>d.length?-1:d===m?0:(g&&(d=d.toLowerCase(),m=m.toLowerCase()),d.indexOf(m))}e.indexOfPath=c;function E(d){const m=d.split(":");let g,y,j;for(const W of m){const K=Number(W);(0,N.isNumber)(K)?y===void 0?y=K:j===void 0&&(j=K):g=g?[g,W].join(":"):W}if(!g)throw new Error("Format for `--goto` should be: `FILE:LINE(:COLUMN)`");return{path:g,line:y!==void 0?y:void 0,column:j!==void 0?j:y!==void 0?1:void 0}}e.parseLineAndColumnAware=E;const v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",O="BDEFGHIJKMOQRSTUVWXYZbdefghijkmoqrstuvwxyz0123456789";function P(d,m,g=8){let y="";for(let W=0;W<g;W++){let K;W===0&&U.isWindows&&!m&&(g===3||g===4)?K=O:K=v,y+=K.charAt(Math.floor(Math.random()*K.length))}let j;return m?j=`${m}-${y}`:j=y,d?(0,q.join)(d,j):j}e.randomPath=P}),define(ne[9],ie([0,1,4,2,10]),function(te,e,q,U,F){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.COI=e.FileAccess=e.nodeModulesAsarUnpackedPath=e.nodeModulesAsarPath=e.nodeModulesPath=e.builtinExtensionsPath=e.RemoteAuthorities=e.connectionTokenQueryName=e.connectionTokenCookieName=e.Schemas=void 0;var N;(function(f){f.inMemory="inmemory",f.vscode="vscode",f.internal="private",f.walkThrough="walkThrough",f.walkThroughSnippet="walkThroughSnippet",f.http="http",f.https="https",f.file="file",f.mailto="mailto",f.untitled="untitled",f.data="data",f.command="command",f.vscodeRemote="vscode-remote",f.vscodeRemoteResource="vscode-remote-resource",f.vscodeUserData="vscode-userdata",f.vscodeCustomEditor="vscode-custom-editor",f.vscodeNotebookCell="vscode-notebook-cell",f.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",f.vscodeNotebookCellOutput="vscode-notebook-cell-output",f.vscodeInteractive="vscode-interactive",f.vscodeInteractiveInput="vscode-interactive-input",f.vscodeSettings="vscode-settings",f.vscodeWorkspaceTrust="vscode-workspace-trust",f.vscodeTerminal="vscode-terminal",f.webviewPanel="webview-panel",f.vscodeWebview="vscode-webview",f.extension="extension",f.vscodeFileResource="vscode-file",f.tmp="tmp",f.vsls="vsls",f.vscodeSourceControl="vscode-scm"})(N=e.Schemas||(e.Schemas={})),e.connectionTokenCookieName="vscode-tkn",e.connectionTokenQueryName="tkn";class T{constructor(){this.a=Object.create(null),this.b=Object.create(null),this.c=Object.create(null),this.d="http",this.e=null,this.f=`/${N.vscodeRemoteResource}`}setPreferredWebSchema(w){this.d=w}setDelegate(w){this.e=w}setServerRootPath(w){this.f=`${w}/${N.vscodeRemoteResource}`}set(w,k,p){this.a[w]=k,this.b[w]=p}setConnectionToken(w,k){this.c[w]=k}getPreferredWebSchema(){return this.d}rewrite(w){if(this.e)try{return this.e(w)}catch(s){return q.onUnexpectedError(s),w}const k=w.authority;let p=this.a[k];p&&p.indexOf(":")!==-1&&p.indexOf("[")===-1&&(p=`[${p}]`);const R=this.b[k],b=this.c[k];let u=`path=${encodeURIComponent(w.path)}`;return typeof b=="string"&&(u+=`&${e.connectionTokenQueryName}=${encodeURIComponent(b)}`),F.URI.from({scheme:U.isWeb?this.d:N.vscodeRemoteResource,authority:`${p}:${R}`,path:this.f,query:u})}}e.RemoteAuthorities=new T,e.builtinExtensionsPath="vs/../../extensions",e.nodeModulesPath="vs/../../node_modules",e.nodeModulesAsarPath="vs/../../node_modules.asar",e.nodeModulesAsarUnpackedPath="vs/../../node_modules.asar.unpacked";class z{asBrowserUri(w){const k=this.b(w,te);return this.uriToBrowserUri(k)}uriToBrowserUri(w){return w.scheme===N.vscodeRemote?e.RemoteAuthorities.rewrite(w):w.scheme===N.file&&(U.isNative||U.isWebWorker&&U.globals.origin===`${N.vscodeFileResource}://${z.a}`)?w.with({scheme:N.vscodeFileResource,authority:w.authority||z.a,query:null,fragment:null}):w}asFileUri(w){const k=this.b(w,te);return this.uriToFileUri(k)}uriToFileUri(w){return w.scheme===N.vscodeFileResource?w.with({scheme:N.file,authority:w.authority!==z.a?w.authority:null,query:null,fragment:null}):w}b(w,k){return F.URI.isUri(w)?w:F.URI.parse(k.toUrl(w))}}z.a="vscode-app",e.FileAccess=new z;var A;(function(f){const w=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);f.CoopAndCoep=Object.freeze(w.get("3"));const k="vscode-coi";function p(b){let u;typeof b=="string"?u=new URL(b).searchParams:b instanceof URL?u=b.searchParams:F.URI.isUri(b)&&(u=new URL(b.toString(!0)).searchParams);const s=u?.get(k);if(!!s)return w.get(s)}f.getHeadersFromQuery=p;function R(b,u,s){if(!globalThis.crossOriginIsolated)return;const h=u&&s?"3":s?"2":"1";b instanceof URLSearchParams?b.set(k,h):b[k]=h}f.addSearchParam=R})(A=e.COI||(e.COI={}))}),define(ne[19],ie([0,1,8,9,5,2,3,10]),function(te,e,q,U,F,N,T,z){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toLocalResource=e.DataUri=e.distinctParents=e.addTrailingPathSeparator=e.removeTrailingPathSeparator=e.hasTrailingPathSeparator=e.isEqualAuthority=e.isAbsolutePath=e.resolvePath=e.relativePath=e.normalizePath=e.joinPath=e.dirname=e.extname=e.basename=e.basenameOrAuthority=e.getComparisonKey=e.isEqualOrParent=e.isEqual=e.extUriIgnorePathCase=e.extUriBiasedIgnorePathCase=e.extUri=e.ExtUri=e.originalFSPath=void 0;function A(R){return(0,z.uriToFsPath)(R,!0)}e.originalFSPath=A;class f{constructor(b){this.a=b}compare(b,u,s=!1){return b===u?0:(0,T.compare)(this.getComparisonKey(b,s),this.getComparisonKey(u,s))}isEqual(b,u,s=!1){return b===u?!0:!b||!u?!1:this.getComparisonKey(b,s)===this.getComparisonKey(u,s)}getComparisonKey(b,u=!1){return b.with({path:this.a(b)?b.path.toLowerCase():void 0,fragment:u?null:void 0}).toString()}ignorePathCasing(b){return this.a(b)}isEqualOrParent(b,u,s=!1){if(b.scheme===u.scheme){if(b.scheme===U.Schemas.file)return q.isEqualOrParent(A(b),A(u),this.a(b))&&b.query===u.query&&(s||b.fragment===u.fragment);if((0,e.isEqualAuthority)(b.authority,u.authority))return q.isEqualOrParent(b.path,u.path,this.a(b),"/")&&b.query===u.query&&(s||b.fragment===u.fragment)}return!1}joinPath(b,...u){return z.URI.joinPath(b,...u)}basenameOrAuthority(b){return(0,e.basename)(b)||b.authority}basename(b){return F.posix.basename(b.path)}extname(b){return F.posix.extname(b.path)}dirname(b){if(b.path.length===0)return b;let u;return b.scheme===U.Schemas.file?u=z.URI.file(F.dirname(A(b))).path:(u=F.posix.dirname(b.path),b.authority&&u.length&&u.charCodeAt(0)!==47&&(console.error(`dirname("${b.toString})) resulted in a relative path`),u="/")),b.with({path:u})}normalizePath(b){if(!b.path.length)return b;let u;return b.scheme===U.Schemas.file?u=z.URI.file(F.normalize(A(b))).path:u=F.posix.normalize(b.path),b.with({path:u})}relativePath(b,u){if(b.scheme!==u.scheme||!(0,e.isEqualAuthority)(b.authority,u.authority))return;if(b.scheme===U.Schemas.file){const n=F.relative(A(b),A(u));return N.isWindows?q.toSlashes(n):n}let s=b.path||"/";const h=u.path||"/";if(this.a(b)){let n=0;for(const r=Math.min(s.length,h.length);n<r&&!(s.charCodeAt(n)!==h.charCodeAt(n)&&s.charAt(n).toLowerCase()!==h.charAt(n).toLowerCase());n++);s=h.substr(0,n)+s.substr(n)}return F.posix.relative(s,h)}resolvePath(b,u){if(b.scheme===U.Schemas.file){const s=z.URI.file(F.resolve(A(b),u));return b.with({authority:s.authority,path:s.path})}return u=q.toPosixPath(u),b.with({path:F.posix.resolve(b.path,u)})}isAbsolutePath(b){return!!b.path&&b.path[0]==="/"}isEqualAuthority(b,u){return b===u||b!==void 0&&u!==void 0&&(0,T.equalsIgnoreCase)(b,u)}hasTrailingPathSeparator(b,u=F.sep){if(b.scheme===U.Schemas.file){const s=A(b);return s.length>q.getRoot(s).length&&s[s.length-1]===u}else{const s=b.path;return s.length>1&&s.charCodeAt(s.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(b.fsPath)}}removeTrailingPathSeparator(b,u=F.sep){return(0,e.hasTrailingPathSeparator)(b,u)?b.with({path:b.path.substr(0,b.path.length-1)}):b}addTrailingPathSeparator(b,u=F.sep){let s=!1;if(b.scheme===U.Schemas.file){const h=A(b);s=h!==void 0&&h.length===q.getRoot(h).length&&h[h.length-1]===u}else{u="/";const h=b.path;s=h.length===1&&h.charCodeAt(h.length-1)===47}return!s&&!(0,e.hasTrailingPathSeparator)(b,u)?b.with({path:b.path+"/"}):b}}e.ExtUri=f,e.extUri=new f(()=>!1),e.extUriBiasedIgnorePathCase=new f(R=>R.scheme===U.Schemas.file?!N.isLinux:!0),e.extUriIgnorePathCase=new f(R=>!0),e.isEqual=e.extUri.isEqual.bind(e.extUri),e.isEqualOrParent=e.extUri.isEqualOrParent.bind(e.extUri),e.getComparisonKey=e.extUri.getComparisonKey.bind(e.extUri),e.basenameOrAuthority=e.extUri.basenameOrAuthority.bind(e.extUri),e.basename=e.extUri.basename.bind(e.extUri),e.extname=e.extUri.extname.bind(e.extUri),e.dirname=e.extUri.dirname.bind(e.extUri),e.joinPath=e.extUri.joinPath.bind(e.extUri),e.normalizePath=e.extUri.normalizePath.bind(e.extUri),e.relativePath=e.extUri.relativePath.bind(e.extUri),e.resolvePath=e.extUri.resolvePath.bind(e.extUri),e.isAbsolutePath=e.extUri.isAbsolutePath.bind(e.extUri),e.isEqualAuthority=e.extUri.isEqualAuthority.bind(e.extUri),e.hasTrailingPathSeparator=e.extUri.hasTrailingPathSeparator.bind(e.extUri),e.removeTrailingPathSeparator=e.extUri.removeTrailingPathSeparator.bind(e.extUri),e.addTrailingPathSeparator=e.extUri.addTrailingPathSeparator.bind(e.extUri);function w(R,b){const u=[];for(let s=0;s<R.length;s++){const h=b(R[s]);R.some((n,r)=>r===s?!1:(0,e.isEqualOrParent)(h,b(n)))||u.push(R[s])}return u}e.distinctParents=w;var k;(function(R){R.META_DATA_LABEL="label",R.META_DATA_DESCRIPTION="description",R.META_DATA_SIZE="size",R.META_DATA_MIME="mime";function b(u){const s=new Map;u.path.substring(u.path.indexOf(";")+1,u.path.lastIndexOf(";")).split(";").forEach(r=>{const[i,o]=r.split(":");i&&o&&s.set(i,o)});const n=u.path.substring(0,u.path.indexOf(";"));return n&&s.set(R.META_DATA_MIME,n),s}R.parseMetaData=b})(k=e.DataUri||(e.DataUri={}));function p(R,b,u){if(b){let s=R.path;return s&&s[0]!==F.posix.sep&&(s=F.posix.sep+s),R.with({scheme:u,authority:b,path:s})}return R.with({scheme:u})}e.toLocalResource=p}),define(ne[20],ie([0,1,37,4,21,7,19,2,15]),function(te,e,q,U,F,N,T,z,A){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createCancelableAsyncIterable=e.CancelableAsyncIterableObject=e.AsyncIterableObject=e.Promises=e.DeferredPromise=e.IntervalCounter=e.TaskSequentializer=e.retry=e.IdleValue=e.runWhenIdle=e.ThrottledWorker=e.RunOnceWorker=e.ProcessTimeRunOnceScheduler=e.RunOnceScheduler=e.IntervalTimer=e.TimeoutTimer=e.ResourceQueue=e.Queue=e.Limiter=e.firstParallel=e.first=e.sequence=e.disposableTimeout=e.timeout=e.AutoOpenBarrier=e.Barrier=e.ThrottledDelayer=e.Delayer=e.SequencerByKey=e.Sequencer=e.Throttler=e.asPromise=e.raceTimeout=e.raceCancellablePromises=e.raceCancellationError=e.raceCancellation=e.createCancelablePromise=e.isThenable=void 0;function f(I){return!!I&&typeof I.then=="function"}e.isThenable=f;function w(I){const a=new q.CancellationTokenSource,t=I(a.token),l=new Promise((S,L)=>{const H=a.token.onCancellationRequested(()=>{H.dispose(),a.dispose(),L(new U.CancellationError)});Promise.resolve(t).then(V=>{H.dispose(),a.dispose(),S(V)},V=>{H.dispose(),a.dispose(),L(V)})});return new class{cancel(){a.cancel()}then(S,L){return l.then(S,L)}catch(S){return this.then(void 0,S)}finally(S){return l.finally(S)}}}e.createCancelablePromise=w;function k(I,a,t){return new Promise((l,S)=>{const L=a.onCancellationRequested(()=>{L.dispose(),l(t)});I.then(l,S).finally(()=>L.dispose())})}e.raceCancellation=k;function p(I,a){return new Promise((t,l)=>{const S=a.onCancellationRequested(()=>{S.dispose(),l(new U.CancellationError)});I.then(t,l).finally(()=>S.dispose())})}e.raceCancellationError=p;async function R(I){let a=-1;const t=I.map((S,L)=>S.then(H=>(a=L,H))),l=await Promise.race(t);return I.forEach((S,L)=>{L!==a&&S.cancel()}),l}e.raceCancellablePromises=R;function b(I,a,t){let l;const S=setTimeout(()=>{l?.(void 0),t?.()},a);return Promise.race([I.finally(()=>clearTimeout(S)),new Promise(L=>l=L)])}e.raceTimeout=b;function u(I){return new Promise((a,t)=>{const l=I();f(l)?l.then(a,t):a(l)})}e.asPromise=u;class s{constructor(){this.a=null,this.b=null,this.d=null}queue(a){if(this.a){if(this.d=a,!this.b){const t=()=>{this.b=null;const l=this.queue(this.d);return this.d=null,l};this.b=new Promise(l=>{this.a.then(t,t).then(l)})}return new Promise((t,l)=>{this.b.then(t,l)})}return this.a=a(),new Promise((t,l)=>{this.a.then(S=>{this.a=null,t(S)},S=>{this.a=null,l(S)})})}}e.Throttler=s;class h{constructor(){this.a=Promise.resolve(null)}queue(a){return this.a=this.a.then(()=>a(),()=>a())}}e.Sequencer=h;class n{constructor(){this.a=new Map}queue(a,t){const S=(this.a.get(a)??Promise.resolve()).catch(()=>{}).then(t).finally(()=>{this.a.get(a)===S&&this.a.delete(a)});return this.a.set(a,S),S}}e.SequencerByKey=n;const r=(I,a)=>{let t=!0;const l=setTimeout(()=>{t=!1,a()},I);return{isTriggered:()=>t,dispose:()=>{clearTimeout(l),t=!1}}},i=I=>{let a=!0;return queueMicrotask(()=>{a&&(a=!1,I())}),{isTriggered:()=>a,dispose:()=>{a=!1}}};class o{constructor(a){this.defaultDelay=a,this.a=null,this.b=null,this.d=null,this.f=null,this.g=null}trigger(a,t=this.defaultDelay){this.g=a,this.h(),this.b||(this.b=new Promise((S,L)=>{this.d=S,this.f=L}).then(()=>{if(this.b=null,this.d=null,this.g){const S=this.g;return this.g=null,S()}}));const l=()=>{this.a=null,this.d?.(null)};return this.a=t===A.MicrotaskDelay?i(l):r(t,l),this.b}isTriggered(){return!!this.a?.isTriggered()}cancel(){this.h(),this.b&&(this.f?.(new U.CancellationError),this.b=null)}h(){this.a?.dispose(),this.a=null}dispose(){this.cancel()}}e.Delayer=o;class c{constructor(a){this.a=new o(a),this.b=new s}trigger(a,t){return this.a.trigger(()=>this.b.queue(a),t)}isTriggered(){return this.a.isTriggered()}cancel(){this.a.cancel()}dispose(){this.a.dispose()}}e.ThrottledDelayer=c;class E{constructor(){this.a=!1,this.b=new Promise((a,t)=>{this.d=a})}isOpen(){return this.a}open(){this.a=!0,this.d(!0)}wait(){return this.b}}e.Barrier=E;class v extends E{constructor(a){super(),this.f=setTimeout(()=>this.open(),a)}open(){clearTimeout(this.f),super.open()}}e.AutoOpenBarrier=v;function O(I,a){return a?new Promise((t,l)=>{const S=setTimeout(()=>{L.dispose(),t()},I),L=a.onCancellationRequested(()=>{clearTimeout(S),L.dispose(),l(new U.CancellationError)})}):w(t=>O(I,t))}e.timeout=O;function P(I,a=0){const t=setTimeout(I,a);return(0,N.toDisposable)(()=>clearTimeout(t))}e.disposableTimeout=P;function d(I){const a=[];let t=0;const l=I.length;function S(){return t<l?I[t++]():null}function L(H){H!=null&&a.push(H);const V=S();return V?V.then(L):Promise.resolve(a)}return Promise.resolve(null).then(L)}e.sequence=d;function m(I,a=l=>!!l,t=null){let l=0;const S=I.length,L=()=>{if(l>=S)return Promise.resolve(t);const H=I[l++];return Promise.resolve(H()).then(X=>a(X)?Promise.resolve(X):L())};return L()}e.first=m;function g(I,a=l=>!!l,t=null){if(I.length===0)return Promise.resolve(t);let l=I.length;const S=()=>{l=-1;for(const L of I)L.cancel?.()};return new Promise((L,H)=>{for(const V of I)V.then(X=>{--l>=0&&a(X)?(S(),L(X)):l===0&&L(t)}).catch(X=>{--l>=0&&(S(),H(X))})})}e.firstParallel=g;class y{constructor(a){this.a=0,this.d=a,this.f=[],this.b=0,this.g=new F.Emitter}get onDrained(){return this.g.event}get size(){return this.a}queue(a){return this.a++,new Promise((t,l)=>{this.f.push({factory:a,c:t,e:l}),this.h()})}h(){for(;this.f.length&&this.b<this.d;){const a=this.f.shift();this.b++;const t=a.factory();t.then(a.c,a.e),t.then(()=>this.j(),()=>this.j())}}j(){this.a--,this.b--,this.f.length>0?this.h():this.g.fire()}dispose(){this.g.dispose()}}e.Limiter=y;class j extends y{constructor(){super(1)}}e.Queue=j;class W{constructor(){this.a=new Map,this.b=new Set}async whenDrained(){if(this.d())return;const a=new B;return this.b.add(a),a.p}d(){for(const[,a]of this.a)if(a.size>0)return!1;return!0}queueFor(a,t=T.extUri){const l=t.getComparisonKey(a);let S=this.a.get(l);return S||(S=new j,F.Event.once(S.onDrained)(()=>{S?.dispose(),this.a.delete(l),this.f()}),this.a.set(l,S)),S}f(){!this.d()||this.g()}g(){for(const a of this.b)a.complete();this.b.clear()}dispose(){for(const[,a]of this.a)a.dispose();this.a.clear(),this.g()}}e.ResourceQueue=W;class K{constructor(a,t){this.a=-1,typeof a=="function"&&typeof t=="number"&&this.setIfNotSet(a,t)}dispose(){this.cancel()}cancel(){this.a!==-1&&(clearTimeout(this.a),this.a=-1)}cancelAndSet(a,t){this.cancel(),this.a=setTimeout(()=>{this.a=-1,a()},t)}setIfNotSet(a,t){this.a===-1&&(this.a=setTimeout(()=>{this.a=-1,a()},t))}}e.TimeoutTimer=K;class Z{constructor(){this.a=-1}dispose(){this.cancel()}cancel(){this.a!==-1&&(clearInterval(this.a),this.a=-1)}cancelAndSet(a,t){this.cancel(),this.a=setInterval(()=>{a()},t)}}e.IntervalTimer=Z;class Y{constructor(a,t){this.b=-1,this.a=a,this.d=t,this.f=this.g.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearTimeout(this.b),this.b=-1)}schedule(a=this.d){this.cancel(),this.b=setTimeout(this.f,a)}get delay(){return this.d}set delay(a){this.d=a}isScheduled(){return this.b!==-1}flush(){this.isScheduled()&&(this.cancel(),this.h())}g(){this.b=-1,this.a&&this.h()}h(){this.a?.()}}e.RunOnceScheduler=Y;class J{constructor(a,t){t%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${t}ms is not a multiple of 1000ms.`),this.a=a,this.b=t,this.d=0,this.f=-1,this.g=this.h.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearInterval(this.f),this.f=-1)}schedule(a=this.b){a%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${a}ms is not a multiple of 1000ms.`),this.cancel(),this.d=Math.ceil(a/1e3),this.f=setInterval(this.g,1e3)}isScheduled(){return this.f!==-1}h(){this.d--,!(this.d>0)&&(clearInterval(this.f),this.f=-1,this.a?.())}}e.ProcessTimeRunOnceScheduler=J;class se extends Y{constructor(a,t){super(a,t),this.j=[]}work(a){this.j.push(a),this.isScheduled()||this.schedule()}h(){const a=this.j;this.j=[],this.a?.(a)}dispose(){this.j=[],super.dispose()}}e.RunOnceWorker=se;class ae extends N.Disposable{constructor(a,t){super(),this.g=a,this.h=t,this.a=[],this.b=this.B(new N.MutableDisposable),this.f=!1}get pending(){return this.a.length}work(a){if(this.f)return!1;if(typeof this.g.maxBufferedWork=="number"){if(this.b.value){if(this.pending+a.length>this.g.maxBufferedWork)return!1}else if(this.pending+a.length-this.g.maxWorkChunkSize>this.g.maxBufferedWork)return!1}for(const t of a)this.a.push(t);return this.b.value||this.j(),!0}j(){this.h(this.a.splice(0,this.g.maxWorkChunkSize)),this.a.length>0&&(this.b.value=new Y(()=>{this.b.clear(),this.j()},this.g.throttleDelay),this.b.value.schedule())}dispose(){super.dispose(),this.f=!0}}e.ThrottledWorker=ae,function(){typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"?e.runWhenIdle=I=>{(0,z.setTimeout0)(()=>{if(a)return;const t=Date.now()+15;I(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,t-Date.now())}}))});let a=!1;return{dispose(){a||(a=!0)}}}:e.runWhenIdle=(I,a)=>{const t=requestIdleCallback(I,typeof a=="number"?{timeout:a}:void 0);let l=!1;return{dispose(){l||(l=!0,cancelIdleCallback(t))}}}}();class C{constructor(a){this.d=!1,this.a=()=>{try{this.f=a()}catch(t){this.g=t}finally{this.d=!0}},this.b=(0,e.runWhenIdle)(()=>this.a())}dispose(){this.b.dispose()}get value(){if(this.d||(this.b.dispose(),this.a()),this.g)throw this.g;return this.f}get isInitialized(){return this.d}}e.IdleValue=C;async function x(I,a,t){let l;for(let S=0;S<t;S++)try{return await I()}catch(L){l=L,await O(a)}throw l}e.retry=x;class ee{hasPending(a){return this.a?typeof a=="number"?this.a.taskId===a:!!this.a:!1}get pending(){return this.a?.promise}cancelPending(){this.a?.cancel()}setPending(a,t,l){return this.a={taskId:a,cancel:()=>l?.(),promise:t},t.then(()=>this.d(a),()=>this.d(a)),t}d(a){this.a&&a===this.a.taskId&&(this.a=void 0,this.f())}f(){if(this.b){const a=this.b;this.b=void 0,a.run().then(a.promiseResolve,a.promiseReject)}}setNext(a){if(this.b)this.b.run=a;else{let t,l;const S=new Promise((L,H)=>{t=L,l=H});this.b={run:a,promise:S,promiseResolve:t,promiseReject:l}}return this.b.promise}hasNext(){return!!this.b}async join(){return this.b?.promise??this.a?.promise}}e.TaskSequentializer=ee;class M{constructor(a,t=()=>Date.now()){this.d=a,this.f=t,this.a=0,this.b=0}increment(){const a=this.f();return a-this.a>this.d&&(this.a=a,this.b=0),this.b++,this.b}}e.IntervalCounter=M;class B{get isRejected(){return this.d}get isResolved(){return this.f}get isSettled(){return this.d||this.f}constructor(){this.d=!1,this.f=!1,this.p=new Promise((a,t)=>{this.a=a,this.b=t})}complete(a){return new Promise(t=>{this.a(a),this.f=!0,t()})}error(a){return new Promise(t=>{this.b(a),this.d=!0,t()})}cancel(){new Promise(a=>{this.b(new U.CancellationError),this.d=!0,a()})}}e.DeferredPromise=B;var D;(function(I){async function a(l){let S;const L=await Promise.all(l.map(H=>H.then(V=>V,V=>{S||(S=V)})));if(typeof S<"u")throw S;return L}I.settled=a;function t(l){return new Promise(async(S,L)=>{try{await l(S,L)}catch(H){L(H)}})}I.withAsyncBody=t})(D=e.Promises||(e.Promises={}));var G;(function(I){I[I.Initial=0]="Initial",I[I.DoneOK=1]="DoneOK",I[I.DoneError=2]="DoneError"})(G||(G={}));class ${static fromArray(a){return new $(t=>{t.emitMany(a)})}static fromPromise(a){return new $(async t=>{t.emitMany(await a)})}static fromPromises(a){return new $(async t=>{await Promise.all(a.map(async l=>t.emitOne(await l)))})}static merge(a){return new $(async t=>{await Promise.all(a.map(async l=>{for await(const S of l)t.emitOne(S)}))})}constructor(a){this.a=0,this.b=[],this.d=null,this.f=new F.Emitter,queueMicrotask(async()=>{const t={emitOne:l=>this.g(l),emitMany:l=>this.h(l),reject:l=>this.k(l)};try{await Promise.resolve(a(t)),this.j()}catch(l){this.k(l)}finally{t.emitOne=void 0,t.emitMany=void 0,t.reject=void 0}})}[Symbol.asyncIterator](){let a=0;return{next:async()=>{do{if(this.a===2)throw this.d;if(a<this.b.length)return{done:!1,value:this.b[a++]};if(this.a===1)return{done:!0,value:void 0};await F.Event.toPromise(this.f.event)}while(!0)}}}static map(a,t){return new $(async l=>{for await(const S of a)l.emitOne(t(S))})}map(a){return $.map(this,a)}static filter(a,t){return new $(async l=>{for await(const S of a)t(S)&&l.emitOne(S)})}filter(a){return $.filter(this,a)}static coalesce(a){return $.filter(a,t=>!!t)}coalesce(){return $.coalesce(this)}static async toPromise(a){const t=[];for await(const l of a)t.push(l);return t}toPromise(){return $.toPromise(this)}g(a){this.a===0&&(this.b.push(a),this.f.fire())}h(a){this.a===0&&(this.b=this.b.concat(a),this.f.fire())}j(){this.a===0&&(this.a=1,this.f.fire())}k(a){this.a===0&&(this.a=2,this.d=a,this.f.fire())}}$.EMPTY=$.fromArray([]),e.AsyncIterableObject=$;class Q extends ${constructor(a,t){super(t),this.l=a}cancel(){this.l.cancel()}}e.CancelableAsyncIterableObject=Q;function _(I){const a=new q.CancellationTokenSource,t=I(a.token);return new Q(a,async l=>{const S=a.token.onCancellationRequested(()=>{S.dispose(),a.dispose(),l.reject(new U.CancellationError)});try{for await(const L of t){if(a.token.isCancellationRequested)return;l.emitOne(L)}S.dispose(),a.dispose()}catch(L){S.dispose(),a.dispose(),l.reject(L)}})}e.createCancelableAsyncIterable=_}),define(ne[22],ie([0,1,38,20,8,13,5,2,3]),function(te,e,q,U,F,N,T,z,A){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.patternsEquals=e.getPathTerms=e.getBasenameTerms=e.isRelativePattern=e.parse=e.match=e.splitGlobAware=e.GLOB_SPLIT=e.GLOBSTAR=e.getEmptyExpression=void 0;function f(){return Object.create(null)}e.getEmptyExpression=f,e.GLOBSTAR="**",e.GLOB_SPLIT="/";const w="[/\\\\]",k="[^/\\\\]",p=/\//g;function R(M,B){switch(M){case 0:return"";case 1:return`${k}*?`;default:return`(?:${w}|${k}+${w}${B?`|${w}${k}+`:""})*?`}}function b(M,B){if(!M)return[];const D=[];let G=!1,$=!1,Q="";for(const _ of M){switch(_){case B:if(!G&&!$){D.push(Q),Q="";continue}break;case"{":G=!0;break;case"}":G=!1;break;case"[":$=!0;break;case"]":$=!1;break}Q+=_}return Q&&D.push(Q),D}e.splitGlobAware=b;function u(M){if(!M)return"";let B="";const D=b(M,e.GLOB_SPLIT);if(D.every(G=>G===e.GLOBSTAR))B=".*";else{let G=!1;D.forEach(($,Q)=>{if($===e.GLOBSTAR){if(G)return;B+=R(2,Q===D.length-1)}else{let _=!1,I="",a=!1,t="";for(const l of $){if(l!=="}"&&_){I+=l;continue}if(a&&(l!=="]"||!t)){let S;l==="-"?S=l:(l==="^"||l==="!")&&!t?S="^":l===e.GLOB_SPLIT?S="":S=(0,A.escapeRegExpCharacters)(l),t+=S;continue}switch(l){case"{":_=!0;continue;case"[":a=!0;continue;case"}":{B+=`(?:${b(I,",").map(H=>u(H)).join("|")})`,_=!1,I="";break}case"]":{B+="["+t+"]",a=!1,t="";break}case"?":B+=k;continue;case"*":B+=R(1);continue;default:B+=(0,A.escapeRegExpCharacters)(l)}}Q<D.length-1&&(D[Q+1]!==e.GLOBSTAR||Q+2<D.length)&&(B+=w)}G=$===e.GLOBSTAR})}return B}const s=/^\*\*\/\*\.[\w\.-]+$/,h=/^\*\*\/([\w\.-]+)\/?$/,n=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,r=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,i=/^\*\*((\/[\w\.-]+)+)\/?$/,o=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,c=new N.LRUCache(1e4),E=function(){return!1},v=function(){return null};function O(M,B){if(!M)return v;let D;typeof M!="string"?D=M.pattern:D=M,D=D.trim();const G=`${D}_${!!B.trimForExclusions}`;let $=c.get(G);if($)return P($,M);let Q;return s.test(D)?$=m(D.substr(4),D):(Q=h.exec(d(D,B)))?$=g(Q[1],D):(B.trimForExclusions?r:n).test(D)?$=y(D,B):(Q=i.exec(d(D,B)))?$=j(Q[1].substr(1),D,!0):(Q=o.exec(d(D,B)))?$=j(Q[1],D,!1):$=W(D),c.set(G,$),P($,M)}function P(M,B){if(typeof B=="string")return M;const D=function(G,$){return(0,F.isEqualOrParent)(G,B.base,!z.isLinux)?M((0,A.ltrim)(G.substr(B.base.length),T.sep),$):null};return D.allBasenames=M.allBasenames,D.allPaths=M.allPaths,D.basenames=M.basenames,D.patterns=M.patterns,D}function d(M,B){return B.trimForExclusions&&M.endsWith("/**")?M.substr(0,M.length-2):M}function m(M,B){return function(D,G){return typeof D=="string"&&D.endsWith(M)?B:null}}function g(M,B){const D=`/${M}`,G=`\\${M}`,$=function(_,I){return typeof _!="string"?null:I?I===M?B:null:_===M||_.endsWith(D)||_.endsWith(G)?B:null},Q=[M];return $.basenames=Q,$.patterns=[B],$.allBasenames=Q,$}function y(M,B){const D=x(M.slice(1,-1).split(",").map(I=>O(I,B)).filter(I=>I!==v),M),G=D.length;if(!G)return v;if(G===1)return D[0];const $=function(I,a){for(let t=0,l=D.length;t<l;t++)if(D[t](I,a))return M;return null},Q=D.find(I=>!!I.allBasenames);Q&&($.allBasenames=Q.allBasenames);const _=D.reduce((I,a)=>a.allPaths?I.concat(a.allPaths):I,[]);return _.length&&($.allPaths=_),$}function j(M,B,D){const G=T.sep===T.posix.sep,$=G?M:M.replace(p,T.sep),Q=T.sep+$,_=T.posix.sep+M;let I;return D?I=function(a,t){return typeof a=="string"&&(a===$||a.endsWith(Q)||!G&&(a===M||a.endsWith(_)))?B:null}:I=function(a,t){return typeof a=="string"&&(a===$||!G&&a===M)?B:null},I.allPaths=[(D?"*/":"./")+M],I}function W(M){try{const B=new RegExp(`^${u(M)}$`);return function(D){return B.lastIndex=0,typeof D=="string"&&B.test(D)?M:null}}catch{return v}}function K(M,B,D){return!M||typeof B!="string"?!1:Z(M)(B,void 0,D)}e.match=K;function Z(M,B={}){if(!M)return E;if(typeof M=="string"||Y(M)){const D=O(M,B);if(D===v)return E;const G=function($,Q){return!!D($,Q)};return D.allBasenames&&(G.allBasenames=D.allBasenames),D.allPaths&&(G.allPaths=D.allPaths),G}return ae(M,B)}e.parse=Z;function Y(M){const B=M;return B?typeof B.base=="string"&&typeof B.pattern=="string":!1}e.isRelativePattern=Y;function J(M){return M.allBasenames||[]}e.getBasenameTerms=J;function se(M){return M.allPaths||[]}e.getPathTerms=se;function ae(M,B){const D=x(Object.getOwnPropertyNames(M).map(I=>C(I,M[I],B)).filter(I=>I!==v)),G=D.length;if(!G)return v;if(!D.some(I=>!!I.requiresSiblings)){if(G===1)return D[0];const I=function(l,S){let L;for(let H=0,V=D.length;H<V;H++){const X=D[H](l,S);if(typeof X=="string")return X;(0,U.isThenable)(X)&&(L||(L=[]),L.push(X))}return L?(async()=>{for(const H of L){const V=await H;if(typeof V=="string")return V}return null})():null},a=D.find(l=>!!l.allBasenames);a&&(I.allBasenames=a.allBasenames);const t=D.reduce((l,S)=>S.allPaths?l.concat(S.allPaths):l,[]);return t.length&&(I.allPaths=t),I}const $=function(I,a,t){let l,S;for(let L=0,H=D.length;L<H;L++){const V=D[L];V.requiresSiblings&&t&&(a||(a=(0,T.basename)(I)),l||(l=a.substr(0,a.length-(0,T.extname)(I).length)));const X=V(I,a,l,t);if(typeof X=="string")return X;(0,U.isThenable)(X)&&(S||(S=[]),S.push(X))}return S?(async()=>{for(const L of S){const H=await L;if(typeof H=="string")return H}return null})():null},Q=D.find(I=>!!I.allBasenames);Q&&($.allBasenames=Q.allBasenames);const _=D.reduce((I,a)=>a.allPaths?I.concat(a.allPaths):I,[]);return _.length&&($.allPaths=_),$}function C(M,B,D){if(B===!1)return v;const G=O(M,D);if(G===v)return v;if(typeof B=="boolean")return G;if(B){const $=B.when;if(typeof $=="string"){const Q=(_,I,a,t)=>{if(!t||!G(_,I))return null;const l=$.replace("$(basename)",()=>a),S=t(l);return(0,U.isThenable)(S)?S.then(L=>L?M:null):S?M:null};return Q.requiresSiblings=!0,Q}}return G}function x(M,B){const D=M.filter(I=>!!I.basenames);if(D.length<2)return M;const G=D.reduce((I,a)=>{const t=a.basenames;return t?I.concat(t):I},[]);let $;if(B){$=[];for(let I=0,a=G.length;I<a;I++)$.push(B)}else $=D.reduce((I,a)=>{const t=a.patterns;return t?I.concat(t):I},[]);const Q=function(I,a){if(typeof I!="string")return null;if(!a){let l;for(l=I.length;l>0;l--){const S=I.charCodeAt(l-1);if(S===47||S===92)break}a=I.substr(l)}const t=G.indexOf(a);return t!==-1?$[t]:null};Q.basenames=G,Q.patterns=$,Q.allBasenames=G;const _=M.filter(I=>!I.basenames);return _.push(Q),_}function ee(M,B){return(0,q.equals)(M,B,(D,G)=>typeof D=="string"&&typeof G=="string"?D===G:typeof D!="string"&&typeof G!="string"?D.base===G.base&&D.pattern===G.pattern:!1)}e.patternsEquals=ee}),define(ne[23],ie([0,1,3,2,6]),function(te,e,q,U,F){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StringBuilder=e.decodeUTF16LE=e.getPlatformTextDecoder=void 0;let N;function T(){return N||(N=new TextDecoder("UTF-16LE")),N}let z;function A(){return z||(z=new TextDecoder("UTF-16BE")),z}let f;function w(){return f||(f=U.isLittleEndian()?T():A()),f}e.getPlatformTextDecoder=w;function k(b,u,s){const h=new Uint16Array(b.buffer,u,s);return s>0&&(h[0]===65279||h[0]===65534)?p(b,u,s):T().decode(h)}e.decodeUTF16LE=k;function p(b,u,s){const h=[];let n=0;for(let r=0;r<s;r++){const i=F.readUInt16LE(b,u);u+=2,h[n++]=String.fromCharCode(i)}return h.join("")}class R{constructor(u){this.a=u|0,this.b=new Uint16Array(this.a),this.c=null,this.d=0}reset(){this.c=null,this.d=0}build(){return this.c!==null?(this.f(),this.c.join("")):this.e()}e(){if(this.d===0)return"";const u=new Uint16Array(this.b.buffer,0,this.d);return w().decode(u)}f(){const u=this.e();this.d=0,this.c===null?this.c=[u]:this.c[this.c.length]=u}appendCharCode(u){const s=this.a-this.d;s<=1&&(s===0||q.isHighSurrogate(u))&&this.f(),this.b[this.d++]=u}appendASCIICharCode(u){this.d===this.a&&this.f(),this.b[this.d++]=u}appendString(u){const s=u.length;if(this.d+s>=this.a){this.f(),this.c[this.c.length]=u;return}for(let h=0;h<s;h++)this.b[this.d++]=u.charCodeAt(h)}}e.StringBuilder=R}),define(ne[24],ie([0,1,6,23]),function(te,e,q,U){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.compressConsecutiveTextChanges=e.TextChange=void 0;function F(A){return A.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}class N{get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}constructor(f,w,k,p){this.oldPosition=f,this.oldText=w,this.newPosition=k,this.newText=p}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${F(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${F(this.oldText)}")`:`(replace@${this.oldPosition} "${F(this.oldText)}" with "${F(this.newText)}")`}static a(f){return 4+2*f.length}static c(f,w,k){const p=w.length;q.writeUInt32BE(f,p,k),k+=4;for(let R=0;R<p;R++)q.writeUInt16LE(f,w.charCodeAt(R),k),k+=2;return k}static d(f,w){const k=q.readUInt32BE(f,w);return w+=4,(0,U.decodeUTF16LE)(f,w,k)}writeSize(){return 4+4+N.a(this.oldText)+N.a(this.newText)}write(f,w){return q.writeUInt32BE(f,this.oldPosition,w),w+=4,q.writeUInt32BE(f,this.newPosition,w),w+=4,w=N.c(f,this.oldText,w),w=N.c(f,this.newText,w),w}static read(f,w,k){const p=q.readUInt32BE(f,w);w+=4;const R=q.readUInt32BE(f,w);w+=4;const b=N.d(f,w);w+=N.a(b);const u=N.d(f,w);return w+=N.a(u),k.push(new N(p,b,R,u)),w}}e.TextChange=N;function T(A,f){return A===null||A.length===0?f:new z(A,f).compress()}e.compressConsecutiveTextChanges=T;class z{constructor(f,w){this.a=f,this.c=w,this.d=[],this.e=0,this.f=this.a.length,this.g=0,this.h=this.c.length,this.j=0}compress(){let f=0,w=0,k=this.n(f),p=this.l(w);for(;f<this.f||w<this.h;){if(k===null){this.k(p),p=this.l(++w);continue}if(p===null){this.m(k),k=this.n(++f);continue}if(p.oldEnd<=k.newPosition){this.k(p),p=this.l(++w);continue}if(k.newEnd<=p.oldPosition){this.m(k),k=this.n(++f);continue}if(p.oldPosition<k.newPosition){const[h,n]=z.r(p,k.newPosition-p.oldPosition);this.k(h),p=n;continue}if(k.newPosition<p.oldPosition){const[h,n]=z.q(k,p.oldPosition-k.newPosition);this.m(h),k=n;continue}let u,s;if(p.oldEnd===k.newEnd)u=k,s=p,k=this.n(++f),p=this.l(++w);else if(p.oldEnd<k.newEnd){const[h,n]=z.q(k,p.oldLength);u=h,s=p,k=n,p=this.l(++w)}else{const[h,n]=z.r(p,k.newLength);u=k,s=h,k=this.n(++f),p=n}this.d[this.e++]=new N(u.oldPosition,u.oldText,s.newPosition,s.newText),this.g+=u.newLength-u.oldLength,this.j+=s.newLength-s.oldLength}const R=z.s(this.d);return z.t(R)}k(f){this.d[this.e++]=z.o(this.g,f),this.j+=f.newLength-f.oldLength}l(f){return f<this.h?this.c[f]:null}m(f){this.d[this.e++]=z.p(this.j,f),this.g+=f.newLength-f.oldLength}n(f){return f<this.f?this.a[f]:null}static o(f,w){return new N(w.oldPosition-f,w.oldText,w.newPosition,w.newText)}static p(f,w){return new N(w.oldPosition,w.oldText,w.newPosition+f,w.newText)}static q(f,w){const k=f.newText.substr(0,w),p=f.newText.substr(w);return[new N(f.oldPosition,f.oldText,f.newPosition,k),new N(f.oldEnd,"",f.newPosition+w,p)]}static r(f,w){const k=f.oldText.substr(0,w),p=f.oldText.substr(w);return[new N(f.oldPosition,k,f.newPosition,f.newText),new N(f.oldPosition+w,p,f.newEnd,"")]}static s(f){if(f.length===0)return f;const w=[];let k=0,p=f[0];for(let R=1;R<f.length;R++){const b=f[R];p.oldEnd===b.oldPosition?p=new N(p.oldPosition,p.oldText+b.oldText,p.newPosition,p.newText+b.newText):(w[k++]=p,p=b)}return w[k++]=p,w}static t(f){if(f.length===0)return f;const w=[];let k=0;for(let p=0;p<f.length;p++){const R=f[p];R.oldText!==R.newText&&(w[k++]=R)}return w}}}),define(ne[11],ie([0,1,39,12,25,17,40]),function(te,e,q,U,F,N,T){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PieceTreeBase=e.StringBuffer=e.Piece=e.createLineStarts=e.createLineStartsFast=void 0;const z=65535;function A(h){let n;return h[h.length-1]<65536?n=new Uint16Array(h.length):n=new Uint32Array(h.length),n.set(h,0),n}class f{constructor(n,r,i,o,c){this.lineStarts=n,this.cr=r,this.lf=i,this.crlf=o,this.isBasicASCII=c}}function w(h,n=!0){const r=[0];let i=1;for(let o=0,c=h.length;o<c;o++){const E=h.charCodeAt(o);E===13?o+1<c&&h.charCodeAt(o+1)===10?(r[i++]=o+2,o++):r[i++]=o+1:E===10&&(r[i++]=o+1)}return n?A(r):r}e.createLineStartsFast=w;function k(h,n){h.length=0,h[0]=0;let r=1,i=0,o=0,c=0,E=!0;for(let O=0,P=n.length;O<P;O++){const d=n.charCodeAt(O);d===13?O+1<P&&n.charCodeAt(O+1)===10?(c++,h[r++]=O+2,O++):(i++,h[r++]=O+1):d===10?(o++,h[r++]=O+1):E&&d!==9&&(d<32||d>126)&&(E=!1)}const v=new f(A(h),i,o,c,E);return h.length=0,v}e.createLineStarts=k;class p{constructor(n,r,i,o,c){this.bufferIndex=n,this.start=r,this.end=i,this.lineFeedCnt=o,this.length=c}}e.Piece=p;class R{constructor(n,r){this.buffer=n,this.lineStarts=r}}e.StringBuffer=R;class b{constructor(n,r){this.a=[],this.c=n,this.d=r,this.b=0,n.root!==N.SENTINEL&&n.iterate(n.root,i=>(i!==N.SENTINEL&&this.a.push(i.piece),!0))}read(){return this.a.length===0?this.b===0?(this.b++,this.d):null:this.b>this.a.length-1?null:this.b===0?this.d+this.c.getPieceContent(this.a[this.b++]):this.c.getPieceContent(this.a[this.b++])}}class u{constructor(n){this.a=n,this.b=[]}get(n){for(let r=this.b.length-1;r>=0;r--){const i=this.b[r];if(i.nodeStartOffset<=n&&i.nodeStartOffset+i.node.piece.length>=n)return i}return null}get2(n){for(let r=this.b.length-1;r>=0;r--){const i=this.b[r];if(i.nodeStartLineNumber&&i.nodeStartLineNumber<n&&i.nodeStartLineNumber+i.node.piece.lineFeedCnt>=n)return i}return null}set(n){this.b.length>=this.a&&this.b.shift(),this.b.push(n)}validate(n){let r=!1;const i=this.b;for(let o=0;o<i.length;o++){const c=i[o];if(c.node.parent===null||c.nodeStartOffset>=n){i[o]=null,r=!0;continue}}if(r){const o=[];for(const c of i)c!==null&&o.push(c);this.b=o}}}class s{constructor(n,r,i){this.create(n,r,i)}create(n,r,i){this.a=[new R("",[0])],this.g={line:0,column:0},this.root=N.SENTINEL,this.b=1,this.c=0,this.d=r,this.e=r.length,this.f=i;let o=null;for(let c=0,E=n.length;c<E;c++)if(n[c].buffer.length>0){n[c].lineStarts||(n[c].lineStarts=w(n[c].buffer));const v=new p(c+1,{line:0,column:0},{line:n[c].lineStarts.length-1,column:n[c].buffer.length-n[c].lineStarts[n[c].lineStarts.length-1]},n[c].lineStarts.length-1,n[c].buffer.length);this.a.push(n[c]),o=this.S(o,v)}this.h=new u(1),this.j={lineNumber:0,value:""},this.y()}normalizeEOL(n){const r=z,i=r-Math.floor(r/3),o=i*2;let c="",E=0;const v=[];if(this.iterate(this.root,O=>{const P=this.R(O),d=P.length;if(E<=i||E+d<o)return c+=P,E+=d,!0;const m=c.replace(/\r\n|\r|\n/g,n);return v.push(new R(m,w(m))),c=P,E=d,!0}),E>0){const O=c.replace(/\r\n|\r|\n/g,n);v.push(new R(O,w(O)))}this.create(v,n,!0)}getEOL(){return this.d}setEOL(n){this.d=n,this.e=this.d.length,this.normalizeEOL(n)}createSnapshot(n){return new b(this,n)}equal(n){if(this.getLength()!==n.getLength()||this.getLineCount()!==n.getLineCount())return!1;const r=0;return this.iterate(this.root,o=>{if(o===N.SENTINEL)return!0;const c=this.R(o),E=c.length,v=n.G(r),O=n.G(r+E),P=n.getValueInRange2(v,O);return c===P})}getOffsetAt(n,r){let i=0,o=this.root;for(;o!==N.SENTINEL;)if(o.left!==N.SENTINEL&&o.lf_left+1>=n)o=o.left;else{if(o.lf_left+o.piece.lineFeedCnt+1>=n)return i+=o.size_left,i+=this.B(o,n-o.lf_left-2)+r-1;n-=o.lf_left+o.piece.lineFeedCnt,i+=o.size_left+o.piece.length,o=o.right}return i}getPositionAt(n){n=Math.floor(n),n=Math.max(0,n);let r=this.root,i=0;const o=n;for(;r!==N.SENTINEL;)if(r.size_left!==0&&r.size_left>=n)r=r.left;else if(r.size_left+r.piece.length>=n){const c=this.A(r,n-r.size_left);if(i+=r.lf_left+c.index,c.index===0){const E=this.getOffsetAt(i+1,1),v=o-E;return new q.Position(i+1,v+1)}return new q.Position(i+1,c.remainder+1)}else if(n-=r.size_left+r.piece.length,i+=r.lf_left+r.piece.lineFeedCnt,r.right===N.SENTINEL){const c=this.getOffsetAt(i+1,1),E=o-n-c;return new q.Position(i+1,E+1)}else r=r.right;return new q.Position(1,1)}getValueInRange(n,r){if(n.startLineNumber===n.endLineNumber&&n.startColumn===n.endColumn)return"";const i=this.H(n.startLineNumber,n.startColumn),o=this.H(n.endLineNumber,n.endColumn),c=this.getValueInRange2(i,o);return r?r!==this.d||!this.f?c.replace(/\r\n|\r|\n/g,r):r===this.getEOL()&&this.f?c:c.replace(/\r\n|\r|\n/g,r):c}getValueInRange2(n,r){if(n.node===r.node){const v=n.node,O=this.a[v.piece.bufferIndex].buffer,P=this.u(v.piece.bufferIndex,v.piece.start);return O.substring(P+n.remainder,P+r.remainder)}let i=n.node;const o=this.a[i.piece.bufferIndex].buffer,c=this.u(i.piece.bufferIndex,i.piece.start);let E=o.substring(c+n.remainder,c+i.piece.length);for(i=i.next();i!==N.SENTINEL;){const v=this.a[i.piece.bufferIndex].buffer,O=this.u(i.piece.bufferIndex,i.piece.start);if(i===r.node){E+=v.substring(O,O+r.remainder);break}else E+=v.substr(O,i.piece.length);i=i.next()}return E}getLinesContent(){const n=[];let r=0,i="",o=!1;return this.iterate(this.root,c=>{if(c===N.SENTINEL)return!0;const E=c.piece;let v=E.length;if(v===0)return!0;const O=this.a[E.bufferIndex].buffer,P=this.a[E.bufferIndex].lineStarts,d=E.start.line,m=E.end.line;let g=P[d]+E.start.column;if(o&&(O.charCodeAt(g)===10&&(g++,v--),n[r++]=i,i="",o=!1,v===0))return!0;if(d===m)return!this.f&&O.charCodeAt(g+v-1)===13?(o=!0,i+=O.substr(g,v-1)):i+=O.substr(g,v),!0;i+=this.f?O.substring(g,Math.max(g,P[d+1]-this.e)):O.substring(g,P[d+1]).replace(/(\r\n|\r|\n)$/,""),n[r++]=i;for(let y=d+1;y<m;y++)i=this.f?O.substring(P[y],P[y+1]-this.e):O.substring(P[y],P[y+1]).replace(/(\r\n|\r|\n)$/,""),n[r++]=i;return!this.f&&O.charCodeAt(P[m]+E.end.column-1)===13?(o=!0,E.end.column===0?r--:i=O.substr(P[m],E.end.column-1)):i=O.substr(P[m],E.end.column),!0}),o&&(n[r++]=i,i=""),n[r++]=i,n}getLength(){return this.c}getLineCount(){return this.b}getLineContent(n){return this.j.lineNumber===n?this.j.value:(this.j.lineNumber=n,n===this.b?this.j.value=this.getLineRawContent(n):this.f?this.j.value=this.getLineRawContent(n,this.e):this.j.value=this.getLineRawContent(n).replace(/(\r\n|\r|\n)$/,""),this.j.value)}l(n){if(n.remainder===n.node.piece.length){const r=n.node.next();if(!r)return 0;const i=this.a[r.piece.bufferIndex],o=this.u(r.piece.bufferIndex,r.piece.start);return i.buffer.charCodeAt(o)}else{const r=this.a[n.node.piece.bufferIndex],o=this.u(n.node.piece.bufferIndex,n.node.piece.start)+n.remainder;return r.buffer.charCodeAt(o)}}getLineCharCode(n,r){const i=this.H(n,r+1);return this.l(i)}getLineLength(n){if(n===this.getLineCount()){const r=this.getOffsetAt(n,1);return this.getLength()-r}return this.getOffsetAt(n+1,1)-this.getOffsetAt(n,1)-this.e}getCharCode(n){const r=this.G(n);return this.l(r)}findMatchesInNode(n,r,i,o,c,E,v,O,P,d,m){const g=this.a[n.piece.bufferIndex],y=this.u(n.piece.bufferIndex,n.piece.start),j=this.u(n.piece.bufferIndex,c),W=this.u(n.piece.bufferIndex,E);let K;const Z={line:0,column:0};let Y,J;r._wordSeparators?(Y=g.buffer.substring(j,W),J=se=>se+j,r.reset(0)):(Y=g.buffer,J=se=>se,r.reset(j));do if(K=r.next(Y),K){if(J(K.index)>=W)return d;this.s(n,J(K.index)-y,Z);const se=this.t(n.piece.bufferIndex,c,Z),ae=Z.line===c.line?Z.column-c.column+o:Z.column+1,C=ae+K[0].length;if(m[d++]=(0,T.createFindMatch)(new U.Range(i+se,ae,i+se,C),K,O),J(K.index)+K[0].length>=W||d>=P)return d}while(K);return d}findMatchesLineByLine(n,r,i,o){const c=[];let E=0;const v=new T.Searcher(r.wordSeparators,r.regex);let O=this.H(n.startLineNumber,n.startColumn);if(O===null)return[];const P=this.H(n.endLineNumber,n.endColumn);if(P===null)return[];let d=this.s(O.node,O.remainder);const m=this.s(P.node,P.remainder);if(O.node===P.node)return this.findMatchesInNode(O.node,v,n.startLineNumber,n.startColumn,d,m,r,i,o,E,c),c;let g=n.startLineNumber,y=O.node;for(;y!==P.node;){const W=this.t(y.piece.bufferIndex,d,y.piece.end);if(W>=1){const Z=this.a[y.piece.bufferIndex].lineStarts,Y=this.u(y.piece.bufferIndex,y.piece.start),J=Z[d.line+W],se=g===n.startLineNumber?n.startColumn:1;if(E=this.findMatchesInNode(y,v,g,se,d,this.s(y,J-Y),r,i,o,E,c),E>=o)return c;g+=W}const K=g===n.startLineNumber?n.startColumn-1:0;if(g===n.endLineNumber){const Z=this.getLineContent(g).substring(K,n.endColumn-1);return E=this.n(r,v,Z,n.endLineNumber,K,E,c,i,o),c}if(E=this.n(r,v,this.getLineContent(g).substr(K),g,K,E,c,i,o),E>=o)return c;g++,O=this.H(g,1),y=O.node,d=this.s(O.node,O.remainder)}if(g===n.endLineNumber){const W=g===n.startLineNumber?n.startColumn-1:0,K=this.getLineContent(g).substring(W,n.endColumn-1);return E=this.n(r,v,K,n.endLineNumber,W,E,c,i,o),c}const j=g===n.startLineNumber?n.startColumn:1;return E=this.findMatchesInNode(P.node,v,g,j,d,m,r,i,o,E,c),c}n(n,r,i,o,c,E,v,O,P){const d=n.wordSeparators;if(!O&&n.simpleSearch){const g=n.simpleSearch,y=g.length,j=i.length;let W=-y;for(;(W=i.indexOf(g,W+y))!==-1;)if((!d||(0,T.isValidMatch)(d,i,j,W,y))&&(v[E++]=new F.FindMatch(new U.Range(o,W+1+c,o,W+1+y+c),null),E>=P))return E;return E}let m;r.reset(0);do if(m=r.next(i),m&&(v[E++]=(0,T.createFindMatch)(new U.Range(o,m.index+1+c,o,m.index+1+m[0].length+c),m,O),E>=P))return E;while(m);return E}insert(n,r,i=!1){if(this.f=this.f&&i,this.j.lineNumber=0,this.j.value="",this.root!==N.SENTINEL){const{node:o,remainder:c,nodeStartOffset:E}=this.G(n),v=o.piece,O=v.bufferIndex,P=this.s(o,c);if(o.piece.bufferIndex===0&&v.end.line===this.g.line&&v.end.column===this.g.column&&E+v.length===n&&r.length<z){this.F(o,r),this.y();return}if(E===n)this.o(r,o),this.h.validate(n);else if(E+o.piece.length>n){const d=[];let m=new p(v.bufferIndex,P,v.end,this.t(v.bufferIndex,P,v.end),this.u(O,v.end)-this.u(O,P));if(this.K()&&this.M(r)&&this.I(o,c)===10){const W={line:m.start.line+1,column:0};m=new p(m.bufferIndex,W,m.end,this.t(m.bufferIndex,W,m.end),m.length-1),r+=`
`}if(this.K()&&this.L(r))if(this.I(o,c-1)===13){const W=this.s(o,c-1);this.C(o,W),r="\r"+r,o.piece.length===0&&d.push(o)}else this.C(o,P);else this.C(o,P);const g=this.w(r);m.length>0&&this.S(o,m);let y=o;for(let j=0;j<g.length;j++)y=this.S(y,g[j]);this.v(d)}else this.q(r,o)}else{const o=this.w(r);let c=this.T(null,o[0]);for(let E=1;E<o.length;E++)c=this.S(c,o[E])}this.y()}delete(n,r){if(this.j.lineNumber=0,this.j.value="",r<=0||this.root===N.SENTINEL)return;const i=this.G(n),o=this.G(n+r),c=i.node,E=o.node;if(c===E){const g=this.s(c,i.remainder),y=this.s(c,o.remainder);if(i.nodeStartOffset===n){if(r===c.piece.length){const j=c.next();(0,N.rbDelete)(this,c),this.N(j),this.y();return}this.D(c,y),this.h.validate(n),this.N(c),this.y();return}if(i.nodeStartOffset+c.piece.length===n+r){this.C(c,g),this.O(c),this.y();return}this.E(c,g,y),this.y();return}const v=[],O=this.s(c,i.remainder);this.C(c,O),this.h.validate(n),c.piece.length===0&&v.push(c);const P=this.s(E,o.remainder);this.D(E,P),E.piece.length===0&&v.push(E);const d=c.next();for(let g=d;g!==N.SENTINEL&&g!==E;g=g.next())v.push(g);const m=c.piece.length===0?c.prev():c;this.v(v),this.O(m),this.y()}o(n,r){const i=[];if(this.K()&&this.M(n)&&this.L(r)){const E=r.piece,v={line:E.start.line+1,column:0},O=new p(E.bufferIndex,v,E.end,this.t(E.bufferIndex,v,E.end),E.length-1);r.piece=O,n+=`
`,(0,N.updateTreeMetadata)(this,r,-1,-1),r.piece.length===0&&i.push(r)}const o=this.w(n);let c=this.T(r,o[o.length-1]);for(let E=o.length-2;E>=0;E--)c=this.T(c,o[E]);this.N(c),this.v(i)}q(n,r){this.Q(n,r)&&(n+=`
`);const i=this.w(n),o=this.S(r,i[0]);let c=o;for(let E=1;E<i.length;E++)c=this.S(c,i[E]);this.N(o)}s(n,r,i){const o=n.piece,c=n.piece.bufferIndex,E=this.a[c].lineStarts,O=E[o.start.line]+o.start.column+r;let P=o.start.line,d=o.end.line,m=0,g=0,y=0;for(;P<=d&&(m=P+(d-P)/2|0,y=E[m],m!==d);)if(g=E[m+1],O<y)d=m-1;else if(O>=g)P=m+1;else break;return i?(i.line=m,i.column=O-y,null):{line:m,column:O-y}}t(n,r,i){if(i.column===0)return i.line-r.line;const o=this.a[n].lineStarts;if(i.line===o.length-1)return i.line-r.line;const c=o[i.line+1],E=o[i.line]+i.column;if(c>E+1)return i.line-r.line;const v=E-1;return this.a[n].buffer.charCodeAt(v)===13?i.line-r.line+1:i.line-r.line}u(n,r){return this.a[n].lineStarts[r.line]+r.column}v(n){for(let r=0;r<n.length;r++)(0,N.rbDelete)(this,n[r])}w(n){if(n.length>z){const d=[];for(;n.length>z;){const g=n.charCodeAt(z-1);let y;g===13||g>=55296&&g<=56319?(y=n.substring(0,z-1),n=n.substring(z-1)):(y=n.substring(0,z),n=n.substring(z));const j=w(y);d.push(new p(this.a.length,{line:0,column:0},{line:j.length-1,column:y.length-j[j.length-1]},j.length-1,y.length)),this.a.push(new R(y,j))}const m=w(n);return d.push(new p(this.a.length,{line:0,column:0},{line:m.length-1,column:n.length-m[m.length-1]},m.length-1,n.length)),this.a.push(new R(n,m)),d}let r=this.a[0].buffer.length;const i=w(n,!1);let o=this.g;if(this.a[0].lineStarts[this.a[0].lineStarts.length-1]===r&&r!==0&&this.L(n)&&this.M(this.a[0].buffer)){this.g={line:this.g.line,column:this.g.column+1},o=this.g;for(let d=0;d<i.length;d++)i[d]+=r+1;this.a[0].lineStarts=this.a[0].lineStarts.concat(i.slice(1)),this.a[0].buffer+="_"+n,r+=1}else{if(r!==0)for(let d=0;d<i.length;d++)i[d]+=r;this.a[0].lineStarts=this.a[0].lineStarts.concat(i.slice(1)),this.a[0].buffer+=n}const c=this.a[0].buffer.length,E=this.a[0].lineStarts.length-1,v=c-this.a[0].lineStarts[E],O={line:E,column:v},P=new p(0,o,O,this.t(0,o,O),c-r);return this.g=O,[P]}getLinesRawContent(){return this.U(this.root)}getLineRawContent(n,r=0){let i=this.root,o="";const c=this.h.get2(n);if(c){i=c.node;const E=this.B(i,n-c.nodeStartLineNumber-1),v=this.a[i.piece.bufferIndex].buffer,O=this.u(i.piece.bufferIndex,i.piece.start);if(c.nodeStartLineNumber+i.piece.lineFeedCnt===n)o=v.substring(O+E,O+i.piece.length);else{const P=this.B(i,n-c.nodeStartLineNumber);return v.substring(O+E,O+P-r)}}else{let E=0;const v=n;for(;i!==N.SENTINEL;)if(i.left!==N.SENTINEL&&i.lf_left>=n-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>n-1){const O=this.B(i,n-i.lf_left-2),P=this.B(i,n-i.lf_left-1),d=this.a[i.piece.bufferIndex].buffer,m=this.u(i.piece.bufferIndex,i.piece.start);return E+=i.size_left,this.h.set({node:i,nodeStartOffset:E,nodeStartLineNumber:v-(n-1-i.lf_left)}),d.substring(m+O,m+P-r)}else if(i.lf_left+i.piece.lineFeedCnt===n-1){const O=this.B(i,n-i.lf_left-2),P=this.a[i.piece.bufferIndex].buffer,d=this.u(i.piece.bufferIndex,i.piece.start);o=P.substring(d+O,d+i.piece.length);break}else n-=i.lf_left+i.piece.lineFeedCnt,E+=i.size_left+i.piece.length,i=i.right}for(i=i.next();i!==N.SENTINEL;){const E=this.a[i.piece.bufferIndex].buffer;if(i.piece.lineFeedCnt>0){const v=this.B(i,0),O=this.u(i.piece.bufferIndex,i.piece.start);return o+=E.substring(O,O+v-r),o}else{const v=this.u(i.piece.bufferIndex,i.piece.start);o+=E.substr(v,i.piece.length)}i=i.next()}return o}y(){let n=this.root,r=1,i=0;for(;n!==N.SENTINEL;)r+=n.lf_left+n.piece.lineFeedCnt,i+=n.size_left+n.piece.length,n=n.right;this.b=r,this.c=i,this.h.validate(this.c)}A(n,r){const i=n.piece,o=this.s(n,r),c=o.line-i.start.line;if(this.u(i.bufferIndex,i.end)-this.u(i.bufferIndex,i.start)===r){const E=this.t(n.piece.bufferIndex,i.start,o);if(E!==c)return{index:E,remainder:0}}return{index:c,remainder:o.column}}B(n,r){if(r<0)return 0;const i=n.piece,o=this.a[i.bufferIndex].lineStarts,c=i.start.line+r+1;return c>i.end.line?o[i.end.line]+i.end.column-o[i.start.line]-i.start.column:o[c]-o[i.start.line]-i.start.column}C(n,r){const i=n.piece,o=i.lineFeedCnt,c=this.u(i.bufferIndex,i.end),E=r,v=this.u(i.bufferIndex,E),O=this.t(i.bufferIndex,i.start,E),P=O-o,d=v-c,m=i.length+d;n.piece=new p(i.bufferIndex,i.start,E,O,m),(0,N.updateTreeMetadata)(this,n,d,P)}D(n,r){const i=n.piece,o=i.lineFeedCnt,c=this.u(i.bufferIndex,i.start),E=r,v=this.t(i.bufferIndex,E,i.end),O=this.u(i.bufferIndex,E),P=v-o,d=c-O,m=i.length+d;n.piece=new p(i.bufferIndex,E,i.end,v,m),(0,N.updateTreeMetadata)(this,n,d,P)}E(n,r,i){const o=n.piece,c=o.start,E=o.end,v=o.length,O=o.lineFeedCnt,P=r,d=this.t(o.bufferIndex,o.start,P),m=this.u(o.bufferIndex,r)-this.u(o.bufferIndex,c);n.piece=new p(o.bufferIndex,o.start,P,d,m),(0,N.updateTreeMetadata)(this,n,m-v,d-O);const g=new p(o.bufferIndex,i,E,this.t(o.bufferIndex,i,E),this.u(o.bufferIndex,E)-this.u(o.bufferIndex,i)),y=this.S(n,g);this.N(y)}F(n,r){this.Q(r,n)&&(r+=`
`);const i=this.K()&&this.L(r)&&this.M(n),o=this.a[0].buffer.length;this.a[0].buffer+=r;const c=w(r,!1);for(let y=0;y<c.length;y++)c[y]+=o;if(i){const y=this.a[0].lineStarts[this.a[0].lineStarts.length-2];this.a[0].lineStarts.pop(),this.g={line:this.g.line-1,column:o-y}}this.a[0].lineStarts=this.a[0].lineStarts.concat(c.slice(1));const E=this.a[0].lineStarts.length-1,v=this.a[0].buffer.length-this.a[0].lineStarts[E],O={line:E,column:v},P=n.piece.length+r.length,d=n.piece.lineFeedCnt,m=this.t(0,n.piece.start,O),g=m-d;n.piece=new p(n.piece.bufferIndex,n.piece.start,O,m,P),this.g=O,(0,N.updateTreeMetadata)(this,n,r.length,g)}G(n){let r=this.root;const i=this.h.get(n);if(i)return{node:i.node,nodeStartOffset:i.nodeStartOffset,remainder:n-i.nodeStartOffset};let o=0;for(;r!==N.SENTINEL;)if(r.size_left>n)r=r.left;else if(r.size_left+r.piece.length>=n){o+=r.size_left;const c={node:r,remainder:n-r.size_left,nodeStartOffset:o};return this.h.set(c),c}else n-=r.size_left+r.piece.length,o+=r.size_left+r.piece.length,r=r.right;return null}H(n,r){let i=this.root,o=0;for(;i!==N.SENTINEL;)if(i.left!==N.SENTINEL&&i.lf_left>=n-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>n-1){const c=this.B(i,n-i.lf_left-2),E=this.B(i,n-i.lf_left-1);return o+=i.size_left,{node:i,remainder:Math.min(c+r-1,E),nodeStartOffset:o}}else if(i.lf_left+i.piece.lineFeedCnt===n-1){const c=this.B(i,n-i.lf_left-2);if(c+r-1<=i.piece.length)return{node:i,remainder:c+r-1,nodeStartOffset:o};r-=i.piece.length-c;break}else n-=i.lf_left+i.piece.lineFeedCnt,o+=i.size_left+i.piece.length,i=i.right;for(i=i.next();i!==N.SENTINEL;){if(i.piece.lineFeedCnt>0){const c=this.B(i,0),E=this.J(i);return{node:i,remainder:Math.min(r-1,c),nodeStartOffset:E}}else if(i.piece.length>=r-1){const c=this.J(i);return{node:i,remainder:r-1,nodeStartOffset:c}}else r-=i.piece.length;i=i.next()}return null}I(n,r){if(n.piece.lineFeedCnt<1)return-1;const i=this.a[n.piece.bufferIndex],o=this.u(n.piece.bufferIndex,n.piece.start)+r;return i.buffer.charCodeAt(o)}J(n){if(!n)return 0;let r=n.size_left;for(;n!==this.root;)n.parent.right===n&&(r+=n.parent.size_left+n.parent.piece.length),n=n.parent;return r}K(){return!(this.f&&this.d===`
`)}L(n){if(typeof n=="string")return n.charCodeAt(0)===10;if(n===N.SENTINEL||n.piece.lineFeedCnt===0)return!1;const r=n.piece,i=this.a[r.bufferIndex].lineStarts,o=r.start.line,c=i[o]+r.start.column;return o===i.length-1||i[o+1]>c+1?!1:this.a[r.bufferIndex].buffer.charCodeAt(c)===10}M(n){return typeof n=="string"?n.charCodeAt(n.length-1)===13:n===N.SENTINEL||n.piece.lineFeedCnt===0?!1:this.I(n,n.piece.length-1)===13}N(n){if(this.K()&&this.L(n)){const r=n.prev();this.M(r)&&this.P(r,n)}}O(n){if(this.K()&&this.M(n)){const r=n.next();this.L(r)&&this.P(n,r)}}P(n,r){const i=[],o=this.a[n.piece.bufferIndex].lineStarts;let c;n.piece.end.column===0?c={line:n.piece.end.line-1,column:o[n.piece.end.line]-o[n.piece.end.line-1]-1}:c={line:n.piece.end.line,column:n.piece.end.column-1};const E=n.piece.length-1,v=n.piece.lineFeedCnt-1;n.piece=new p(n.piece.bufferIndex,n.piece.start,c,v,E),(0,N.updateTreeMetadata)(this,n,-1,-1),n.piece.length===0&&i.push(n);const O={line:r.piece.start.line+1,column:0},P=r.piece.length-1,d=this.t(r.piece.bufferIndex,O,r.piece.end);r.piece=new p(r.piece.bufferIndex,O,r.piece.end,d,P),(0,N.updateTreeMetadata)(this,r,-1,-1),r.piece.length===0&&i.push(r);const m=this.w(`\r
`);this.S(n,m[0]);for(let g=0;g<i.length;g++)(0,N.rbDelete)(this,i[g])}Q(n,r){if(this.K()&&this.M(n)){const i=r.next();if(this.L(i)){if(n+=`
`,i.piece.length===1)(0,N.rbDelete)(this,i);else{const o=i.piece,c={line:o.start.line+1,column:0},E=o.length-1,v=this.t(o.bufferIndex,c,o.end);i.piece=new p(o.bufferIndex,c,o.end,v,E),(0,N.updateTreeMetadata)(this,i,-1,-1)}return!0}}return!1}iterate(n,r){if(n===N.SENTINEL)return r(N.SENTINEL);const i=this.iterate(n.left,r);return i&&r(n)&&this.iterate(n.right,r)}R(n){if(n===N.SENTINEL)return"";const r=this.a[n.piece.bufferIndex],i=n.piece,o=this.u(i.bufferIndex,i.start),c=this.u(i.bufferIndex,i.end);return r.buffer.substring(o,c)}getPieceContent(n){const r=this.a[n.bufferIndex],i=this.u(n.bufferIndex,n.start),o=this.u(n.bufferIndex,n.end);return r.buffer.substring(i,o)}S(n,r){const i=new N.TreeNode(r,1);if(i.left=N.SENTINEL,i.right=N.SENTINEL,i.parent=N.SENTINEL,i.size_left=0,i.lf_left=0,this.root===N.SENTINEL)this.root=i,i.color=0;else if(n.right===N.SENTINEL)n.right=i,i.parent=n;else{const c=(0,N.leftest)(n.right);c.left=i,i.parent=c}return(0,N.fixInsert)(this,i),i}T(n,r){const i=new N.TreeNode(r,1);if(i.left=N.SENTINEL,i.right=N.SENTINEL,i.parent=N.SENTINEL,i.size_left=0,i.lf_left=0,this.root===N.SENTINEL)this.root=i,i.color=0;else if(n.left===N.SENTINEL)n.left=i,i.parent=n;else{const o=(0,N.righttest)(n.left);o.right=i,i.parent=o}return(0,N.fixInsert)(this,i),i}U(n){let r="";return this.iterate(n,i=>(r+=this.R(i),!0)),r}}e.PieceTreeBase=s}),define(ne[26],ie([0,1,21,3,12,25,11,16,24,7]),function(te,e,q,U,F,N,T,z,A,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PieceTreeTextBuffer=void 0;class w extends f.Disposable{constructor(p,R,b,u,s,h,n){super(),this.k=this.B(new q.Emitter),this.onDidChangeContent=this.k.event,this.f=R,this.j=!h,this.g=u,this.h=s,this.c=new T.PieceTreeBase(p,b,n)}equals(p){return!(p instanceof w)||this.f!==p.f||this.getEOL()!==p.getEOL()?!1:this.c.equal(p.c)}mightContainRTL(){return this.g}mightContainUnusualLineTerminators(){return this.h}resetMightContainUnusualLineTerminators(){this.h=!1}mightContainNonBasicASCII(){return this.j}getBOM(){return this.f}getEOL(){return this.c.getEOL()}createSnapshot(p){return this.c.createSnapshot(p?this.f:"")}getOffsetAt(p,R){return this.c.getOffsetAt(p,R)}getPositionAt(p){return this.c.getPositionAt(p)}getRangeAt(p,R){const b=p+R,u=this.getPositionAt(p),s=this.getPositionAt(b);return new F.Range(u.lineNumber,u.column,s.lineNumber,s.column)}getValueInRange(p,R=0){if(p.isEmpty())return"";const b=this.l(R);return this.c.getValueInRange(p,b)}getValueLengthInRange(p,R=0){if(p.isEmpty())return 0;if(p.startLineNumber===p.endLineNumber)return p.endColumn-p.startColumn;const b=this.getOffsetAt(p.startLineNumber,p.startColumn),u=this.getOffsetAt(p.endLineNumber,p.endColumn);let s=0;const h=this.l(R),n=this.getEOL();if(h.length!==n.length){const r=h.length-n.length,i=p.endLineNumber-p.startLineNumber;s=r*i}return u-b+s}getCharacterCountInRange(p,R=0){if(this.j){let b=0;const u=p.startLineNumber,s=p.endLineNumber;for(let h=u;h<=s;h++){const n=this.getLineContent(h),r=h===u?p.startColumn-1:0,i=h===s?p.endColumn-1:n.length;for(let o=r;o<i;o++)U.isHighSurrogate(n.charCodeAt(o))?(b=b+1,o=o+1):b=b+1}return b+=this.l(R).length*(s-u),b}return this.getValueLengthInRange(p,R)}getLength(){return this.c.getLength()}getLineCount(){return this.c.getLineCount()}getLinesContent(){return this.c.getLinesContent()}getLineContent(p){return this.c.getLineContent(p)}getLineCharCode(p,R){return this.c.getLineCharCode(p,R)}getCharCode(p){return this.c.getCharCode(p)}getLineLength(p){return this.c.getLineLength(p)}getLineMinColumn(p){return 1}getLineMaxColumn(p){return this.getLineLength(p)+1}getLineFirstNonWhitespaceColumn(p){const R=U.firstNonWhitespaceIndex(this.getLineContent(p));return R===-1?0:R+1}getLineLastNonWhitespaceColumn(p){const R=U.lastNonWhitespaceIndex(this.getLineContent(p));return R===-1?0:R+2}l(p){switch(p){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(p){this.c.setEOL(p)}applyEdits(p,R,b){let u=this.g,s=this.h,h=this.j,n=!0,r=[];for(let P=0;P<p.length;P++){const d=p[P];n&&d._isTracked&&(n=!1);const m=d.range;if(d.text){let K=!0;h||(K=!U.isBasicASCII(d.text),h=K),!u&&K&&(u=U.containsRTL(d.text)),!s&&K&&(s=U.containsUnusualLineTerminators(d.text))}let g="",y=0,j=0,W=0;if(d.text){let K;[y,j,W,K]=(0,z.countEOL)(d.text);const Z=this.getEOL();K===0||K===(Z===`\r
`?2:1)?g=d.text:g=d.text.replace(/\r\n|\r|\n/g,Z)}r[P]={sortIndex:P,identifier:d.identifier||null,range:m,rangeOffset:this.getOffsetAt(m.startLineNumber,m.startColumn),rangeLength:this.getValueLengthInRange(m),text:g,eolCount:y,firstLineLength:j,lastLineLength:W,forceMoveMarkers:Boolean(d.forceMoveMarkers),isAutoWhitespaceEdit:d.isAutoWhitespaceEdit||!1}}r.sort(w.p);let i=!1;for(let P=0,d=r.length-1;P<d;P++){const m=r[P].range.getEndPosition(),g=r[P+1].range.getStartPosition();if(g.isBeforeOrEqual(m)){if(g.isBefore(m))throw new Error("Overlapping ranges are not allowed!");i=!0}}n&&(r=this.m(r));const o=b||R?w._getInverseEditRanges(r):[],c=[];if(R)for(let P=0;P<r.length;P++){const d=r[P],m=o[P];if(d.isAutoWhitespaceEdit&&d.range.isEmpty())for(let g=m.startLineNumber;g<=m.endLineNumber;g++){let y="";g===m.startLineNumber&&(y=this.getLineContent(d.range.startLineNumber),U.firstNonWhitespaceIndex(y)!==-1)||c.push({lineNumber:g,oldContent:y})}}let E=null;if(b){let P=0;E=[];for(let d=0;d<r.length;d++){const m=r[d],g=o[d],y=this.getValueInRange(m.range),j=m.rangeOffset+P;P+=m.text.length-y.length,E[d]={sortIndex:m.sortIndex,identifier:m.identifier,range:g,text:y,textChange:new A.TextChange(m.rangeOffset,y,j,m.text)}}i||E.sort((d,m)=>d.sortIndex-m.sortIndex)}this.g=u,this.h=s,this.j=h;const v=this.n(r);let O=null;if(R&&c.length>0){c.sort((P,d)=>d.lineNumber-P.lineNumber),O=[];for(let P=0,d=c.length;P<d;P++){const m=c[P].lineNumber;if(P>0&&c[P-1].lineNumber===m)continue;const g=c[P].oldContent,y=this.getLineContent(m);y.length===0||y===g||U.firstNonWhitespaceIndex(y)!==-1||O.push(m)}}return this.k.fire(),new N.ApplyEditsResult(E,v,O)}m(p){return p.length<1e3?p:[this._toSingleEditOperation(p)]}_toSingleEditOperation(p){let R=!1;const b=p[0].range,u=p[p.length-1].range,s=new F.Range(b.startLineNumber,b.startColumn,u.endLineNumber,u.endColumn);let h=b.startLineNumber,n=b.startColumn;const r=[];for(let v=0,O=p.length;v<O;v++){const P=p[v],d=P.range;R=R||P.forceMoveMarkers,r.push(this.getValueInRange(new F.Range(h,n,d.startLineNumber,d.startColumn))),P.text.length>0&&r.push(P.text),h=d.endLineNumber,n=d.endColumn}const i=r.join(""),[o,c,E]=(0,z.countEOL)(i);return{sortIndex:0,identifier:p[0].identifier,range:s,rangeOffset:this.getOffsetAt(s.startLineNumber,s.startColumn),rangeLength:this.getValueLengthInRange(s,0),text:i,eolCount:o,firstLineLength:c,lastLineLength:E,forceMoveMarkers:R,isAutoWhitespaceEdit:!1}}n(p){p.sort(w.s);const R=[];for(let b=0;b<p.length;b++){const u=p[b],s=u.range.startLineNumber,h=u.range.startColumn,n=u.range.endLineNumber,r=u.range.endColumn;if(s===n&&h===r&&u.text.length===0)continue;u.text?(this.c.delete(u.rangeOffset,u.rangeLength),this.c.insert(u.rangeOffset,u.text,!0)):this.c.delete(u.rangeOffset,u.rangeLength);const i=new F.Range(s,h,n,r);R.push({range:i,rangeLength:u.rangeLength,text:u.text,rangeOffset:u.rangeOffset,forceMoveMarkers:u.forceMoveMarkers})}return R}findMatchesLineByLine(p,R,b,u){return this.c.findMatchesLineByLine(p,R,b,u)}getPieceTree(){return this.c}static _getInverseEditRange(p,R){const b=p.startLineNumber,u=p.startColumn,[s,h,n]=(0,z.countEOL)(R);let r;if(R.length>0){const i=s+1;i===1?r=new F.Range(b,u,b,u+h):r=new F.Range(b,u,b+i-1,n+1)}else r=new F.Range(b,u,b,u);return r}static _getInverseEditRanges(p){const R=[];let b=0,u=0,s=null;for(let h=0,n=p.length;h<n;h++){const r=p[h];let i,o;s?s.range.endLineNumber===r.range.startLineNumber?(i=b,o=u+(r.range.startColumn-s.range.endColumn)):(i=b+(r.range.startLineNumber-s.range.endLineNumber),o=r.range.startColumn):(i=r.range.startLineNumber,o=r.range.startColumn);let c;if(r.text.length>0){const E=r.eolCount+1;E===1?c=new F.Range(i,o,i,o+r.firstLineLength):c=new F.Range(i,o,i+E-1,r.lastLineLength+1)}else c=new F.Range(i,o,i,o);b=c.endLineNumber,u=c.endColumn,R.push(c),s=r}return R}static p(p,R){const b=F.Range.compareRangesUsingEnds(p.range,R.range);return b===0?p.sortIndex-R.sortIndex:b}static s(p,R){const b=F.Range.compareRangesUsingEnds(p.range,R.range);return b===0?R.sortIndex-p.sortIndex:-b}}e.PieceTreeTextBuffer=w}),define(ne[27],ie([0,1,3,11,26]),function(te,e,q,U,F){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PieceTreeTextBufferBuilder=void 0;class N{constructor(A,f,w,k,p,R,b,u,s){this.a=A,this.b=f,this.c=w,this.d=k,this.e=p,this.f=R,this.g=b,this.h=u,this.j=s}k(A){const f=this.c+this.d+this.e,w=this.c+this.e;return f===0?A===1?`
`:`\r
`:w>f/2?`\r
`:`
`}create(A){const f=this.k(A),w=this.a;if(this.j&&(f===`\r
`&&(this.c>0||this.d>0)||f===`
`&&(this.c>0||this.e>0)))for(let p=0,R=w.length;p<R;p++){const b=w[p].buffer.replace(/\r\n|\r|\n/g,f),u=(0,U.createLineStartsFast)(b);w[p]=new U.StringBuffer(b,u)}const k=new F.PieceTreeTextBuffer(w,this.b,f,this.f,this.g,this.h,this.j);return{textBuffer:k,disposable:k}}getFirstLineText(A){return this.a[0].buffer.substr(0,A).split(/\r\n|\r|\n/)[0]}}class T{constructor(){this.a=[],this.b="",this.c=!1,this.d=0,this.e=[],this.f=0,this.g=0,this.h=0,this.j=!1,this.k=!1,this.l=!0}acceptChunk(A){if(A.length===0)return;this.a.length===0&&q.startsWithUTF8BOM(A)&&(this.b=q.UTF8_BOM_CHARACTER,A=A.substr(1));const f=A.charCodeAt(A.length-1);f===13||f>=55296&&f<=56319?(this.m(A.substr(0,A.length-1),!1),this.c=!0,this.d=f):(this.m(A,!1),this.c=!1,this.d=f)}m(A,f){!f&&A.length===0||(this.c?this.n(String.fromCharCode(this.d)+A):this.n(A))}n(A){const f=(0,U.createLineStarts)(this.e,A);this.a.push(new U.StringBuffer(A,f.lineStarts)),this.f+=f.cr,this.g+=f.lf,this.h+=f.crlf,f.isBasicASCII||(this.l=!1,this.j||(this.j=q.containsRTL(A)),this.k||(this.k=q.containsUnusualLineTerminators(A)))}finish(A=!0){return this.o(),new N(this.a,this.b,this.f,this.g,this.h,this.j,this.k,this.l,A)}o(){if(this.a.length===0&&this.m("",!0),this.c){this.c=!1;const A=this.a[this.a.length-1];A.buffer+=String.fromCharCode(this.d);const f=(0,U.createLineStartsFast)(A.buffer);A.lineStarts=f,this.d===13&&this.f++}}}e.PieceTreeTextBufferBuilder=T}),define(ne[28],ie([29,30]),function(te,e){return te.create("vs/platform/contextkey/common/contextkey",e)}),define(ne[31],ie([29,30]),function(te,e){return te.create("vs/platform/contextkey/common/scanner",e)}),define(ne[32],ie([0,1,4,31]),function(te,e,q,U){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Scanner=e.TokenType=void 0;var F;(function(f){f[f.LParen=0]="LParen",f[f.RParen=1]="RParen",f[f.Neg=2]="Neg",f[f.Eq=3]="Eq",f[f.NotEq=4]="NotEq",f[f.Lt=5]="Lt",f[f.LtEq=6]="LtEq",f[f.Gt=7]="Gt",f[f.GtEq=8]="GtEq",f[f.RegexOp=9]="RegexOp",f[f.RegexStr=10]="RegexStr",f[f.True=11]="True",f[f.False=12]="False",f[f.In=13]="In",f[f.Not=14]="Not",f[f.And=15]="And",f[f.Or=16]="Or",f[f.Str=17]="Str",f[f.QuotedStr=18]="QuotedStr",f[f.Error=19]="Error",f[f.EOF=20]="EOF"})(F=e.TokenType||(e.TokenType={}));function N(...f){switch(f.length){case 1:return(0,U.localize)(0,null,f[0]);case 2:return(0,U.localize)(1,null,f[0],f[1]);case 3:return(0,U.localize)(2,null,f[0],f[1],f[2]);default:return}}const T=(0,U.localize)(3,null),z=(0,U.localize)(4,null);class A{constructor(){this.c="",this.d=0,this.e=0,this.f=[],this.g=[],this.m=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy}static getLexeme(w){switch(w.type){case 0:return"(";case 1:return")";case 2:return"!";case 3:return w.isTripleEq?"===":"==";case 4:return w.isTripleEq?"!==":"!=";case 5:return"<";case 6:return"<=";case 7:return">=";case 8:return">=";case 9:return"=~";case 10:return w.lexeme;case 11:return"true";case 12:return"false";case 13:return"in";case 14:return"not";case 15:return"&&";case 16:return"||";case 17:return w.lexeme;case 18:return w.lexeme;case 19:return w.lexeme;case 20:return"EOF";default:throw(0,q.illegalState)(`unhandled token type: ${JSON.stringify(w)}; have you forgotten to add a case?`)}}get errors(){return this.g}reset(w){return this.c=w,this.d=0,this.e=0,this.f=[],this.g=[],this}scan(){for(;!this.r();)switch(this.d=this.e,this.i()){case 40:this.k(0);break;case 41:this.k(1);break;case 33:if(this.h(61)){const k=this.h(61);this.f.push({type:4,offset:this.d,isTripleEq:k})}else this.k(2);break;case 39:this.o();break;case 47:this.q();break;case 61:if(this.h(61)){const k=this.h(61);this.f.push({type:3,offset:this.d,isTripleEq:k})}else this.h(126)?this.k(9):this.l(N("==","=~"));break;case 60:this.k(this.h(61)?6:5);break;case 62:this.k(this.h(61)?8:7);break;case 38:this.h(38)?this.k(15):this.l(N("&&"));break;case 124:this.h(124)?this.k(16):this.l(N("||"));break;case 32:case 13:case 9:case 10:case 160:break;default:this.n()}return this.d=this.e,this.k(20),Array.from(this.f)}h(w){return this.r()||this.c.charCodeAt(this.e)!==w?!1:(this.e++,!0)}i(){return this.c.charCodeAt(this.e++)}j(){return this.r()?0:this.c.charCodeAt(this.e)}k(w){this.f.push({type:w,offset:this.d})}l(w){const k=this.d,p=this.c.substring(this.d,this.e),R={type:19,offset:this.d,lexeme:p};this.g.push({offset:k,lexeme:p,additionalInfo:w}),this.f.push(R)}n(){this.m.lastIndex=this.d;const w=this.m.exec(this.c);if(w){this.e=this.d+w[0].length;const k=this.c.substring(this.d,this.e),p=A.b.get(k);p?this.k(p):this.f.push({type:17,lexeme:k,offset:this.d})}}o(){for(;this.j()!==39&&!this.r();)this.i();if(this.r()){this.l(T);return}this.i(),this.f.push({type:18,lexeme:this.c.substring(this.d+1,this.e-1),offset:this.d+1})}q(){let w=this.e,k=!1,p=!1;for(;;){if(w>=this.c.length){this.e=w,this.l(z);return}const b=this.c.charCodeAt(w);if(k)k=!1;else if(b===47&&!p){w++;break}else b===91?p=!0:b===92?k=!0:b===93&&(p=!1);w++}for(;w<this.c.length&&A.a.has(this.c.charCodeAt(w));)w++;this.e=w;const R=this.c.substring(this.d,this.e);this.f.push({type:10,lexeme:R,offset:this.d})}r(){return this.e>=this.c.length}}A.a=new Set(["i","g","s","m","y","u"].map(f=>f.charCodeAt(0))),A.b=new Map([["not",14],["in",13],["false",12],["true",11]]),e.Scanner=A}),define(ne[33],ie([0,1]),function(te,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.refineServiceDecorator=e.createDecorator=e.IInstantiationService=e._util=void 0;var q;(function(T){T.serviceIds=new Map,T.DI_TARGET="$di$target",T.DI_DEPENDENCIES="$di$dependencies";function z(A){return A[T.DI_DEPENDENCIES]||[]}T.getServiceDependencies=z})(q=e._util||(e._util={})),e.IInstantiationService=F("instantiationService");function U(T,z,A){z[q.DI_TARGET]===z?z[q.DI_DEPENDENCIES].push({id:T,index:A}):(z[q.DI_DEPENDENCIES]=[{id:T,index:A}],z[q.DI_TARGET]=z)}function F(T){if(q.serviceIds.has(T))return q.serviceIds.get(T);const z=function(A,f,w){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");U(z,A,w)};return z.toString=()=>T,q.serviceIds.set(T,z),z}e.createDecorator=F;function N(T){return T}e.refineServiceDecorator=N}),define(ne[34],ie([0,1,2,3,32,33,28,4]),function(te,e,q,U,F,N,T,z){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.implies=e.IContextKeyService=e.RawContextKey=e.ContextKeyOrExpr=e.ContextKeyAndExpr=e.ContextKeyNotRegexExpr=e.ContextKeyRegexExpr=e.ContextKeySmallerEqualsExpr=e.ContextKeySmallerExpr=e.ContextKeyGreaterEqualsExpr=e.ContextKeyGreaterExpr=e.ContextKeyNotExpr=e.ContextKeyNotEqualsExpr=e.ContextKeyNotInExpr=e.ContextKeyInExpr=e.ContextKeyEqualsExpr=e.ContextKeyDefinedExpr=e.ContextKeyTrueExpr=e.ContextKeyFalseExpr=e.expressionsAreEqualWithConstantSubstitution=e.validateWhenClauses=e.ContextKeyExpr=e.Parser=e.ContextKeyExprType=e.setConstant=void 0;const A=new Map;A.set("false",!1),A.set("true",!0),A.set("isMac",q.isMacintosh),A.set("isLinux",q.isLinux),A.set("isWindows",q.isWindows),A.set("isWeb",q.isWeb),A.set("isMacNative",q.isMacintosh&&!q.isWeb),A.set("isEdge",q.isEdge),A.set("isFirefox",q.isFirefox),A.set("isChrome",q.isChrome),A.set("isSafari",q.isSafari);function f(a,t){if(A.get(a)!==void 0)throw(0,z.illegalArgument)("contextkey.setConstant(k, v) invoked with already set constant `k`");A.set(a,t)}e.setConstant=f;const w=Object.prototype.hasOwnProperty;var k;(function(a){a[a.False=0]="False",a[a.True=1]="True",a[a.Defined=2]="Defined",a[a.Not=3]="Not",a[a.Equals=4]="Equals",a[a.NotEquals=5]="NotEquals",a[a.And=6]="And",a[a.Regex=7]="Regex",a[a.NotRegex=8]="NotRegex",a[a.Or=9]="Or",a[a.In=10]="In",a[a.NotIn=11]="NotIn",a[a.Greater=12]="Greater",a[a.GreaterEquals=13]="GreaterEquals",a[a.Smaller=14]="Smaller",a[a.SmallerEquals=15]="SmallerEquals"})(k=e.ContextKeyExprType||(e.ContextKeyExprType={}));const p={regexParsingWithErrorRecovery:!0},R=(0,T.localize)(0,null),b=(0,T.localize)(1,null),u=(0,T.localize)(2,null),s=(0,T.localize)(3,null),h=(0,T.localize)(4,null),n=(0,T.localize)(5,null),r=(0,T.localize)(6,null),i=(0,T.localize)(7,null);class o{get lexingErrors(){return this.d.errors}get parsingErrors(){return this.h}constructor(t=p){this.k=t,this.d=new F.Scanner,this.f=[],this.g=0,this.h=[],this.v=/g|y/g}parse(t){if(t===""){this.h.push({message:R,offset:0,lexeme:"",additionalInfo:b});return}this.f=this.d.reset(t).scan(),this.g=0,this.h=[];try{const l=this.l();if(!this.E()){const S=this.D(),L=S.type===17?n:void 0;throw this.h.push({message:h,offset:S.offset,lexeme:F.Scanner.getLexeme(S),additionalInfo:L}),o.c}return l}catch(l){if(l!==o.c)throw l;return}}l(){return this.m()}m(){const t=[this.o()];for(;this.y(16);){const l=this.o();t.push(l)}return t.length===1?t[0]:c.or(...t)}o(){const t=[this.s()];for(;this.y(15);){const l=this.s();t.push(l)}return t.length===1?t[0]:c.and(...t)}s(){if(this.y(2)){const t=this.D();switch(t.type){case 11:return this.z(),P.INSTANCE;case 12:return this.z(),d.INSTANCE;case 0:{this.z();const l=this.l();return this.A(1,s),l?.negate()}case 17:return this.z(),K.create(t.lexeme);default:throw this.B("KEY | true | false | '(' expression ')'",t)}}return this.t()}t(){const t=this.D();switch(t.type){case 11:return this.z(),c.true();case 12:return this.z(),c.false();case 0:{this.z();const l=this.l();return this.A(1,s),l}case 17:{const l=t.lexeme;if(this.z(),this.y(9)){const L=this.D();if(!this.k.regexParsingWithErrorRecovery){if(this.z(),L.type!==10)throw this.B("REGEX",L);const H=L.lexeme,V=H.lastIndexOf("/"),X=V===H.length-1?void 0:this.w(H.substring(V+1));let re;try{re=new RegExp(H.substring(1,V),X)}catch{throw this.B("REGEX",L)}return C.create(l,re)}switch(L.type){case 10:case 19:{const H=[L.lexeme];this.z();let V=this.D(),X=0;for(let le=0;le<L.lexeme.length;le++)L.lexeme.charCodeAt(le)===40?X++:L.lexeme.charCodeAt(le)===41&&X--;for(;!this.E()&&V.type!==15&&V.type!==16;){switch(V.type){case 0:X++;break;case 1:X--;break;case 10:case 18:for(let le=0;le<V.lexeme.length;le++)V.lexeme.charCodeAt(le)===40?X++:L.lexeme.charCodeAt(le)===41&&X--}if(X<0)break;H.push(F.Scanner.getLexeme(V)),this.z(),V=this.D()}const re=H.join(""),oe=re.lastIndexOf("/"),ue=oe===re.length-1?void 0:this.w(re.substring(oe+1));let he;try{he=new RegExp(re.substring(1,oe),ue)}catch{throw this.B("REGEX",L)}return c.regex(l,he)}case 18:{const H=L.lexeme;this.z();let V=null;if(!(0,U.isFalsyOrWhitespace)(H)){const X=H.indexOf("/"),re=H.lastIndexOf("/");if(X!==re&&X>=0){const oe=H.slice(X+1,re),ue=H[re+1]==="i"?"i":"";try{V=new RegExp(oe,ue)}catch{throw this.B("REGEX",L)}}}if(V===null)throw this.B("REGEX",L);return C.create(l,V)}default:throw this.B("REGEX",this.D())}}if(this.y(14)){this.A(13,u);const L=this.u();return c.notIn(l,L)}switch(this.D().type){case 3:{this.z();const L=this.u();if(this.x().type===18)return c.equals(l,L);switch(L){case"true":return c.has(l);case"false":return c.not(l);default:return c.equals(l,L)}}case 4:{this.z();const L=this.u();if(this.x().type===18)return c.notEquals(l,L);switch(L){case"true":return c.not(l);case"false":return c.has(l);default:return c.notEquals(l,L)}}case 5:return this.z(),se.create(l,this.u());case 6:return this.z(),ae.create(l,this.u());case 7:return this.z(),Y.create(l,this.u());case 8:return this.z(),J.create(l,this.u());case 13:return this.z(),c.in(l,this.u());default:return c.has(l)}}case 20:throw this.h.push({message:r,offset:t.offset,lexeme:"",additionalInfo:i}),o.c;default:throw this.B(`true | false | KEY 
	| KEY '=~' REGEX 
	| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value`,this.D())}}u(){const t=this.D();switch(t.type){case 17:case 18:return this.z(),t.lexeme;case 11:return this.z(),"true";case 12:return this.z(),"false";case 13:return this.z(),"in";default:return""}}w(t){return t.replaceAll(this.v,"")}x(){return this.f[this.g-1]}y(t){return this.C(t)?(this.z(),!0):!1}z(){return this.E()||this.g++,this.x()}A(t,l){if(this.C(t))return this.z();throw this.B(l,this.D())}B(t,l,S){const L=(0,T.localize)(8,null,t,F.Scanner.getLexeme(l)),H=l.offset,V=F.Scanner.getLexeme(l);return this.h.push({message:L,offset:H,lexeme:V,additionalInfo:S}),o.c}C(t){return this.D().type===t}D(){return this.f[this.g]}E(){return this.D().type===20}}o.c=new Error,e.Parser=o;class c{static false(){return P.INSTANCE}static true(){return d.INSTANCE}static has(t){return m.create(t)}static equals(t,l){return g.create(t,l)}static notEquals(t,l){return W.create(t,l)}static regex(t,l){return C.create(t,l)}static in(t,l){return y.create(t,l)}static notIn(t,l){return j.create(t,l)}static not(t){return K.create(t)}static and(...t){return M.create(t,null,!0)}static or(...t){return B.create(t,null,!0)}static greater(t,l){return Y.create(t,l)}static greaterEquals(t,l){return J.create(t,l)}static smaller(t,l){return se.create(t,l)}static smallerEquals(t,l){return ae.create(t,l)}static deserialize(t){return t==null?void 0:this.c.parse(t)}}c.c=new o({regexParsingWithErrorRecovery:!1}),e.ContextKeyExpr=c;function E(a){const t=new o({regexParsingWithErrorRecovery:!1});return a.map(l=>(t.parse(l),t.lexingErrors.length>0?t.lexingErrors.map(S=>({errorMessage:S.additionalInfo?(0,T.localize)(9,null,S.additionalInfo):(0,T.localize)(10,null),offset:S.offset,length:S.lexeme.length})):t.parsingErrors.length>0?t.parsingErrors.map(S=>({errorMessage:S.additionalInfo?`${S.message}. ${S.additionalInfo}`:S.message,offset:S.offset,length:S.lexeme.length})):[]))}e.validateWhenClauses=E;function v(a,t){const l=a?a.substituteConstants():void 0,S=t?t.substituteConstants():void 0;return!l&&!S?!0:!l||!S?!1:l.equals(S)}e.expressionsAreEqualWithConstantSubstitution=v;function O(a,t){return a.cmp(t)}class P{constructor(){this.type=0}cmp(t){return this.type-t.type}equals(t){return t.type===this.type}substituteConstants(){return this}evaluate(t){return!1}serialize(){return"false"}keys(){return[]}map(t){return this}negate(){return d.INSTANCE}}P.INSTANCE=new P,e.ContextKeyFalseExpr=P;class d{constructor(){this.type=1}cmp(t){return this.type-t.type}equals(t){return t.type===this.type}substituteConstants(){return this}evaluate(t){return!0}serialize(){return"true"}keys(){return[]}map(t){return this}negate(){return P.INSTANCE}}d.INSTANCE=new d,e.ContextKeyTrueExpr=d;class m{static create(t,l=null){const S=A.get(t);return typeof S=="boolean"?S?d.INSTANCE:P.INSTANCE:new m(t,l)}constructor(t,l){this.key=t,this.c=l,this.type=2}cmp(t){return t.type!==this.type?this.type-t.type:G(this.key,t.key)}equals(t){return t.type===this.type?this.key===t.key:!1}substituteConstants(){const t=A.get(this.key);return typeof t=="boolean"?t?d.INSTANCE:P.INSTANCE:this}evaluate(t){return!!t.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}map(t){return t.mapDefined(this.key)}negate(){return this.c||(this.c=K.create(this.key,this)),this.c}}e.ContextKeyDefinedExpr=m;class g{static create(t,l,S=null){if(typeof l=="boolean")return l?m.create(t,S):K.create(t,S);const L=A.get(t);return typeof L=="boolean"?l===(L?"true":"false")?d.INSTANCE:P.INSTANCE:new g(t,l,S)}constructor(t,l,S){this.c=t,this.d=l,this.f=S,this.type=4}cmp(t){return t.type!==this.type?this.type-t.type:$(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){const t=A.get(this.c);if(typeof t=="boolean"){const l=t?"true":"false";return this.d===l?d.INSTANCE:P.INSTANCE}return this}evaluate(t){return t.getValue(this.c)==this.d}serialize(){return`${this.c} == '${this.d}'`}keys(){return[this.c]}map(t){return t.mapEquals(this.c,this.d)}negate(){return this.f||(this.f=W.create(this.c,this.d,this)),this.f}}e.ContextKeyEqualsExpr=g;class y{static create(t,l){return new y(t,l)}constructor(t,l){this.d=t,this.f=l,this.type=10,this.c=null}cmp(t){return t.type!==this.type?this.type-t.type:$(this.d,this.f,t.d,t.f)}equals(t){return t.type===this.type?this.d===t.d&&this.f===t.f:!1}substituteConstants(){return this}evaluate(t){const l=t.getValue(this.f),S=t.getValue(this.d);return Array.isArray(l)?l.includes(S):typeof S=="string"&&typeof l=="object"&&l!==null?w.call(l,S):!1}serialize(){return`${this.d} in '${this.f}'`}keys(){return[this.d,this.f]}map(t){return t.mapIn(this.d,this.f)}negate(){return this.c||(this.c=j.create(this.d,this.f)),this.c}}e.ContextKeyInExpr=y;class j{static create(t,l){return new j(t,l)}constructor(t,l){this.d=t,this.f=l,this.type=11,this.c=y.create(t,l)}cmp(t){return t.type!==this.type?this.type-t.type:this.c.cmp(t.c)}equals(t){return t.type===this.type?this.c.equals(t.c):!1}substituteConstants(){return this}evaluate(t){return!this.c.evaluate(t)}serialize(){return`${this.d} not in '${this.f}'`}keys(){return this.c.keys()}map(t){return t.mapNotIn(this.d,this.f)}negate(){return this.c}}e.ContextKeyNotInExpr=j;class W{static create(t,l,S=null){if(typeof l=="boolean")return l?K.create(t,S):m.create(t,S);const L=A.get(t);return typeof L=="boolean"?l===(L?"true":"false")?P.INSTANCE:d.INSTANCE:new W(t,l,S)}constructor(t,l,S){this.c=t,this.d=l,this.f=S,this.type=5}cmp(t){return t.type!==this.type?this.type-t.type:$(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){const t=A.get(this.c);if(typeof t=="boolean"){const l=t?"true":"false";return this.d===l?P.INSTANCE:d.INSTANCE}return this}evaluate(t){return t.getValue(this.c)!=this.d}serialize(){return`${this.c} != '${this.d}'`}keys(){return[this.c]}map(t){return t.mapNotEquals(this.c,this.d)}negate(){return this.f||(this.f=g.create(this.c,this.d,this)),this.f}}e.ContextKeyNotEqualsExpr=W;class K{static create(t,l=null){const S=A.get(t);return typeof S=="boolean"?S?P.INSTANCE:d.INSTANCE:new K(t,l)}constructor(t,l){this.c=t,this.d=l,this.type=3}cmp(t){return t.type!==this.type?this.type-t.type:G(this.c,t.c)}equals(t){return t.type===this.type?this.c===t.c:!1}substituteConstants(){const t=A.get(this.c);return typeof t=="boolean"?t?P.INSTANCE:d.INSTANCE:this}evaluate(t){return!t.getValue(this.c)}serialize(){return`!${this.c}`}keys(){return[this.c]}map(t){return t.mapNot(this.c)}negate(){return this.d||(this.d=m.create(this.c,this)),this.d}}e.ContextKeyNotExpr=K;function Z(a,t){if(typeof a=="string"){const l=parseFloat(a);isNaN(l)||(a=l)}return typeof a=="string"||typeof a=="number"?t(a):P.INSTANCE}class Y{static create(t,l,S=null){return Z(l,L=>new Y(t,L,S))}constructor(t,l,S){this.c=t,this.d=l,this.f=S,this.type=12}cmp(t){return t.type!==this.type?this.type-t.type:$(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))>this.d}serialize(){return`${this.c} > ${this.d}`}keys(){return[this.c]}map(t){return t.mapGreater(this.c,this.d)}negate(){return this.f||(this.f=ae.create(this.c,this.d,this)),this.f}}e.ContextKeyGreaterExpr=Y;class J{static create(t,l,S=null){return Z(l,L=>new J(t,L,S))}constructor(t,l,S){this.c=t,this.d=l,this.f=S,this.type=13}cmp(t){return t.type!==this.type?this.type-t.type:$(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))>=this.d}serialize(){return`${this.c} >= ${this.d}`}keys(){return[this.c]}map(t){return t.mapGreaterEquals(this.c,this.d)}negate(){return this.f||(this.f=se.create(this.c,this.d,this)),this.f}}e.ContextKeyGreaterEqualsExpr=J;class se{static create(t,l,S=null){return Z(l,L=>new se(t,L,S))}constructor(t,l,S){this.c=t,this.d=l,this.f=S,this.type=14}cmp(t){return t.type!==this.type?this.type-t.type:$(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))<this.d}serialize(){return`${this.c} < ${this.d}`}keys(){return[this.c]}map(t){return t.mapSmaller(this.c,this.d)}negate(){return this.f||(this.f=J.create(this.c,this.d,this)),this.f}}e.ContextKeySmallerExpr=se;class ae{static create(t,l,S=null){return Z(l,L=>new ae(t,L,S))}constructor(t,l,S){this.c=t,this.d=l,this.f=S,this.type=15}cmp(t){return t.type!==this.type?this.type-t.type:$(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))<=this.d}serialize(){return`${this.c} <= ${this.d}`}keys(){return[this.c]}map(t){return t.mapSmallerEquals(this.c,this.d)}negate(){return this.f||(this.f=Y.create(this.c,this.d,this)),this.f}}e.ContextKeySmallerEqualsExpr=ae;class C{static create(t,l){return new C(t,l)}constructor(t,l){this.d=t,this.f=l,this.type=7,this.c=null}cmp(t){if(t.type!==this.type)return this.type-t.type;if(this.d<t.d)return-1;if(this.d>t.d)return 1;const l=this.f?this.f.source:"",S=t.f?t.f.source:"";return l<S?-1:l>S?1:0}equals(t){if(t.type===this.type){const l=this.f?this.f.source:"",S=t.f?t.f.source:"";return this.d===t.d&&l===S}return!1}substituteConstants(){return this}evaluate(t){const l=t.getValue(this.d);return this.f?this.f.test(l):!1}serialize(){const t=this.f?`/${this.f.source}/${this.f.flags}`:"/invalid/";return`${this.d} =~ ${t}`}keys(){return[this.d]}map(t){return t.mapRegex(this.d,this.f)}negate(){return this.c||(this.c=x.create(this)),this.c}}e.ContextKeyRegexExpr=C;class x{static create(t){return new x(t)}constructor(t){this.c=t,this.type=8}cmp(t){return t.type!==this.type?this.type-t.type:this.c.cmp(t.c)}equals(t){return t.type===this.type?this.c.equals(t.c):!1}substituteConstants(){return this}evaluate(t){return!this.c.evaluate(t)}serialize(){throw new Error("Method not implemented.")}keys(){return this.c.keys()}map(t){return new x(this.c.map(t))}negate(){return this.c}}e.ContextKeyNotRegexExpr=x;function ee(a){let t=null;for(let l=0,S=a.length;l<S;l++){const L=a[l].substituteConstants();if(a[l]!==L&&t===null){t=[];for(let H=0;H<l;H++)t[H]=a[H]}t!==null&&(t[l]=L)}return t===null?a:t}class M{static create(t,l,S){return M.d(t,l,S)}constructor(t,l){this.expr=t,this.c=l,this.type=6}cmp(t){if(t.type!==this.type)return this.type-t.type;if(this.expr.length<t.expr.length)return-1;if(this.expr.length>t.expr.length)return 1;for(let l=0,S=this.expr.length;l<S;l++){const L=O(this.expr[l],t.expr[l]);if(L!==0)return L}return 0}equals(t){if(t.type===this.type){if(this.expr.length!==t.expr.length)return!1;for(let l=0,S=this.expr.length;l<S;l++)if(!this.expr[l].equals(t.expr[l]))return!1;return!0}return!1}substituteConstants(){const t=ee(this.expr);return t===this.expr?this:M.create(t,this.c,!1)}evaluate(t){for(let l=0,S=this.expr.length;l<S;l++)if(!this.expr[l].evaluate(t))return!1;return!0}static d(t,l,S){const L=[];let H=!1;for(const V of t)if(!!V){if(V.type===1){H=!0;continue}if(V.type===0)return P.INSTANCE;if(V.type===6){L.push(...V.expr);continue}L.push(V)}if(L.length===0&&H)return d.INSTANCE;if(L.length!==0){if(L.length===1)return L[0];L.sort(O);for(let V=1;V<L.length;V++)L[V-1].equals(L[V])&&(L.splice(V,1),V--);if(L.length===1)return L[0];for(;L.length>1;){const V=L[L.length-1];if(V.type!==9)break;L.pop();const X=L.pop(),re=L.length===0,oe=B.create(V.expr.map(ue=>M.create([ue,X],null,S)),null,re);oe&&(L.push(oe),L.sort(O))}if(L.length===1)return L[0];if(S){for(let V=0;V<L.length;V++)for(let X=V+1;X<L.length;X++)if(L[V].negate().equals(L[X]))return P.INSTANCE;if(L.length===1)return L[0]}return new M(L,l)}}serialize(){return this.expr.map(t=>t.serialize()).join(" && ")}keys(){const t=[];for(const l of this.expr)t.push(...l.keys());return t}map(t){return new M(this.expr.map(l=>l.map(t)),null)}negate(){if(!this.c){const t=[];for(const l of this.expr)t.push(l.negate());this.c=B.create(t,this,!0)}return this.c}}e.ContextKeyAndExpr=M;class B{static create(t,l,S){return B.d(t,l,S)}constructor(t,l){this.expr=t,this.c=l,this.type=9}cmp(t){if(t.type!==this.type)return this.type-t.type;if(this.expr.length<t.expr.length)return-1;if(this.expr.length>t.expr.length)return 1;for(let l=0,S=this.expr.length;l<S;l++){const L=O(this.expr[l],t.expr[l]);if(L!==0)return L}return 0}equals(t){if(t.type===this.type){if(this.expr.length!==t.expr.length)return!1;for(let l=0,S=this.expr.length;l<S;l++)if(!this.expr[l].equals(t.expr[l]))return!1;return!0}return!1}substituteConstants(){const t=ee(this.expr);return t===this.expr?this:B.create(t,this.c,!1)}evaluate(t){for(let l=0,S=this.expr.length;l<S;l++)if(this.expr[l].evaluate(t))return!0;return!1}static d(t,l,S){let L=[],H=!1;if(t){for(let V=0,X=t.length;V<X;V++){const re=t[V];if(!!re){if(re.type===0){H=!0;continue}if(re.type===1)return d.INSTANCE;if(re.type===9){L=L.concat(re.expr);continue}L.push(re)}}if(L.length===0&&H)return P.INSTANCE;L.sort(O)}if(L.length!==0){if(L.length===1)return L[0];for(let V=1;V<L.length;V++)L[V-1].equals(L[V])&&(L.splice(V,1),V--);if(L.length===1)return L[0];if(S){for(let V=0;V<L.length;V++)for(let X=V+1;X<L.length;X++)if(L[V].negate().equals(L[X]))return d.INSTANCE;if(L.length===1)return L[0]}return new B(L,l)}}serialize(){return this.expr.map(t=>t.serialize()).join(" || ")}keys(){const t=[];for(const l of this.expr)t.push(...l.keys());return t}map(t){return new B(this.expr.map(l=>l.map(t)),null)}negate(){if(!this.c){const t=[];for(const l of this.expr)t.push(l.negate());for(;t.length>1;){const l=t.shift(),S=t.shift(),L=[];for(const H of I(l))for(const V of I(S))L.push(M.create([H,V],null,!1));t.unshift(B.create(L,null,!1))}this.c=B.create(t,this,!0)}return this.c}}e.ContextKeyOrExpr=B;class D extends m{static all(){return D.d.values()}constructor(t,l,S){super(t,null),this.f=l,typeof S=="object"?D.d.push({...S,key:t}):S!==!0&&D.d.push({key:t,description:S,type:l!=null?typeof l:void 0})}bindTo(t){return t.createKey(this.key,this.f)}getValue(t){return t.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(t){return g.create(this.key,t)}notEqualsTo(t){return W.create(this.key,t)}}D.d=[],e.RawContextKey=D,e.IContextKeyService=(0,N.createDecorator)("contextKeyService");function G(a,t){return a<t?-1:a>t?1:0}function $(a,t,l,S){return a<l?-1:a>l?1:t<S?-1:t>S?1:0}function Q(a,t){if(a.type===0||t.type===1)return!0;if(a.type===9)return t.type===9?_(a.expr,t.expr):!1;if(t.type===9){for(const l of t.expr)if(Q(a,l))return!0;return!1}if(a.type===6){if(t.type===6)return _(t.expr,a.expr);for(const l of a.expr)if(Q(l,t))return!0;return!1}return a.equals(t)}e.implies=Q;function _(a,t){let l=0,S=0;for(;l<a.length&&S<t.length;){const L=a[l].cmp(t[S]);if(L<0)return!1;L===0&&l++,S++}return l===a.length}function I(a){return a.type===9?a.expr:[a]}}),define(ne[35],ie([0,1,6,22,41,18,9,5,2,34]),function(te,e,q,U,F,N,T,z,A,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.compressOutputItemStreams=e.isTextStreamMime=e.NotebookWorkingCopyTypeIdentifier=e.CellStatusbarAlignment=e.NotebookSetting=e.notebookDocumentFilterMatch=e.isDocumentExcludePattern=e.NotebookEditorPriority=e.NOTEBOOK_EDITOR_CURSOR_BOUNDARY=e.diff=e.MimeTypeDisplayOrder=e.CellUri=e.CellEditType=e.SelectionStateType=e.NotebookCellsChangeType=e.RendererMessagingSpec=e.NotebookRendererMatch=e.NotebookCellExecutionState=e.NotebookRunState=e.RENDERER_NOT_AVAILABLE=e.RENDERER_EQUIVALENT_EXTENSIONS=e.ACCESSIBLE_NOTEBOOK_DISPLAY_ORDER=e.NOTEBOOK_DISPLAY_ORDER=e.CellKind=e.INTERACTIVE_WINDOW_EDITOR_ID=e.NOTEBOOK_DIFF_EDITOR_ID=e.NOTEBOOK_EDITOR_ID=void 0,e.NOTEBOOK_EDITOR_ID="workbench.editor.notebook",e.NOTEBOOK_DIFF_EDITOR_ID="workbench.editor.notebookTextDiffEditor",e.INTERACTIVE_WINDOW_EDITOR_ID="workbench.editor.interactive";var w;(function(C){C[C.Markup=1]="Markup",C[C.Code=2]="Code"})(w=e.CellKind||(e.CellKind={})),e.NOTEBOOK_DISPLAY_ORDER=["application/json","application/javascript","text/html","image/svg+xml",N.Mimes.latex,N.Mimes.markdown,"image/png","image/jpeg",N.Mimes.text],e.ACCESSIBLE_NOTEBOOK_DISPLAY_ORDER=[N.Mimes.latex,N.Mimes.markdown,"application/json",N.Mimes.text,"text/html","image/svg+xml","image/png","image/jpeg"],e.RENDERER_EQUIVALENT_EXTENSIONS=new Map([["ms-toolsai.jupyter",new Set(["jupyter-notebook","interactive"])],["ms-toolsai.jupyter-renderers",new Set(["jupyter-notebook","interactive"])]]),e.RENDERER_NOT_AVAILABLE="_notAvailable";var k;(function(C){C[C.Running=1]="Running",C[C.Idle=2]="Idle"})(k=e.NotebookRunState||(e.NotebookRunState={}));var p;(function(C){C[C.Unconfirmed=1]="Unconfirmed",C[C.Pending=2]="Pending",C[C.Executing=3]="Executing"})(p=e.NotebookCellExecutionState||(e.NotebookCellExecutionState={}));var R;(function(C){C[C.WithHardKernelDependency=0]="WithHardKernelDependency",C[C.WithOptionalKernelDependency=1]="WithOptionalKernelDependency",C[C.Pure=2]="Pure",C[C.Never=3]="Never"})(R=e.NotebookRendererMatch||(e.NotebookRendererMatch={}));var b;(function(C){C.Always="always",C.Never="never",C.Optional="optional"})(b=e.RendererMessagingSpec||(e.RendererMessagingSpec={}));var u;(function(C){C[C.ModelChange=1]="ModelChange",C[C.Move=2]="Move",C[C.ChangeCellLanguage=5]="ChangeCellLanguage",C[C.Initialize=6]="Initialize",C[C.ChangeCellMetadata=7]="ChangeCellMetadata",C[C.Output=8]="Output",C[C.OutputItem=9]="OutputItem",C[C.ChangeCellContent=10]="ChangeCellContent",C[C.ChangeDocumentMetadata=11]="ChangeDocumentMetadata",C[C.ChangeCellInternalMetadata=12]="ChangeCellInternalMetadata",C[C.ChangeCellMime=13]="ChangeCellMime",C[C.Unknown=100]="Unknown"})(u=e.NotebookCellsChangeType||(e.NotebookCellsChangeType={}));var s;(function(C){C[C.Handle=0]="Handle",C[C.Index=1]="Index"})(s=e.SelectionStateType||(e.SelectionStateType={}));var h;(function(C){C[C.Replace=1]="Replace",C[C.Output=2]="Output",C[C.Metadata=3]="Metadata",C[C.CellLanguage=4]="CellLanguage",C[C.DocumentMetadata=5]="DocumentMetadata",C[C.Move=6]="Move",C[C.OutputItems=7]="OutputItems",C[C.PartialMetadata=8]="PartialMetadata",C[C.PartialInternalMetadata=9]="PartialInternalMetadata"})(h=e.CellEditType||(e.CellEditType={}));var n;(function(C){C.scheme=T.Schemas.vscodeNotebookCell;const x=["W","X","Y","Z","a","b","c","d","e","f"],ee=new RegExp(`^[${x.join("")}]+`),M=7;function B(I,a){const t=a.toString(M),S=`${t.length<x.length?x[t.length-1]:"z"}${t}s${(0,q.encodeBase64)(q.VSBuffer.fromString(I.scheme),!0,!0)}`;return I.with({scheme:C.scheme,fragment:S})}C.generate=B;function D(I){if(I.scheme!==C.scheme)return;const a=I.fragment.indexOf("s");if(a<0)return;const t=parseInt(I.fragment.substring(0,a).replace(ee,""),M),l=(0,q.decodeBase64)(I.fragment.substring(a+1)).toString();if(!isNaN(t))return{handle:t,notebook:I.with({scheme:l,fragment:null})}}C.parse=D;function G(I,a){return I.with({scheme:T.Schemas.vscodeNotebookCellOutput,fragment:`op${a??""},${I.scheme!==T.Schemas.file?I.scheme:""}`})}C.generateCellOutputUri=G;function $(I){if(I.scheme!==T.Schemas.vscodeNotebookCellOutput)return;const a=/^op([0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})?\,(.*)$/i.exec(I.fragment);if(!a)return;const t=a[1]&&a[1]!==""?a[1]:void 0,l=a[2];return{outputId:t,notebook:I.with({scheme:l||T.Schemas.file,fragment:null})}}C.parseCellOutputUri=$;function Q(I,a,t){return C.generate(I,a).with({scheme:t})}C.generateCellPropertyUri=Q;function _(I,a){if(I.scheme===a)return C.parse(I.with({scheme:C.scheme}))}C.parseCellPropertyUri=_})(n=e.CellUri||(e.CellUri={}));const r=C=>A.isWindows?C.replace(/\//g,"\\"):C;class i{constructor(x=[],ee=e.NOTEBOOK_DISPLAY_ORDER){this.e=ee,this.d=[...new Set(x)].map(M=>({pattern:M,matches:U.parse(r(M))}))}sort(x){const ee=new Map(F.Iterable.map(x,B=>[B,r(B)]));let M=[];for(const{matches:B}of this.d)for(const[D,G]of ee)if(B(G)){M.push(D),ee.delete(D);break}return ee.size&&(M=M.concat([...ee.keys()].sort((B,D)=>this.e.indexOf(B)-this.e.indexOf(D)))),M}prioritize(x,ee){const M=this.f(x);if(M===-1){this.d.unshift({pattern:x,matches:U.parse(r(x))});return}const B=new Set(ee.map(G=>this.f(G,M)));B.delete(-1);const D=Array.from(B).sort();this.d.splice(M+1,0,...D.map(G=>this.d[G]));for(let G=D.length-1;G>=0;G--)this.d.splice(D[G],1)}toArray(){return this.d.map(x=>x.pattern)}f(x,ee=this.d.length){const M=r(x);for(let B=0;B<ee;B++)if(this.d[B].matches(M))return B;return-1}}e.MimeTypeDisplayOrder=i;function o(C,x,ee,M=(B,D)=>B===D){const B=[];function D(Q,_,I){if(_===0&&I.length===0)return;const a=B[B.length-1];a&&a.start+a.deleteCount===Q?(a.deleteCount+=_,a.toInsert.push(...I)):B.push({start:Q,deleteCount:_,toInsert:I})}let G=0,$=0;for(;;){if(G===C.length){D(G,0,x.slice($));break}if($===x.length){D(G,C.length-G,[]);break}const Q=C[G],_=x[$];if(M(Q,_)){G+=1,$+=1;continue}ee(_)?(D(G,1,[]),G+=1):(D(G,0,[_]),$+=1)}return B}e.diff=o,e.NOTEBOOK_EDITOR_CURSOR_BOUNDARY=new f.RawContextKey("notebookEditorCursorAtBoundary","none");var c;(function(C){C.default="default",C.option="option"})(c=e.NotebookEditorPriority||(e.NotebookEditorPriority={}));function E(C){const x=C;return!!((typeof x.include=="string"||U.isRelativePattern(x.include))&&(typeof x.exclude=="string"||U.isRelativePattern(x.exclude)))}e.isDocumentExcludePattern=E;function v(C,x,ee){if(Array.isArray(C.viewType)&&C.viewType.indexOf(x)>=0||C.viewType===x)return!0;if(C.filenamePattern){const M=E(C.filenamePattern)?C.filenamePattern.include:C.filenamePattern,B=E(C.filenamePattern)?C.filenamePattern.exclude:void 0;if(U.match(M,(0,z.basename)(ee.fsPath).toLowerCase()))return!(B&&U.match(B,(0,z.basename)(ee.fsPath).toLowerCase()))}return!1}e.notebookDocumentFilterMatch=v,e.NotebookSetting={displayOrder:"notebook.displayOrder",cellToolbarLocation:"notebook.cellToolbarLocation",cellToolbarVisibility:"notebook.cellToolbarVisibility",showCellStatusBar:"notebook.showCellStatusBar",textDiffEditorPreview:"notebook.diff.enablePreview",experimentalInsertToolbarAlignment:"notebook.experimental.insertToolbarAlignment",compactView:"notebook.compactView",focusIndicator:"notebook.cellFocusIndicator",insertToolbarLocation:"notebook.insertToolbarLocation",globalToolbar:"notebook.globalToolbar",undoRedoPerCell:"notebook.undoRedoPerCell",consolidatedOutputButton:"notebook.consolidatedOutputButton",showFoldingControls:"notebook.showFoldingControls",dragAndDropEnabled:"notebook.dragAndDropEnabled",cellEditorOptionsCustomizations:"notebook.editorOptionsCustomizations",consolidatedRunButton:"notebook.consolidatedRunButton",openGettingStarted:"notebook.experimental.openGettingStarted",globalToolbarShowLabel:"notebook.globalToolbarShowLabel",markupFontSize:"notebook.markup.fontSize",interactiveWindowCollapseCodeCells:"interactiveWindow.collapseCellInputCode",outputScrollingDeprecated:"notebook.experimental.outputScrolling",outputScrolling:"notebook.output.scrolling",textOutputLineLimit:"notebook.output.textLineLimit",formatOnSave:"notebook.formatOnSave.enabled",outputWordWrap:"notebook.output.wordWrap",outputLineHeightDeprecated:"notebook.outputLineHeight",outputLineHeight:"notebook.output.lineHeight",outputFontSizeDeprecated:"notebook.outputFontSize",outputFontSize:"notebook.output.fontSize",outputFontFamilyDeprecated:"notebook.outputFontFamily",outputFontFamily:"notebook.output.fontFamily",logging:"notebook.logging"};var O;(function(C){C[C.Left=1]="Left",C[C.Right=2]="Right"})(O=e.CellStatusbarAlignment||(e.CellStatusbarAlignment={}));class P{static create(x){return`${P.d}${x}`}static parse(x){if(x.startsWith(P.d))return x.substring(P.d.length)}}P.d="notebook/",e.NotebookWorkingCopyTypeIdentifier=P;function d(C){return["application/vnd.code.notebook.stdout","application/vnd.code.notebook.stderr"].includes(C)}e.isTextStreamMime=d;const m=new TextDecoder;function g(C){const x=[];let ee=!1;for(const M of C)(x.length===0||ee)&&(x.push(M),ee=!0);return K(x),ae(q.VSBuffer.concat(x.map(M=>q.VSBuffer.wrap(M))))}e.compressOutputItemStreams=g;const y=`${String.fromCharCode(27)}[A`,j=y.split("").map(C=>C.charCodeAt(0)),W=10;function K(C){C.forEach((x,ee)=>{if(ee===0||x.length<y.length)return;const M=C[ee-1],B=x.subarray(0,y.length);if(B[0]===j[0]&&B[1]===j[1]&&B[2]===j[2]){const D=M.lastIndexOf(W);if(D===-1)return;C[ee-1]=M.subarray(0,D),C[ee]=x.subarray(y.length)}})}function Z(C){let x=C;do C=x,x=C.replace(/[^\n]\x08/gm,"");while(x.length<C.length);return C}function Y(C){for(C=C.replace(/\r+\n/gm,`
`);C.search(/\r[^$]/g)>-1;){const x=C.match(/^(.*)\r+/m)[1];let ee=C.match(/\r+(.*)$/m)[1];ee=ee+x.slice(ee.length,x.length),C=C.replace(/\r+.*$/m,"\r").replace(/^.*\r/m,ee)}return C}const J="\b".charCodeAt(0),se="\r".charCodeAt(0);function ae(C){return!C.buffer.includes(J)&&!C.buffer.includes(se)?C:q.VSBuffer.fromString(Y(Z(m.decode(C.buffer))))}}),define(ne[42],ie([0,1,43,44,10,27,35,12]),function(te,e,q,U,F,N,T,z){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.create=e.NotebookEditorSimpleWorker=void 0;function A(b){let u=(0,U.numberHash)(104579,0);for(let s=0;s<b.buffer.length;s++)u=(0,U.doHash)(b.buffer[s],u);return u}class f{get textBuffer(){if(this.a)return this.a;const u=new N.PieceTreeTextBufferBuilder;u.acceptChunk(Array.isArray(this.d)?this.d.join(`
`):this.d);const s=u.finish(!0);return this.a=s.create(1).textBuffer,this.a}primaryKey(){return this.b===void 0&&(this.b=(0,U.hash)(this.getValue())),this.b}constructor(u,s,h,n,r,i,o){this.handle=u,this.d=s,this.language=h,this.cellKind=n,this.outputs=r,this.metadata=i,this.internalMetadata=o,this.b=null,this.c=null}getFullModelRange(){const u=this.textBuffer.getLineCount();return new z.Range(1,1,u,this.textBuffer.getLineLength(u)+1)}getValue(){const u=this.getFullModelRange();return this.textBuffer.getValueInRange(u,1)}getComparisonValue(){return this.b!==null?this.b:(this.c=(0,U.hash)([(0,U.hash)(this.language),(0,U.hash)(this.getValue()),this.metadata,this.internalMetadata,this.outputs.map(u=>({outputs:u.outputs.map(s=>({mime:s.mime,data:A(s.data)})),metadata:u.metadata}))]),this.c)}getHashValue(){return this.c!==null?this.c:(this.c=(0,U.hash)([(0,U.hash)(this.getValue()),this.language,this.metadata,this.internalMetadata]),this.c)}}class w{constructor(u,s,h){this.uri=u,this.cells=s,this.metadata=h}acceptModelChanged(u){u.rawEvents.forEach(s=>{if(s.kind===T.NotebookCellsChangeType.ModelChange)this._spliceNotebookCells(s.changes);else if(s.kind===T.NotebookCellsChangeType.Move){const h=this.cells.splice(s.index,1);this.cells.splice(s.newIdx,0,...h)}else if(s.kind===T.NotebookCellsChangeType.Output){const h=this.cells[s.index];h.outputs=s.outputs}else if(s.kind===T.NotebookCellsChangeType.ChangeCellLanguage){this.a(s.index);const h=this.cells[s.index];h.language=s.language}else if(s.kind===T.NotebookCellsChangeType.ChangeCellMetadata){this.a(s.index);const h=this.cells[s.index];h.metadata=s.metadata}else if(s.kind===T.NotebookCellsChangeType.ChangeCellInternalMetadata){this.a(s.index);const h=this.cells[s.index];h.internalMetadata=s.internalMetadata}})}a(u){if(u<0||u>=this.cells.length)throw new Error(`Illegal index ${u}. Cells length: ${this.cells.length}`)}_spliceNotebookCells(u){u.reverse().forEach(s=>{const n=s[2].map(r=>new f(r.handle,r.source,r.language,r.cellKind,r.outputs,r.metadata));this.cells.splice(s[0],s[1],...n)})}}class k{constructor(u){this.textModel=u}getElements(){const u=new Int32Array(this.textModel.cells.length);for(let s=0;s<this.textModel.cells.length;s++)u[s]=this.textModel.cells[s].getComparisonValue();return u}getCellHash(u){const s=Array.isArray(u.source)?u.source.join(`
`):u.source;return(0,U.hash)([(0,U.hash)(s),u.metadata])}}class p{constructor(){this.a=Object.create(null)}dispose(){}acceptNewModel(u,s){this.a[u]=new w(F.URI.parse(u),s.cells.map(h=>new f(h.handle,h.source,h.language,h.cellKind,h.outputs,h.metadata)),s.metadata)}acceptModelChanged(u,s){this.a[u]?.acceptModelChanged(s)}acceptRemovedModel(u){!this.a[u]||delete this.a[u]}computeDiff(u,s){const h=this.b(u),n=this.b(s);return{cellsDiff:new q.LcsDiff(new k(h),new k(n)).ComputeDiff(!1)}}b(u){return this.a[u]}}e.NotebookEditorSimpleWorker=p;function R(b){return new p}e.create=R})}).call(this);

//# sourceMappingURL=https://ticino.blob.core.windows.net/sourcemaps/e344f1f539a80912a0e9357cec841f36ce97a4e2/core/vs/workbench/contrib/notebook/common/services/notebookSimpleWorker.js.map
