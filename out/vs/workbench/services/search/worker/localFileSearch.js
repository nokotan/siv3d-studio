/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/(function(){var ne=["require","exports","vs/base/common/platform","vs/base/common/path","vs/base/common/strings","vs/base/common/extpath","vs/base/common/uri","vs/base/common/resources","vs/base/common/async","vs/base/common/glob","vs/base/common/map","vs/base/common/network","vs/base/common/cancellation","vs/workbench/services/search/common/getFileResults","vs/workbench/services/search/common/ignoreFile","vs/base/common/types","vs/base/common/errors","vs/base/common/event","vs/base/common/lifecycle","vs/base/common/arrays","vs/editor/common/core/range","vs/workbench/services/search/worker/localFileSearch"],ie=function(_){for(var e=[],I=0,M=_.length;I<M;I++)e[I]=ne[_[I]];return e};define(ne[10],ie([0,1]),function(_,e){"use strict";var I,M,k;Object.defineProperty(e,"__esModule",{value:!0}),e.LRUCache=e.LinkedMap=e.Touch=e.ResourceSet=e.ResourceMap=e.setToString=e.mapToString=e.getOrSet=void 0;function A(s,n,r){let h=s.get(n);return h===void 0&&(h=r,s.set(n,h)),h}e.getOrSet=A;function y(s){const n=[];return s.forEach((r,h)=>{n.push(`${h} => ${r}`)}),`Map(${s.size}) {${n.join(", ")}}`}e.mapToString=y;function D(s){const n=[];return s.forEach(r=>{n.push(r)}),`Set(${s.size}) {${n.join(", ")}}`}e.setToString=D;class m{constructor(n,r){this.uri=n,this.value=r}}class d{constructor(n,r){this[I]="ResourceMap",n instanceof d?(this.b=new Map(n.b),this.c=r??d.a):(this.b=new Map,this.c=n??d.a)}set(n,r){return this.b.set(this.c(n),new m(n,r)),this}get(n){return this.b.get(this.c(n))?.value}has(n){return this.b.has(this.c(n))}get size(){return this.b.size}clear(){this.b.clear()}delete(n){return this.b.delete(this.c(n))}forEach(n,r){typeof r<"u"&&(n=n.bind(r));for(const[h,b]of this.b)n(b.value,b.uri,this)}*values(){for(const n of this.b.values())yield n.value}*keys(){for(const n of this.b.values())yield n.uri}*entries(){for(const n of this.b.values())yield[n.uri,n.value]}*[(I=Symbol.toStringTag,Symbol.iterator)](){for(const[,n]of this.b)yield[n.uri,n.value]}}e.ResourceMap=d,d.a=s=>s.toString();class L{constructor(n,r){this[M]="ResourceSet",!n||typeof n=="function"?this.a=new d(n):(this.a=new d(r),n.forEach(this.add,this))}get size(){return this.a.size}add(n){return this.a.set(n,n),this}clear(){this.a.clear()}delete(n){return this.a.delete(n)}forEach(n,r){this.a.forEach((h,b)=>n.call(r,b,b,this))}has(n){return this.a.has(n)}entries(){return this.a.entries()}keys(){return this.a.keys()}values(){return this.a.keys()}[(M=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}}e.ResourceSet=L;var q;(function(s){s[s.None=0]="None",s[s.AsOld=1]="AsOld",s[s.AsNew=2]="AsNew"})(q=e.Touch||(e.Touch={}));class Q{constructor(){this[k]="LinkedMap",this.a=new Map,this.b=void 0,this.c=void 0,this.d=0,this.e=0}clear(){this.a.clear(),this.b=void 0,this.c=void 0,this.d=0,this.e++}isEmpty(){return!this.b&&!this.c}get size(){return this.d}get first(){return this.b?.value}get last(){return this.c?.value}has(n){return this.a.has(n)}get(n,r=0){const h=this.a.get(n);if(!!h)return r!==0&&this.j(h,r),h.value}set(n,r,h=0){let b=this.a.get(n);if(b)b.value=r,h!==0&&this.j(b,h);else{switch(b={key:n,value:r,next:void 0,previous:void 0},h){case 0:this.h(b);break;case 1:this.g(b);break;case 2:this.h(b);break;default:this.h(b);break}this.a.set(n,b),this.d++}return this}delete(n){return!!this.remove(n)}remove(n){const r=this.a.get(n);if(!!r)return this.a.delete(n),this.i(r),this.d--,r.value}shift(){if(!this.b&&!this.c)return;if(!this.b||!this.c)throw new Error("Invalid list");const n=this.b;return this.a.delete(n.key),this.i(n),this.d--,n.value}forEach(n,r){const h=this.e;let b=this.b;for(;b;){if(r?n.bind(r)(b.value,b.key,this):n(b.value,b.key,this),this.e!==h)throw new Error("LinkedMap got modified during iteration.");b=b.next}}keys(){const n=this,r=this.e;let h=this.b;const b={[Symbol.iterator](){return b},next(){if(n.e!==r)throw new Error("LinkedMap got modified during iteration.");if(h){const T={value:h.key,done:!1};return h=h.next,T}else return{value:void 0,done:!0}}};return b}values(){const n=this,r=this.e;let h=this.b;const b={[Symbol.iterator](){return b},next(){if(n.e!==r)throw new Error("LinkedMap got modified during iteration.");if(h){const T={value:h.value,done:!1};return h=h.next,T}else return{value:void 0,done:!0}}};return b}entries(){const n=this,r=this.e;let h=this.b;const b={[Symbol.iterator](){return b},next(){if(n.e!==r)throw new Error("LinkedMap got modified during iteration.");if(h){const T={value:[h.key,h.value],done:!1};return h=h.next,T}else return{value:void 0,done:!0}}};return b}[(k=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}f(n){if(n>=this.size)return;if(n===0){this.clear();return}let r=this.b,h=this.size;for(;r&&h>n;)this.a.delete(r.key),r=r.next,h--;this.b=r,this.d=h,r&&(r.previous=void 0),this.e++}g(n){if(!this.b&&!this.c)this.c=n;else if(this.b)n.next=this.b,this.b.previous=n;else throw new Error("Invalid list");this.b=n,this.e++}h(n){if(!this.b&&!this.c)this.b=n;else if(this.c)n.previous=this.c,this.c.next=n;else throw new Error("Invalid list");this.c=n,this.e++}i(n){if(n===this.b&&n===this.c)this.b=void 0,this.c=void 0;else if(n===this.b){if(!n.next)throw new Error("Invalid list");n.next.previous=void 0,this.b=n.next}else if(n===this.c){if(!n.previous)throw new Error("Invalid list");n.previous.next=void 0,this.c=n.previous}else{const r=n.next,h=n.previous;if(!r||!h)throw new Error("Invalid list");r.previous=h,h.next=r}n.next=void 0,n.previous=void 0,this.e++}j(n,r){if(!this.b||!this.c)throw new Error("Invalid list");if(!(r!==1&&r!==2)){if(r===1){if(n===this.b)return;const h=n.next,b=n.previous;n===this.c?(b.next=void 0,this.c=b):(h.previous=b,b.next=h),n.previous=void 0,n.next=this.b,this.b.previous=n,this.b=n,this.e++}else if(r===2){if(n===this.c)return;const h=n.next,b=n.previous;n===this.b?(h.previous=void 0,this.b=h):(h.previous=b,b.next=h),n.next=void 0,n.previous=this.c,this.c.next=n,this.c=n,this.e++}}}toJSON(){const n=[];return this.forEach((r,h)=>{n.push([h,r])}),n}fromJSON(n){this.clear();for(const[r,h]of n)this.set(r,h)}}e.LinkedMap=Q;class C extends Q{constructor(n,r=1){super(),this.k=n,this.l=Math.min(Math.max(0,r),1)}get limit(){return this.k}set limit(n){this.k=n,this.m()}get ratio(){return this.l}set ratio(n){this.l=Math.min(Math.max(0,n),1),this.m()}get(n,r=2){return super.get(n,r)}peek(n){return super.get(n,0)}set(n,r){return super.set(n,r,2),this.m(),this}m(){this.size>this.k&&this.f(Math.round(this.k*this.l))}}e.LRUCache=C}),define(ne[5],ie([0,1,3,2,4,15]),function(_,e,I,M,k,A){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.randomPath=e.parseLineAndColumnAware=e.indexOfPath=e.getDriveLetter=e.hasDriveLetter=e.isRootOrDriveLetter=e.sanitizeFilePath=e.isWindowsDriveLetter=e.isEqualOrParent=e.isEqual=e.isValidBasename=e.isUNC=e.getRoot=e.toPosixPath=e.toSlashes=e.isPathSeparator=void 0;function y(a){return a===47||a===92}e.isPathSeparator=y;function D(a){return a.replace(/[\\/]/g,I.posix.sep)}e.toSlashes=D;function m(a){return a.indexOf("/")===-1&&(a=D(a)),/^[a-zA-Z]:(\/|$)/.test(a)&&(a="/"+a),a}e.toPosixPath=m;function d(a,g=I.posix.sep){if(!a)return"";const R=a.length,B=a.charCodeAt(0);if(y(B)){if(y(a.charCodeAt(1))&&!y(a.charCodeAt(2))){let W=3;const V=W;for(;W<R&&!y(a.charCodeAt(W));W++);if(V!==W&&!y(a.charCodeAt(W+1))){for(W+=1;W<R;W++)if(y(a.charCodeAt(W)))return a.slice(0,W+1).replace(/[\\/]/g,g)}}return g}else if(h(B)&&a.charCodeAt(1)===58)return y(a.charCodeAt(2))?a.slice(0,2)+g:a.slice(0,2);let p=a.indexOf("://");if(p!==-1){for(p+=3;p<R;p++)if(y(a.charCodeAt(p)))return a.slice(0,p+1)}return""}e.getRoot=d;function L(a){if(!M.isWindows||!a||a.length<5)return!1;let g=a.charCodeAt(0);if(g!==92||(g=a.charCodeAt(1),g!==92))return!1;let R=2;const B=R;for(;R<a.length&&(g=a.charCodeAt(R),g!==92);R++);return!(B===R||(g=a.charCodeAt(R+1),isNaN(g)||g===92))}e.isUNC=L;const q=/[\\/:\*\?"<>\|]/g,Q=/[\\/]/g,C=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function s(a,g=M.isWindows){const R=g?q:Q;return!(!a||a.length===0||/^\s+$/.test(a)||(R.lastIndex=0,R.test(a))||g&&C.test(a)||a==="."||a===".."||g&&a[a.length-1]==="."||g&&a.length!==a.trim().length||a.length>255)}e.isValidBasename=s;function n(a,g,R){const B=a===g;return!R||B?B:!a||!g?!1:(0,k.equalsIgnoreCase)(a,g)}e.isEqual=n;function r(a,g,R,B=I.sep){if(a===g)return!0;if(!a||!g||g.length>a.length)return!1;if(R){if(!(0,k.startsWithIgnoreCase)(a,g))return!1;if(g.length===a.length)return!0;let W=g.length;return g.charAt(g.length-1)===B&&W--,a.charAt(W)===B}return g.charAt(g.length-1)!==B&&(g+=B),a.indexOf(g)===0}e.isEqualOrParent=r;function h(a){return a>=65&&a<=90||a>=97&&a<=122}e.isWindowsDriveLetter=h;function b(a,g){return M.isWindows&&a.endsWith(":")&&(a+=I.sep),(0,I.isAbsolute)(a)||(a=(0,I.join)(g,a)),a=(0,I.normalize)(a),M.isWindows?(a=(0,k.rtrim)(a,I.sep),a.endsWith(":")&&(a+=I.sep)):(a=(0,k.rtrim)(a,I.sep),a||(a=I.sep)),a}e.sanitizeFilePath=b;function T(a){const g=(0,I.normalize)(a);return M.isWindows?a.length>3?!1:N(g)&&(a.length===2||g.charCodeAt(2)===92):g===I.posix.sep}e.isRootOrDriveLetter=T;function N(a,g=M.isWindows){return g?h(a.charCodeAt(0))&&a.charCodeAt(1)===58:!1}e.hasDriveLetter=N;function Z(a){return N(a)?a[0]:void 0}e.getDriveLetter=Z;function S(a,g,R){return g.length>a.length?-1:a===g?0:(R&&(a=a.toLowerCase(),g=g.toLowerCase()),a.indexOf(g))}e.indexOfPath=S;function F(a){const g=a.split(":");let R,B,p;for(const W of g){const V=Number(W);(0,A.isNumber)(V)?B===void 0?B=V:p===void 0&&(p=V):R=R?[R,W].join(":"):W}if(!R)throw new Error("Format for `--goto` should be: `FILE:LINE(:COLUMN)`");return{path:R,line:B!==void 0?B:void 0,column:p!==void 0?p:B!==void 0?1:void 0}}e.parseLineAndColumnAware=F;const O="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function G(a,g,R=8){let B="";for(let W=0;W<R;W++)B+=O.charAt(Math.floor(Math.random()*O.length));let p;return g?p=`${g}-${B}`:p=B,a?(0,I.join)(a,p):p}e.randomPath=G}),define(ne[11],ie([0,1,2,6]),function(_,e,I,M){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.COI=e.FileAccess=e.nodeModulesAsarUnpackedPath=e.nodeModulesAsarPath=e.nodeModulesPath=e.builtinExtensionsPath=e.RemoteAuthorities=e.connectionTokenQueryName=e.connectionTokenCookieName=e.Schemas=void 0;var k;(function(m){m.inMemory="inmemory",m.vscode="vscode",m.internal="private",m.walkThrough="walkThrough",m.walkThroughSnippet="walkThroughSnippet",m.http="http",m.https="https",m.file="file",m.mailto="mailto",m.untitled="untitled",m.data="data",m.command="command",m.vscodeRemote="vscode-remote",m.vscodeRemoteResource="vscode-remote-resource",m.vscodeUserData="vscode-userdata",m.vscodeCustomEditor="vscode-custom-editor",m.vscodeNotebook="vscode-notebook",m.vscodeNotebookCell="vscode-notebook-cell",m.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",m.vscodeNotebookCellOutput="vscode-notebook-cell-output",m.vscodeInteractive="vscode-interactive",m.vscodeInteractiveInput="vscode-interactive-input",m.vscodeSettings="vscode-settings",m.vscodeWorkspaceTrust="vscode-workspace-trust",m.vscodeTerminal="vscode-terminal",m.webviewPanel="webview-panel",m.vscodeWebview="vscode-webview",m.extension="extension",m.vscodeFileResource="vscode-file",m.tmp="tmp",m.vsls="vsls",m.vscodeSourceControl="vscode-scm"})(k=e.Schemas||(e.Schemas={})),e.connectionTokenCookieName="vscode-tkn",e.connectionTokenQueryName="tkn";class A{constructor(){this.a=Object.create(null),this.b=Object.create(null),this.c=Object.create(null),this.d="http",this.e=null,this.f=`/${k.vscodeRemoteResource}`}setPreferredWebSchema(d){this.d=d}setDelegate(d){this.e=d}setServerRootPath(d){this.f=`${d}/${k.vscodeRemoteResource}`}set(d,L,q){this.a[d]=L,this.b[d]=q}setConnectionToken(d,L){this.c[d]=L}getPreferredWebSchema(){return this.d}rewrite(d){if(this.e)return this.e(d);const L=d.authority;let q=this.a[L];q&&q.indexOf(":")!==-1&&q.indexOf("[")===-1&&(q=`[${q}]`);const Q=this.b[L],C=this.c[L];let s=`path=${encodeURIComponent(d.path)}`;return typeof C=="string"&&(s+=`&${e.connectionTokenQueryName}=${encodeURIComponent(C)}`),M.URI.from({scheme:I.isWeb?this.d:k.vscodeRemoteResource,authority:`${q}:${Q}`,path:this.f,query:s})}}e.RemoteAuthorities=new A,e.builtinExtensionsPath="vs/../../extensions",e.nodeModulesPath="vs/../../node_modules",e.nodeModulesAsarPath="vs/../../node_modules.asar",e.nodeModulesAsarUnpackedPath="vs/../../node_modules.asar.unpacked";class y{asBrowserUri(d){const L=this.b(d,_);return this.uriToBrowserUri(L)}uriToBrowserUri(d){return d.scheme===k.vscodeRemote?e.RemoteAuthorities.rewrite(d):d.scheme===k.file&&(I.isNative||I.isWebWorker&&I.globals.origin===`${k.vscodeFileResource}://${y.a}`)?d.with({scheme:k.vscodeFileResource,authority:d.authority||y.a,query:null,fragment:null}):d}asFileUri(d){const L=this.b(d,_);return this.uriToFileUri(L)}uriToFileUri(d){return d.scheme===k.vscodeFileResource?d.with({scheme:k.file,authority:d.authority!==y.a?d.authority:null,query:null,fragment:null}):d}b(d,L){return M.URI.isUri(d)?d:M.URI.parse(L.toUrl(d))}}y.a="vscode-app",e.FileAccess=new y;var D;(function(m){const d=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);m.CoopAndCoep=Object.freeze(d.get("3"));const L="vscode-coi";function q(C){let s;typeof C=="string"?s=new URL(C).searchParams:C instanceof URL?s=C.searchParams:M.URI.isUri(C)&&(s=new URL(C.toString(!0)).searchParams);const n=s?.get(L);if(!!n)return d.get(n)}m.getHeadersFromQuery=q;function Q(C,s,n){if(!globalThis.crossOriginIsolated)return;const r=s&&n?"3":n?"2":"1";C instanceof URLSearchParams?C.set(L,r):C[L]=r}m.addSearchParam=Q})(D=e.COI||(e.COI={}))}),define(ne[7],ie([0,1,5,11,3,2,4,6]),function(_,e,I,M,k,A,y,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toLocalResource=e.DataUri=e.distinctParents=e.addTrailingPathSeparator=e.removeTrailingPathSeparator=e.hasTrailingPathSeparator=e.isEqualAuthority=e.isAbsolutePath=e.resolvePath=e.relativePath=e.normalizePath=e.joinPath=e.dirname=e.extname=e.basename=e.basenameOrAuthority=e.getComparisonKey=e.isEqualOrParent=e.isEqual=e.extUriIgnorePathCase=e.extUriBiasedIgnorePathCase=e.extUri=e.ExtUri=e.originalFSPath=void 0;function m(C){return(0,D.uriToFsPath)(C,!0)}e.originalFSPath=m;class d{constructor(s){this.a=s}compare(s,n,r=!1){return s===n?0:(0,y.compare)(this.getComparisonKey(s,r),this.getComparisonKey(n,r))}isEqual(s,n,r=!1){return s===n?!0:!s||!n?!1:this.getComparisonKey(s,r)===this.getComparisonKey(n,r)}getComparisonKey(s,n=!1){return s.with({path:this.a(s)?s.path.toLowerCase():void 0,fragment:n?null:void 0}).toString()}ignorePathCasing(s){return this.a(s)}isEqualOrParent(s,n,r=!1){if(s.scheme===n.scheme){if(s.scheme===M.Schemas.file)return I.isEqualOrParent(m(s),m(n),this.a(s))&&s.query===n.query&&(r||s.fragment===n.fragment);if((0,e.isEqualAuthority)(s.authority,n.authority))return I.isEqualOrParent(s.path,n.path,this.a(s),"/")&&s.query===n.query&&(r||s.fragment===n.fragment)}return!1}joinPath(s,...n){return D.URI.joinPath(s,...n)}basenameOrAuthority(s){return(0,e.basename)(s)||s.authority}basename(s){return k.posix.basename(s.path)}extname(s){return k.posix.extname(s.path)}dirname(s){if(s.path.length===0)return s;let n;return s.scheme===M.Schemas.file?n=D.URI.file(k.dirname(m(s))).path:(n=k.posix.dirname(s.path),s.authority&&n.length&&n.charCodeAt(0)!==47&&(console.error(`dirname("${s.toString})) resulted in a relative path`),n="/")),s.with({path:n})}normalizePath(s){if(!s.path.length)return s;let n;return s.scheme===M.Schemas.file?n=D.URI.file(k.normalize(m(s))).path:n=k.posix.normalize(s.path),s.with({path:n})}relativePath(s,n){if(s.scheme!==n.scheme||!(0,e.isEqualAuthority)(s.authority,n.authority))return;if(s.scheme===M.Schemas.file){const b=k.relative(m(s),m(n));return A.isWindows?I.toSlashes(b):b}let r=s.path||"/";const h=n.path||"/";if(this.a(s)){let b=0;for(const T=Math.min(r.length,h.length);b<T&&!(r.charCodeAt(b)!==h.charCodeAt(b)&&r.charAt(b).toLowerCase()!==h.charAt(b).toLowerCase());b++);r=h.substr(0,b)+r.substr(b)}return k.posix.relative(r,h)}resolvePath(s,n){if(s.scheme===M.Schemas.file){const r=D.URI.file(k.resolve(m(s),n));return s.with({authority:r.authority,path:r.path})}return n=I.toPosixPath(n),s.with({path:k.posix.resolve(s.path,n)})}isAbsolutePath(s){return!!s.path&&s.path[0]==="/"}isEqualAuthority(s,n){return s===n||s!==void 0&&n!==void 0&&(0,y.equalsIgnoreCase)(s,n)}hasTrailingPathSeparator(s,n=k.sep){if(s.scheme===M.Schemas.file){const r=m(s);return r.length>I.getRoot(r).length&&r[r.length-1]===n}else{const r=s.path;return r.length>1&&r.charCodeAt(r.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(s.fsPath)}}removeTrailingPathSeparator(s,n=k.sep){return(0,e.hasTrailingPathSeparator)(s,n)?s.with({path:s.path.substr(0,s.path.length-1)}):s}addTrailingPathSeparator(s,n=k.sep){let r=!1;if(s.scheme===M.Schemas.file){const h=m(s);r=h!==void 0&&h.length===I.getRoot(h).length&&h[h.length-1]===n}else{n="/";const h=s.path;r=h.length===1&&h.charCodeAt(h.length-1)===47}return!r&&!(0,e.hasTrailingPathSeparator)(s,n)?s.with({path:s.path+"/"}):s}}e.ExtUri=d,e.extUri=new d(()=>!1),e.extUriBiasedIgnorePathCase=new d(C=>C.scheme===M.Schemas.file?!A.isLinux:!0),e.extUriIgnorePathCase=new d(C=>!0),e.isEqual=e.extUri.isEqual.bind(e.extUri),e.isEqualOrParent=e.extUri.isEqualOrParent.bind(e.extUri),e.getComparisonKey=e.extUri.getComparisonKey.bind(e.extUri),e.basenameOrAuthority=e.extUri.basenameOrAuthority.bind(e.extUri),e.basename=e.extUri.basename.bind(e.extUri),e.extname=e.extUri.extname.bind(e.extUri),e.dirname=e.extUri.dirname.bind(e.extUri),e.joinPath=e.extUri.joinPath.bind(e.extUri),e.normalizePath=e.extUri.normalizePath.bind(e.extUri),e.relativePath=e.extUri.relativePath.bind(e.extUri),e.resolvePath=e.extUri.resolvePath.bind(e.extUri),e.isAbsolutePath=e.extUri.isAbsolutePath.bind(e.extUri),e.isEqualAuthority=e.extUri.isEqualAuthority.bind(e.extUri),e.hasTrailingPathSeparator=e.extUri.hasTrailingPathSeparator.bind(e.extUri),e.removeTrailingPathSeparator=e.extUri.removeTrailingPathSeparator.bind(e.extUri),e.addTrailingPathSeparator=e.extUri.addTrailingPathSeparator.bind(e.extUri);function L(C,s){const n=[];for(let r=0;r<C.length;r++){const h=s(C[r]);C.some((b,T)=>T===r?!1:(0,e.isEqualOrParent)(h,s(b)))||n.push(C[r])}return n}e.distinctParents=L;var q;(function(C){C.META_DATA_LABEL="label",C.META_DATA_DESCRIPTION="description",C.META_DATA_SIZE="size",C.META_DATA_MIME="mime";function s(n){const r=new Map;n.path.substring(n.path.indexOf(";")+1,n.path.lastIndexOf(";")).split(";").forEach(T=>{const[N,Z]=T.split(":");N&&Z&&r.set(N,Z)});const b=n.path.substring(0,n.path.indexOf(";"));return b&&r.set(C.META_DATA_MIME,b),r}C.parseMetaData=s})(q=e.DataUri||(e.DataUri={}));function Q(C,s,n){if(s){let r=C.path;return r&&r[0]!==k.posix.sep&&(r=k.posix.sep+r),C.with({scheme:n,authority:s,path:r})}return C.with({scheme:n})}e.toLocalResource=Q}),define(ne[8],ie([0,1,12,16,17,18,7,2]),function(_,e,I,M,k,A,y,D){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createCancelableAsyncIterable=e.CancelableAsyncIterableObject=e.AsyncIterableObject=e.Promises=e.DeferredPromise=e.IntervalCounter=e.TaskSequentializer=e.retry=e.IdleValue=e.runWhenIdle=e.ThrottledWorker=e.RunOnceWorker=e.ProcessTimeRunOnceScheduler=e.RunOnceScheduler=e.IntervalTimer=e.TimeoutTimer=e.ResourceQueue=e.Queue=e.Limiter=e.firstParallel=e.first=e.sequence=e.disposableTimeout=e.timeout=e.AutoOpenBarrier=e.Barrier=e.ThrottledDelayer=e.Delayer=e.MicrotaskDelay=e.SequencerByKey=e.Sequencer=e.Throttler=e.asPromise=e.raceTimeout=e.raceCancellablePromises=e.raceCancellationError=e.raceCancellation=e.createCancelablePromise=e.isThenable=void 0;function m(o){return!!o&&typeof o.then=="function"}e.isThenable=m;function d(o){const t=new I.CancellationTokenSource,i=o(t.token),l=new Promise((u,P)=>{const $=t.token.onCancellationRequested(()=>{$.dispose(),t.dispose(),P(new M.CancellationError)});Promise.resolve(i).then(z=>{$.dispose(),t.dispose(),u(z)},z=>{$.dispose(),t.dispose(),P(z)})});return new class{cancel(){t.cancel()}then(u,P){return l.then(u,P)}catch(u){return this.then(void 0,u)}finally(u){return l.finally(u)}}}e.createCancelablePromise=d;function L(o,t,i){return new Promise((l,u)=>{const P=t.onCancellationRequested(()=>{P.dispose(),l(i)});o.then(l,u).finally(()=>P.dispose())})}e.raceCancellation=L;function q(o,t){return new Promise((i,l)=>{const u=t.onCancellationRequested(()=>{u.dispose(),l(new M.CancellationError)});o.then(i,l).finally(()=>u.dispose())})}e.raceCancellationError=q;async function Q(o){let t=-1;const i=o.map((u,P)=>u.then($=>(t=P,$))),l=await Promise.race(i);return o.forEach((u,P)=>{P!==t&&u.cancel()}),l}e.raceCancellablePromises=Q;function C(o,t,i){let l;const u=setTimeout(()=>{l?.(void 0),i?.()},t);return Promise.race([o.finally(()=>clearTimeout(u)),new Promise(P=>l=P)])}e.raceTimeout=C;function s(o){return new Promise((t,i)=>{const l=o();m(l)?l.then(t,i):t(l)})}e.asPromise=s;class n{constructor(){this.a=null,this.b=null,this.d=null}queue(t){if(this.a){if(this.d=t,!this.b){const i=()=>{this.b=null;const l=this.queue(this.d);return this.d=null,l};this.b=new Promise(l=>{this.a.then(i,i).then(l)})}return new Promise((i,l)=>{this.b.then(i,l)})}return this.a=t(),new Promise((i,l)=>{this.a.then(u=>{this.a=null,i(u)},u=>{this.a=null,l(u)})})}}e.Throttler=n;class r{constructor(){this.a=Promise.resolve(null)}queue(t){return this.a=this.a.then(()=>t(),()=>t())}}e.Sequencer=r;class h{constructor(){this.a=new Map}queue(t,i){const u=(this.a.get(t)??Promise.resolve()).catch(()=>{}).then(i).finally(()=>{this.a.get(t)===u&&this.a.delete(t)});return this.a.set(t,u),u}}e.SequencerByKey=h;const b=(o,t)=>{let i=!0;const l=setTimeout(()=>{i=!1,t()},o);return{isTriggered:()=>i,dispose:()=>{clearTimeout(l),i=!1}}},T=o=>{let t=!0;return queueMicrotask(()=>{t&&(t=!1,o())}),{isTriggered:()=>t,dispose:()=>{t=!1}}};e.MicrotaskDelay=Symbol("MicrotaskDelay");class N{constructor(t){this.defaultDelay=t,this.a=null,this.b=null,this.d=null,this.f=null,this.g=null}trigger(t,i=this.defaultDelay){this.g=t,this.h(),this.b||(this.b=new Promise((u,P)=>{this.d=u,this.f=P}).then(()=>{if(this.b=null,this.d=null,this.g){const u=this.g;return this.g=null,u()}}));const l=()=>{this.a=null,this.d?.(null)};return this.a=i===e.MicrotaskDelay?T(l):b(i,l),this.b}isTriggered(){return!!this.a?.isTriggered()}cancel(){this.h(),this.b&&(this.f?.(new M.CancellationError),this.b=null)}h(){this.a?.dispose(),this.a=null}dispose(){this.cancel()}}e.Delayer=N;class Z{constructor(t){this.a=new N(t),this.b=new n}trigger(t,i){return this.a.trigger(()=>this.b.queue(t),i)}isTriggered(){return this.a.isTriggered()}cancel(){this.a.cancel()}dispose(){this.a.dispose()}}e.ThrottledDelayer=Z;class S{constructor(){this.a=!1,this.b=new Promise((t,i)=>{this.d=t})}isOpen(){return this.a}open(){this.a=!0,this.d(!0)}wait(){return this.b}}e.Barrier=S;class F extends S{constructor(t){super(),this.f=setTimeout(()=>this.open(),t)}open(){clearTimeout(this.f),super.open()}}e.AutoOpenBarrier=F;function O(o,t){return t?new Promise((i,l)=>{const u=setTimeout(()=>{P.dispose(),i()},o),P=t.onCancellationRequested(()=>{clearTimeout(u),P.dispose(),l(new M.CancellationError)})}):d(i=>O(o,i))}e.timeout=O;function G(o,t=0){const i=setTimeout(o,t);return(0,A.toDisposable)(()=>clearTimeout(i))}e.disposableTimeout=G;function a(o){const t=[];let i=0;const l=o.length;function u(){return i<l?o[i++]():null}function P($){$!=null&&t.push($);const z=u();return z?z.then(P):Promise.resolve(t)}return Promise.resolve(null).then(P)}e.sequence=a;function g(o,t=l=>!!l,i=null){let l=0;const u=o.length,P=()=>{if(l>=u)return Promise.resolve(i);const $=o[l++];return Promise.resolve($()).then(X=>t(X)?Promise.resolve(X):P())};return P()}e.first=g;function R(o,t=l=>!!l,i=null){if(o.length===0)return Promise.resolve(i);let l=o.length;const u=()=>{l=-1;for(const P of o)P.cancel?.()};return new Promise((P,$)=>{for(const z of o)z.then(X=>{--l>=0&&t(X)?(u(),P(X)):l===0&&P(i)}).catch(X=>{--l>=0&&(u(),$(X))})})}e.firstParallel=R;class B{constructor(t){this.a=0,this.d=t,this.f=[],this.b=0,this.g=new k.Emitter}get onDrained(){return this.g.event}get size(){return this.a}queue(t){return this.a++,new Promise((i,l)=>{this.f.push({factory:t,c:i,e:l}),this.h()})}h(){for(;this.f.length&&this.b<this.d;){const t=this.f.shift();this.b++;const i=t.factory();i.then(t.c,t.e),i.then(()=>this.j(),()=>this.j())}}j(){this.a--,this.b--,this.f.length>0?this.h():this.g.fire()}dispose(){this.g.dispose()}}e.Limiter=B;class p extends B{constructor(){super(1)}}e.Queue=p;class W{constructor(){this.a=new Map,this.b=new Set}async whenDrained(){if(this.d())return;const t=new f;return this.b.add(t),t.p}d(){for(const[,t]of this.a)if(t.size>0)return!1;return!0}queueFor(t,i=y.extUri){const l=i.getComparisonKey(t);let u=this.a.get(l);return u||(u=new p,k.Event.once(u.onDrained)(()=>{u?.dispose(),this.a.delete(l),this.f()}),this.a.set(l,u)),u}f(){!this.d()||this.g()}g(){for(const t of this.b)t.complete();this.b.clear()}dispose(){for(const[,t]of this.a)t.dispose();this.a.clear(),this.g()}}e.ResourceQueue=W;class V{constructor(t,i){this.a=-1,typeof t=="function"&&typeof i=="number"&&this.setIfNotSet(t,i)}dispose(){this.cancel()}cancel(){this.a!==-1&&(clearTimeout(this.a),this.a=-1)}cancelAndSet(t,i){this.cancel(),this.a=setTimeout(()=>{this.a=-1,t()},i)}setIfNotSet(t,i){this.a===-1&&(this.a=setTimeout(()=>{this.a=-1,t()},i))}}e.TimeoutTimer=V;class te{constructor(){this.a=-1}dispose(){this.cancel()}cancel(){this.a!==-1&&(clearInterval(this.a),this.a=-1)}cancelAndSet(t,i){this.cancel(),this.a=setInterval(()=>{t()},i)}}e.IntervalTimer=te;class J{constructor(t,i){this.b=-1,this.a=t,this.d=i,this.f=this.g.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearTimeout(this.b),this.b=-1)}schedule(t=this.d){this.cancel(),this.b=setTimeout(this.f,t)}get delay(){return this.d}set delay(t){this.d=t}isScheduled(){return this.b!==-1}g(){this.b=-1,this.a&&this.h()}h(){this.a?.()}}e.RunOnceScheduler=J;class x{constructor(t,i){i%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${i}ms is not a multiple of 1000ms.`),this.a=t,this.b=i,this.d=0,this.f=-1,this.g=this.h.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearInterval(this.f),this.f=-1)}schedule(t=this.b){t%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${t}ms is not a multiple of 1000ms.`),this.cancel(),this.d=Math.ceil(t/1e3),this.f=setInterval(this.g,1e3)}isScheduled(){return this.f!==-1}h(){this.d--,!(this.d>0)&&(clearInterval(this.f),this.f=-1,this.a?.())}}e.ProcessTimeRunOnceScheduler=x;class Y extends J{constructor(t,i){super(t,i),this.j=[]}work(t){this.j.push(t),this.isScheduled()||this.schedule()}h(){const t=this.j;this.j=[],this.a?.(t)}dispose(){this.j=[],super.dispose()}}e.RunOnceWorker=Y;class se extends A.Disposable{constructor(t,i){super(),this.g=t,this.h=i,this.a=[],this.b=this.B(new A.MutableDisposable),this.f=!1}get pending(){return this.a.length}work(t){if(this.f)return!1;if(typeof this.g.maxBufferedWork=="number"){if(this.b.value){if(this.pending+t.length>this.g.maxBufferedWork)return!1}else if(this.pending+t.length-this.g.maxWorkChunkSize>this.g.maxBufferedWork)return!1}return this.a.push(...t),this.b.value||this.j(),!0}j(){this.h(this.a.splice(0,this.g.maxWorkChunkSize)),this.a.length>0&&(this.b.value=new J(()=>{this.b.clear(),this.j()},this.g.throttleDelay),this.b.value.schedule())}dispose(){super.dispose(),this.f=!0}}e.ThrottledWorker=se,function(){typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"?e.runWhenIdle=o=>{(0,D.setTimeout0)(()=>{if(t)return;const i=Date.now()+15;o(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,i-Date.now())}}))});let t=!1;return{dispose(){t||(t=!0)}}}:e.runWhenIdle=(o,t)=>{const i=requestIdleCallback(o,typeof t=="number"?{timeout:t}:void 0);let l=!1;return{dispose(){l||(l=!0,cancelIdleCallback(i))}}}}();class j{constructor(t){this.d=!1,this.a=()=>{try{this.f=t()}catch(i){this.g=i}finally{this.d=!0}},this.b=(0,e.runWhenIdle)(()=>this.a())}dispose(){this.b.dispose()}get value(){if(this.d||(this.b.dispose(),this.a()),this.g)throw this.g;return this.f}get isInitialized(){return this.d}}e.IdleValue=j;async function K(o,t,i){let l;for(let u=0;u<i;u++)try{return await o()}catch(P){l=P,await O(t)}throw l}e.retry=K;class H{hasPending(t){return this.a?typeof t=="number"?this.a.taskId===t:!!this.a:!1}get pending(){return this.a?.promise}cancelPending(){this.a?.cancel()}setPending(t,i,l){return this.a={taskId:t,cancel:()=>l?.(),promise:i},i.then(()=>this.d(t),()=>this.d(t)),i}d(t){this.a&&t===this.a.taskId&&(this.a=void 0,this.f())}f(){if(this.b){const t=this.b;this.b=void 0,t.run().then(t.promiseResolve,t.promiseReject)}}setNext(t){if(this.b)this.b.run=t;else{let i,l;const u=new Promise((P,$)=>{i=P,l=$});this.b={run:t,promise:u,promiseResolve:i,promiseReject:l}}return this.b.promise}hasNext(){return!!this.b}async join(){return this.b?.promise??this.a?.promise}}e.TaskSequentializer=H;class ee{constructor(t,i=()=>Date.now()){this.d=t,this.f=i,this.a=0,this.b=0}increment(){const t=this.f();return t-this.a>this.d&&(this.a=t,this.b=0),this.b++,this.b}}e.IntervalCounter=ee;class f{get isRejected(){return this.d}get isResolved(){return this.f}get isSettled(){return this.d||this.f}constructor(){this.d=!1,this.f=!1,this.p=new Promise((t,i)=>{this.a=t,this.b=i})}complete(t){return new Promise(i=>{this.a(t),this.f=!0,i()})}error(t){return new Promise(i=>{this.b(t),this.d=!0,i()})}cancel(){new Promise(t=>{this.b(new M.CancellationError),this.d=!0,t()})}}e.DeferredPromise=f;var v;(function(o){async function t(l){let u;const P=await Promise.all(l.map($=>$.then(z=>z,z=>{u||(u=z)})));if(typeof u<"u")throw u;return P}o.settled=t;function i(l){return new Promise(async(u,P)=>{try{await l(u,P)}catch($){P($)}})}o.withAsyncBody=i})(v=e.Promises||(e.Promises={}));var c;(function(o){o[o.Initial=0]="Initial",o[o.DoneOK=1]="DoneOK",o[o.DoneError=2]="DoneError"})(c||(c={}));class w{static fromArray(t){return new w(i=>{i.emitMany(t)})}static fromPromise(t){return new w(async i=>{i.emitMany(await t)})}static fromPromises(t){return new w(async i=>{await Promise.all(t.map(async l=>i.emitOne(await l)))})}static merge(t){return new w(async i=>{await Promise.all(t.map(async l=>{for await(const u of l)i.emitOne(u)}))})}constructor(t){this.a=0,this.b=[],this.d=null,this.f=new k.Emitter,queueMicrotask(async()=>{const i={emitOne:l=>this.g(l),emitMany:l=>this.h(l),reject:l=>this.k(l)};try{await Promise.resolve(t(i)),this.j()}catch(l){this.k(l)}finally{i.emitOne=void 0,i.emitMany=void 0,i.reject=void 0}})}[Symbol.asyncIterator](){let t=0;return{next:async()=>{do{if(this.a===2)throw this.d;if(t<this.b.length)return{done:!1,value:this.b[t++]};if(this.a===1)return{done:!0,value:void 0};await k.Event.toPromise(this.f.event)}while(!0)}}}static map(t,i){return new w(async l=>{for await(const u of t)l.emitOne(i(u))})}map(t){return w.map(this,t)}static filter(t,i){return new w(async l=>{for await(const u of t)i(u)&&l.emitOne(u)})}filter(t){return w.filter(this,t)}static coalesce(t){return w.filter(t,i=>!!i)}coalesce(){return w.coalesce(this)}static async toPromise(t){const i=[];for await(const l of t)i.push(l);return i}toPromise(){return w.toPromise(this)}g(t){this.a===0&&(this.b.push(t),this.f.fire())}h(t){this.a===0&&(this.b=this.b.concat(t),this.f.fire())}j(){this.a===0&&(this.a=1,this.f.fire())}k(t){this.a===0&&(this.a=2,this.d=t,this.f.fire())}}e.AsyncIterableObject=w,w.EMPTY=w.fromArray([]);class E extends w{constructor(t,i){super(i),this.l=t}cancel(){this.l.cancel()}}e.CancelableAsyncIterableObject=E;function U(o){const t=new I.CancellationTokenSource,i=o(t.token);return new E(t,async l=>{const u=t.token.onCancellationRequested(()=>{u.dispose(),t.dispose(),l.reject(new M.CancellationError)});try{for await(const P of i){if(t.token.isCancellationRequested)return;l.emitOne(P)}u.dispose(),t.dispose()}catch(P){u.dispose(),t.dispose(),l.reject(P)}})}e.createCancelableAsyncIterable=U}),define(ne[9],ie([0,1,19,8,5,10,3,2,4]),function(_,e,I,M,k,A,y,D,m){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.patternsEquals=e.getPathTerms=e.getBasenameTerms=e.isRelativePattern=e.parse=e.match=e.splitGlobAware=e.GLOB_SPLIT=e.GLOBSTAR=e.getEmptyExpression=void 0;function d(){return Object.create(null)}e.getEmptyExpression=d,e.GLOBSTAR="**",e.GLOB_SPLIT="/";const L="[/\\\\]",q="[^/\\\\]",Q=/\//g;function C(f,v){switch(f){case 0:return"";case 1:return`${q}*?`;default:return`(?:${L}|${q}+${L}${v?`|${L}${q}+`:""})*?`}}function s(f,v){if(!f)return[];const c=[];let w=!1,E=!1,U="";for(const o of f){switch(o){case v:if(!w&&!E){c.push(U),U="";continue}break;case"{":w=!0;break;case"}":w=!1;break;case"[":E=!0;break;case"]":E=!1;break}U+=o}return U&&c.push(U),c}e.splitGlobAware=s;function n(f){if(!f)return"";let v="";const c=s(f,e.GLOB_SPLIT);if(c.every(w=>w===e.GLOBSTAR))v=".*";else{let w=!1;c.forEach((E,U)=>{if(E===e.GLOBSTAR){if(w)return;v+=C(2,U===c.length-1)}else{let o=!1,t="",i=!1,l="";for(const u of E){if(u!=="}"&&o){t+=u;continue}if(i&&(u!=="]"||!l)){let P;u==="-"?P=u:(u==="^"||u==="!")&&!l?P="^":u===e.GLOB_SPLIT?P="":P=(0,m.escapeRegExpCharacters)(u),l+=P;continue}switch(u){case"{":o=!0;continue;case"[":i=!0;continue;case"}":{v+=`(?:${s(t,",").map(z=>n(z)).join("|")})`,o=!1,t="";break}case"]":{v+="["+l+"]",i=!1,l="";break}case"?":v+=q;continue;case"*":v+=C(1);continue;default:v+=(0,m.escapeRegExpCharacters)(u)}}U<c.length-1&&(c[U+1]!==e.GLOBSTAR||U+2<c.length)&&(v+=L)}w=E===e.GLOBSTAR})}return v}const r=/^\*\*\/\*\.[\w\.-]+$/,h=/^\*\*\/([\w\.-]+)\/?$/,b=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,T=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,N=/^\*\*((\/[\w\.-]+)+)\/?$/,Z=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,S=new A.LRUCache(1e4),F=function(){return!1},O=function(){return null};function G(f,v){if(!f)return O;let c;typeof f!="string"?c=f.pattern:c=f,c=c.trim();const w=`${c}_${!!v.trimForExclusions}`;let E=S.get(w);if(E)return a(E,f);let U;return r.test(c)?E=R(c.substr(4),c):(U=h.exec(g(c,v)))?E=B(U[1],c):(v.trimForExclusions?T:b).test(c)?E=p(c,v):(U=N.exec(g(c,v)))?E=W(U[1].substr(1),c,!0):(U=Z.exec(g(c,v)))?E=W(U[1],c,!1):E=V(c),S.set(w,E),a(E,f)}function a(f,v){if(typeof v=="string")return f;const c=function(w,E){return(0,k.isEqualOrParent)(w,v.base,!D.isLinux)?f((0,m.ltrim)(w.substr(v.base.length),y.sep),E):null};return c.allBasenames=f.allBasenames,c.allPaths=f.allPaths,c.basenames=f.basenames,c.patterns=f.patterns,c}function g(f,v){return v.trimForExclusions&&f.endsWith("/**")?f.substr(0,f.length-2):f}function R(f,v){return function(c,w){return typeof c=="string"&&c.endsWith(f)?v:null}}function B(f,v){const c=`/${f}`,w=`\\${f}`,E=function(o,t){return typeof o!="string"?null:t?t===f?v:null:o===f||o.endsWith(c)||o.endsWith(w)?v:null},U=[f];return E.basenames=U,E.patterns=[v],E.allBasenames=U,E}function p(f,v){const c=H(f.slice(1,-1).split(",").map(t=>G(t,v)).filter(t=>t!==O),f),w=c.length;if(!w)return O;if(w===1)return c[0];const E=function(t,i){for(let l=0,u=c.length;l<u;l++)if(c[l](t,i))return f;return null},U=c.find(t=>!!t.allBasenames);U&&(E.allBasenames=U.allBasenames);const o=c.reduce((t,i)=>i.allPaths?t.concat(i.allPaths):t,[]);return o.length&&(E.allPaths=o),E}function W(f,v,c){const w=y.sep===y.posix.sep,E=w?f:f.replace(Q,y.sep),U=y.sep+E,o=y.posix.sep+f;let t;return c?t=function(i,l){return typeof i=="string"&&(i===E||i.endsWith(U)||!w&&(i===f||i.endsWith(o)))?v:null}:t=function(i,l){return typeof i=="string"&&(i===E||!w&&i===f)?v:null},t.allPaths=[(c?"*/":"./")+f],t}function V(f){try{const v=new RegExp(`^${n(f)}$`);return function(c){return v.lastIndex=0,typeof c=="string"&&v.test(c)?f:null}}catch{return O}}function te(f,v,c){return!f||typeof v!="string"?!1:J(f)(v,void 0,c)}e.match=te;function J(f,v={}){if(!f)return F;if(typeof f=="string"||x(f)){const c=G(f,v);if(c===O)return F;const w=function(E,U){return!!c(E,U)};return c.allBasenames&&(w.allBasenames=c.allBasenames),c.allPaths&&(w.allPaths=c.allPaths),w}return j(f,v)}e.parse=J;function x(f){const v=f;return v?typeof v.base=="string"&&typeof v.pattern=="string":!1}e.isRelativePattern=x;function Y(f){return f.allBasenames||[]}e.getBasenameTerms=Y;function se(f){return f.allPaths||[]}e.getPathTerms=se;function j(f,v){const c=H(Object.getOwnPropertyNames(f).map(t=>K(t,f[t],v)).filter(t=>t!==O)),w=c.length;if(!w)return O;if(!c.some(t=>!!t.requiresSiblings)){if(w===1)return c[0];const t=function(u,P){let $;for(let z=0,X=c.length;z<X;z++){const re=c[z](u,P);if(typeof re=="string")return re;(0,M.isThenable)(re)&&($||($=[]),$.push(re))}return $?(async()=>{for(const z of $){const X=await z;if(typeof X=="string")return X}return null})():null},i=c.find(u=>!!u.allBasenames);i&&(t.allBasenames=i.allBasenames);const l=c.reduce((u,P)=>P.allPaths?u.concat(P.allPaths):u,[]);return l.length&&(t.allPaths=l),t}const E=function(t,i,l){let u,P;for(let $=0,z=c.length;$<z;$++){const X=c[$];X.requiresSiblings&&l&&(i||(i=(0,y.basename)(t)),u||(u=i.substr(0,i.length-(0,y.extname)(t).length)));const re=X(t,i,u,l);if(typeof re=="string")return re;(0,M.isThenable)(re)&&(P||(P=[]),P.push(re))}return P?(async()=>{for(const $ of P){const z=await $;if(typeof z=="string")return z}return null})():null},U=c.find(t=>!!t.allBasenames);U&&(E.allBasenames=U.allBasenames);const o=c.reduce((t,i)=>i.allPaths?t.concat(i.allPaths):t,[]);return o.length&&(E.allPaths=o),E}function K(f,v,c){if(v===!1)return O;const w=G(f,c);if(w===O)return O;if(typeof v=="boolean")return w;if(v){const E=v.when;if(typeof E=="string"){const U=(o,t,i,l)=>{if(!l||!w(o,t))return null;const u=E.replace("$(basename)",i),P=l(u);return(0,M.isThenable)(P)?P.then($=>$?f:null):P?f:null};return U.requiresSiblings=!0,U}}return w}function H(f,v){const c=f.filter(t=>!!t.basenames);if(c.length<2)return f;const w=c.reduce((t,i)=>{const l=i.basenames;return l?t.concat(l):t},[]);let E;if(v){E=[];for(let t=0,i=w.length;t<i;t++)E.push(v)}else E=c.reduce((t,i)=>{const l=i.patterns;return l?t.concat(l):t},[]);const U=function(t,i){if(typeof t!="string")return null;if(!i){let u;for(u=t.length;u>0;u--){const P=t.charCodeAt(u-1);if(P===47||P===92)break}i=t.substr(u)}const l=w.indexOf(i);return l!==-1?E[l]:null};U.basenames=w,U.patterns=E,U.allBasenames=w;const o=f.filter(t=>!t.basenames);return o.push(U),o}function ee(f,v){return(0,I.equals)(f,v,(c,w)=>typeof c=="string"&&typeof w=="string"?c===w:typeof c!="string"&&typeof w!="string"?c.base===w.base&&c.pattern===w.pattern:!1)}e.patternsEquals=ee}),define(ne[13],ie([0,1,20]),function(_,e,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getFileResults=void 0;const M=(k,A,y)=>{let D;if(k[0]===255&&k[1]===254)D=new TextDecoder("utf-16le").decode(k);else if(k[0]===254&&k[1]===255)D=new TextDecoder("utf-16be").decode(k);else if(D=new TextDecoder("utf8").decode(k),D.slice(0,1e3).includes("\uFFFD")&&k.includes(0))return[];const m=[],d=[];let L=null,q=y.remainingResultQuota;for(;q>=0&&(L=A.exec(D));)d.push({matchStartIndex:L.index,matchedText:L[0]}),q--;if(d.length){const Q=new Set,C=new Set,s=[],n=N=>D.slice(s[N].start,s[N].end);let r=0,h=null;const b=/\r?\n/g;for(;h=b.exec(D);)s.push({start:r,end:h.index}),r=h.index+h[0].length;r<D.length&&s.push({start:r,end:D.length});let T=0;for(const{matchStartIndex:N,matchedText:Z}of d){if(q<0)break;for(;Boolean(s[T+1])&&N>s[T].end;)T++;let S=T;for(;Boolean(s[S+1])&&N+Z.length>s[S].end;)S++;if(y.beforeContext)for(let R=Math.max(0,T-y.beforeContext);R<T;R++)Q.add(R);let F="",O=0;for(let R=T;R<=S;R++){let B=n(R);y.previewOptions?.charsPerLine&&B.length>y.previewOptions.charsPerLine&&(O=Math.max(N-s[T].start-20,0),B=B.substr(O,y.previewOptions.charsPerLine)),F+=`${B}
`,C.add(R)}const G=new I.Range(T,N-s[T].start,S,N+Z.length-s[S].start),a=new I.Range(0,N-s[T].start-O,S-T,N+Z.length-s[S].start-(S===T?O:0)),g={ranges:G,preview:{text:F,matches:a}};if(m.push(g),y.afterContext)for(let R=S+1;R<=Math.min(S+y.afterContext,s.length-1);R++)Q.add(R)}for(const N of Q)C.has(N)||m.push({text:n(N),lineNumber:N+1})}return m};e.getFileResults=M}),define(ne[14],ie([0,1,9]),function(_,e,I){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IgnoreFile=void 0;class M{constructor(A,y,D){if(this.b=y,this.c=D,y[y.length-1]==="\\")throw Error("Unexpected path format, do not use trailing backslashes");y[y.length-1]!=="/"&&(y+="/"),this.a=this.e(A,this.b,this.c)}updateContents(A){this.a=this.e(A,this.b,this.c)}isPathIncludedInTraversal(A,y){if(A[0]!=="/"||A[A.length-1]==="/")throw Error("Unexpected path format, expectred to begin with slash and end without. got:"+A);return!this.a(A,y)}isArbitraryPathIgnored(A,y){if(A[0]!=="/"||A[A.length-1]==="/")throw Error("Unexpected path format, expectred to begin with slash and end without. got:"+A);const D=A.split("/").filter(L=>L);let m=!1,d="";for(let L=0;L<D.length;L++){const q=L===D.length-1,Q=D[L];if(d=d+"/"+Q,!this.isPathIncludedInTraversal(d,q?y:!0)){m=!0;break}}return m}d(A,y,D){const m=A.map(L=>this.f(L,y)),d=Object.create(null);for(const L of m)d[L]=!0;return I.parse(d,{trimForExclusions:D})}e(A,y,D){const m=A.split(`
`).map(T=>T.trim()).filter(T=>T&&T[0]!=="#"),d=m.filter(T=>!T.endsWith("/")),L=d.filter(T=>!T.includes("!")),q=this.d(L,y,!0),Q=d.filter(T=>T.includes("!")).map(T=>T.replace(/!/g,"")),C=this.d(Q,y,!1),s=m.filter(T=>!T.includes("!")),n=this.d(s,y,!0),r=m.filter(T=>T.includes("!")).map(T=>T.replace(/!/g,"")),h=this.d(r,y,!1);return(T,N)=>T.startsWith(y)?N&&n(T)&&!h(T)||q(T)&&!C(T)?!0:D?D.a(T,N):!1:!1}f(A,y){const D=A.indexOf("/");return D===-1||D===A.length-1?A="**/"+A:(D===0?y.slice(-1)==="/"&&(A=A.slice(1)):y.slice(-1)!=="/"&&(A="/"+A),A=y+A),A}}e.IgnoreFile=M}),define(ne[21],ie([0,1,9,6,3,12,13,14,4,8,7]),function(_,e,I,M,k,A,y,D,m,d,L){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LocalFileSearchSimpleWorker=e.create=void 0;const q=!1,Q=+new Date,C={},s=async(S,F)=>{if(!q)return F();const O=Date.now(),G=(C[S]??0)+1;console.info(S,G,"starting",Math.round((O-Q)*10)/1e4),C[S]=G;const a=await F(),g=Date.now();return console.info(S,G,"took",g-O),a};function n(S){return new r(S)}e.create=n;class r{constructor(F){this.d=F,this.cancellationTokens=new Map}cancelQuery(F){this.cancellationTokens.get(F)?.cancel()}g(F){const O=new A.CancellationTokenSource;return this.cancellationTokens.set(F,O),O}async listDirectory(F,O,G,a,g){const R=b(G),B=new L.ExtUri(()=>a),p=this.g(g),W=[];let V=!1,te=0;const J=O.maxResults||512,x=O.filePattern?Y=>O.filePattern.split("").every(se=>Y.includes(se)):Y=>!0;return await s("listDirectory",()=>this.h(F,T(O),R,B,Y=>{if(!!x(Y.name))return te++,J&&te>J&&(V=!0,p.cancel()),W.push(Y.path)},p.token)),{results:W,limitHit:V}}async searchDirectory(F,O,G,a,g){const R=b(G),B=new L.ExtUri(()=>a);return s("searchInFiles",async()=>{const p=this.g(g),W=[],V=h(O.contentPattern),te=[];let J=0,x=0;const Y=!1,se=async j=>{if(p.token.isCancellationRequested)return;J++;const K=await j.resolve();if(p.token.isCancellationRequested)return;const H=new Uint8Array(K),ee=(0,y.getFileResults)(H,V,{afterContext:O.afterContext??0,beforeContext:O.beforeContext??0,previewOptions:O.previewOptions,remainingResultQuota:O.maxResults?O.maxResults-x:1e4});if(ee.length){x+=ee.length,O.maxResults&&x>O.maxResults&&p.cancel();const f={resource:M.URI.joinPath(R.folder,j.path),results:ee};this.d.sendTextSearchMatch(f,g),W.push(f)}};return await s("walkFolderToResolve",()=>this.h(F,T(O),R,B,async j=>te.push(se(j)),p.token)),await s("resolveOngoingProcesses",()=>Promise.all(te)),q&&console.log("Searched in",J,"files"),{results:W,limitHit:Y}})}async h(F,O,G,a,g,R){const B=I.parse(G.excludePattern??{},{trimForExclusions:!0}),p=(j,K,H)=>(j=j.slice(1),!!(B(j,K,H)||N(O,j))),W=(j,K,H)=>(j=j.slice(1),!(B(j,K,H)||!Z(O,j,a))),V=(j,K)=>({type:"file",name:j.name,path:K,resolve:()=>j.getFile().then(ee=>ee.arrayBuffer())}),te=j=>j.kind==="directory",J=j=>j.kind==="file",x=async(j,K,H)=>{if(!G.disregardIgnoreFiles){const f=await Promise.all([j.getFileHandle(".gitignore").catch(v=>{}),j.getFileHandle(".ignore").catch(v=>{})]);await Promise.all(f.map(async v=>{if(!v)return;const c=new TextDecoder("utf8").decode(new Uint8Array(await(await v.getFile()).arrayBuffer()));H=new D.IgnoreFile(c,K,H)}))}const ee=d.Promises.withAsyncBody(async f=>{const v=[],c=[],w=[],E=new Set;for await(const U of j.entries())w.push(U),E.add(U[0]);for(const[U,o]of w){if(R.isCancellationRequested)break;const t=K+U;if(H&&!H.isPathIncludedInTraversal(t,o.kind==="directory"))continue;const i=l=>E.has(l);te(o)&&!p(t,U,i)?c.push(x(o,t+"/",H)):J(o)&&W(t,U,i)&&v.push(V(o,t))}f([...await Promise.all(c),...v])});return{type:"dir",name:j.name,entries:ee}},Y=async(j,K)=>{R.isCancellationRequested||await Promise.all((await j.entries).sort((H,ee)=>-(H.type==="dir"?0:1)+(ee.type==="dir"?0:1)).map(async H=>H.type==="dir"?Y(H,K):K(H)))},se=await s("process",()=>x(F,"/"));await s("resolve",()=>Y(se,g))}}e.LocalFileSearchSimpleWorker=r;function h(S){return(0,m.createRegExp)(S.pattern,!!S.isRegExp,{wholeWord:S.isWordMatch,global:!0,matchCase:S.isCaseSensitive,multiline:!0,unicode:!0})}function b(S){return{...S,folder:M.URI.revive(S.folder)}}function T(S){return{...S,extraFileResources:S.extraFileResources?.map(F=>M.URI.revive(F)),folderQueries:S.folderQueries.map(F=>b(F))}}function N(S,F){return!!(S.excludePattern&&I.match(S.excludePattern,F))}function Z(S,F,O){return S.excludePattern&&I.match(S.excludePattern,F)?!1:S.includePattern||S.usingSearchPaths?S.includePattern&&I.match(S.includePattern,F)?!0:S.usingSearchPaths?!!S.folderQueries&&S.folderQueries.some(G=>{const a=G.folder,g=M.URI.file(F);if(O.isEqualOrParent(g,a)){const R=k.relative(a.path,g.path);return!G.includePattern||!!I.match(G.includePattern,R)}else return!1}):!1:!0}})}).call(this);

//# sourceMappingURL=https://ticino.blob.core.windows.net/sourcemaps/1ad8d514439d5077d2b0b7ee64d2ce82a9308e5a/core/vs/workbench/services/search/worker/localFileSearch.js.map
