/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/(function(){var ne=["require","exports","vs/base/common/platform","vs/base/common/strings","vs/base/common/path","vs/base/common/buffer","vs/base/common/lifecycle","vs/base/common/extpath","vs/base/common/network","vs/base/common/uri","vs/editor/common/model/pieceTreeTextBuffer/pieceTreeBase","vs/editor/common/core/range","vs/base/common/map","vs/base/common/stream","vs/base/common/errors","vs/editor/common/core/eolCounter","vs/editor/common/model/pieceTreeTextBuffer/rbTreeBase","vs/base/common/mime","vs/base/common/resources","vs/base/common/async","vs/base/common/event","vs/base/common/glob","vs/editor/common/core/stringBuilder","vs/editor/common/core/textChange","vs/editor/common/model","vs/editor/common/model/pieceTreeTextBuffer/pieceTreeTextBuffer","vs/editor/common/model/pieceTreeTextBuffer/pieceTreeTextBufferBuilder","vs/platform/instantiation/common/instantiation","vs/platform/contextkey/common/contextkey","vs/workbench/contrib/notebook/common/notebookCommon","vs/base/common/types","vs/base/common/cancellation","vs/base/common/arrays","vs/editor/common/core/position","vs/editor/common/model/textModelSearch","vs/base/common/iterator","vs/workbench/contrib/notebook/common/services/notebookSimpleWorker","vs/base/common/diff/diff","vs/base/common/hash"],ie=function(te){for(var e=[],U=0,W=te.length;U<W;U++)e[U]=ne[te[U]];return e};define(ne[12],ie([0,1]),function(te,e){"use strict";var U,W,$;Object.defineProperty(e,"__esModule",{value:!0}),e.LRUCache=e.LinkedMap=e.Touch=e.ResourceSet=e.ResourceMap=e.setToString=e.mapToString=e.getOrSet=void 0;function y(d,r,s){let o=d.get(r);return o===void 0&&(o=s,d.set(r,o)),o}e.getOrSet=y;function M(d){const r=[];return d.forEach((s,o)=>{r.push(`${o} => ${s}`)}),`Map(${d.size}) {${r.join(", ")}}`}e.mapToString=M;function K(d){const r=[];return d.forEach(s=>{r.push(s)}),`Set(${d.size}) {${r.join(", ")}}`}e.setToString=K;class P{constructor(r,s){this.uri=r,this.value=s}}class w{constructor(r,s){this[U]="ResourceMap",r instanceof w?(this.b=new Map(r.b),this.c=s??w.a):(this.b=new Map,this.c=r??w.a)}set(r,s){return this.b.set(this.c(r),new P(r,s)),this}get(r){return this.b.get(this.c(r))?.value}has(r){return this.b.has(this.c(r))}get size(){return this.b.size}clear(){this.b.clear()}delete(r){return this.b.delete(this.c(r))}forEach(r,s){typeof s<"u"&&(r=r.bind(s));for(const[o,t]of this.b)r(t.value,t.uri,this)}*values(){for(const r of this.b.values())yield r.value}*keys(){for(const r of this.b.values())yield r.uri}*entries(){for(const r of this.b.values())yield[r.uri,r.value]}*[(U=Symbol.toStringTag,Symbol.iterator)](){for(const[,r]of this.b)yield[r.uri,r.value]}}e.ResourceMap=w,w.a=d=>d.toString();class I{constructor(r,s){this[W]="ResourceSet",!r||typeof r=="function"?this.a=new w(r):(this.a=new w(s),r.forEach(this.add,this))}get size(){return this.a.size}add(r){return this.a.set(r,r),this}clear(){this.a.clear()}delete(r){return this.a.delete(r)}forEach(r,s){this.a.forEach((o,t)=>r.call(s,t,t,this))}has(r){return this.a.has(r)}entries(){return this.a.entries()}keys(){return this.a.keys()}values(){return this.a.keys()}[(W=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}}e.ResourceSet=I;var k;(function(d){d[d.None=0]="None",d[d.AsOld=1]="AsOld",d[d.AsNew=2]="AsNew"})(k=e.Touch||(e.Touch={}));class m{constructor(){this[$]="LinkedMap",this.a=new Map,this.b=void 0,this.c=void 0,this.d=0,this.e=0}clear(){this.a.clear(),this.b=void 0,this.c=void 0,this.d=0,this.e++}isEmpty(){return!this.b&&!this.c}get size(){return this.d}get first(){return this.b?.value}get last(){return this.c?.value}has(r){return this.a.has(r)}get(r,s=0){const o=this.a.get(r);if(!!o)return s!==0&&this.j(o,s),o.value}set(r,s,o=0){let t=this.a.get(r);if(t)t.value=s,o!==0&&this.j(t,o);else{switch(t={key:r,value:s,next:void 0,previous:void 0},o){case 0:this.h(t);break;case 1:this.g(t);break;case 2:this.h(t);break;default:this.h(t);break}this.a.set(r,t),this.d++}return this}delete(r){return!!this.remove(r)}remove(r){const s=this.a.get(r);if(!!s)return this.a.delete(r),this.i(s),this.d--,s.value}shift(){if(!this.b&&!this.c)return;if(!this.b||!this.c)throw new Error("Invalid list");const r=this.b;return this.a.delete(r.key),this.i(r),this.d--,r.value}forEach(r,s){const o=this.e;let t=this.b;for(;t;){if(s?r.bind(s)(t.value,t.key,this):r(t.value,t.key,this),this.e!==o)throw new Error("LinkedMap got modified during iteration.");t=t.next}}keys(){const r=this,s=this.e;let o=this.b;const t={[Symbol.iterator](){return t},next(){if(r.e!==s)throw new Error("LinkedMap got modified during iteration.");if(o){const a={value:o.key,done:!1};return o=o.next,a}else return{value:void 0,done:!0}}};return t}values(){const r=this,s=this.e;let o=this.b;const t={[Symbol.iterator](){return t},next(){if(r.e!==s)throw new Error("LinkedMap got modified during iteration.");if(o){const a={value:o.value,done:!1};return o=o.next,a}else return{value:void 0,done:!0}}};return t}entries(){const r=this,s=this.e;let o=this.b;const t={[Symbol.iterator](){return t},next(){if(r.e!==s)throw new Error("LinkedMap got modified during iteration.");if(o){const a={value:[o.key,o.value],done:!1};return o=o.next,a}else return{value:void 0,done:!0}}};return t}[($=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}f(r){if(r>=this.size)return;if(r===0){this.clear();return}let s=this.b,o=this.size;for(;s&&o>r;)this.a.delete(s.key),s=s.next,o--;this.b=s,this.d=o,s&&(s.previous=void 0),this.e++}g(r){if(!this.b&&!this.c)this.c=r;else if(this.b)r.next=this.b,this.b.previous=r;else throw new Error("Invalid list");this.b=r,this.e++}h(r){if(!this.b&&!this.c)this.b=r;else if(this.c)r.previous=this.c,this.c.next=r;else throw new Error("Invalid list");this.c=r,this.e++}i(r){if(r===this.b&&r===this.c)this.b=void 0,this.c=void 0;else if(r===this.b){if(!r.next)throw new Error("Invalid list");r.next.previous=void 0,this.b=r.next}else if(r===this.c){if(!r.previous)throw new Error("Invalid list");r.previous.next=void 0,this.c=r.previous}else{const s=r.next,o=r.previous;if(!s||!o)throw new Error("Invalid list");s.previous=o,o.next=s}r.next=void 0,r.previous=void 0,this.e++}j(r,s){if(!this.b||!this.c)throw new Error("Invalid list");if(!(s!==1&&s!==2)){if(s===1){if(r===this.b)return;const o=r.next,t=r.previous;r===this.c?(t.next=void 0,this.c=t):(o.previous=t,t.next=o),r.previous=void 0,r.next=this.b,this.b.previous=r,this.b=r,this.e++}else if(s===2){if(r===this.c)return;const o=r.next,t=r.previous;r===this.b?(o.previous=void 0,this.b=o):(o.previous=t,t.next=o),r.next=void 0,r.previous=this.c,this.c.next=r,this.c=r,this.e++}}}toJSON(){const r=[];return this.forEach((s,o)=>{r.push([o,s])}),r}fromJSON(r){this.clear();for(const[s,o]of r)this.set(s,o)}}e.LinkedMap=m;class v extends m{constructor(r,s=1){super(),this.k=r,this.l=Math.min(Math.max(0,s),1)}get limit(){return this.k}set limit(r){this.k=r,this.m()}get ratio(){return this.l}set ratio(r){this.l=Math.min(Math.max(0,r),1),this.m()}get(r,s=2){return super.get(r,s)}peek(r){return super.get(r,0)}set(r,s){return super.set(r,s,2),this.m(),this}m(){this.size>this.k&&this.f(Math.round(this.k*this.l))}}e.LRUCache=v}),define(ne[13],ie([0,1,14,6]),function(te,e,U,W){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.prefixedStream=e.prefixedReadable=e.transform=e.toReadable=e.emptyStream=e.toStream=e.peekStream=e.listenStream=e.consumeStream=e.peekReadable=e.consumeReadable=e.newWriteableStream=e.isReadableBufferedStream=e.isReadableStream=e.isReadable=void 0;function $(n){const l=n;return l?typeof l.read=="function":!1}e.isReadable=$;function y(n){const l=n;return l?[l.on,l.pause,l.resume,l.destroy].every(c=>typeof c=="function"):!1}e.isReadableStream=y;function M(n){const l=n;return l?y(l.stream)&&Array.isArray(l.buffer)&&typeof l.ended=="boolean":!1}e.isReadableBufferedStream=M;function K(n,l){return new P(n,l)}e.newWriteableStream=K;class P{constructor(l,c){this.e=l,this.f=c,this.a={flowing:!1,ended:!1,destroyed:!1},this.b={data:[],error:[]},this.c={data:[],error:[],end:[]},this.d=[]}pause(){this.a.destroyed||(this.a.flowing=!1)}resume(){this.a.destroyed||this.a.flowing||(this.a.flowing=!0,this.j(),this.k(),this.l())}write(l){if(!this.a.destroyed){if(this.a.flowing)this.g(l);else if(this.b.data.push(l),typeof this.f?.highWaterMark=="number"&&this.b.data.length>this.f.highWaterMark)return new Promise(c=>this.d.push(c))}}error(l){this.a.destroyed||(this.a.flowing?this.h(l):this.b.error.push(l))}end(l){this.a.destroyed||(typeof l<"u"&&this.write(l),this.a.flowing?(this.i(),this.destroy()):this.a.ended=!0)}g(l){this.c.data.slice(0).forEach(c=>c(l))}h(l){this.c.error.length===0?(0,U.onUnexpectedError)(l):this.c.error.slice(0).forEach(c=>c(l))}i(){this.c.end.slice(0).forEach(l=>l())}on(l,c){if(!this.a.destroyed)switch(l){case"data":this.c.data.push(c),this.resume();break;case"end":this.c.end.push(c),this.a.flowing&&this.l()&&this.destroy();break;case"error":this.c.error.push(c),this.a.flowing&&this.k();break}}removeListener(l,c){if(this.a.destroyed)return;let p;switch(l){case"data":p=this.c.data;break;case"end":p=this.c.end;break;case"error":p=this.c.error;break}if(p){const C=p.indexOf(c);C>=0&&p.splice(C,1)}}j(){if(this.b.data.length>0){const l=this.e(this.b.data);this.g(l),this.b.data.length=0;const c=[...this.d];this.d.length=0,c.forEach(p=>p())}}k(){if(this.c.error.length>0){for(const l of this.b.error)this.h(l);this.b.error.length=0}}l(){return this.a.ended?(this.i(),this.c.end.length>0):!1}destroy(){this.a.destroyed||(this.a.destroyed=!0,this.a.ended=!0,this.b.data.length=0,this.b.error.length=0,this.c.data.length=0,this.c.error.length=0,this.c.end.length=0,this.d.length=0)}}function w(n,l){const c=[];let p;for(;(p=n.read())!==null;)c.push(p);return l(c)}e.consumeReadable=w;function I(n,l,c){const p=[];let C;for(;(C=n.read())!==null&&p.length<c;)p.push(C);return C===null&&p.length>0?l(p):{read:()=>{if(p.length>0)return p.shift();if(typeof C<"u"){const T=C;return C=void 0,T}return n.read()}}}e.peekReadable=I;function k(n,l){return new Promise((c,p)=>{const C=[];m(n,{onData:T=>{l&&C.push(T)},onError:T=>{l?p(T):c(void 0)},onEnd:()=>{c(l?l(C):void 0)}})})}e.consumeStream=k;function m(n,l){let c=!1;return n.on("error",p=>{c||l.onError(p)}),n.on("end",()=>{c||l.onEnd()}),n.on("data",p=>{c||l.onData(p)}),(0,W.toDisposable)(()=>c=!0)}e.listenStream=m;function v(n,l){return new Promise((c,p)=>{const C=new W.DisposableStore,T=[],g=f=>{if(T.push(f),T.length>l)return C.dispose(),n.pause(),c({stream:n,buffer:T,ended:!1})},L=f=>p(f),E=()=>c({stream:n,buffer:T,ended:!0});C.add((0,W.toDisposable)(()=>n.removeListener("error",L))),n.on("error",L),C.add((0,W.toDisposable)(()=>n.removeListener("end",E))),n.on("end",E),C.add((0,W.toDisposable)(()=>n.removeListener("data",g))),n.on("data",g)})}e.peekStream=v;function d(n,l){const c=K(l);return c.end(n),c}e.toStream=d;function r(){const n=K(()=>{throw new Error("not supported")});return n.end(),n}e.emptyStream=r;function s(n){let l=!1;return{read:()=>l?null:(l=!0,n)}}e.toReadable=s;function o(n,l,c){const p=K(c);return m(n,{onData:C=>p.write(l.data(C)),onError:C=>p.error(l.error?l.error(C):C),onEnd:()=>p.end()}),p}e.transform=o;function t(n,l,c){let p=!1;return{read:()=>{const C=l.read();return p?C:(p=!0,C!==null?c([n,C]):n)}}}e.prefixedReadable=t;function a(n,l,c){let p=!1;const C=K(c);return m(l,{onData:T=>p?C.write(T):(p=!0,C.write(c([n,T]))),onError:T=>C.error(T),onEnd:()=>{p||(p=!0,C.write(n)),C.end()}}),C}e.prefixedStream=a}),define(ne[5],ie([0,1,13]),function(te,e,U){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.encodeBase64=e.decodeBase64=e.prefixedBufferStream=e.prefixedBufferReadable=e.newWriteableBufferStream=e.streamToBufferReadableStream=e.bufferToStream=e.bufferedStreamToBuffer=e.streamToBuffer=e.bufferToReadable=e.readableToBuffer=e.writeUInt8=e.readUInt8=e.writeUInt32LE=e.readUInt32LE=e.writeUInt32BE=e.readUInt32BE=e.writeUInt16LE=e.readUInt16LE=e.VSBuffer=void 0;const W=typeof Buffer<"u";let $,y;class M{static alloc(f){return W?new M(Buffer.allocUnsafe(f)):new M(new Uint8Array(f))}static wrap(f){return W&&!Buffer.isBuffer(f)&&(f=Buffer.from(f.buffer,f.byteOffset,f.byteLength)),new M(f)}static fromString(f,N){return!(N?.dontUseNodeBuffer||!1)&&W?new M(Buffer.from(f)):($||($=new TextEncoder),new M($.encode(f)))}static fromByteArray(f){const N=M.alloc(f.length);for(let V=0,Y=f.length;V<Y;V++)N.buffer[V]=f[V];return N}static concat(f,N){if(typeof N>"u"){N=0;for(let J=0,_=f.length;J<_;J++)N+=f[J].byteLength}const V=M.alloc(N);let Y=0;for(let J=0,_=f.length;J<_;J++){const D=f[J];V.set(D,Y),Y+=D.byteLength}return V}constructor(f){this.buffer=f,this.byteLength=this.buffer.byteLength}clone(){const f=M.alloc(this.byteLength);return f.set(this),f}toString(){return W?this.buffer.toString():(y||(y=new TextDecoder),y.decode(this.buffer))}slice(f,N){return new M(this.buffer.subarray(f,N))}set(f,N){if(f instanceof M)this.buffer.set(f.buffer,N);else if(f instanceof Uint8Array)this.buffer.set(f,N);else if(f instanceof ArrayBuffer)this.buffer.set(new Uint8Array(f),N);else if(ArrayBuffer.isView(f))this.buffer.set(new Uint8Array(f.buffer,f.byteOffset,f.byteLength),N);else throw new Error("Unknown argument 'array'")}readUInt32BE(f){return w(this.buffer,f)}writeUInt32BE(f,N){I(this.buffer,f,N)}readUInt32LE(f){return k(this.buffer,f)}writeUInt32LE(f,N){m(this.buffer,f,N)}readUInt8(f){return v(this.buffer,f)}writeUInt8(f,N){d(this.buffer,f,N)}}e.VSBuffer=M;function K(E,f){return E[f+0]<<0>>>0|E[f+1]<<8>>>0}e.readUInt16LE=K;function P(E,f,N){E[N+0]=f&255,f=f>>>8,E[N+1]=f&255}e.writeUInt16LE=P;function w(E,f){return E[f]*2**24+E[f+1]*2**16+E[f+2]*2**8+E[f+3]}e.readUInt32BE=w;function I(E,f,N){E[N+3]=f,f=f>>>8,E[N+2]=f,f=f>>>8,E[N+1]=f,f=f>>>8,E[N]=f}e.writeUInt32BE=I;function k(E,f){return E[f+0]<<0>>>0|E[f+1]<<8>>>0|E[f+2]<<16>>>0|E[f+3]<<24>>>0}e.readUInt32LE=k;function m(E,f,N){E[N+0]=f&255,f=f>>>8,E[N+1]=f&255,f=f>>>8,E[N+2]=f&255,f=f>>>8,E[N+3]=f&255}e.writeUInt32LE=m;function v(E,f){return E[f]}e.readUInt8=v;function d(E,f,N){E[N]=f}e.writeUInt8=d;function r(E){return U.consumeReadable(E,f=>M.concat(f))}e.readableToBuffer=r;function s(E){return U.toReadable(E)}e.bufferToReadable=s;function o(E){return U.consumeStream(E,f=>M.concat(f))}e.streamToBuffer=o;async function t(E){return E.ended?M.concat(E.buffer):M.concat([...E.buffer,await o(E.stream)])}e.bufferedStreamToBuffer=t;function a(E){return U.toStream(E,f=>M.concat(f))}e.bufferToStream=a;function n(E){return U.transform(E,{data:f=>typeof f=="string"?M.fromString(f):M.wrap(f)},f=>M.concat(f))}e.streamToBufferReadableStream=n;function l(E){return U.newWriteableStream(f=>M.concat(f),E)}e.newWriteableBufferStream=l;function c(E,f){return U.prefixedReadable(E,f,N=>M.concat(N))}e.prefixedBufferReadable=c;function p(E,f){return U.prefixedStream(E,f,N=>M.concat(N))}e.prefixedBufferStream=p;function C(E){let f=0,N=0,V=0;const Y=new Uint8Array(Math.floor(E.length/4*3)),J=D=>{switch(N){case 3:Y[V++]=f|D,N=0;break;case 2:Y[V++]=f|D>>>2,f=D<<6,N=3;break;case 1:Y[V++]=f|D>>>4,f=D<<4,N=2;break;default:f=D<<2,N=1}};for(let D=0;D<E.length;D++){const i=E.charCodeAt(D);if(i>=65&&i<=90)J(i-65);else if(i>=97&&i<=122)J(i-97+26);else if(i>=48&&i<=57)J(i-48+52);else if(i===43||i===45)J(62);else if(i===47||i===95)J(63);else{if(i===61)break;throw new SyntaxError(`Unexpected base64 character ${E[D]}`)}}const _=V;for(;N>0;)J(0);return M.wrap(Y).slice(0,_)}e.decodeBase64=C;const T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";function L({buffer:E},f=!0,N=!1){const V=N?g:T;let Y="";const J=E.byteLength%3;let _=0;for(;_<E.byteLength-J;_+=3){const D=E[_+0],i=E[_+1],b=E[_+2];Y+=V[D>>>2],Y+=V[(D<<4|i>>>4)&63],Y+=V[(i<<2|b>>>6)&63],Y+=V[b&63]}if(J===1){const D=E[_+0];Y+=V[D>>>2],Y+=V[D<<4&63],f&&(Y+="==")}else if(J===2){const D=E[_+0],i=E[_+1];Y+=V[D>>>2],Y+=V[(D<<4|i>>>4)&63],Y+=V[i<<2&63],f&&(Y+="=")}return Y}e.encodeBase64=L}),define(ne[15],ie([0,1]),function(te,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.countEOL=e.StringEOL=void 0;var U;(function($){$[$.Unknown=0]="Unknown",$[$.Invalid=3]="Invalid",$[$.LF=1]="LF",$[$.CRLF=2]="CRLF"})(U=e.StringEOL||(e.StringEOL={}));function W($){let y=0,M=0,K=0,P=0;for(let w=0,I=$.length;w<I;w++){const k=$.charCodeAt(w);k===13?(y===0&&(M=w),y++,w+1<I&&$.charCodeAt(w+1)===10?(P|=2,w++):P|=3,K=w+1):k===10&&(P|=1,y===0&&(M=w),y++,K=w+1)}return y===0&&(M=$.length),[y,M,$.length-K,P]}e.countEOL=W}),define(ne[16],ie([0,1]),function(te,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.recomputeTreeMetadata=e.updateTreeMetadata=e.fixInsert=e.rbDelete=e.rightRotate=e.leftRotate=e.righttest=e.leftest=e.SENTINEL=e.NodeColor=e.TreeNode=void 0;class U{constructor(s,o){this.piece=s,this.color=o,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==e.SENTINEL)return $(this.right);let s=this;for(;s.parent!==e.SENTINEL&&s.parent.left!==s;)s=s.parent;return s.parent===e.SENTINEL?e.SENTINEL:s.parent}prev(){if(this.left!==e.SENTINEL)return y(this.left);let s=this;for(;s.parent!==e.SENTINEL&&s.parent.right!==s;)s=s.parent;return s.parent===e.SENTINEL?e.SENTINEL:s.parent}detach(){this.parent=null,this.left=null,this.right=null}}e.TreeNode=U;var W;(function(r){r[r.Black=0]="Black",r[r.Red=1]="Red"})(W=e.NodeColor||(e.NodeColor={})),e.SENTINEL=new U(null,0),e.SENTINEL.parent=e.SENTINEL,e.SENTINEL.left=e.SENTINEL,e.SENTINEL.right=e.SENTINEL,e.SENTINEL.color=0;function $(r){for(;r.left!==e.SENTINEL;)r=r.left;return r}e.leftest=$;function y(r){for(;r.right!==e.SENTINEL;)r=r.right;return r}e.righttest=y;function M(r){return r===e.SENTINEL?0:r.size_left+r.piece.length+M(r.right)}function K(r){return r===e.SENTINEL?0:r.lf_left+r.piece.lineFeedCnt+K(r.right)}function P(){e.SENTINEL.parent=e.SENTINEL}function w(r,s){const o=s.right;o.size_left+=s.size_left+(s.piece?s.piece.length:0),o.lf_left+=s.lf_left+(s.piece?s.piece.lineFeedCnt:0),s.right=o.left,o.left!==e.SENTINEL&&(o.left.parent=s),o.parent=s.parent,s.parent===e.SENTINEL?r.root=o:s.parent.left===s?s.parent.left=o:s.parent.right=o,o.left=s,s.parent=o}e.leftRotate=w;function I(r,s){const o=s.left;s.left=o.right,o.right!==e.SENTINEL&&(o.right.parent=s),o.parent=s.parent,s.size_left-=o.size_left+(o.piece?o.piece.length:0),s.lf_left-=o.lf_left+(o.piece?o.piece.lineFeedCnt:0),s.parent===e.SENTINEL?r.root=o:s===s.parent.right?s.parent.right=o:s.parent.left=o,o.right=s,s.parent=o}e.rightRotate=I;function k(r,s){let o,t;if(s.left===e.SENTINEL?(t=s,o=t.right):s.right===e.SENTINEL?(t=s,o=t.left):(t=$(s.right),o=t.right),t===r.root){r.root=o,o.color=0,s.detach(),P(),r.root.parent=e.SENTINEL;return}const a=t.color===1;if(t===t.parent.left?t.parent.left=o:t.parent.right=o,t===s?(o.parent=t.parent,d(r,o)):(t.parent===s?o.parent=t:o.parent=t.parent,d(r,o),t.left=s.left,t.right=s.right,t.parent=s.parent,t.color=s.color,s===r.root?r.root=t:s===s.parent.left?s.parent.left=t:s.parent.right=t,t.left!==e.SENTINEL&&(t.left.parent=t),t.right!==e.SENTINEL&&(t.right.parent=t),t.size_left=s.size_left,t.lf_left=s.lf_left,d(r,t)),s.detach(),o.parent.left===o){const l=M(o),c=K(o);if(l!==o.parent.size_left||c!==o.parent.lf_left){const p=l-o.parent.size_left,C=c-o.parent.lf_left;o.parent.size_left=l,o.parent.lf_left=c,v(r,o.parent,p,C)}}if(d(r,o.parent),a){P();return}let n;for(;o!==r.root&&o.color===0;)o===o.parent.left?(n=o.parent.right,n.color===1&&(n.color=0,o.parent.color=1,w(r,o.parent),n=o.parent.right),n.left.color===0&&n.right.color===0?(n.color=1,o=o.parent):(n.right.color===0&&(n.left.color=0,n.color=1,I(r,n),n=o.parent.right),n.color=o.parent.color,o.parent.color=0,n.right.color=0,w(r,o.parent),o=r.root)):(n=o.parent.left,n.color===1&&(n.color=0,o.parent.color=1,I(r,o.parent),n=o.parent.left),n.left.color===0&&n.right.color===0?(n.color=1,o=o.parent):(n.left.color===0&&(n.right.color=0,n.color=1,w(r,n),n=o.parent.left),n.color=o.parent.color,o.parent.color=0,n.left.color=0,I(r,o.parent),o=r.root));o.color=0,P()}e.rbDelete=k;function m(r,s){for(d(r,s);s!==r.root&&s.parent.color===1;)if(s.parent===s.parent.parent.left){const o=s.parent.parent.right;o.color===1?(s.parent.color=0,o.color=0,s.parent.parent.color=1,s=s.parent.parent):(s===s.parent.right&&(s=s.parent,w(r,s)),s.parent.color=0,s.parent.parent.color=1,I(r,s.parent.parent))}else{const o=s.parent.parent.left;o.color===1?(s.parent.color=0,o.color=0,s.parent.parent.color=1,s=s.parent.parent):(s===s.parent.left&&(s=s.parent,I(r,s)),s.parent.color=0,s.parent.parent.color=1,w(r,s.parent.parent))}r.root.color=0}e.fixInsert=m;function v(r,s,o,t){for(;s!==r.root&&s!==e.SENTINEL;)s.parent.left===s&&(s.parent.size_left+=o,s.parent.lf_left+=t),s=s.parent}e.updateTreeMetadata=v;function d(r,s){let o=0,t=0;if(s!==r.root){for(;s!==r.root&&s===s.parent.right;)s=s.parent;if(s!==r.root)for(s=s.parent,o=M(s.left)-s.size_left,t=K(s.left)-s.lf_left,s.size_left+=o,s.lf_left+=t;s!==r.root&&(o!==0||t!==0);)s.parent.left===s&&(s.parent.size_left+=o,s.parent.lf_left+=t),s=s.parent}}e.recomputeTreeMetadata=d}),define(ne[17],ie([0,1,4]),function(te,e,U){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.normalizeMimeType=e.getExtensionForMimeType=e.getMediaMime=e.getMediaOrTextMime=e.Mimes=void 0,e.Mimes=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"});const W={".css":"text/css",".csv":"text/csv",".htm":"text/html",".html":"text/html",".ics":"text/calendar",".js":"text/javascript",".mjs":"text/javascript",".txt":"text/plain",".xml":"text/xml"},$={".aac":"audio/x-aac",".avi":"video/x-msvideo",".bmp":"image/bmp",".flv":"video/x-flv",".gif":"image/gif",".ico":"image/x-icon",".jpe":"image/jpg",".jpeg":"image/jpg",".jpg":"image/jpg",".m1v":"video/mpeg",".m2a":"audio/mpeg",".m2v":"video/mpeg",".m3a":"audio/mpeg",".mid":"audio/midi",".midi":"audio/midi",".mk3d":"video/x-matroska",".mks":"video/x-matroska",".mkv":"video/x-matroska",".mov":"video/quicktime",".movie":"video/x-sgi-movie",".mp2":"audio/mpeg",".mp2a":"audio/mpeg",".mp3":"audio/mpeg",".mp4":"video/mp4",".mp4a":"audio/mp4",".mp4v":"video/mp4",".mpe":"video/mpeg",".mpeg":"video/mpeg",".mpg":"video/mpeg",".mpg4":"video/mp4",".mpga":"audio/mpeg",".oga":"audio/ogg",".ogg":"audio/ogg",".opus":"audio/opus",".ogv":"video/ogg",".png":"image/png",".psd":"image/vnd.adobe.photoshop",".qt":"video/quicktime",".spx":"audio/ogg",".svg":"image/svg+xml",".tga":"image/x-tga",".tif":"image/tiff",".tiff":"image/tiff",".wav":"audio/x-wav",".webm":"video/webm",".webp":"image/webp",".wma":"audio/x-ms-wma",".wmv":"video/x-ms-wmv",".woff":"application/font-woff"};function y(I){const k=(0,U.extname)(I),m=W[k.toLowerCase()];return m!==void 0?m:M(I)}e.getMediaOrTextMime=y;function M(I){const k=(0,U.extname)(I);return $[k.toLowerCase()]}e.getMediaMime=M;function K(I){for(const k in $)if($[k]===I)return k}e.getExtensionForMimeType=K;const P=/^(.+)\/(.+?)(;.+)?$/;function w(I,k){const m=P.exec(I);return m?`${m[1].toLowerCase()}/${m[2].toLowerCase()}${m[3]??""}`:k?void 0:I}e.normalizeMimeType=w}),define(ne[7],ie([0,1,4,2,3,30]),function(te,e,U,W,$,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.randomPath=e.parseLineAndColumnAware=e.indexOfPath=e.getDriveLetter=e.hasDriveLetter=e.isRootOrDriveLetter=e.sanitizeFilePath=e.isWindowsDriveLetter=e.isEqualOrParent=e.isEqual=e.isValidBasename=e.isUNC=e.getRoot=e.toPosixPath=e.toSlashes=e.isPathSeparator=void 0;function M(g){return g===47||g===92}e.isPathSeparator=M;function K(g){return g.replace(/[\\/]/g,U.posix.sep)}e.toSlashes=K;function P(g){return g.indexOf("/")===-1&&(g=K(g)),/^[a-zA-Z]:(\/|$)/.test(g)&&(g="/"+g),g}e.toPosixPath=P;function w(g,L=U.posix.sep){if(!g)return"";const E=g.length,f=g.charCodeAt(0);if(M(f)){if(M(g.charCodeAt(1))&&!M(g.charCodeAt(2))){let V=3;const Y=V;for(;V<E&&!M(g.charCodeAt(V));V++);if(Y!==V&&!M(g.charCodeAt(V+1))){for(V+=1;V<E;V++)if(M(g.charCodeAt(V)))return g.slice(0,V+1).replace(/[\\/]/g,L)}}return L}else if(o(f)&&g.charCodeAt(1)===58)return M(g.charCodeAt(2))?g.slice(0,2)+L:g.slice(0,2);let N=g.indexOf("://");if(N!==-1){for(N+=3;N<E;N++)if(M(g.charCodeAt(N)))return g.slice(0,N+1)}return""}e.getRoot=w;function I(g){if(!W.isWindows||!g||g.length<5)return!1;let L=g.charCodeAt(0);if(L!==92||(L=g.charCodeAt(1),L!==92))return!1;let E=2;const f=E;for(;E<g.length&&(L=g.charCodeAt(E),L!==92);E++);return!(f===E||(L=g.charCodeAt(E+1),isNaN(L)||L===92))}e.isUNC=I;const k=/[\\/:\*\?"<>\|]/g,m=/[\\/]/g,v=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function d(g,L=W.isWindows){const E=L?k:m;return!(!g||g.length===0||/^\s+$/.test(g)||(E.lastIndex=0,E.test(g))||L&&v.test(g)||g==="."||g===".."||L&&g[g.length-1]==="."||L&&g.length!==g.trim().length||g.length>255)}e.isValidBasename=d;function r(g,L,E){const f=g===L;return!E||f?f:!g||!L?!1:(0,$.equalsIgnoreCase)(g,L)}e.isEqual=r;function s(g,L,E,f=U.sep){if(g===L)return!0;if(!g||!L||L.length>g.length)return!1;if(E){if(!(0,$.startsWithIgnoreCase)(g,L))return!1;if(L.length===g.length)return!0;let V=L.length;return L.charAt(L.length-1)===f&&V--,g.charAt(V)===f}return L.charAt(L.length-1)!==f&&(L+=f),g.indexOf(L)===0}e.isEqualOrParent=s;function o(g){return g>=65&&g<=90||g>=97&&g<=122}e.isWindowsDriveLetter=o;function t(g,L){return W.isWindows&&g.endsWith(":")&&(g+=U.sep),(0,U.isAbsolute)(g)||(g=(0,U.join)(L,g)),g=(0,U.normalize)(g),W.isWindows?(g=(0,$.rtrim)(g,U.sep),g.endsWith(":")&&(g+=U.sep)):(g=(0,$.rtrim)(g,U.sep),g||(g=U.sep)),g}e.sanitizeFilePath=t;function a(g){const L=(0,U.normalize)(g);return W.isWindows?g.length>3?!1:n(L)&&(g.length===2||L.charCodeAt(2)===92):L===U.posix.sep}e.isRootOrDriveLetter=a;function n(g,L=W.isWindows){return L?o(g.charCodeAt(0))&&g.charCodeAt(1)===58:!1}e.hasDriveLetter=n;function l(g){return n(g)?g[0]:void 0}e.getDriveLetter=l;function c(g,L,E){return L.length>g.length?-1:g===L?0:(E&&(g=g.toLowerCase(),L=L.toLowerCase()),g.indexOf(L))}e.indexOfPath=c;function p(g){const L=g.split(":");let E,f,N;for(const V of L){const Y=Number(V);(0,y.isNumber)(Y)?f===void 0?f=Y:N===void 0&&(N=Y):E=E?[E,V].join(":"):V}if(!E)throw new Error("Format for `--goto` should be: `FILE:LINE(:COLUMN)`");return{path:E,line:f!==void 0?f:void 0,column:N!==void 0?N:f!==void 0?1:void 0}}e.parseLineAndColumnAware=p;const C="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function T(g,L,E=8){let f="";for(let V=0;V<E;V++)f+=C.charAt(Math.floor(Math.random()*C.length));let N;return L?N=`${L}-${f}`:N=f,g?(0,U.join)(g,N):N}e.randomPath=T}),define(ne[8],ie([0,1,2,9]),function(te,e,U,W){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.COI=e.FileAccess=e.nodeModulesAsarUnpackedPath=e.nodeModulesAsarPath=e.nodeModulesPath=e.builtinExtensionsPath=e.RemoteAuthorities=e.connectionTokenQueryName=e.connectionTokenCookieName=e.Schemas=void 0;var $;(function(P){P.inMemory="inmemory",P.vscode="vscode",P.internal="private",P.walkThrough="walkThrough",P.walkThroughSnippet="walkThroughSnippet",P.http="http",P.https="https",P.file="file",P.mailto="mailto",P.untitled="untitled",P.data="data",P.command="command",P.vscodeRemote="vscode-remote",P.vscodeRemoteResource="vscode-remote-resource",P.vscodeUserData="vscode-userdata",P.vscodeCustomEditor="vscode-custom-editor",P.vscodeNotebook="vscode-notebook",P.vscodeNotebookCell="vscode-notebook-cell",P.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",P.vscodeNotebookCellOutput="vscode-notebook-cell-output",P.vscodeInteractive="vscode-interactive",P.vscodeInteractiveInput="vscode-interactive-input",P.vscodeSettings="vscode-settings",P.vscodeWorkspaceTrust="vscode-workspace-trust",P.vscodeTerminal="vscode-terminal",P.webviewPanel="webview-panel",P.vscodeWebview="vscode-webview",P.extension="extension",P.vscodeFileResource="vscode-file",P.tmp="tmp",P.vsls="vsls",P.vscodeSourceControl="vscode-scm"})($=e.Schemas||(e.Schemas={})),e.connectionTokenCookieName="vscode-tkn",e.connectionTokenQueryName="tkn";class y{constructor(){this.a=Object.create(null),this.b=Object.create(null),this.c=Object.create(null),this.d="http",this.e=null,this.f=`/${$.vscodeRemoteResource}`}setPreferredWebSchema(w){this.d=w}setDelegate(w){this.e=w}setServerRootPath(w){this.f=`${w}/${$.vscodeRemoteResource}`}set(w,I,k){this.a[w]=I,this.b[w]=k}setConnectionToken(w,I){this.c[w]=I}getPreferredWebSchema(){return this.d}rewrite(w){if(this.e)return this.e(w);const I=w.authority;let k=this.a[I];k&&k.indexOf(":")!==-1&&k.indexOf("[")===-1&&(k=`[${k}]`);const m=this.b[I],v=this.c[I];let d=`path=${encodeURIComponent(w.path)}`;return typeof v=="string"&&(d+=`&${e.connectionTokenQueryName}=${encodeURIComponent(v)}`),W.URI.from({scheme:U.isWeb?this.d:$.vscodeRemoteResource,authority:`${k}:${m}`,path:this.f,query:d})}}e.RemoteAuthorities=new y,e.builtinExtensionsPath="vs/../../extensions",e.nodeModulesPath="vs/../../node_modules",e.nodeModulesAsarPath="vs/../../node_modules.asar",e.nodeModulesAsarUnpackedPath="vs/../../node_modules.asar.unpacked";class M{asBrowserUri(w){const I=this.b(w,te);return this.uriToBrowserUri(I)}uriToBrowserUri(w){return w.scheme===$.vscodeRemote?e.RemoteAuthorities.rewrite(w):w.scheme===$.file&&(U.isNative||U.isWebWorker&&U.globals.origin===`${$.vscodeFileResource}://${M.a}`)?w.with({scheme:$.vscodeFileResource,authority:w.authority||M.a,query:null,fragment:null}):w}asFileUri(w){const I=this.b(w,te);return this.uriToFileUri(I)}uriToFileUri(w){return w.scheme===$.vscodeFileResource?w.with({scheme:$.file,authority:w.authority!==M.a?w.authority:null,query:null,fragment:null}):w}b(w,I){return W.URI.isUri(w)?w:W.URI.parse(I.toUrl(w))}}M.a="vscode-app",e.FileAccess=new M;var K;(function(P){const w=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);P.CoopAndCoep=Object.freeze(w.get("3"));const I="vscode-coi";function k(v){let d;typeof v=="string"?d=new URL(v).searchParams:v instanceof URL?d=v.searchParams:W.URI.isUri(v)&&(d=new URL(v.toString(!0)).searchParams);const r=d?.get(I);if(!!r)return w.get(r)}P.getHeadersFromQuery=k;function m(v,d,r){if(!globalThis.crossOriginIsolated)return;const s=d&&r?"3":r?"2":"1";v instanceof URLSearchParams?v.set(I,s):v[I]=s}P.addSearchParam=m})(K=e.COI||(e.COI={}))}),define(ne[18],ie([0,1,7,8,4,2,3,9]),function(te,e,U,W,$,y,M,K){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toLocalResource=e.DataUri=e.distinctParents=e.addTrailingPathSeparator=e.removeTrailingPathSeparator=e.hasTrailingPathSeparator=e.isEqualAuthority=e.isAbsolutePath=e.resolvePath=e.relativePath=e.normalizePath=e.joinPath=e.dirname=e.extname=e.basename=e.basenameOrAuthority=e.getComparisonKey=e.isEqualOrParent=e.isEqual=e.extUriIgnorePathCase=e.extUriBiasedIgnorePathCase=e.extUri=e.ExtUri=e.originalFSPath=void 0;function P(v){return(0,K.uriToFsPath)(v,!0)}e.originalFSPath=P;class w{constructor(d){this.a=d}compare(d,r,s=!1){return d===r?0:(0,M.compare)(this.getComparisonKey(d,s),this.getComparisonKey(r,s))}isEqual(d,r,s=!1){return d===r?!0:!d||!r?!1:this.getComparisonKey(d,s)===this.getComparisonKey(r,s)}getComparisonKey(d,r=!1){return d.with({path:this.a(d)?d.path.toLowerCase():void 0,fragment:r?null:void 0}).toString()}ignorePathCasing(d){return this.a(d)}isEqualOrParent(d,r,s=!1){if(d.scheme===r.scheme){if(d.scheme===W.Schemas.file)return U.isEqualOrParent(P(d),P(r),this.a(d))&&d.query===r.query&&(s||d.fragment===r.fragment);if((0,e.isEqualAuthority)(d.authority,r.authority))return U.isEqualOrParent(d.path,r.path,this.a(d),"/")&&d.query===r.query&&(s||d.fragment===r.fragment)}return!1}joinPath(d,...r){return K.URI.joinPath(d,...r)}basenameOrAuthority(d){return(0,e.basename)(d)||d.authority}basename(d){return $.posix.basename(d.path)}extname(d){return $.posix.extname(d.path)}dirname(d){if(d.path.length===0)return d;let r;return d.scheme===W.Schemas.file?r=K.URI.file($.dirname(P(d))).path:(r=$.posix.dirname(d.path),d.authority&&r.length&&r.charCodeAt(0)!==47&&(console.error(`dirname("${d.toString})) resulted in a relative path`),r="/")),d.with({path:r})}normalizePath(d){if(!d.path.length)return d;let r;return d.scheme===W.Schemas.file?r=K.URI.file($.normalize(P(d))).path:r=$.posix.normalize(d.path),d.with({path:r})}relativePath(d,r){if(d.scheme!==r.scheme||!(0,e.isEqualAuthority)(d.authority,r.authority))return;if(d.scheme===W.Schemas.file){const t=$.relative(P(d),P(r));return y.isWindows?U.toSlashes(t):t}let s=d.path||"/";const o=r.path||"/";if(this.a(d)){let t=0;for(const a=Math.min(s.length,o.length);t<a&&!(s.charCodeAt(t)!==o.charCodeAt(t)&&s.charAt(t).toLowerCase()!==o.charAt(t).toLowerCase());t++);s=o.substr(0,t)+s.substr(t)}return $.posix.relative(s,o)}resolvePath(d,r){if(d.scheme===W.Schemas.file){const s=K.URI.file($.resolve(P(d),r));return d.with({authority:s.authority,path:s.path})}return r=U.toPosixPath(r),d.with({path:$.posix.resolve(d.path,r)})}isAbsolutePath(d){return!!d.path&&d.path[0]==="/"}isEqualAuthority(d,r){return d===r||d!==void 0&&r!==void 0&&(0,M.equalsIgnoreCase)(d,r)}hasTrailingPathSeparator(d,r=$.sep){if(d.scheme===W.Schemas.file){const s=P(d);return s.length>U.getRoot(s).length&&s[s.length-1]===r}else{const s=d.path;return s.length>1&&s.charCodeAt(s.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(d.fsPath)}}removeTrailingPathSeparator(d,r=$.sep){return(0,e.hasTrailingPathSeparator)(d,r)?d.with({path:d.path.substr(0,d.path.length-1)}):d}addTrailingPathSeparator(d,r=$.sep){let s=!1;if(d.scheme===W.Schemas.file){const o=P(d);s=o!==void 0&&o.length===U.getRoot(o).length&&o[o.length-1]===r}else{r="/";const o=d.path;s=o.length===1&&o.charCodeAt(o.length-1)===47}return!s&&!(0,e.hasTrailingPathSeparator)(d,r)?d.with({path:d.path+"/"}):d}}e.ExtUri=w,e.extUri=new w(()=>!1),e.extUriBiasedIgnorePathCase=new w(v=>v.scheme===W.Schemas.file?!y.isLinux:!0),e.extUriIgnorePathCase=new w(v=>!0),e.isEqual=e.extUri.isEqual.bind(e.extUri),e.isEqualOrParent=e.extUri.isEqualOrParent.bind(e.extUri),e.getComparisonKey=e.extUri.getComparisonKey.bind(e.extUri),e.basenameOrAuthority=e.extUri.basenameOrAuthority.bind(e.extUri),e.basename=e.extUri.basename.bind(e.extUri),e.extname=e.extUri.extname.bind(e.extUri),e.dirname=e.extUri.dirname.bind(e.extUri),e.joinPath=e.extUri.joinPath.bind(e.extUri),e.normalizePath=e.extUri.normalizePath.bind(e.extUri),e.relativePath=e.extUri.relativePath.bind(e.extUri),e.resolvePath=e.extUri.resolvePath.bind(e.extUri),e.isAbsolutePath=e.extUri.isAbsolutePath.bind(e.extUri),e.isEqualAuthority=e.extUri.isEqualAuthority.bind(e.extUri),e.hasTrailingPathSeparator=e.extUri.hasTrailingPathSeparator.bind(e.extUri),e.removeTrailingPathSeparator=e.extUri.removeTrailingPathSeparator.bind(e.extUri),e.addTrailingPathSeparator=e.extUri.addTrailingPathSeparator.bind(e.extUri);function I(v,d){const r=[];for(let s=0;s<v.length;s++){const o=d(v[s]);v.some((t,a)=>a===s?!1:(0,e.isEqualOrParent)(o,d(t)))||r.push(v[s])}return r}e.distinctParents=I;var k;(function(v){v.META_DATA_LABEL="label",v.META_DATA_DESCRIPTION="description",v.META_DATA_SIZE="size",v.META_DATA_MIME="mime";function d(r){const s=new Map;r.path.substring(r.path.indexOf(";")+1,r.path.lastIndexOf(";")).split(";").forEach(a=>{const[n,l]=a.split(":");n&&l&&s.set(n,l)});const t=r.path.substring(0,r.path.indexOf(";"));return t&&s.set(v.META_DATA_MIME,t),s}v.parseMetaData=d})(k=e.DataUri||(e.DataUri={}));function m(v,d,r){if(d){let s=v.path;return s&&s[0]!==$.posix.sep&&(s=$.posix.sep+s),v.with({scheme:r,authority:d,path:s})}return v.with({scheme:r})}e.toLocalResource=m}),define(ne[19],ie([0,1,31,14,20,6,18,2]),function(te,e,U,W,$,y,M,K){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createCancelableAsyncIterable=e.CancelableAsyncIterableObject=e.AsyncIterableObject=e.Promises=e.DeferredPromise=e.IntervalCounter=e.TaskSequentializer=e.retry=e.IdleValue=e.runWhenIdle=e.ThrottledWorker=e.RunOnceWorker=e.ProcessTimeRunOnceScheduler=e.RunOnceScheduler=e.IntervalTimer=e.TimeoutTimer=e.ResourceQueue=e.Queue=e.Limiter=e.firstParallel=e.first=e.sequence=e.disposableTimeout=e.timeout=e.AutoOpenBarrier=e.Barrier=e.ThrottledDelayer=e.Delayer=e.MicrotaskDelay=e.SequencerByKey=e.Sequencer=e.Throttler=e.asPromise=e.raceTimeout=e.raceCancellablePromises=e.raceCancellationError=e.raceCancellation=e.createCancelablePromise=e.isThenable=void 0;function P(q){return!!q&&typeof q.then=="function"}e.isThenable=P;function w(q){const u=new U.CancellationTokenSource,S=q(u.token),R=new Promise((F,Q)=>{const x=u.token.onCancellationRequested(()=>{x.dispose(),u.dispose(),Q(new W.CancellationError)});Promise.resolve(S).then(ee=>{x.dispose(),u.dispose(),F(ee)},ee=>{x.dispose(),u.dispose(),Q(ee)})});return new class{cancel(){u.cancel()}then(F,Q){return R.then(F,Q)}catch(F){return this.then(void 0,F)}finally(F){return R.finally(F)}}}e.createCancelablePromise=w;function I(q,u,S){return new Promise((R,F)=>{const Q=u.onCancellationRequested(()=>{Q.dispose(),R(S)});q.then(R,F).finally(()=>Q.dispose())})}e.raceCancellation=I;function k(q,u){return new Promise((S,R)=>{const F=u.onCancellationRequested(()=>{F.dispose(),R(new W.CancellationError)});q.then(S,R).finally(()=>F.dispose())})}e.raceCancellationError=k;async function m(q){let u=-1;const S=q.map((F,Q)=>F.then(x=>(u=Q,x))),R=await Promise.race(S);return q.forEach((F,Q)=>{Q!==u&&F.cancel()}),R}e.raceCancellablePromises=m;function v(q,u,S){let R;const F=setTimeout(()=>{R?.(void 0),S?.()},u);return Promise.race([q.finally(()=>clearTimeout(F)),new Promise(Q=>R=Q)])}e.raceTimeout=v;function d(q){return new Promise((u,S)=>{const R=q();P(R)?R.then(u,S):u(R)})}e.asPromise=d;class r{constructor(){this.a=null,this.b=null,this.d=null}queue(u){if(this.a){if(this.d=u,!this.b){const S=()=>{this.b=null;const R=this.queue(this.d);return this.d=null,R};this.b=new Promise(R=>{this.a.then(S,S).then(R)})}return new Promise((S,R)=>{this.b.then(S,R)})}return this.a=u(),new Promise((S,R)=>{this.a.then(F=>{this.a=null,S(F)},F=>{this.a=null,R(F)})})}}e.Throttler=r;class s{constructor(){this.a=Promise.resolve(null)}queue(u){return this.a=this.a.then(()=>u(),()=>u())}}e.Sequencer=s;class o{constructor(){this.a=new Map}queue(u,S){const F=(this.a.get(u)??Promise.resolve()).catch(()=>{}).then(S).finally(()=>{this.a.get(u)===F&&this.a.delete(u)});return this.a.set(u,F),F}}e.SequencerByKey=o;const t=(q,u)=>{let S=!0;const R=setTimeout(()=>{S=!1,u()},q);return{isTriggered:()=>S,dispose:()=>{clearTimeout(R),S=!1}}},a=q=>{let u=!0;return queueMicrotask(()=>{u&&(u=!1,q())}),{isTriggered:()=>u,dispose:()=>{u=!1}}};e.MicrotaskDelay=Symbol("MicrotaskDelay");class n{constructor(u){this.defaultDelay=u,this.a=null,this.b=null,this.d=null,this.f=null,this.g=null}trigger(u,S=this.defaultDelay){this.g=u,this.h(),this.b||(this.b=new Promise((F,Q)=>{this.d=F,this.f=Q}).then(()=>{if(this.b=null,this.d=null,this.g){const F=this.g;return this.g=null,F()}}));const R=()=>{this.a=null,this.d?.(null)};return this.a=S===e.MicrotaskDelay?a(R):t(S,R),this.b}isTriggered(){return!!this.a?.isTriggered()}cancel(){this.h(),this.b&&(this.f?.(new W.CancellationError),this.b=null)}h(){this.a?.dispose(),this.a=null}dispose(){this.cancel()}}e.Delayer=n;class l{constructor(u){this.a=new n(u),this.b=new r}trigger(u,S){return this.a.trigger(()=>this.b.queue(u),S)}isTriggered(){return this.a.isTriggered()}cancel(){this.a.cancel()}dispose(){this.a.dispose()}}e.ThrottledDelayer=l;class c{constructor(){this.a=!1,this.b=new Promise((u,S)=>{this.d=u})}isOpen(){return this.a}open(){this.a=!0,this.d(!0)}wait(){return this.b}}e.Barrier=c;class p extends c{constructor(u){super(),this.f=setTimeout(()=>this.open(),u)}open(){clearTimeout(this.f),super.open()}}e.AutoOpenBarrier=p;function C(q,u){return u?new Promise((S,R)=>{const F=setTimeout(()=>{Q.dispose(),S()},q),Q=u.onCancellationRequested(()=>{clearTimeout(F),Q.dispose(),R(new W.CancellationError)})}):w(S=>C(q,S))}e.timeout=C;function T(q,u=0){const S=setTimeout(q,u);return(0,y.toDisposable)(()=>clearTimeout(S))}e.disposableTimeout=T;function g(q){const u=[];let S=0;const R=q.length;function F(){return S<R?q[S++]():null}function Q(x){x!=null&&u.push(x);const ee=F();return ee?ee.then(Q):Promise.resolve(u)}return Promise.resolve(null).then(Q)}e.sequence=g;function L(q,u=R=>!!R,S=null){let R=0;const F=q.length,Q=()=>{if(R>=F)return Promise.resolve(S);const x=q[R++];return Promise.resolve(x()).then(re=>u(re)?Promise.resolve(re):Q())};return Q()}e.first=L;function E(q,u=R=>!!R,S=null){if(q.length===0)return Promise.resolve(S);let R=q.length;const F=()=>{R=-1;for(const Q of q)Q.cancel?.()};return new Promise((Q,x)=>{for(const ee of q)ee.then(re=>{--R>=0&&u(re)?(F(),Q(re)):R===0&&Q(S)}).catch(re=>{--R>=0&&(F(),x(re))})})}e.firstParallel=E;class f{constructor(u){this.a=0,this.d=u,this.f=[],this.b=0,this.g=new $.Emitter}get onDrained(){return this.g.event}get size(){return this.a}queue(u){return this.a++,new Promise((S,R)=>{this.f.push({factory:u,c:S,e:R}),this.h()})}h(){for(;this.f.length&&this.b<this.d;){const u=this.f.shift();this.b++;const S=u.factory();S.then(u.c,u.e),S.then(()=>this.j(),()=>this.j())}}j(){this.a--,this.b--,this.f.length>0?this.h():this.g.fire()}dispose(){this.g.dispose()}}e.Limiter=f;class N extends f{constructor(){super(1)}}e.Queue=N;class V{constructor(){this.a=new Map,this.b=new Set}async whenDrained(){if(this.d())return;const u=new A;return this.b.add(u),u.p}d(){for(const[,u]of this.a)if(u.size>0)return!1;return!0}queueFor(u,S=M.extUri){const R=S.getComparisonKey(u);let F=this.a.get(R);return F||(F=new N,$.Event.once(F.onDrained)(()=>{F?.dispose(),this.a.delete(R),this.f()}),this.a.set(R,F)),F}f(){!this.d()||this.g()}g(){for(const u of this.b)u.complete();this.b.clear()}dispose(){for(const[,u]of this.a)u.dispose();this.a.clear(),this.g()}}e.ResourceQueue=V;class Y{constructor(u,S){this.a=-1,typeof u=="function"&&typeof S=="number"&&this.setIfNotSet(u,S)}dispose(){this.cancel()}cancel(){this.a!==-1&&(clearTimeout(this.a),this.a=-1)}cancelAndSet(u,S){this.cancel(),this.a=setTimeout(()=>{this.a=-1,u()},S)}setIfNotSet(u,S){this.a===-1&&(this.a=setTimeout(()=>{this.a=-1,u()},S))}}e.TimeoutTimer=Y;class J{constructor(){this.a=-1}dispose(){this.cancel()}cancel(){this.a!==-1&&(clearInterval(this.a),this.a=-1)}cancelAndSet(u,S){this.cancel(),this.a=setInterval(()=>{u()},S)}}e.IntervalTimer=J;class _{constructor(u,S){this.b=-1,this.a=u,this.d=S,this.f=this.g.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearTimeout(this.b),this.b=-1)}schedule(u=this.d){this.cancel(),this.b=setTimeout(this.f,u)}get delay(){return this.d}set delay(u){this.d=u}isScheduled(){return this.b!==-1}g(){this.b=-1,this.a&&this.h()}h(){this.a?.()}}e.RunOnceScheduler=_;class D{constructor(u,S){S%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${S}ms is not a multiple of 1000ms.`),this.a=u,this.b=S,this.d=0,this.f=-1,this.g=this.h.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearInterval(this.f),this.f=-1)}schedule(u=this.b){u%1e3!==0&&console.warn(`ProcessTimeRunOnceScheduler resolution is 1s, ${u}ms is not a multiple of 1000ms.`),this.cancel(),this.d=Math.ceil(u/1e3),this.f=setInterval(this.g,1e3)}isScheduled(){return this.f!==-1}h(){this.d--,!(this.d>0)&&(clearInterval(this.f),this.f=-1,this.a?.())}}e.ProcessTimeRunOnceScheduler=D;class i extends _{constructor(u,S){super(u,S),this.j=[]}work(u){this.j.push(u),this.isScheduled()||this.schedule()}h(){const u=this.j;this.j=[],this.a?.(u)}dispose(){this.j=[],super.dispose()}}e.RunOnceWorker=i;class b extends y.Disposable{constructor(u,S){super(),this.g=u,this.h=S,this.a=[],this.b=this.B(new y.MutableDisposable),this.f=!1}get pending(){return this.a.length}work(u){if(this.f)return!1;if(typeof this.g.maxBufferedWork=="number"){if(this.b.value){if(this.pending+u.length>this.g.maxBufferedWork)return!1}else if(this.pending+u.length-this.g.maxWorkChunkSize>this.g.maxBufferedWork)return!1}return this.a.push(...u),this.b.value||this.j(),!0}j(){this.h(this.a.splice(0,this.g.maxWorkChunkSize)),this.a.length>0&&(this.b.value=new _(()=>{this.b.clear(),this.j()},this.g.throttleDelay),this.b.value.schedule())}dispose(){super.dispose(),this.f=!0}}e.ThrottledWorker=b,function(){typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"?e.runWhenIdle=q=>{(0,K.setTimeout0)(()=>{if(u)return;const S=Date.now()+15;q(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,S-Date.now())}}))});let u=!1;return{dispose(){u||(u=!0)}}}:e.runWhenIdle=(q,u)=>{const S=requestIdleCallback(q,typeof u=="number"?{timeout:u}:void 0);let R=!1;return{dispose(){R||(R=!0,cancelIdleCallback(S))}}}}();class O{constructor(u){this.d=!1,this.a=()=>{try{this.f=u()}catch(S){this.g=S}finally{this.d=!0}},this.b=(0,e.runWhenIdle)(()=>this.a())}dispose(){this.b.dispose()}get value(){if(this.d||(this.b.dispose(),this.a()),this.g)throw this.g;return this.f}get isInitialized(){return this.d}}e.IdleValue=O;async function h(q,u,S){let R;for(let F=0;F<S;F++)try{return await q()}catch(Q){R=Q,await C(u)}throw R}e.retry=h;class H{hasPending(u){return this.a?typeof u=="number"?this.a.taskId===u:!!this.a:!1}get pending(){return this.a?.promise}cancelPending(){this.a?.cancel()}setPending(u,S,R){return this.a={taskId:u,cancel:()=>R?.(),promise:S},S.then(()=>this.d(u),()=>this.d(u)),S}d(u){this.a&&u===this.a.taskId&&(this.a=void 0,this.f())}f(){if(this.b){const u=this.b;this.b=void 0,u.run().then(u.promiseResolve,u.promiseReject)}}setNext(u){if(this.b)this.b.run=u;else{let S,R;const F=new Promise((Q,x)=>{S=Q,R=x});this.b={run:u,promise:F,promiseResolve:S,promiseReject:R}}return this.b.promise}hasNext(){return!!this.b}async join(){return this.b?.promise??this.a?.promise}}e.TaskSequentializer=H;class G{constructor(u,S=()=>Date.now()){this.d=u,this.f=S,this.a=0,this.b=0}increment(){const u=this.f();return u-this.a>this.d&&(this.a=u,this.b=0),this.b++,this.b}}e.IntervalCounter=G;class A{get isRejected(){return this.d}get isResolved(){return this.f}get isSettled(){return this.d||this.f}constructor(){this.d=!1,this.f=!1,this.p=new Promise((u,S)=>{this.a=u,this.b=S})}complete(u){return new Promise(S=>{this.a(u),this.f=!0,S()})}error(u){return new Promise(S=>{this.b(u),this.d=!0,S()})}cancel(){new Promise(u=>{this.b(new W.CancellationError),this.d=!0,u()})}}e.DeferredPromise=A;var j;(function(q){async function u(R){let F;const Q=await Promise.all(R.map(x=>x.then(ee=>ee,ee=>{F||(F=ee)})));if(typeof F<"u")throw F;return Q}q.settled=u;function S(R){return new Promise(async(F,Q)=>{try{await R(F,Q)}catch(x){Q(x)}})}q.withAsyncBody=S})(j=e.Promises||(e.Promises={}));var B;(function(q){q[q.Initial=0]="Initial",q[q.DoneOK=1]="DoneOK",q[q.DoneError=2]="DoneError"})(B||(B={}));class z{static fromArray(u){return new z(S=>{S.emitMany(u)})}static fromPromise(u){return new z(async S=>{S.emitMany(await u)})}static fromPromises(u){return new z(async S=>{await Promise.all(u.map(async R=>S.emitOne(await R)))})}static merge(u){return new z(async S=>{await Promise.all(u.map(async R=>{for await(const F of R)S.emitOne(F)}))})}constructor(u){this.a=0,this.b=[],this.d=null,this.f=new $.Emitter,queueMicrotask(async()=>{const S={emitOne:R=>this.g(R),emitMany:R=>this.h(R),reject:R=>this.k(R)};try{await Promise.resolve(u(S)),this.j()}catch(R){this.k(R)}finally{S.emitOne=void 0,S.emitMany=void 0,S.reject=void 0}})}[Symbol.asyncIterator](){let u=0;return{next:async()=>{do{if(this.a===2)throw this.d;if(u<this.b.length)return{done:!1,value:this.b[u++]};if(this.a===1)return{done:!0,value:void 0};await $.Event.toPromise(this.f.event)}while(!0)}}}static map(u,S){return new z(async R=>{for await(const F of u)R.emitOne(S(F))})}map(u){return z.map(this,u)}static filter(u,S){return new z(async R=>{for await(const F of u)S(F)&&R.emitOne(F)})}filter(u){return z.filter(this,u)}static coalesce(u){return z.filter(u,S=>!!S)}coalesce(){return z.coalesce(this)}static async toPromise(u){const S=[];for await(const R of u)S.push(R);return S}toPromise(){return z.toPromise(this)}g(u){this.a===0&&(this.b.push(u),this.f.fire())}h(u){this.a===0&&(this.b=this.b.concat(u),this.f.fire())}j(){this.a===0&&(this.a=1,this.f.fire())}k(u){this.a===0&&(this.a=2,this.d=u,this.f.fire())}}e.AsyncIterableObject=z,z.EMPTY=z.fromArray([]);class X extends z{constructor(u,S){super(S),this.l=u}cancel(){this.l.cancel()}}e.CancelableAsyncIterableObject=X;function Z(q){const u=new U.CancellationTokenSource,S=q(u.token);return new X(u,async R=>{const F=u.token.onCancellationRequested(()=>{F.dispose(),u.dispose(),R.reject(new W.CancellationError)});try{for await(const Q of S){if(u.token.isCancellationRequested)return;R.emitOne(Q)}F.dispose(),u.dispose()}catch(Q){F.dispose(),u.dispose(),R.reject(Q)}})}e.createCancelableAsyncIterable=Z}),define(ne[21],ie([0,1,32,19,7,12,4,2,3]),function(te,e,U,W,$,y,M,K,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.patternsEquals=e.getPathTerms=e.getBasenameTerms=e.isRelativePattern=e.parse=e.match=e.splitGlobAware=e.GLOB_SPLIT=e.GLOBSTAR=e.getEmptyExpression=void 0;function w(){return Object.create(null)}e.getEmptyExpression=w,e.GLOBSTAR="**",e.GLOB_SPLIT="/";const I="[/\\\\]",k="[^/\\\\]",m=/\//g;function v(A,j){switch(A){case 0:return"";case 1:return`${k}*?`;default:return`(?:${I}|${k}+${I}${j?`|${I}${k}+`:""})*?`}}function d(A,j){if(!A)return[];const B=[];let z=!1,X=!1,Z="";for(const q of A){switch(q){case j:if(!z&&!X){B.push(Z),Z="";continue}break;case"{":z=!0;break;case"}":z=!1;break;case"[":X=!0;break;case"]":X=!1;break}Z+=q}return Z&&B.push(Z),B}e.splitGlobAware=d;function r(A){if(!A)return"";let j="";const B=d(A,e.GLOB_SPLIT);if(B.every(z=>z===e.GLOBSTAR))j=".*";else{let z=!1;B.forEach((X,Z)=>{if(X===e.GLOBSTAR){if(z)return;j+=v(2,Z===B.length-1)}else{let q=!1,u="",S=!1,R="";for(const F of X){if(F!=="}"&&q){u+=F;continue}if(S&&(F!=="]"||!R)){let Q;F==="-"?Q=F:(F==="^"||F==="!")&&!R?Q="^":F===e.GLOB_SPLIT?Q="":Q=(0,P.escapeRegExpCharacters)(F),R+=Q;continue}switch(F){case"{":q=!0;continue;case"[":S=!0;continue;case"}":{j+=`(?:${d(u,",").map(ee=>r(ee)).join("|")})`,q=!1,u="";break}case"]":{j+="["+R+"]",S=!1,R="";break}case"?":j+=k;continue;case"*":j+=v(1);continue;default:j+=(0,P.escapeRegExpCharacters)(F)}}Z<B.length-1&&(B[Z+1]!==e.GLOBSTAR||Z+2<B.length)&&(j+=I)}z=X===e.GLOBSTAR})}return j}const s=/^\*\*\/\*\.[\w\.-]+$/,o=/^\*\*\/([\w\.-]+)\/?$/,t=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,a=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,n=/^\*\*((\/[\w\.-]+)+)\/?$/,l=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,c=new y.LRUCache(1e4),p=function(){return!1},C=function(){return null};function T(A,j){if(!A)return C;let B;typeof A!="string"?B=A.pattern:B=A,B=B.trim();const z=`${B}_${!!j.trimForExclusions}`;let X=c.get(z);if(X)return g(X,A);let Z;return s.test(B)?X=E(B.substr(4),B):(Z=o.exec(L(B,j)))?X=f(Z[1],B):(j.trimForExclusions?a:t).test(B)?X=N(B,j):(Z=n.exec(L(B,j)))?X=V(Z[1].substr(1),B,!0):(Z=l.exec(L(B,j)))?X=V(Z[1],B,!1):X=Y(B),c.set(z,X),g(X,A)}function g(A,j){if(typeof j=="string")return A;const B=function(z,X){return(0,$.isEqualOrParent)(z,j.base,!K.isLinux)?A((0,P.ltrim)(z.substr(j.base.length),M.sep),X):null};return B.allBasenames=A.allBasenames,B.allPaths=A.allPaths,B.basenames=A.basenames,B.patterns=A.patterns,B}function L(A,j){return j.trimForExclusions&&A.endsWith("/**")?A.substr(0,A.length-2):A}function E(A,j){return function(B,z){return typeof B=="string"&&B.endsWith(A)?j:null}}function f(A,j){const B=`/${A}`,z=`\\${A}`,X=function(q,u){return typeof q!="string"?null:u?u===A?j:null:q===A||q.endsWith(B)||q.endsWith(z)?j:null},Z=[A];return X.basenames=Z,X.patterns=[j],X.allBasenames=Z,X}function N(A,j){const B=H(A.slice(1,-1).split(",").map(u=>T(u,j)).filter(u=>u!==C),A),z=B.length;if(!z)return C;if(z===1)return B[0];const X=function(u,S){for(let R=0,F=B.length;R<F;R++)if(B[R](u,S))return A;return null},Z=B.find(u=>!!u.allBasenames);Z&&(X.allBasenames=Z.allBasenames);const q=B.reduce((u,S)=>S.allPaths?u.concat(S.allPaths):u,[]);return q.length&&(X.allPaths=q),X}function V(A,j,B){const z=M.sep===M.posix.sep,X=z?A:A.replace(m,M.sep),Z=M.sep+X,q=M.posix.sep+A;let u;return B?u=function(S,R){return typeof S=="string"&&(S===X||S.endsWith(Z)||!z&&(S===A||S.endsWith(q)))?j:null}:u=function(S,R){return typeof S=="string"&&(S===X||!z&&S===A)?j:null},u.allPaths=[(B?"*/":"./")+A],u}function Y(A){try{const j=new RegExp(`^${r(A)}$`);return function(B){return j.lastIndex=0,typeof B=="string"&&j.test(B)?A:null}}catch{return C}}function J(A,j,B){return!A||typeof j!="string"?!1:_(A)(j,void 0,B)}e.match=J;function _(A,j={}){if(!A)return p;if(typeof A=="string"||D(A)){const B=T(A,j);if(B===C)return p;const z=function(X,Z){return!!B(X,Z)};return B.allBasenames&&(z.allBasenames=B.allBasenames),B.allPaths&&(z.allPaths=B.allPaths),z}return O(A,j)}e.parse=_;function D(A){const j=A;return j?typeof j.base=="string"&&typeof j.pattern=="string":!1}e.isRelativePattern=D;function i(A){return A.allBasenames||[]}e.getBasenameTerms=i;function b(A){return A.allPaths||[]}e.getPathTerms=b;function O(A,j){const B=H(Object.getOwnPropertyNames(A).map(u=>h(u,A[u],j)).filter(u=>u!==C)),z=B.length;if(!z)return C;if(!B.some(u=>!!u.requiresSiblings)){if(z===1)return B[0];const u=function(F,Q){let x;for(let ee=0,re=B.length;ee<re;ee++){const se=B[ee](F,Q);if(typeof se=="string")return se;(0,W.isThenable)(se)&&(x||(x=[]),x.push(se))}return x?(async()=>{for(const ee of x){const re=await ee;if(typeof re=="string")return re}return null})():null},S=B.find(F=>!!F.allBasenames);S&&(u.allBasenames=S.allBasenames);const R=B.reduce((F,Q)=>Q.allPaths?F.concat(Q.allPaths):F,[]);return R.length&&(u.allPaths=R),u}const X=function(u,S,R){let F,Q;for(let x=0,ee=B.length;x<ee;x++){const re=B[x];re.requiresSiblings&&R&&(S||(S=(0,M.basename)(u)),F||(F=S.substr(0,S.length-(0,M.extname)(u).length)));const se=re(u,S,F,R);if(typeof se=="string")return se;(0,W.isThenable)(se)&&(Q||(Q=[]),Q.push(se))}return Q?(async()=>{for(const x of Q){const ee=await x;if(typeof ee=="string")return ee}return null})():null},Z=B.find(u=>!!u.allBasenames);Z&&(X.allBasenames=Z.allBasenames);const q=B.reduce((u,S)=>S.allPaths?u.concat(S.allPaths):u,[]);return q.length&&(X.allPaths=q),X}function h(A,j,B){if(j===!1)return C;const z=T(A,B);if(z===C)return C;if(typeof j=="boolean")return z;if(j){const X=j.when;if(typeof X=="string"){const Z=(q,u,S,R)=>{if(!R||!z(q,u))return null;const F=X.replace("$(basename)",S),Q=R(F);return(0,W.isThenable)(Q)?Q.then(x=>x?A:null):Q?A:null};return Z.requiresSiblings=!0,Z}}return z}function H(A,j){const B=A.filter(u=>!!u.basenames);if(B.length<2)return A;const z=B.reduce((u,S)=>{const R=S.basenames;return R?u.concat(R):u},[]);let X;if(j){X=[];for(let u=0,S=z.length;u<S;u++)X.push(j)}else X=B.reduce((u,S)=>{const R=S.patterns;return R?u.concat(R):u},[]);const Z=function(u,S){if(typeof u!="string")return null;if(!S){let F;for(F=u.length;F>0;F--){const Q=u.charCodeAt(F-1);if(Q===47||Q===92)break}S=u.substr(F)}const R=z.indexOf(S);return R!==-1?X[R]:null};Z.basenames=z,Z.patterns=X,Z.allBasenames=z;const q=A.filter(u=>!u.basenames);return q.push(Z),q}function G(A,j){return(0,U.equals)(A,j,(B,z)=>typeof B=="string"&&typeof z=="string"?B===z:typeof B!="string"&&typeof z!="string"?B.base===z.base&&B.pattern===z.pattern:!1)}e.patternsEquals=G}),define(ne[22],ie([0,1,3,2,5]),function(te,e,U,W,$){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StringBuilder=e.decodeUTF16LE=e.getPlatformTextDecoder=void 0;let y;function M(){return y||(y=new TextDecoder("UTF-16LE")),y}let K;function P(){return K||(K=new TextDecoder("UTF-16BE")),K}let w;function I(){return w||(w=W.isLittleEndian()?M():P()),w}e.getPlatformTextDecoder=I;function k(d,r,s){const o=new Uint16Array(d.buffer,r,s);return s>0&&(o[0]===65279||o[0]===65534)?m(d,r,s):M().decode(o)}e.decodeUTF16LE=k;function m(d,r,s){const o=[];let t=0;for(let a=0;a<s;a++){const n=$.readUInt16LE(d,r);r+=2,o[t++]=String.fromCharCode(n)}return o.join("")}class v{constructor(r){this.a=r|0,this.b=new Uint16Array(this.a),this.c=null,this.d=0}reset(){this.c=null,this.d=0}build(){return this.c!==null?(this.f(),this.c.join("")):this.e()}e(){if(this.d===0)return"";const r=new Uint16Array(this.b.buffer,0,this.d);return I().decode(r)}f(){const r=this.e();this.d=0,this.c===null?this.c=[r]:this.c[this.c.length]=r}appendCharCode(r){const s=this.a-this.d;s<=1&&(s===0||U.isHighSurrogate(r))&&this.f(),this.b[this.d++]=r}appendASCIICharCode(r){this.d===this.a&&this.f(),this.b[this.d++]=r}appendString(r){const s=r.length;if(this.d+s>=this.a){this.f(),this.c[this.c.length]=r;return}for(let o=0;o<s;o++)this.b[this.d++]=r.charCodeAt(o)}}e.StringBuilder=v}),define(ne[23],ie([0,1,5,22]),function(te,e,U,W){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.compressConsecutiveTextChanges=e.TextChange=void 0;function $(P){return P.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}class y{get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}constructor(w,I,k,m){this.oldPosition=w,this.oldText=I,this.newPosition=k,this.newText=m}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${$(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${$(this.oldText)}")`:`(replace@${this.oldPosition} "${$(this.oldText)}" with "${$(this.newText)}")`}static a(w){return 4+2*w.length}static c(w,I,k){const m=I.length;U.writeUInt32BE(w,m,k),k+=4;for(let v=0;v<m;v++)U.writeUInt16LE(w,I.charCodeAt(v),k),k+=2;return k}static d(w,I){const k=U.readUInt32BE(w,I);return I+=4,(0,W.decodeUTF16LE)(w,I,k)}writeSize(){return 4+4+y.a(this.oldText)+y.a(this.newText)}write(w,I){return U.writeUInt32BE(w,this.oldPosition,I),I+=4,U.writeUInt32BE(w,this.newPosition,I),I+=4,I=y.c(w,this.oldText,I),I=y.c(w,this.newText,I),I}static read(w,I,k){const m=U.readUInt32BE(w,I);I+=4;const v=U.readUInt32BE(w,I);I+=4;const d=y.d(w,I);I+=y.a(d);const r=y.d(w,I);return I+=y.a(r),k.push(new y(m,d,v,r)),I}}e.TextChange=y;function M(P,w){return P===null||P.length===0?w:new K(P,w).compress()}e.compressConsecutiveTextChanges=M;class K{constructor(w,I){this.a=w,this.c=I,this.d=[],this.e=0,this.f=this.a.length,this.g=0,this.h=this.c.length,this.j=0}compress(){let w=0,I=0,k=this.n(w),m=this.l(I);for(;w<this.f||I<this.h;){if(k===null){this.k(m),m=this.l(++I);continue}if(m===null){this.m(k),k=this.n(++w);continue}if(m.oldEnd<=k.newPosition){this.k(m),m=this.l(++I);continue}if(k.newEnd<=m.oldPosition){this.m(k),k=this.n(++w);continue}if(m.oldPosition<k.newPosition){const[o,t]=K.r(m,k.newPosition-m.oldPosition);this.k(o),m=t;continue}if(k.newPosition<m.oldPosition){const[o,t]=K.q(k,m.oldPosition-k.newPosition);this.m(o),k=t;continue}let r,s;if(m.oldEnd===k.newEnd)r=k,s=m,k=this.n(++w),m=this.l(++I);else if(m.oldEnd<k.newEnd){const[o,t]=K.q(k,m.oldLength);r=o,s=m,k=t,m=this.l(++I)}else{const[o,t]=K.r(m,k.newLength);r=k,s=o,k=this.n(++w),m=t}this.d[this.e++]=new y(r.oldPosition,r.oldText,s.newPosition,s.newText),this.g+=r.newLength-r.oldLength,this.j+=s.newLength-s.oldLength}const v=K.s(this.d);return K.t(v)}k(w){this.d[this.e++]=K.o(this.g,w),this.j+=w.newLength-w.oldLength}l(w){return w<this.h?this.c[w]:null}m(w){this.d[this.e++]=K.p(this.j,w),this.g+=w.newLength-w.oldLength}n(w){return w<this.f?this.a[w]:null}static o(w,I){return new y(I.oldPosition-w,I.oldText,I.newPosition,I.newText)}static p(w,I){return new y(I.oldPosition,I.oldText,I.newPosition+w,I.newText)}static q(w,I){const k=w.newText.substr(0,I),m=w.newText.substr(I);return[new y(w.oldPosition,w.oldText,w.newPosition,k),new y(w.oldEnd,"",w.newPosition+I,m)]}static r(w,I){const k=w.oldText.substr(0,I),m=w.oldText.substr(I);return[new y(w.oldPosition,k,w.newPosition,w.newText),new y(w.oldPosition+I,m,w.newEnd,"")]}static s(w){if(w.length===0)return w;const I=[];let k=0,m=w[0];for(let v=1;v<w.length;v++){const d=w[v];m.oldEnd===d.oldPosition?m=new y(m.oldPosition,m.oldText+d.oldText,m.newPosition,m.newText+d.newText):(I[k++]=m,m=d)}return I[k++]=m,I}static t(w){if(w.length===0)return w;const I=[];let k=0;for(let m=0;m<w.length;m++){const v=w[m];v.oldText!==v.newText&&(I[k++]=v)}return I}}}),define(ne[10],ie([0,1,33,11,24,16,34]),function(te,e,U,W,$,y,M){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PieceTreeBase=e.StringBuffer=e.Piece=e.createLineStarts=e.createLineStartsFast=void 0;const K=65535;function P(o){let t;return o[o.length-1]<65536?t=new Uint16Array(o.length):t=new Uint32Array(o.length),t.set(o,0),t}class w{constructor(t,a,n,l,c){this.lineStarts=t,this.cr=a,this.lf=n,this.crlf=l,this.isBasicASCII=c}}function I(o,t=!0){const a=[0];let n=1;for(let l=0,c=o.length;l<c;l++){const p=o.charCodeAt(l);p===13?l+1<c&&o.charCodeAt(l+1)===10?(a[n++]=l+2,l++):a[n++]=l+1:p===10&&(a[n++]=l+1)}return t?P(a):a}e.createLineStartsFast=I;function k(o,t){o.length=0,o[0]=0;let a=1,n=0,l=0,c=0,p=!0;for(let T=0,g=t.length;T<g;T++){const L=t.charCodeAt(T);L===13?T+1<g&&t.charCodeAt(T+1)===10?(c++,o[a++]=T+2,T++):(n++,o[a++]=T+1):L===10?(l++,o[a++]=T+1):p&&L!==9&&(L<32||L>126)&&(p=!1)}const C=new w(P(o),n,l,c,p);return o.length=0,C}e.createLineStarts=k;class m{constructor(t,a,n,l,c){this.bufferIndex=t,this.start=a,this.end=n,this.lineFeedCnt=l,this.length=c}}e.Piece=m;class v{constructor(t,a){this.buffer=t,this.lineStarts=a}}e.StringBuffer=v;class d{constructor(t,a){this.a=[],this.c=t,this.d=a,this.b=0,t.root!==y.SENTINEL&&t.iterate(t.root,n=>(n!==y.SENTINEL&&this.a.push(n.piece),!0))}read(){return this.a.length===0?this.b===0?(this.b++,this.d):null:this.b>this.a.length-1?null:this.b===0?this.d+this.c.getPieceContent(this.a[this.b++]):this.c.getPieceContent(this.a[this.b++])}}class r{constructor(t){this.a=t,this.b=[]}get(t){for(let a=this.b.length-1;a>=0;a--){const n=this.b[a];if(n.nodeStartOffset<=t&&n.nodeStartOffset+n.node.piece.length>=t)return n}return null}get2(t){for(let a=this.b.length-1;a>=0;a--){const n=this.b[a];if(n.nodeStartLineNumber&&n.nodeStartLineNumber<t&&n.nodeStartLineNumber+n.node.piece.lineFeedCnt>=t)return n}return null}set(t){this.b.length>=this.a&&this.b.shift(),this.b.push(t)}validate(t){let a=!1;const n=this.b;for(let l=0;l<n.length;l++){const c=n[l];if(c.node.parent===null||c.nodeStartOffset>=t){n[l]=null,a=!0;continue}}if(a){const l=[];for(const c of n)c!==null&&l.push(c);this.b=l}}}class s{constructor(t,a,n){this.create(t,a,n)}create(t,a,n){this.a=[new v("",[0])],this.g={line:0,column:0},this.root=y.SENTINEL,this.b=1,this.c=0,this.d=a,this.e=a.length,this.f=n;let l=null;for(let c=0,p=t.length;c<p;c++)if(t[c].buffer.length>0){t[c].lineStarts||(t[c].lineStarts=I(t[c].buffer));const C=new m(c+1,{line:0,column:0},{line:t[c].lineStarts.length-1,column:t[c].buffer.length-t[c].lineStarts[t[c].lineStarts.length-1]},t[c].lineStarts.length-1,t[c].buffer.length);this.a.push(t[c]),l=this.S(l,C)}this.h=new r(1),this.j={lineNumber:0,value:""},this.y()}normalizeEOL(t){const a=K,n=a-Math.floor(a/3),l=n*2;let c="",p=0;const C=[];if(this.iterate(this.root,T=>{const g=this.R(T),L=g.length;if(p<=n||p+L<l)return c+=g,p+=L,!0;const E=c.replace(/\r\n|\r|\n/g,t);return C.push(new v(E,I(E))),c=g,p=L,!0}),p>0){const T=c.replace(/\r\n|\r|\n/g,t);C.push(new v(T,I(T)))}this.create(C,t,!0)}getEOL(){return this.d}setEOL(t){this.d=t,this.e=this.d.length,this.normalizeEOL(t)}createSnapshot(t){return new d(this,t)}equal(t){if(this.getLength()!==t.getLength()||this.getLineCount()!==t.getLineCount())return!1;const a=0;return this.iterate(this.root,l=>{if(l===y.SENTINEL)return!0;const c=this.R(l),p=c.length,C=t.G(a),T=t.G(a+p),g=t.getValueInRange2(C,T);return c===g})}getOffsetAt(t,a){let n=0,l=this.root;for(;l!==y.SENTINEL;)if(l.left!==y.SENTINEL&&l.lf_left+1>=t)l=l.left;else{if(l.lf_left+l.piece.lineFeedCnt+1>=t)return n+=l.size_left,n+=this.B(l,t-l.lf_left-2)+a-1;t-=l.lf_left+l.piece.lineFeedCnt,n+=l.size_left+l.piece.length,l=l.right}return n}getPositionAt(t){t=Math.floor(t),t=Math.max(0,t);let a=this.root,n=0;const l=t;for(;a!==y.SENTINEL;)if(a.size_left!==0&&a.size_left>=t)a=a.left;else if(a.size_left+a.piece.length>=t){const c=this.A(a,t-a.size_left);if(n+=a.lf_left+c.index,c.index===0){const p=this.getOffsetAt(n+1,1),C=l-p;return new U.Position(n+1,C+1)}return new U.Position(n+1,c.remainder+1)}else if(t-=a.size_left+a.piece.length,n+=a.lf_left+a.piece.lineFeedCnt,a.right===y.SENTINEL){const c=this.getOffsetAt(n+1,1),p=l-t-c;return new U.Position(n+1,p+1)}else a=a.right;return new U.Position(1,1)}getValueInRange(t,a){if(t.startLineNumber===t.endLineNumber&&t.startColumn===t.endColumn)return"";const n=this.H(t.startLineNumber,t.startColumn),l=this.H(t.endLineNumber,t.endColumn),c=this.getValueInRange2(n,l);return a?a!==this.d||!this.f?c.replace(/\r\n|\r|\n/g,a):a===this.getEOL()&&this.f?c:c.replace(/\r\n|\r|\n/g,a):c}getValueInRange2(t,a){if(t.node===a.node){const C=t.node,T=this.a[C.piece.bufferIndex].buffer,g=this.u(C.piece.bufferIndex,C.piece.start);return T.substring(g+t.remainder,g+a.remainder)}let n=t.node;const l=this.a[n.piece.bufferIndex].buffer,c=this.u(n.piece.bufferIndex,n.piece.start);let p=l.substring(c+t.remainder,c+n.piece.length);for(n=n.next();n!==y.SENTINEL;){const C=this.a[n.piece.bufferIndex].buffer,T=this.u(n.piece.bufferIndex,n.piece.start);if(n===a.node){p+=C.substring(T,T+a.remainder);break}else p+=C.substr(T,n.piece.length);n=n.next()}return p}getLinesContent(){const t=[];let a=0,n="",l=!1;return this.iterate(this.root,c=>{if(c===y.SENTINEL)return!0;const p=c.piece;let C=p.length;if(C===0)return!0;const T=this.a[p.bufferIndex].buffer,g=this.a[p.bufferIndex].lineStarts,L=p.start.line,E=p.end.line;let f=g[L]+p.start.column;if(l&&(T.charCodeAt(f)===10&&(f++,C--),t[a++]=n,n="",l=!1,C===0))return!0;if(L===E)return!this.f&&T.charCodeAt(f+C-1)===13?(l=!0,n+=T.substr(f,C-1)):n+=T.substr(f,C),!0;n+=this.f?T.substring(f,Math.max(f,g[L+1]-this.e)):T.substring(f,g[L+1]).replace(/(\r\n|\r|\n)$/,""),t[a++]=n;for(let N=L+1;N<E;N++)n=this.f?T.substring(g[N],g[N+1]-this.e):T.substring(g[N],g[N+1]).replace(/(\r\n|\r|\n)$/,""),t[a++]=n;return!this.f&&T.charCodeAt(g[E]+p.end.column-1)===13?(l=!0,p.end.column===0?a--:n=T.substr(g[E],p.end.column-1)):n=T.substr(g[E],p.end.column),!0}),l&&(t[a++]=n,n=""),t[a++]=n,t}getLength(){return this.c}getLineCount(){return this.b}getLineContent(t){return this.j.lineNumber===t?this.j.value:(this.j.lineNumber=t,t===this.b?this.j.value=this.getLineRawContent(t):this.f?this.j.value=this.getLineRawContent(t,this.e):this.j.value=this.getLineRawContent(t).replace(/(\r\n|\r|\n)$/,""),this.j.value)}l(t){if(t.remainder===t.node.piece.length){const a=t.node.next();if(!a)return 0;const n=this.a[a.piece.bufferIndex],l=this.u(a.piece.bufferIndex,a.piece.start);return n.buffer.charCodeAt(l)}else{const a=this.a[t.node.piece.bufferIndex],l=this.u(t.node.piece.bufferIndex,t.node.piece.start)+t.remainder;return a.buffer.charCodeAt(l)}}getLineCharCode(t,a){const n=this.H(t,a+1);return this.l(n)}getLineLength(t){if(t===this.getLineCount()){const a=this.getOffsetAt(t,1);return this.getLength()-a}return this.getOffsetAt(t+1,1)-this.getOffsetAt(t,1)-this.e}getCharCode(t){const a=this.G(t);return this.l(a)}findMatchesInNode(t,a,n,l,c,p,C,T,g,L,E){const f=this.a[t.piece.bufferIndex],N=this.u(t.piece.bufferIndex,t.piece.start),V=this.u(t.piece.bufferIndex,c),Y=this.u(t.piece.bufferIndex,p);let J;const _={line:0,column:0};let D,i;a._wordSeparators?(D=f.buffer.substring(V,Y),i=b=>b+V,a.reset(0)):(D=f.buffer,i=b=>b,a.reset(V));do if(J=a.next(D),J){if(i(J.index)>=Y)return L;this.s(t,i(J.index)-N,_);const b=this.t(t.piece.bufferIndex,c,_),O=_.line===c.line?_.column-c.column+l:_.column+1,h=O+J[0].length;if(E[L++]=(0,M.createFindMatch)(new W.Range(n+b,O,n+b,h),J,T),i(J.index)+J[0].length>=Y||L>=g)return L}while(J);return L}findMatchesLineByLine(t,a,n,l){const c=[];let p=0;const C=new M.Searcher(a.wordSeparators,a.regex);let T=this.H(t.startLineNumber,t.startColumn);if(T===null)return[];const g=this.H(t.endLineNumber,t.endColumn);if(g===null)return[];let L=this.s(T.node,T.remainder);const E=this.s(g.node,g.remainder);if(T.node===g.node)return this.findMatchesInNode(T.node,C,t.startLineNumber,t.startColumn,L,E,a,n,l,p,c),c;let f=t.startLineNumber,N=T.node;for(;N!==g.node;){const Y=this.t(N.piece.bufferIndex,L,N.piece.end);if(Y>=1){const _=this.a[N.piece.bufferIndex].lineStarts,D=this.u(N.piece.bufferIndex,N.piece.start),i=_[L.line+Y],b=f===t.startLineNumber?t.startColumn:1;if(p=this.findMatchesInNode(N,C,f,b,L,this.s(N,i-D),a,n,l,p,c),p>=l)return c;f+=Y}const J=f===t.startLineNumber?t.startColumn-1:0;if(f===t.endLineNumber){const _=this.getLineContent(f).substring(J,t.endColumn-1);return p=this.n(a,C,_,t.endLineNumber,J,p,c,n,l),c}if(p=this.n(a,C,this.getLineContent(f).substr(J),f,J,p,c,n,l),p>=l)return c;f++,T=this.H(f,1),N=T.node,L=this.s(T.node,T.remainder)}if(f===t.endLineNumber){const Y=f===t.startLineNumber?t.startColumn-1:0,J=this.getLineContent(f).substring(Y,t.endColumn-1);return p=this.n(a,C,J,t.endLineNumber,Y,p,c,n,l),c}const V=f===t.startLineNumber?t.startColumn:1;return p=this.findMatchesInNode(g.node,C,f,V,L,E,a,n,l,p,c),c}n(t,a,n,l,c,p,C,T,g){const L=t.wordSeparators;if(!T&&t.simpleSearch){const f=t.simpleSearch,N=f.length,V=n.length;let Y=-N;for(;(Y=n.indexOf(f,Y+N))!==-1;)if((!L||(0,M.isValidMatch)(L,n,V,Y,N))&&(C[p++]=new $.FindMatch(new W.Range(l,Y+1+c,l,Y+1+N+c),null),p>=g))return p;return p}let E;a.reset(0);do if(E=a.next(n),E&&(C[p++]=(0,M.createFindMatch)(new W.Range(l,E.index+1+c,l,E.index+1+E[0].length+c),E,T),p>=g))return p;while(E);return p}insert(t,a,n=!1){if(this.f=this.f&&n,this.j.lineNumber=0,this.j.value="",this.root!==y.SENTINEL){const{node:l,remainder:c,nodeStartOffset:p}=this.G(t),C=l.piece,T=C.bufferIndex,g=this.s(l,c);if(l.piece.bufferIndex===0&&C.end.line===this.g.line&&C.end.column===this.g.column&&p+C.length===t&&a.length<K){this.F(l,a),this.y();return}if(p===t)this.o(a,l),this.h.validate(t);else if(p+l.piece.length>t){const L=[];let E=new m(C.bufferIndex,g,C.end,this.t(C.bufferIndex,g,C.end),this.u(T,C.end)-this.u(T,g));if(this.K()&&this.M(a)&&this.I(l,c)===10){const Y={line:E.start.line+1,column:0};E=new m(E.bufferIndex,Y,E.end,this.t(E.bufferIndex,Y,E.end),E.length-1),a+=`
`}if(this.K()&&this.L(a))if(this.I(l,c-1)===13){const Y=this.s(l,c-1);this.C(l,Y),a="\r"+a,l.piece.length===0&&L.push(l)}else this.C(l,g);else this.C(l,g);const f=this.w(a);E.length>0&&this.S(l,E);let N=l;for(let V=0;V<f.length;V++)N=this.S(N,f[V]);this.v(L)}else this.q(a,l)}else{const l=this.w(a);let c=this.T(null,l[0]);for(let p=1;p<l.length;p++)c=this.S(c,l[p])}this.y()}delete(t,a){if(this.j.lineNumber=0,this.j.value="",a<=0||this.root===y.SENTINEL)return;const n=this.G(t),l=this.G(t+a),c=n.node,p=l.node;if(c===p){const f=this.s(c,n.remainder),N=this.s(c,l.remainder);if(n.nodeStartOffset===t){if(a===c.piece.length){const V=c.next();(0,y.rbDelete)(this,c),this.N(V),this.y();return}this.D(c,N),this.h.validate(t),this.N(c),this.y();return}if(n.nodeStartOffset+c.piece.length===t+a){this.C(c,f),this.O(c),this.y();return}this.E(c,f,N),this.y();return}const C=[],T=this.s(c,n.remainder);this.C(c,T),this.h.validate(t),c.piece.length===0&&C.push(c);const g=this.s(p,l.remainder);this.D(p,g),p.piece.length===0&&C.push(p);const L=c.next();for(let f=L;f!==y.SENTINEL&&f!==p;f=f.next())C.push(f);const E=c.piece.length===0?c.prev():c;this.v(C),this.O(E),this.y()}o(t,a){const n=[];if(this.K()&&this.M(t)&&this.L(a)){const p=a.piece,C={line:p.start.line+1,column:0},T=new m(p.bufferIndex,C,p.end,this.t(p.bufferIndex,C,p.end),p.length-1);a.piece=T,t+=`
`,(0,y.updateTreeMetadata)(this,a,-1,-1),a.piece.length===0&&n.push(a)}const l=this.w(t);let c=this.T(a,l[l.length-1]);for(let p=l.length-2;p>=0;p--)c=this.T(c,l[p]);this.N(c),this.v(n)}q(t,a){this.Q(t,a)&&(t+=`
`);const n=this.w(t),l=this.S(a,n[0]);let c=l;for(let p=1;p<n.length;p++)c=this.S(c,n[p]);this.N(l)}s(t,a,n){const l=t.piece,c=t.piece.bufferIndex,p=this.a[c].lineStarts,T=p[l.start.line]+l.start.column+a;let g=l.start.line,L=l.end.line,E=0,f=0,N=0;for(;g<=L&&(E=g+(L-g)/2|0,N=p[E],E!==L);)if(f=p[E+1],T<N)L=E-1;else if(T>=f)g=E+1;else break;return n?(n.line=E,n.column=T-N,null):{line:E,column:T-N}}t(t,a,n){if(n.column===0)return n.line-a.line;const l=this.a[t].lineStarts;if(n.line===l.length-1)return n.line-a.line;const c=l[n.line+1],p=l[n.line]+n.column;if(c>p+1)return n.line-a.line;const C=p-1;return this.a[t].buffer.charCodeAt(C)===13?n.line-a.line+1:n.line-a.line}u(t,a){return this.a[t].lineStarts[a.line]+a.column}v(t){for(let a=0;a<t.length;a++)(0,y.rbDelete)(this,t[a])}w(t){if(t.length>K){const L=[];for(;t.length>K;){const f=t.charCodeAt(K-1);let N;f===13||f>=55296&&f<=56319?(N=t.substring(0,K-1),t=t.substring(K-1)):(N=t.substring(0,K),t=t.substring(K));const V=I(N);L.push(new m(this.a.length,{line:0,column:0},{line:V.length-1,column:N.length-V[V.length-1]},V.length-1,N.length)),this.a.push(new v(N,V))}const E=I(t);return L.push(new m(this.a.length,{line:0,column:0},{line:E.length-1,column:t.length-E[E.length-1]},E.length-1,t.length)),this.a.push(new v(t,E)),L}let a=this.a[0].buffer.length;const n=I(t,!1);let l=this.g;if(this.a[0].lineStarts[this.a[0].lineStarts.length-1]===a&&a!==0&&this.L(t)&&this.M(this.a[0].buffer)){this.g={line:this.g.line,column:this.g.column+1},l=this.g;for(let L=0;L<n.length;L++)n[L]+=a+1;this.a[0].lineStarts=this.a[0].lineStarts.concat(n.slice(1)),this.a[0].buffer+="_"+t,a+=1}else{if(a!==0)for(let L=0;L<n.length;L++)n[L]+=a;this.a[0].lineStarts=this.a[0].lineStarts.concat(n.slice(1)),this.a[0].buffer+=t}const c=this.a[0].buffer.length,p=this.a[0].lineStarts.length-1,C=c-this.a[0].lineStarts[p],T={line:p,column:C},g=new m(0,l,T,this.t(0,l,T),c-a);return this.g=T,[g]}getLinesRawContent(){return this.U(this.root)}getLineRawContent(t,a=0){let n=this.root,l="";const c=this.h.get2(t);if(c){n=c.node;const p=this.B(n,t-c.nodeStartLineNumber-1),C=this.a[n.piece.bufferIndex].buffer,T=this.u(n.piece.bufferIndex,n.piece.start);if(c.nodeStartLineNumber+n.piece.lineFeedCnt===t)l=C.substring(T+p,T+n.piece.length);else{const g=this.B(n,t-c.nodeStartLineNumber);return C.substring(T+p,T+g-a)}}else{let p=0;const C=t;for(;n!==y.SENTINEL;)if(n.left!==y.SENTINEL&&n.lf_left>=t-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>t-1){const T=this.B(n,t-n.lf_left-2),g=this.B(n,t-n.lf_left-1),L=this.a[n.piece.bufferIndex].buffer,E=this.u(n.piece.bufferIndex,n.piece.start);return p+=n.size_left,this.h.set({node:n,nodeStartOffset:p,nodeStartLineNumber:C-(t-1-n.lf_left)}),L.substring(E+T,E+g-a)}else if(n.lf_left+n.piece.lineFeedCnt===t-1){const T=this.B(n,t-n.lf_left-2),g=this.a[n.piece.bufferIndex].buffer,L=this.u(n.piece.bufferIndex,n.piece.start);l=g.substring(L+T,L+n.piece.length);break}else t-=n.lf_left+n.piece.lineFeedCnt,p+=n.size_left+n.piece.length,n=n.right}for(n=n.next();n!==y.SENTINEL;){const p=this.a[n.piece.bufferIndex].buffer;if(n.piece.lineFeedCnt>0){const C=this.B(n,0),T=this.u(n.piece.bufferIndex,n.piece.start);return l+=p.substring(T,T+C-a),l}else{const C=this.u(n.piece.bufferIndex,n.piece.start);l+=p.substr(C,n.piece.length)}n=n.next()}return l}y(){let t=this.root,a=1,n=0;for(;t!==y.SENTINEL;)a+=t.lf_left+t.piece.lineFeedCnt,n+=t.size_left+t.piece.length,t=t.right;this.b=a,this.c=n,this.h.validate(this.c)}A(t,a){const n=t.piece,l=this.s(t,a),c=l.line-n.start.line;if(this.u(n.bufferIndex,n.end)-this.u(n.bufferIndex,n.start)===a){const p=this.t(t.piece.bufferIndex,n.start,l);if(p!==c)return{index:p,remainder:0}}return{index:c,remainder:l.column}}B(t,a){if(a<0)return 0;const n=t.piece,l=this.a[n.bufferIndex].lineStarts,c=n.start.line+a+1;return c>n.end.line?l[n.end.line]+n.end.column-l[n.start.line]-n.start.column:l[c]-l[n.start.line]-n.start.column}C(t,a){const n=t.piece,l=n.lineFeedCnt,c=this.u(n.bufferIndex,n.end),p=a,C=this.u(n.bufferIndex,p),T=this.t(n.bufferIndex,n.start,p),g=T-l,L=C-c,E=n.length+L;t.piece=new m(n.bufferIndex,n.start,p,T,E),(0,y.updateTreeMetadata)(this,t,L,g)}D(t,a){const n=t.piece,l=n.lineFeedCnt,c=this.u(n.bufferIndex,n.start),p=a,C=this.t(n.bufferIndex,p,n.end),T=this.u(n.bufferIndex,p),g=C-l,L=c-T,E=n.length+L;t.piece=new m(n.bufferIndex,p,n.end,C,E),(0,y.updateTreeMetadata)(this,t,L,g)}E(t,a,n){const l=t.piece,c=l.start,p=l.end,C=l.length,T=l.lineFeedCnt,g=a,L=this.t(l.bufferIndex,l.start,g),E=this.u(l.bufferIndex,a)-this.u(l.bufferIndex,c);t.piece=new m(l.bufferIndex,l.start,g,L,E),(0,y.updateTreeMetadata)(this,t,E-C,L-T);const f=new m(l.bufferIndex,n,p,this.t(l.bufferIndex,n,p),this.u(l.bufferIndex,p)-this.u(l.bufferIndex,n)),N=this.S(t,f);this.N(N)}F(t,a){this.Q(a,t)&&(a+=`
`);const n=this.K()&&this.L(a)&&this.M(t),l=this.a[0].buffer.length;this.a[0].buffer+=a;const c=I(a,!1);for(let N=0;N<c.length;N++)c[N]+=l;if(n){const N=this.a[0].lineStarts[this.a[0].lineStarts.length-2];this.a[0].lineStarts.pop(),this.g={line:this.g.line-1,column:l-N}}this.a[0].lineStarts=this.a[0].lineStarts.concat(c.slice(1));const p=this.a[0].lineStarts.length-1,C=this.a[0].buffer.length-this.a[0].lineStarts[p],T={line:p,column:C},g=t.piece.length+a.length,L=t.piece.lineFeedCnt,E=this.t(0,t.piece.start,T),f=E-L;t.piece=new m(t.piece.bufferIndex,t.piece.start,T,E,g),this.g=T,(0,y.updateTreeMetadata)(this,t,a.length,f)}G(t){let a=this.root;const n=this.h.get(t);if(n)return{node:n.node,nodeStartOffset:n.nodeStartOffset,remainder:t-n.nodeStartOffset};let l=0;for(;a!==y.SENTINEL;)if(a.size_left>t)a=a.left;else if(a.size_left+a.piece.length>=t){l+=a.size_left;const c={node:a,remainder:t-a.size_left,nodeStartOffset:l};return this.h.set(c),c}else t-=a.size_left+a.piece.length,l+=a.size_left+a.piece.length,a=a.right;return null}H(t,a){let n=this.root,l=0;for(;n!==y.SENTINEL;)if(n.left!==y.SENTINEL&&n.lf_left>=t-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>t-1){const c=this.B(n,t-n.lf_left-2),p=this.B(n,t-n.lf_left-1);return l+=n.size_left,{node:n,remainder:Math.min(c+a-1,p),nodeStartOffset:l}}else if(n.lf_left+n.piece.lineFeedCnt===t-1){const c=this.B(n,t-n.lf_left-2);if(c+a-1<=n.piece.length)return{node:n,remainder:c+a-1,nodeStartOffset:l};a-=n.piece.length-c;break}else t-=n.lf_left+n.piece.lineFeedCnt,l+=n.size_left+n.piece.length,n=n.right;for(n=n.next();n!==y.SENTINEL;){if(n.piece.lineFeedCnt>0){const c=this.B(n,0),p=this.J(n);return{node:n,remainder:Math.min(a-1,c),nodeStartOffset:p}}else if(n.piece.length>=a-1){const c=this.J(n);return{node:n,remainder:a-1,nodeStartOffset:c}}else a-=n.piece.length;n=n.next()}return null}I(t,a){if(t.piece.lineFeedCnt<1)return-1;const n=this.a[t.piece.bufferIndex],l=this.u(t.piece.bufferIndex,t.piece.start)+a;return n.buffer.charCodeAt(l)}J(t){if(!t)return 0;let a=t.size_left;for(;t!==this.root;)t.parent.right===t&&(a+=t.parent.size_left+t.parent.piece.length),t=t.parent;return a}K(){return!(this.f&&this.d===`
`)}L(t){if(typeof t=="string")return t.charCodeAt(0)===10;if(t===y.SENTINEL||t.piece.lineFeedCnt===0)return!1;const a=t.piece,n=this.a[a.bufferIndex].lineStarts,l=a.start.line,c=n[l]+a.start.column;return l===n.length-1||n[l+1]>c+1?!1:this.a[a.bufferIndex].buffer.charCodeAt(c)===10}M(t){return typeof t=="string"?t.charCodeAt(t.length-1)===13:t===y.SENTINEL||t.piece.lineFeedCnt===0?!1:this.I(t,t.piece.length-1)===13}N(t){if(this.K()&&this.L(t)){const a=t.prev();this.M(a)&&this.P(a,t)}}O(t){if(this.K()&&this.M(t)){const a=t.next();this.L(a)&&this.P(t,a)}}P(t,a){const n=[],l=this.a[t.piece.bufferIndex].lineStarts;let c;t.piece.end.column===0?c={line:t.piece.end.line-1,column:l[t.piece.end.line]-l[t.piece.end.line-1]-1}:c={line:t.piece.end.line,column:t.piece.end.column-1};const p=t.piece.length-1,C=t.piece.lineFeedCnt-1;t.piece=new m(t.piece.bufferIndex,t.piece.start,c,C,p),(0,y.updateTreeMetadata)(this,t,-1,-1),t.piece.length===0&&n.push(t);const T={line:a.piece.start.line+1,column:0},g=a.piece.length-1,L=this.t(a.piece.bufferIndex,T,a.piece.end);a.piece=new m(a.piece.bufferIndex,T,a.piece.end,L,g),(0,y.updateTreeMetadata)(this,a,-1,-1),a.piece.length===0&&n.push(a);const E=this.w(`\r
`);this.S(t,E[0]);for(let f=0;f<n.length;f++)(0,y.rbDelete)(this,n[f])}Q(t,a){if(this.K()&&this.M(t)){const n=a.next();if(this.L(n)){if(t+=`
`,n.piece.length===1)(0,y.rbDelete)(this,n);else{const l=n.piece,c={line:l.start.line+1,column:0},p=l.length-1,C=this.t(l.bufferIndex,c,l.end);n.piece=new m(l.bufferIndex,c,l.end,C,p),(0,y.updateTreeMetadata)(this,n,-1,-1)}return!0}}return!1}iterate(t,a){if(t===y.SENTINEL)return a(y.SENTINEL);const n=this.iterate(t.left,a);return n&&a(t)&&this.iterate(t.right,a)}R(t){if(t===y.SENTINEL)return"";const a=this.a[t.piece.bufferIndex],n=t.piece,l=this.u(n.bufferIndex,n.start),c=this.u(n.bufferIndex,n.end);return a.buffer.substring(l,c)}getPieceContent(t){const a=this.a[t.bufferIndex],n=this.u(t.bufferIndex,t.start),l=this.u(t.bufferIndex,t.end);return a.buffer.substring(n,l)}S(t,a){const n=new y.TreeNode(a,1);if(n.left=y.SENTINEL,n.right=y.SENTINEL,n.parent=y.SENTINEL,n.size_left=0,n.lf_left=0,this.root===y.SENTINEL)this.root=n,n.color=0;else if(t.right===y.SENTINEL)t.right=n,n.parent=t;else{const c=(0,y.leftest)(t.right);c.left=n,n.parent=c}return(0,y.fixInsert)(this,n),n}T(t,a){const n=new y.TreeNode(a,1);if(n.left=y.SENTINEL,n.right=y.SENTINEL,n.parent=y.SENTINEL,n.size_left=0,n.lf_left=0,this.root===y.SENTINEL)this.root=n,n.color=0;else if(t.left===y.SENTINEL)t.left=n,n.parent=t;else{const l=(0,y.righttest)(t.left);l.right=n,n.parent=l}return(0,y.fixInsert)(this,n),n}U(t){let a="";return this.iterate(t,n=>(a+=this.R(n),!0)),a}}e.PieceTreeBase=s}),define(ne[25],ie([0,1,20,3,11,24,10,15,23,6]),function(te,e,U,W,$,y,M,K,P,w){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PieceTreeTextBuffer=void 0;class I extends w.Disposable{constructor(m,v,d,r,s,o,t){super(),this.k=this.B(new U.Emitter),this.onDidChangeContent=this.k.event,this.f=v,this.j=!o,this.g=r,this.h=s,this.c=new M.PieceTreeBase(m,d,t)}equals(m){return!(m instanceof I)||this.f!==m.f||this.getEOL()!==m.getEOL()?!1:this.c.equal(m.c)}mightContainRTL(){return this.g}mightContainUnusualLineTerminators(){return this.h}resetMightContainUnusualLineTerminators(){this.h=!1}mightContainNonBasicASCII(){return this.j}getBOM(){return this.f}getEOL(){return this.c.getEOL()}createSnapshot(m){return this.c.createSnapshot(m?this.f:"")}getOffsetAt(m,v){return this.c.getOffsetAt(m,v)}getPositionAt(m){return this.c.getPositionAt(m)}getRangeAt(m,v){const d=m+v,r=this.getPositionAt(m),s=this.getPositionAt(d);return new $.Range(r.lineNumber,r.column,s.lineNumber,s.column)}getValueInRange(m,v=0){if(m.isEmpty())return"";const d=this.l(v);return this.c.getValueInRange(m,d)}getValueLengthInRange(m,v=0){if(m.isEmpty())return 0;if(m.startLineNumber===m.endLineNumber)return m.endColumn-m.startColumn;const d=this.getOffsetAt(m.startLineNumber,m.startColumn),r=this.getOffsetAt(m.endLineNumber,m.endColumn);let s=0;const o=this.l(v),t=this.getEOL();if(o.length!==t.length){const a=o.length-t.length,n=m.endLineNumber-m.startLineNumber;s=a*n}return r-d+s}getCharacterCountInRange(m,v=0){if(this.j){let d=0;const r=m.startLineNumber,s=m.endLineNumber;for(let o=r;o<=s;o++){const t=this.getLineContent(o),a=o===r?m.startColumn-1:0,n=o===s?m.endColumn-1:t.length;for(let l=a;l<n;l++)W.isHighSurrogate(t.charCodeAt(l))?(d=d+1,l=l+1):d=d+1}return d+=this.l(v).length*(s-r),d}return this.getValueLengthInRange(m,v)}getLength(){return this.c.getLength()}getLineCount(){return this.c.getLineCount()}getLinesContent(){return this.c.getLinesContent()}getLineContent(m){return this.c.getLineContent(m)}getLineCharCode(m,v){return this.c.getLineCharCode(m,v)}getCharCode(m){return this.c.getCharCode(m)}getLineLength(m){return this.c.getLineLength(m)}getLineMinColumn(m){return 1}getLineMaxColumn(m){return this.getLineLength(m)+1}getLineFirstNonWhitespaceColumn(m){const v=W.firstNonWhitespaceIndex(this.getLineContent(m));return v===-1?0:v+1}getLineLastNonWhitespaceColumn(m){const v=W.lastNonWhitespaceIndex(this.getLineContent(m));return v===-1?0:v+2}l(m){switch(m){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(m){this.c.setEOL(m)}applyEdits(m,v,d){let r=this.g,s=this.h,o=this.j,t=!0,a=[];for(let g=0;g<m.length;g++){const L=m[g];t&&L._isTracked&&(t=!1);const E=L.range;if(L.text){let J=!0;o||(J=!W.isBasicASCII(L.text),o=J),!r&&J&&(r=W.containsRTL(L.text)),!s&&J&&(s=W.containsUnusualLineTerminators(L.text))}let f="",N=0,V=0,Y=0;if(L.text){let J;[N,V,Y,J]=(0,K.countEOL)(L.text);const _=this.getEOL();J===0||J===(_===`\r
`?2:1)?f=L.text:f=L.text.replace(/\r\n|\r|\n/g,_)}a[g]={sortIndex:g,identifier:L.identifier||null,range:E,rangeOffset:this.getOffsetAt(E.startLineNumber,E.startColumn),rangeLength:this.getValueLengthInRange(E),text:f,eolCount:N,firstLineLength:V,lastLineLength:Y,forceMoveMarkers:Boolean(L.forceMoveMarkers),isAutoWhitespaceEdit:L.isAutoWhitespaceEdit||!1}}a.sort(I.p);let n=!1;for(let g=0,L=a.length-1;g<L;g++){const E=a[g].range.getEndPosition(),f=a[g+1].range.getStartPosition();if(f.isBeforeOrEqual(E)){if(f.isBefore(E))throw new Error("Overlapping ranges are not allowed!");n=!0}}t&&(a=this.m(a));const l=d||v?I._getInverseEditRanges(a):[],c=[];if(v)for(let g=0;g<a.length;g++){const L=a[g],E=l[g];if(L.isAutoWhitespaceEdit&&L.range.isEmpty())for(let f=E.startLineNumber;f<=E.endLineNumber;f++){let N="";f===E.startLineNumber&&(N=this.getLineContent(L.range.startLineNumber),W.firstNonWhitespaceIndex(N)!==-1)||c.push({lineNumber:f,oldContent:N})}}let p=null;if(d){let g=0;p=[];for(let L=0;L<a.length;L++){const E=a[L],f=l[L],N=this.getValueInRange(E.range),V=E.rangeOffset+g;g+=E.text.length-N.length,p[L]={sortIndex:E.sortIndex,identifier:E.identifier,range:f,text:N,textChange:new P.TextChange(E.rangeOffset,N,V,E.text)}}n||p.sort((L,E)=>L.sortIndex-E.sortIndex)}this.g=r,this.h=s,this.j=o;const C=this.n(a);let T=null;if(v&&c.length>0){c.sort((g,L)=>L.lineNumber-g.lineNumber),T=[];for(let g=0,L=c.length;g<L;g++){const E=c[g].lineNumber;if(g>0&&c[g-1].lineNumber===E)continue;const f=c[g].oldContent,N=this.getLineContent(E);N.length===0||N===f||W.firstNonWhitespaceIndex(N)!==-1||T.push(E)}}return this.k.fire(),new y.ApplyEditsResult(p,C,T)}m(m){return m.length<1e3?m:[this._toSingleEditOperation(m)]}_toSingleEditOperation(m){let v=!1;const d=m[0].range,r=m[m.length-1].range,s=new $.Range(d.startLineNumber,d.startColumn,r.endLineNumber,r.endColumn);let o=d.startLineNumber,t=d.startColumn;const a=[];for(let C=0,T=m.length;C<T;C++){const g=m[C],L=g.range;v=v||g.forceMoveMarkers,a.push(this.getValueInRange(new $.Range(o,t,L.startLineNumber,L.startColumn))),g.text.length>0&&a.push(g.text),o=L.endLineNumber,t=L.endColumn}const n=a.join(""),[l,c,p]=(0,K.countEOL)(n);return{sortIndex:0,identifier:m[0].identifier,range:s,rangeOffset:this.getOffsetAt(s.startLineNumber,s.startColumn),rangeLength:this.getValueLengthInRange(s,0),text:n,eolCount:l,firstLineLength:c,lastLineLength:p,forceMoveMarkers:v,isAutoWhitespaceEdit:!1}}n(m){m.sort(I.s);const v=[];for(let d=0;d<m.length;d++){const r=m[d],s=r.range.startLineNumber,o=r.range.startColumn,t=r.range.endLineNumber,a=r.range.endColumn;if(s===t&&o===a&&r.text.length===0)continue;r.text?(this.c.delete(r.rangeOffset,r.rangeLength),this.c.insert(r.rangeOffset,r.text,!0)):this.c.delete(r.rangeOffset,r.rangeLength);const n=new $.Range(s,o,t,a);v.push({range:n,rangeLength:r.rangeLength,text:r.text,rangeOffset:r.rangeOffset,forceMoveMarkers:r.forceMoveMarkers})}return v}findMatchesLineByLine(m,v,d,r){return this.c.findMatchesLineByLine(m,v,d,r)}getPieceTree(){return this.c}static _getInverseEditRange(m,v){const d=m.startLineNumber,r=m.startColumn,[s,o,t]=(0,K.countEOL)(v);let a;if(v.length>0){const n=s+1;n===1?a=new $.Range(d,r,d,r+o):a=new $.Range(d,r,d+n-1,t+1)}else a=new $.Range(d,r,d,r);return a}static _getInverseEditRanges(m){const v=[];let d=0,r=0,s=null;for(let o=0,t=m.length;o<t;o++){const a=m[o];let n,l;s?s.range.endLineNumber===a.range.startLineNumber?(n=d,l=r+(a.range.startColumn-s.range.endColumn)):(n=d+(a.range.startLineNumber-s.range.endLineNumber),l=a.range.startColumn):(n=a.range.startLineNumber,l=a.range.startColumn);let c;if(a.text.length>0){const p=a.eolCount+1;p===1?c=new $.Range(n,l,n,l+a.firstLineLength):c=new $.Range(n,l,n+p-1,a.lastLineLength+1)}else c=new $.Range(n,l,n,l);d=c.endLineNumber,r=c.endColumn,v.push(c),s=a}return v}static p(m,v){const d=$.Range.compareRangesUsingEnds(m.range,v.range);return d===0?m.sortIndex-v.sortIndex:d}static s(m,v){const d=$.Range.compareRangesUsingEnds(m.range,v.range);return d===0?v.sortIndex-m.sortIndex:-d}}e.PieceTreeTextBuffer=I}),define(ne[26],ie([0,1,3,10,25]),function(te,e,U,W,$){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PieceTreeTextBufferBuilder=void 0;class y{constructor(P,w,I,k,m,v,d,r,s){this.a=P,this.b=w,this.c=I,this.d=k,this.e=m,this.f=v,this.g=d,this.h=r,this.j=s}k(P){const w=this.c+this.d+this.e,I=this.c+this.e;return w===0?P===1?`
`:`\r
`:I>w/2?`\r
`:`
`}create(P){const w=this.k(P),I=this.a;if(this.j&&(w===`\r
`&&(this.c>0||this.d>0)||w===`
`&&(this.c>0||this.e>0)))for(let m=0,v=I.length;m<v;m++){const d=I[m].buffer.replace(/\r\n|\r|\n/g,w),r=(0,W.createLineStartsFast)(d);I[m]=new W.StringBuffer(d,r)}const k=new $.PieceTreeTextBuffer(I,this.b,w,this.f,this.g,this.h,this.j);return{textBuffer:k,disposable:k}}getFirstLineText(P){return this.a[0].buffer.substr(0,P).split(/\r\n|\r|\n/)[0]}}class M{constructor(){this.a=[],this.b="",this.c=!1,this.d=0,this.e=[],this.f=0,this.g=0,this.h=0,this.j=!1,this.k=!1,this.l=!0}acceptChunk(P){if(P.length===0)return;this.a.length===0&&U.startsWithUTF8BOM(P)&&(this.b=U.UTF8_BOM_CHARACTER,P=P.substr(1));const w=P.charCodeAt(P.length-1);w===13||w>=55296&&w<=56319?(this.m(P.substr(0,P.length-1),!1),this.c=!0,this.d=w):(this.m(P,!1),this.c=!1,this.d=w)}m(P,w){!w&&P.length===0||(this.c?this.n(String.fromCharCode(this.d)+P):this.n(P))}n(P){const w=(0,W.createLineStarts)(this.e,P);this.a.push(new W.StringBuffer(P,w.lineStarts)),this.f+=w.cr,this.g+=w.lf,this.h+=w.crlf,this.l&&(this.l=w.isBasicASCII),!this.l&&!this.j&&(this.j=U.containsRTL(P)),!this.l&&!this.k&&(this.k=U.containsUnusualLineTerminators(P))}finish(P=!0){return this.o(),new y(this.a,this.b,this.f,this.g,this.h,this.j,this.k,this.l,P)}o(){if(this.a.length===0&&this.m("",!0),this.c){this.c=!1;const P=this.a[this.a.length-1];P.buffer+=String.fromCharCode(this.d);const w=(0,W.createLineStartsFast)(P.buffer);P.lineStarts=w,this.d===13&&this.f++}}}e.PieceTreeTextBufferBuilder=M}),define(ne[27],ie([0,1]),function(te,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.refineServiceDecorator=e.createDecorator=e.IInstantiationService=e._util=void 0;var U;(function(M){M.serviceIds=new Map,M.DI_TARGET="$di$target",M.DI_DEPENDENCIES="$di$dependencies";function K(P){return P[M.DI_DEPENDENCIES]||[]}M.getServiceDependencies=K})(U=e._util||(e._util={})),e.IInstantiationService=$("instantiationService");function W(M,K,P){K[U.DI_TARGET]===K?K[U.DI_DEPENDENCIES].push({id:M,index:P}):(K[U.DI_DEPENDENCIES]=[{id:M,index:P}],K[U.DI_TARGET]=K)}function $(M){if(U.serviceIds.has(M))return U.serviceIds.get(M);const K=function(P,w,I){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");W(K,P,I)};return K.toString=()=>M,U.serviceIds.set(M,K),K}e.createDecorator=$;function y(M){return M}e.refineServiceDecorator=y}),define(ne[28],ie([0,1,2,3,27]),function(te,e,U,W,$){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.implies=e.SET_CONTEXT_COMMAND_ID=e.IContextKeyService=e.RawContextKey=e.ContextKeyNotRegexExpr=e.ContextKeyRegexExpr=e.ContextKeySmallerEqualsExpr=e.ContextKeySmallerExpr=e.ContextKeyGreaterEqualsExpr=e.ContextKeyGreaterExpr=e.ContextKeyNotExpr=e.ContextKeyNotEqualsExpr=e.ContextKeyNotInExpr=e.ContextKeyInExpr=e.ContextKeyEqualsExpr=e.ContextKeyDefinedExpr=e.ContextKeyTrueExpr=e.ContextKeyFalseExpr=e.expressionsAreEqualWithConstantSubstitution=e.ContextKeyExpr=e.ContextKeyExprType=void 0;const y=new Map;y.set("false",!1),y.set("true",!0),y.set("isMac",U.isMacintosh),y.set("isLinux",U.isLinux),y.set("isWindows",U.isWindows),y.set("isWeb",U.isWeb),y.set("isMacNative",U.isMacintosh&&!U.isWeb),y.set("isEdge",U.isEdge),y.set("isFirefox",U.isFirefox),y.set("isChrome",U.isChrome),y.set("isSafari",U.isSafari);const M=Object.prototype.hasOwnProperty;var K;(function(D){D[D.False=0]="False",D[D.True=1]="True",D[D.Defined=2]="Defined",D[D.Not=3]="Not",D[D.Equals=4]="Equals",D[D.NotEquals=5]="NotEquals",D[D.And=6]="And",D[D.Regex=7]="Regex",D[D.NotRegex=8]="NotRegex",D[D.Or=9]="Or",D[D.In=10]="In",D[D.NotIn=11]="NotIn",D[D.Greater=12]="Greater",D[D.GreaterEquals=13]="GreaterEquals",D[D.Smaller=14]="Smaller",D[D.SmallerEquals=15]="SmallerEquals"})(K=e.ContextKeyExprType||(e.ContextKeyExprType={}));class P{static false(){return k.INSTANCE}static true(){return m.INSTANCE}static has(i){return v.create(i)}static equals(i,b){return d.create(i,b)}static notEquals(i,b){return o.create(i,b)}static regex(i,b){return C.create(i,b)}static in(i,b){return r.create(i,b)}static notIn(i,b){return s.create(i,b)}static not(i){return t.create(i)}static and(...i){return L.create(i,null,!0)}static or(...i){return E.create(i,null,!0)}static greater(i,b){return n.create(i,b)}static greaterEquals(i,b){return l.create(i,b)}static smaller(i,b){return c.create(i,b)}static smallerEquals(i,b){return p.create(i,b)}static deserialize(i,b=!1){if(!!i)return this.c(i,b)}static c(i,b){const O=i.split("||");return E.create(O.map(h=>this.d(h,b)),null,!0)}static d(i,b){const O=i.split("&&");return L.create(O.map(h=>this.f(h,b)),null,!0)}static f(i,b){if(i=i.trim(),i.indexOf("!=")>=0){const O=i.split("!=");return o.create(O[0].trim(),this.g(O[1],b))}if(i.indexOf("==")>=0){const O=i.split("==");return d.create(O[0].trim(),this.g(O[1],b))}if(i.indexOf("=~")>=0){const O=i.split("=~");return C.create(O[0].trim(),this.h(O[1],b))}if(i.indexOf(" not in ")>=0){const O=i.split(" not in ");return s.create(O[0].trim(),this.g(O[1],b))}if(i.indexOf(" in ")>=0){const O=i.split(" in ");return r.create(O[0].trim(),this.g(O[1],b))}if(/^[^<=>]+>=[^<=>]+$/.test(i)){const O=i.split(">=");return l.create(O[0].trim(),O[1].trim())}if(/^[^<=>]+>[^<=>]+$/.test(i)){const O=i.split(">");return n.create(O[0].trim(),O[1].trim())}if(/^[^<=>]+<=[^<=>]+$/.test(i)){const O=i.split("<=");return p.create(O[0].trim(),O[1].trim())}if(/^[^<=>]+<[^<=>]+$/.test(i)){const O=i.split("<");return c.create(O[0].trim(),O[1].trim())}return/^\!\s*/.test(i)?t.create(i.substr(1).trim()):v.create(i)}static g(i,b){if(i=i.trim(),i==="true")return!0;if(i==="false")return!1;const O=/^'([^']*)'$/.exec(i);return O?O[1].trim():i}static h(i,b){if((0,W.isFalsyOrWhitespace)(i)){if(b)throw new Error("missing regexp-value for =~-expression");return console.warn("missing regexp-value for =~-expression"),null}const O=i.indexOf("/"),h=i.lastIndexOf("/");if(O===h||O<0){if(b)throw new Error(`bad regexp-value '${i}', missing /-enclosure`);return console.warn(`bad regexp-value '${i}', missing /-enclosure`),null}const H=i.slice(O+1,h),G=i[h+1]==="i"?"i":"";try{return new RegExp(H,G)}catch(A){if(b)throw new Error(`bad regexp-value '${i}', parse error: ${A}`);return console.warn(`bad regexp-value '${i}', parse error: ${A}`),null}}}e.ContextKeyExpr=P;function w(D,i){const b=D?D.substituteConstants():void 0,O=i?i.substituteConstants():void 0;return!b&&!O?!0:!b||!O?!1:b.equals(O)}e.expressionsAreEqualWithConstantSubstitution=w;function I(D,i){return D.cmp(i)}class k{constructor(){this.type=0}cmp(i){return this.type-i.type}equals(i){return i.type===this.type}substituteConstants(){return this}evaluate(i){return!1}serialize(){return"false"}keys(){return[]}map(i){return this}negate(){return m.INSTANCE}}e.ContextKeyFalseExpr=k,k.INSTANCE=new k;class m{constructor(){this.type=1}cmp(i){return this.type-i.type}equals(i){return i.type===this.type}substituteConstants(){return this}evaluate(i){return!0}serialize(){return"true"}keys(){return[]}map(i){return this}negate(){return k.INSTANCE}}e.ContextKeyTrueExpr=m,m.INSTANCE=new m;class v{static create(i,b=null){const O=y.get(i);return typeof O=="boolean"?O?m.INSTANCE:k.INSTANCE:new v(i,b)}constructor(i,b){this.key=i,this.c=b,this.type=2}cmp(i){return i.type!==this.type?this.type-i.type:N(this.key,i.key)}equals(i){return i.type===this.type?this.key===i.key:!1}substituteConstants(){const i=y.get(this.key);return typeof i=="boolean"?i?m.INSTANCE:k.INSTANCE:this}evaluate(i){return!!i.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}map(i){return i.mapDefined(this.key)}negate(){return this.c||(this.c=t.create(this.key,this)),this.c}}e.ContextKeyDefinedExpr=v;class d{static create(i,b,O=null){if(typeof b=="boolean")return b?v.create(i,O):t.create(i,O);const h=y.get(i);return typeof h=="boolean"?b===(h?"true":"false")?m.INSTANCE:k.INSTANCE:new d(i,b,O)}constructor(i,b,O){this.c=i,this.d=b,this.f=O,this.type=4}cmp(i){return i.type!==this.type?this.type-i.type:V(this.c,this.d,i.c,i.d)}equals(i){return i.type===this.type?this.c===i.c&&this.d===i.d:!1}substituteConstants(){const i=y.get(this.c);if(typeof i=="boolean"){const b=i?"true":"false";return this.d===b?m.INSTANCE:k.INSTANCE}return this}evaluate(i){return i.getValue(this.c)==this.d}serialize(){return`${this.c} == '${this.d}'`}keys(){return[this.c]}map(i){return i.mapEquals(this.c,this.d)}negate(){return this.f||(this.f=o.create(this.c,this.d,this)),this.f}}e.ContextKeyEqualsExpr=d;class r{static create(i,b){return new r(i,b)}constructor(i,b){this.d=i,this.f=b,this.type=10,this.c=null}cmp(i){return i.type!==this.type?this.type-i.type:V(this.d,this.f,i.d,i.f)}equals(i){return i.type===this.type?this.d===i.d&&this.f===i.f:!1}substituteConstants(){return this}evaluate(i){const b=i.getValue(this.f),O=i.getValue(this.d);return Array.isArray(b)?b.includes(O):typeof O=="string"&&typeof b=="object"&&b!==null?M.call(b,O):!1}serialize(){return`${this.d} in '${this.f}'`}keys(){return[this.d,this.f]}map(i){return i.mapIn(this.d,this.f)}negate(){return this.c||(this.c=s.create(this.d,this.f)),this.c}}e.ContextKeyInExpr=r;class s{static create(i,b){return new s(i,b)}constructor(i,b){this.d=i,this.f=b,this.type=11,this.c=r.create(i,b)}cmp(i){return i.type!==this.type?this.type-i.type:this.c.cmp(i.c)}equals(i){return i.type===this.type?this.c.equals(i.c):!1}substituteConstants(){return this}evaluate(i){return!this.c.evaluate(i)}serialize(){return`${this.d} not in '${this.f}'`}keys(){return this.c.keys()}map(i){return i.mapNotIn(this.d,this.f)}negate(){return this.c}}e.ContextKeyNotInExpr=s;class o{static create(i,b,O=null){if(typeof b=="boolean")return b?t.create(i,O):v.create(i,O);const h=y.get(i);return typeof h=="boolean"?b===(h?"true":"false")?k.INSTANCE:m.INSTANCE:new o(i,b,O)}constructor(i,b,O){this.c=i,this.d=b,this.f=O,this.type=5}cmp(i){return i.type!==this.type?this.type-i.type:V(this.c,this.d,i.c,i.d)}equals(i){return i.type===this.type?this.c===i.c&&this.d===i.d:!1}substituteConstants(){const i=y.get(this.c);if(typeof i=="boolean"){const b=i?"true":"false";return this.d===b?k.INSTANCE:m.INSTANCE}return this}evaluate(i){return i.getValue(this.c)!=this.d}serialize(){return`${this.c} != '${this.d}'`}keys(){return[this.c]}map(i){return i.mapNotEquals(this.c,this.d)}negate(){return this.f||(this.f=d.create(this.c,this.d,this)),this.f}}e.ContextKeyNotEqualsExpr=o;class t{static create(i,b=null){const O=y.get(i);return typeof O=="boolean"?O?k.INSTANCE:m.INSTANCE:new t(i,b)}constructor(i,b){this.c=i,this.d=b,this.type=3}cmp(i){return i.type!==this.type?this.type-i.type:N(this.c,i.c)}equals(i){return i.type===this.type?this.c===i.c:!1}substituteConstants(){const i=y.get(this.c);return typeof i=="boolean"?i?k.INSTANCE:m.INSTANCE:this}evaluate(i){return!i.getValue(this.c)}serialize(){return`!${this.c}`}keys(){return[this.c]}map(i){return i.mapNot(this.c)}negate(){return this.d||(this.d=v.create(this.c,this)),this.d}}e.ContextKeyNotExpr=t;function a(D,i){if(typeof D=="string"){const b=parseFloat(D);isNaN(b)||(D=b)}return typeof D=="string"||typeof D=="number"?i(D):k.INSTANCE}class n{static create(i,b,O=null){return a(b,h=>new n(i,h,O))}constructor(i,b,O){this.c=i,this.d=b,this.f=O,this.type=12}cmp(i){return i.type!==this.type?this.type-i.type:V(this.c,this.d,i.c,i.d)}equals(i){return i.type===this.type?this.c===i.c&&this.d===i.d:!1}substituteConstants(){return this}evaluate(i){return typeof this.d=="string"?!1:parseFloat(i.getValue(this.c))>this.d}serialize(){return`${this.c} > ${this.d}`}keys(){return[this.c]}map(i){return i.mapGreater(this.c,this.d)}negate(){return this.f||(this.f=p.create(this.c,this.d,this)),this.f}}e.ContextKeyGreaterExpr=n;class l{static create(i,b,O=null){return a(b,h=>new l(i,h,O))}constructor(i,b,O){this.c=i,this.d=b,this.f=O,this.type=13}cmp(i){return i.type!==this.type?this.type-i.type:V(this.c,this.d,i.c,i.d)}equals(i){return i.type===this.type?this.c===i.c&&this.d===i.d:!1}substituteConstants(){return this}evaluate(i){return typeof this.d=="string"?!1:parseFloat(i.getValue(this.c))>=this.d}serialize(){return`${this.c} >= ${this.d}`}keys(){return[this.c]}map(i){return i.mapGreaterEquals(this.c,this.d)}negate(){return this.f||(this.f=c.create(this.c,this.d,this)),this.f}}e.ContextKeyGreaterEqualsExpr=l;class c{static create(i,b,O=null){return a(b,h=>new c(i,h,O))}constructor(i,b,O){this.c=i,this.d=b,this.f=O,this.type=14}cmp(i){return i.type!==this.type?this.type-i.type:V(this.c,this.d,i.c,i.d)}equals(i){return i.type===this.type?this.c===i.c&&this.d===i.d:!1}substituteConstants(){return this}evaluate(i){return typeof this.d=="string"?!1:parseFloat(i.getValue(this.c))<this.d}serialize(){return`${this.c} < ${this.d}`}keys(){return[this.c]}map(i){return i.mapSmaller(this.c,this.d)}negate(){return this.f||(this.f=l.create(this.c,this.d,this)),this.f}}e.ContextKeySmallerExpr=c;class p{static create(i,b,O=null){return a(b,h=>new p(i,h,O))}constructor(i,b,O){this.c=i,this.d=b,this.f=O,this.type=15}cmp(i){return i.type!==this.type?this.type-i.type:V(this.c,this.d,i.c,i.d)}equals(i){return i.type===this.type?this.c===i.c&&this.d===i.d:!1}substituteConstants(){return this}evaluate(i){return typeof this.d=="string"?!1:parseFloat(i.getValue(this.c))<=this.d}serialize(){return`${this.c} <= ${this.d}`}keys(){return[this.c]}map(i){return i.mapSmallerEquals(this.c,this.d)}negate(){return this.f||(this.f=n.create(this.c,this.d,this)),this.f}}e.ContextKeySmallerEqualsExpr=p;class C{static create(i,b){return new C(i,b)}constructor(i,b){this.d=i,this.f=b,this.type=7,this.c=null}cmp(i){if(i.type!==this.type)return this.type-i.type;if(this.d<i.d)return-1;if(this.d>i.d)return 1;const b=this.f?this.f.source:"",O=i.f?i.f.source:"";return b<O?-1:b>O?1:0}equals(i){if(i.type===this.type){const b=this.f?this.f.source:"",O=i.f?i.f.source:"";return this.d===i.d&&b===O}return!1}substituteConstants(){return this}evaluate(i){const b=i.getValue(this.d);return this.f?this.f.test(b):!1}serialize(){const i=this.f?`/${this.f.source}/${this.f.ignoreCase?"i":""}`:"/invalid/";return`${this.d} =~ ${i}`}keys(){return[this.d]}map(i){return i.mapRegex(this.d,this.f)}negate(){return this.c||(this.c=T.create(this)),this.c}}e.ContextKeyRegexExpr=C;class T{static create(i){return new T(i)}constructor(i){this.c=i,this.type=8}cmp(i){return i.type!==this.type?this.type-i.type:this.c.cmp(i.c)}equals(i){return i.type===this.type?this.c.equals(i.c):!1}substituteConstants(){return this}evaluate(i){return!this.c.evaluate(i)}serialize(){throw new Error("Method not implemented.")}keys(){return this.c.keys()}map(i){return new T(this.c.map(i))}negate(){return this.c}}e.ContextKeyNotRegexExpr=T;function g(D){let i=null;for(let b=0,O=D.length;b<O;b++){const h=D[b].substituteConstants();if(D[b]!==h&&i===null){i=[];for(let H=0;H<b;H++)i[H]=D[H]}i!==null&&(i[b]=h)}return i===null?D:i}class L{static create(i,b,O){return L.d(i,b,O)}constructor(i,b){this.expr=i,this.c=b,this.type=6}cmp(i){if(i.type!==this.type)return this.type-i.type;if(this.expr.length<i.expr.length)return-1;if(this.expr.length>i.expr.length)return 1;for(let b=0,O=this.expr.length;b<O;b++){const h=I(this.expr[b],i.expr[b]);if(h!==0)return h}return 0}equals(i){if(i.type===this.type){if(this.expr.length!==i.expr.length)return!1;for(let b=0,O=this.expr.length;b<O;b++)if(!this.expr[b].equals(i.expr[b]))return!1;return!0}return!1}substituteConstants(){const i=g(this.expr);return i===this.expr?this:L.create(i,this.c,!1)}evaluate(i){for(let b=0,O=this.expr.length;b<O;b++)if(!this.expr[b].evaluate(i))return!1;return!0}static d(i,b,O){const h=[];let H=!1;for(const G of i)if(!!G){if(G.type===1){H=!0;continue}if(G.type===0)return k.INSTANCE;if(G.type===6){h.push(...G.expr);continue}h.push(G)}if(h.length===0&&H)return m.INSTANCE;if(h.length!==0){if(h.length===1)return h[0];h.sort(I);for(let G=1;G<h.length;G++)h[G-1].equals(h[G])&&(h.splice(G,1),G--);if(h.length===1)return h[0];for(;h.length>1;){const G=h[h.length-1];if(G.type!==9)break;h.pop();const A=h.pop(),j=h.length===0,B=E.create(G.expr.map(z=>L.create([z,A],null,O)),null,j);B&&(h.push(B),h.sort(I))}if(h.length===1)return h[0];if(O){for(let G=0;G<h.length;G++)for(let A=G+1;A<h.length;A++)if(h[G].negate().equals(h[A]))return k.INSTANCE;if(h.length===1)return h[0]}return new L(h,b)}}serialize(){return this.expr.map(i=>i.serialize()).join(" && ")}keys(){const i=[];for(const b of this.expr)i.push(...b.keys());return i}map(i){return new L(this.expr.map(b=>b.map(i)),null)}negate(){if(!this.c){const i=[];for(const b of this.expr)i.push(b.negate());this.c=E.create(i,this,!0)}return this.c}}class E{static create(i,b,O){return E.d(i,b,O)}constructor(i,b){this.expr=i,this.c=b,this.type=9}cmp(i){if(i.type!==this.type)return this.type-i.type;if(this.expr.length<i.expr.length)return-1;if(this.expr.length>i.expr.length)return 1;for(let b=0,O=this.expr.length;b<O;b++){const h=I(this.expr[b],i.expr[b]);if(h!==0)return h}return 0}equals(i){if(i.type===this.type){if(this.expr.length!==i.expr.length)return!1;for(let b=0,O=this.expr.length;b<O;b++)if(!this.expr[b].equals(i.expr[b]))return!1;return!0}return!1}substituteConstants(){const i=g(this.expr);return i===this.expr?this:E.create(i,this.c,!1)}evaluate(i){for(let b=0,O=this.expr.length;b<O;b++)if(this.expr[b].evaluate(i))return!0;return!1}static d(i,b,O){let h=[],H=!1;if(i){for(let G=0,A=i.length;G<A;G++){const j=i[G];if(!!j){if(j.type===0){H=!0;continue}if(j.type===1)return m.INSTANCE;if(j.type===9){h=h.concat(j.expr);continue}h.push(j)}}if(h.length===0&&H)return k.INSTANCE;h.sort(I)}if(h.length!==0){if(h.length===1)return h[0];for(let G=1;G<h.length;G++)h[G-1].equals(h[G])&&(h.splice(G,1),G--);if(h.length===1)return h[0];if(O){for(let G=0;G<h.length;G++)for(let A=G+1;A<h.length;A++)if(h[G].negate().equals(h[A]))return m.INSTANCE;if(h.length===1)return h[0]}return new E(h,b)}}serialize(){return this.expr.map(i=>i.serialize()).join(" || ")}keys(){const i=[];for(const b of this.expr)i.push(...b.keys());return i}map(i){return new E(this.expr.map(b=>b.map(i)),null)}negate(){if(!this.c){const i=[];for(const b of this.expr)i.push(b.negate());for(;i.length>1;){const b=i.shift(),O=i.shift(),h=[];for(const H of _(b))for(const G of _(O))h.push(L.create([H,G],null,!1));i.unshift(E.create(h,null,!1))}this.c=E.create(i,this,!0)}return this.c}}class f extends v{static all(){return f.d.values()}constructor(i,b,O){super(i,null),this.f=b,typeof O=="object"?f.d.push({...O,key:i}):O!==!0&&f.d.push({key:i,description:O,type:b!=null?typeof b:void 0})}bindTo(i){return i.createKey(this.key,this.f)}getValue(i){return i.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(i){return d.create(this.key,i)}notEqualsTo(i){return o.create(this.key,i)}}e.RawContextKey=f,f.d=[],e.IContextKeyService=(0,$.createDecorator)("contextKeyService"),e.SET_CONTEXT_COMMAND_ID="setContext";function N(D,i){return D<i?-1:D>i?1:0}function V(D,i,b,O){return D<b?-1:D>b?1:i<O?-1:i>O?1:0}function Y(D,i){if(D.type===0||i.type===1)return!0;if(D.type===9)return i.type===9?J(D.expr,i.expr):!1;if(i.type===9){for(const b of i.expr)if(Y(D,b))return!0;return!1}if(D.type===6){if(i.type===6)return J(i.expr,D.expr);for(const b of D.expr)if(Y(b,i))return!0;return!1}return D.equals(i)}e.implies=Y;function J(D,i){let b=0,O=0;for(;b<D.length&&O<i.length;){const h=D[b].cmp(i[O]);if(h<0)return!1;h===0&&b++,O++}return b===D.length}function _(D){return D.type===9?D.expr:[D]}}),define(ne[29],ie([0,1,5,21,35,17,8,4,2,28]),function(te,e,U,W,$,y,M,K,P,w){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.compressOutputItemStreams=e.isTextStreamMime=e.NotebookWorkingCopyTypeIdentifier=e.CellStatusbarAlignment=e.NotebookSetting=e.notebookDocumentFilterMatch=e.isDocumentExcludePattern=e.NotebookEditorPriority=e.NOTEBOOK_EDITOR_CURSOR_BOUNDARY=e.diff=e.MimeTypeDisplayOrder=e.CellUri=e.CellEditType=e.SelectionStateType=e.NotebookCellsChangeType=e.RendererMessagingSpec=e.NotebookRendererMatch=e.NotebookCellExecutionState=e.NotebookRunState=e.RENDERER_NOT_AVAILABLE=e.RENDERER_EQUIVALENT_EXTENSIONS=e.ACCESSIBLE_NOTEBOOK_DISPLAY_ORDER=e.NOTEBOOK_DISPLAY_ORDER=e.CellKind=e.INTERACTIVE_WINDOW_EDITOR_ID=e.NOTEBOOK_DIFF_EDITOR_ID=e.NOTEBOOK_EDITOR_ID=void 0,e.NOTEBOOK_EDITOR_ID="workbench.editor.notebook",e.NOTEBOOK_DIFF_EDITOR_ID="workbench.editor.notebookTextDiffEditor",e.INTERACTIVE_WINDOW_EDITOR_ID="workbench.editor.interactive";var I;(function(h){h[h.Markup=1]="Markup",h[h.Code=2]="Code"})(I=e.CellKind||(e.CellKind={})),e.NOTEBOOK_DISPLAY_ORDER=["application/json","application/javascript","text/html","image/svg+xml",y.Mimes.latex,y.Mimes.markdown,"image/png","image/jpeg",y.Mimes.text],e.ACCESSIBLE_NOTEBOOK_DISPLAY_ORDER=[y.Mimes.latex,y.Mimes.markdown,"application/json",y.Mimes.text,"text/html","image/svg+xml","image/png","image/jpeg"],e.RENDERER_EQUIVALENT_EXTENSIONS=new Map([["ms-toolsai.jupyter",new Set(["jupyter-notebook","interactive"])],["ms-toolsai.jupyter-renderers",new Set(["jupyter-notebook","interactive"])]]),e.RENDERER_NOT_AVAILABLE="_notAvailable";var k;(function(h){h[h.Running=1]="Running",h[h.Idle=2]="Idle"})(k=e.NotebookRunState||(e.NotebookRunState={}));var m;(function(h){h[h.Unconfirmed=1]="Unconfirmed",h[h.Pending=2]="Pending",h[h.Executing=3]="Executing"})(m=e.NotebookCellExecutionState||(e.NotebookCellExecutionState={}));var v;(function(h){h[h.WithHardKernelDependency=0]="WithHardKernelDependency",h[h.WithOptionalKernelDependency=1]="WithOptionalKernelDependency",h[h.Pure=2]="Pure",h[h.Never=3]="Never"})(v=e.NotebookRendererMatch||(e.NotebookRendererMatch={}));var d;(function(h){h.Always="always",h.Never="never",h.Optional="optional"})(d=e.RendererMessagingSpec||(e.RendererMessagingSpec={}));var r;(function(h){h[h.ModelChange=1]="ModelChange",h[h.Move=2]="Move",h[h.ChangeCellLanguage=5]="ChangeCellLanguage",h[h.Initialize=6]="Initialize",h[h.ChangeCellMetadata=7]="ChangeCellMetadata",h[h.Output=8]="Output",h[h.OutputItem=9]="OutputItem",h[h.ChangeCellContent=10]="ChangeCellContent",h[h.ChangeDocumentMetadata=11]="ChangeDocumentMetadata",h[h.ChangeCellInternalMetadata=12]="ChangeCellInternalMetadata",h[h.ChangeCellMime=13]="ChangeCellMime",h[h.Unknown=100]="Unknown"})(r=e.NotebookCellsChangeType||(e.NotebookCellsChangeType={}));var s;(function(h){h[h.Handle=0]="Handle",h[h.Index=1]="Index"})(s=e.SelectionStateType||(e.SelectionStateType={}));var o;(function(h){h[h.Replace=1]="Replace",h[h.Output=2]="Output",h[h.Metadata=3]="Metadata",h[h.CellLanguage=4]="CellLanguage",h[h.DocumentMetadata=5]="DocumentMetadata",h[h.Move=6]="Move",h[h.OutputItems=7]="OutputItems",h[h.PartialMetadata=8]="PartialMetadata",h[h.PartialInternalMetadata=9]="PartialInternalMetadata"})(o=e.CellEditType||(e.CellEditType={}));var t;(function(h){h.scheme=M.Schemas.vscodeNotebookCell;const H=["W","X","Y","Z","a","b","c","d","e","f"],G=new RegExp(`^[${H.join("")}]+`),A=7;function j(u,S){const R=S.toString(A),Q=`${R.length<H.length?H[R.length-1]:"z"}${R}s${(0,U.encodeBase64)(U.VSBuffer.fromString(u.scheme),!0,!0)}`;return u.with({scheme:h.scheme,fragment:Q})}h.generate=j;function B(u){if(u.scheme!==h.scheme)return;const S=u.fragment.indexOf("s");if(S<0)return;const R=parseInt(u.fragment.substring(0,S).replace(G,""),A),F=(0,U.decodeBase64)(u.fragment.substring(S+1)).toString();if(!isNaN(R))return{handle:R,notebook:u.with({scheme:F,fragment:null})}}h.parse=B;function z(u,S){return u.with({scheme:M.Schemas.vscodeNotebookCellOutput,fragment:`op${S??""},${u.scheme!==M.Schemas.file?u.scheme:""}`})}h.generateCellOutputUri=z;function X(u){if(u.scheme!==M.Schemas.vscodeNotebookCellOutput)return;const S=/^op([0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})?\,(.*)$/i.exec(u.fragment);if(!S)return;const R=S[1]&&S[1]!==""?S[1]:void 0,F=S[2];return{outputId:R,notebook:u.with({scheme:F||M.Schemas.file,fragment:null})}}h.parseCellOutputUri=X;function Z(u,S,R){return h.generate(u,S).with({scheme:R})}h.generateCellPropertyUri=Z;function q(u,S){if(u.scheme===S)return h.parse(u.with({scheme:h.scheme}))}h.parseCellPropertyUri=q})(t=e.CellUri||(e.CellUri={}));const a=h=>P.isWindows?h.replace(/\//g,"\\"):h;class n{constructor(H=[],G=e.NOTEBOOK_DISPLAY_ORDER){this.e=G,this.d=[...new Set(H)].map(A=>({pattern:A,matches:W.parse(a(A))}))}sort(H){const G=new Map($.Iterable.map(H,j=>[j,a(j)]));let A=[];for(const{matches:j}of this.d)for(const[B,z]of G)if(j(z)){A.push(B),G.delete(B);break}return G.size&&(A=A.concat([...G.keys()].sort((j,B)=>this.e.indexOf(j)-this.e.indexOf(B)))),A}prioritize(H,G){const A=this.f(H);if(A===-1){this.d.unshift({pattern:H,matches:W.parse(a(H))});return}const j=new Set(G.map(z=>this.f(z,A)));j.delete(-1);const B=Array.from(j).sort();this.d.splice(A+1,0,...B.map(z=>this.d[z]));for(let z=B.length-1;z>=0;z--)this.d.splice(B[z],1)}toArray(){return this.d.map(H=>H.pattern)}f(H,G=this.d.length){const A=a(H);for(let j=0;j<G;j++)if(this.d[j].matches(A))return j;return-1}}e.MimeTypeDisplayOrder=n;function l(h,H,G,A=(j,B)=>j===B){const j=[];function B(Z,q,u){if(q===0&&u.length===0)return;const S=j[j.length-1];S&&S.start+S.deleteCount===Z?(S.deleteCount+=q,S.toInsert.push(...u)):j.push({start:Z,deleteCount:q,toInsert:u})}let z=0,X=0;for(;;){if(z===h.length){B(z,0,H.slice(X));break}if(X===H.length){B(z,h.length-z,[]);break}const Z=h[z],q=H[X];if(A(Z,q)){z+=1,X+=1;continue}G(q)?(B(z,1,[]),z+=1):(B(z,0,[q]),X+=1)}return j}e.diff=l,e.NOTEBOOK_EDITOR_CURSOR_BOUNDARY=new w.RawContextKey("notebookEditorCursorAtBoundary","none");var c;(function(h){h.default="default",h.option="option"})(c=e.NotebookEditorPriority||(e.NotebookEditorPriority={}));function p(h){const H=h;return!!((typeof H.include=="string"||W.isRelativePattern(H.include))&&(typeof H.exclude=="string"||W.isRelativePattern(H.exclude)))}e.isDocumentExcludePattern=p;function C(h,H,G){if(Array.isArray(h.viewType)&&h.viewType.indexOf(H)>=0||h.viewType===H)return!0;if(h.filenamePattern){const A=p(h.filenamePattern)?h.filenamePattern.include:h.filenamePattern,j=p(h.filenamePattern)?h.filenamePattern.exclude:void 0;if(W.match(A,(0,K.basename)(G.fsPath).toLowerCase()))return!(j&&W.match(j,(0,K.basename)(G.fsPath).toLowerCase()))}return!1}e.notebookDocumentFilterMatch=C,e.NotebookSetting={displayOrder:"notebook.displayOrder",cellToolbarLocation:"notebook.cellToolbarLocation",cellToolbarVisibility:"notebook.cellToolbarVisibility",showCellStatusBar:"notebook.showCellStatusBar",textDiffEditorPreview:"notebook.diff.enablePreview",experimentalInsertToolbarAlignment:"notebook.experimental.insertToolbarAlignment",compactView:"notebook.compactView",focusIndicator:"notebook.cellFocusIndicator",insertToolbarLocation:"notebook.insertToolbarLocation",globalToolbar:"notebook.globalToolbar",undoRedoPerCell:"notebook.undoRedoPerCell",consolidatedOutputButton:"notebook.consolidatedOutputButton",showFoldingControls:"notebook.showFoldingControls",dragAndDropEnabled:"notebook.dragAndDropEnabled",cellEditorOptionsCustomizations:"notebook.editorOptionsCustomizations",consolidatedRunButton:"notebook.consolidatedRunButton",openGettingStarted:"notebook.experimental.openGettingStarted",textOutputLineLimit:"notebook.output.textLineLimit",globalToolbarShowLabel:"notebook.globalToolbarShowLabel",markupFontSize:"notebook.markup.fontSize",interactiveWindowCollapseCodeCells:"interactiveWindow.collapseCellInputCode",outputLineHeight:"notebook.outputLineHeight",outputFontSize:"notebook.outputFontSize",outputFontFamily:"notebook.outputFontFamily",kernelPickerType:"notebook.kernelPicker.type",outputScrolling:"notebook.experimental.outputScrolling"};var T;(function(h){h[h.Left=1]="Left",h[h.Right=2]="Right"})(T=e.CellStatusbarAlignment||(e.CellStatusbarAlignment={}));class g{static create(H){return`${g.d}${H}`}static parse(H){if(H.startsWith(g.d))return H.substring(g.d.length)}}e.NotebookWorkingCopyTypeIdentifier=g,g.d="notebook/";function L(h){return["application/vnd.code.notebook.stdout","application/vnd.code.notebook.stderr"].includes(h)}e.isTextStreamMime=L;const E=new TextDecoder;function f(h){const H=[];let G=!1;for(const A of h)(H.length===0||G)&&(H.push(A),G=!0);return J(H),O(U.VSBuffer.concat(H.map(A=>U.VSBuffer.wrap(A))))}e.compressOutputItemStreams=f;const N=`${String.fromCharCode(27)}[A`,V=N.split("").map(h=>h.charCodeAt(0)),Y=10;function J(h){h.forEach((H,G)=>{if(G===0||H.length<N.length)return;const A=h[G-1],j=H.subarray(0,N.length);if(j[0]===V[0]&&j[1]===V[1]&&j[2]===V[2]){const B=A.lastIndexOf(Y);if(B===-1)return;h[G-1]=A.subarray(0,B),h[G]=H.subarray(N.length)}})}function _(h){let H=h;do h=H,H=h.replace(/[^\n]\x08/gm,"");while(H.length<h.length);return h}function D(h){for(h=h.replace(/\r+\n/gm,`
`);h.search(/\r[^$]/g)>-1;){const H=h.match(/^(.*)\r+/m)[1];let G=h.match(/\r+(.*)$/m)[1];G=G+H.slice(G.length,H.length),h=h.replace(/\r+.*$/m,"\r").replace(/^.*\r/m,G)}return h}const i="\b".charCodeAt(0),b="\r".charCodeAt(0);function O(h){return!h.buffer.includes(i)&&!h.buffer.includes(b)?h:U.VSBuffer.fromString(D(_(E.decode(h.buffer))))}}),define(ne[36],ie([0,1,37,38,9,26,29,11]),function(te,e,U,W,$,y,M,K){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.create=e.NotebookEditorSimpleWorker=void 0;function P(d){let r=(0,W.numberHash)(104579,0);for(let s=0;s<d.buffer.length;s++)r=(0,W.doHash)(d.buffer[s],r);return r}class w{get textBuffer(){if(this.a)return this.a;const r=new y.PieceTreeTextBufferBuilder;r.acceptChunk(Array.isArray(this.d)?this.d.join(`
`):this.d);const s=r.finish(!0);return this.a=s.create(1).textBuffer,this.a}primaryKey(){return this.b===void 0&&(this.b=(0,W.hash)(this.getValue())),this.b}constructor(r,s,o,t,a,n,l){this.handle=r,this.d=s,this.language=o,this.cellKind=t,this.outputs=a,this.metadata=n,this.internalMetadata=l,this.b=null,this.c=null}getFullModelRange(){const r=this.textBuffer.getLineCount();return new K.Range(1,1,r,this.textBuffer.getLineLength(r)+1)}getValue(){const r=this.getFullModelRange();return this.textBuffer.getEOL()===`
`?this.textBuffer.getValueInRange(r,1):this.textBuffer.getValueInRange(r,2)}getComparisonValue(){return this.b!==null?this.b:(this.c=(0,W.hash)([(0,W.hash)(this.language),(0,W.hash)(this.getValue()),this.metadata,this.internalMetadata,this.outputs.map(r=>({outputs:r.outputs.map(s=>({mime:s.mime,data:P(s.data)})),metadata:r.metadata}))]),this.c)}getHashValue(){return this.c!==null?this.c:(this.c=(0,W.hash)([(0,W.hash)(this.getValue()),this.language,this.metadata,this.internalMetadata]),this.c)}}class I{constructor(r,s,o){this.uri=r,this.cells=s,this.metadata=o}acceptModelChanged(r){r.rawEvents.forEach(s=>{if(s.kind===M.NotebookCellsChangeType.ModelChange)this._spliceNotebookCells(s.changes);else if(s.kind===M.NotebookCellsChangeType.Move){const o=this.cells.splice(s.index,1);this.cells.splice(s.newIdx,0,...o)}else if(s.kind===M.NotebookCellsChangeType.Output){const o=this.cells[s.index];o.outputs=s.outputs}else if(s.kind===M.NotebookCellsChangeType.ChangeCellLanguage){const o=this.cells[s.index];o.language=s.language}else if(s.kind===M.NotebookCellsChangeType.ChangeCellMetadata){const o=this.cells[s.index];o.metadata=s.metadata}else if(s.kind===M.NotebookCellsChangeType.ChangeCellInternalMetadata){const o=this.cells[s.index];o.internalMetadata=s.internalMetadata}})}_spliceNotebookCells(r){r.reverse().forEach(s=>{const t=s[2].map(a=>new w(a.handle,a.source,a.language,a.cellKind,a.outputs,a.metadata));this.cells.splice(s[0],s[1],...t)})}}class k{constructor(r){this.textModel=r}getElements(){const r=new Int32Array(this.textModel.cells.length);for(let s=0;s<this.textModel.cells.length;s++)r[s]=this.textModel.cells[s].getComparisonValue();return r}getCellHash(r){const s=Array.isArray(r.source)?r.source.join(`
`):r.source;return(0,W.hash)([(0,W.hash)(s),r.metadata])}}class m{constructor(){this.a=Object.create(null)}dispose(){}acceptNewModel(r,s){this.a[r]=new I($.URI.parse(r),s.cells.map(o=>new w(o.handle,o.source,o.language,o.cellKind,o.outputs,o.metadata)),s.metadata)}acceptModelChanged(r,s){this.a[r]?.acceptModelChanged(s)}acceptRemovedModel(r){!this.a[r]||delete this.a[r]}computeDiff(r,s){const o=this.b(r),t=this.b(s);return{cellsDiff:new U.LcsDiff(new k(o),new k(t)).ComputeDiff(!1)}}b(r){return this.a[r]}}e.NotebookEditorSimpleWorker=m;function v(d){return new m}e.create=v})}).call(this);

//# sourceMappingURL=https://ticino.blob.core.windows.net/sourcemaps/1ad8d514439d5077d2b0b7ee64d2ce82a9308e5a/core/vs/workbench/contrib/notebook/common/services/notebookSimpleWorker.js.map
